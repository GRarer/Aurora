<!doctype html> <html lang=en dir=ltr> <head> <meta charset=utf-8> <title>Aurora</title> <style type="text/css">.main-menu{display:flex;flex-direction:column}.main-menu h1{font-size:40pt;margin:0;padding:0}.main-menu-options button{display:flex;flex-direction:column}.main-menu button{font-size:24pt;border:none;margin:0;padding:0}.main-menu button:hover{font-size:30pt}.main-menu button:active{color:grey}.credits{margin-right:auto;margin-left:5px}.credits-entry{margin-top:20px}.credits-entry h1{margin-top:0;margin-bottom:0;font-size:30pt}.credits-entry p{margin-top:0;margin-bottom:0;font-size:20pt}.credits button{margin-top:10pt;font-size:20pt}.settings{display:flex;flex-direction:column}.settings h1{font-size:24pt;margin-bottom:10pt}.settings-slider{display:flex;font-size:15pt;margin:5pt}.settings button{margin-top:15pt}.world-screen{overflow:hidden}.world-screen-header{margin:0;text-align:center}.world-screen-quest-description{margin:0 0 5px}.world-screen-quest-description p{font-size:16px;margin:0;text-align:center;vertical-align:center;min-height:2.75em}.quest-description-emphasis{color:#408040;font-weight:700}.world-screen-hbox{margin:0;display:flex;flex-direction:row}.world-screen-map-box{height:100%;width:100%}.map-canvas{width:100%;margin:0}.world-screen-sidebar{background-color:#000;width:20%;min-width:2in;font-size:16px;overflow-y:auto;height:calc(100vh - 125px);margin-top:0;margin-bottom:0;margin-right:20px;padding:0 5px 0 10px}.world-screen-sidebar p{margin-top:0;margin-bottom:10px}.sidebar-tile-name{font-weight:700;font-size:14pt}.tile-project{border:solid #fff;margin-top:5pt}.tile-project button{width:100%}.tile-project p{margin-left:5px;margin-bottom:5px;margin-top:5px}.project-requirement-met{color:#fff}.project-requirement-unmet{color:tomato}.world-screen-inventory{width:4in;margin:0 10px;font-size:16px;white-space:nowrap}.world-screen-inventory h1{margin-bottom:0;margin-top:.25em}.world-screen-inventory p{margin-top:2pt;margin-bottom:0}.world-screen-population-header h1{margin-top:0}.production-screen{padding-left:10pt;font-size:16pt;margin:0}.production-screen h1{margin-block-end:0;margin-block-start:0}.production-screen-label{margin-block-start:.5em;margin-block-end:.25em}.production-screen-available-workers{margin-block-start:.25em;margin-block-end:.25em}.production-screen-inventory{outline:solid #fff;width:7in;min-width:50%}@media (max-width:7in){.production-screen-inventory{width:100%}}.production-screen-inventory p{font-size:16pt;line-height:1;margin-top:0;margin-bottom:0;padding:1pt}.production-screen-worker-consumption-label{margin-block-end:.25em;margin-block-start:.25em}.production-screen-worker-consumption{margin-block-end:0;margin-block-start:0}.free-conversions-list{margin-bottom:16pt}.conversion{width:7in;min-width:50%;display:flex;flex-direction:row}@media (max-width:7in){.conversion{width:100%}}.conversion-description{margin:0;font-size:16pt;text-align:left}.conversion-description-box{border:2px solid #fff;width:100%}.conversion-description-normal{color:#fff}.conversion-description-cannot-afford{color:tomato}.conversion-description-disabled{color:#ff0}.population-consumption-met{font-size:16pt}.population-consumption-unmet,.population-death-label{font-size:16pt;color:tomato}.population-death-label{margin-block-end:0;margin-block-start:0}.production-screen-back-button{font-size:20pt;margin-top:20pt}@keyframes loading-bar{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.transition-quote-panel{margin-top:150px;margin-right:auto;margin-left:auto;font-size:16px;width:420px}.transition-attribution{margin-left:50px}.transition-loading-area{text-align:center}.transition-loading-bar{margin-right:auto;margin-left:auto;width:50px;height:50px;border-radius:50%;border-color:#fff transparent;border-style:solid;border-width:5px;animation-name:loading-bar;animation-duration:1.25s;animation-iteration-count:infinite;animation-timing-function:ease}.transition-loading-area.loading .transition-loading-bar{background-size:80% 100%}.transition-loading-area.loaded .transition-loading-bar{background-size:100% 100%}.tech-option{outline:solid #fff;width:min(100%,max(50%,7in));padding:0;width:7in;min-width:50%}@media (max-width:7in){.tech-option{width:100%}}.tech-option p{font-size:14pt;margin-top:0;margin-bottom:0;padding:2pt 2pt 2pt 5pt;line-height:1}.tech-option h2{font-size:1.8em;padding:5pt;margin-bottom:0}.tech-option button{margin-top:10pt;margin-bottom:-2px;margin-left:-2px}.research-resources p{font-size:16pt;line-height:1;margin-top:0;margin-bottom:0;padding:1pt}.previous-research-header{margin-bottom:1pt}.previous-research{font-size:16pt;margin-top:0;margin-bottom:0}@font-face{font-family:IBMPlexMono;src:url(assets/fonts/IBMPlexMono-Regular.ttf)}:root{--mono-font:IBMPlexMono,monospace}:root,button{background-color:#000;color:#fff;font-family:var(--mono-font)}button{font-size:18px}button:focus{outline:0}button:disabled,button[disabled]{color:grey;border-color:grey}.flex-horizontal{display:flex;flex-direction:row}.flex-vertical{display:flex;flex-direction:column}.fill-horizontal{width:100%;font-family:serif}.fill-vertical{height:100%}img.emoji{height:1em;width:1em;margin:0 .05em 0 .1em;vertical-align:-.1em}</style></head> <body> <div id=rootdiv> <p>Loading scripts...</p> </div> <script type="text/javascript">(function(){/*
 MIT
 Copyright Twitter Inc. and other contributors. Licensed under MIT */
'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(c){var d=0;return function(){return d<c.length?{done:!1,value:c[d++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,d,g){c!=Array.prototype&&c!=Object.prototype&&(c[d]=g.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(c,d){this.$jscomp$symbol$id_=c;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:d})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function c(g){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(g||"")+"_"+d++,g)}var d=0;return c}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};
$jscomp.makeIterator=function(c){var d="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];return d?d.call(c):$jscomp.arrayIterator(c)};$jscomp.arrayFromIterator=function(c){for(var d,g=[];!(d=c.next()).done;)g.push(d.value);return g};$jscomp.arrayFromIterable=function(c){return c instanceof Array?c:$jscomp.arrayFromIterator($jscomp.makeIterator(c))};$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(c){var d=function(){};d.prototype=c;return new d};
$jscomp.underscoreProtoCanBeSet=function(){var c={a:!0},d={};try{return d.__proto__=c,d.a}catch(g){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(c,d){c.__proto__=d;if(c.__proto__!==d)throw new TypeError(c+" is not extensible");return c}:null;
$jscomp.inherits=function(c,d){c.prototype=$jscomp.objectCreate(d.prototype);c.prototype.constructor=c;if($jscomp.setPrototypeOf){var g=$jscomp.setPrototypeOf;g(c,d)}else for(g in d)if("prototype"!=g)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(d,g);f&&Object.defineProperty(c,g,f)}else c[g]=d[g];c.superClass_=d.prototype};$jscomp.generator={};
$jscomp.generator.ensureIteratorResultIsObject_=function(c){if(!(c instanceof Object))throw new TypeError("Iterator result "+c+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(c){this.yieldResult=c};
$jscomp.generator.Context.prototype.throw_=function(c){this.abruptCompletion_={exception:c,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(c){this.abruptCompletion_={return:c};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(c){this.abruptCompletion_={jumpTo:c};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(c,d){this.nextAddress=d;return{value:c}};
$jscomp.generator.Context.prototype.yieldAll=function(c,d){c=$jscomp.makeIterator(c);var g=c.next();$jscomp.generator.ensureIteratorResultIsObject_(g);if(g.done)this.yieldResult=g.value,this.nextAddress=d;else return this.yieldAllIterator_=c,this.yield(g.value,d)};$jscomp.generator.Context.prototype.jumpTo=function(c){this.nextAddress=c};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(c,d){this.catchAddress_=c;void 0!=d&&(this.finallyAddress_=d)};$jscomp.generator.Context.prototype.setFinallyBlock=function(c){this.catchAddress_=0;this.finallyAddress_=c||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(c,d){this.nextAddress=c;this.catchAddress_=d||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(c){this.catchAddress_=c||0;c=this.abruptCompletion_.exception;this.abruptCompletion_=null;return c};$jscomp.generator.Context.prototype.enterFinallyBlock=function(c,d,g){g?this.finallyContexts_[g]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=c||0;this.finallyAddress_=d||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(c,d){d=this.finallyContexts_.splice(d||0)[0];if(d=this.abruptCompletion_=this.abruptCompletion_||d){if(d.isException)return this.jumpToErrorHandler_();void 0!=d.jumpTo&&this.finallyAddress_<d.jumpTo?(this.nextAddress=d.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=c};$jscomp.generator.Context.prototype.forIn=function(c){return new $jscomp.generator.Context.PropertyIterator(c)};
$jscomp.generator.Context.PropertyIterator=function(c){this.object_=c;this.properties_=[];for(var d in c)this.properties_.push(d);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var c=this.properties_.pop();if(c in this.object_)return c}return null};$jscomp.generator.Engine_=function(c){this.context_=new $jscomp.generator.Context;this.program_=c};
$jscomp.generator.Engine_.prototype.next_=function(c){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,c,this.context_.next_);this.context_.next_(c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(c){this.context_.start_();var d=this.context_.yieldAllIterator_;if(d)return this.yieldAllStep_("return"in d?d["return"]:function(c){return{value:c,done:!0}},c,this.context_.return);this.context_.return(c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(c){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],c,this.context_.next_);this.context_.throw_(c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(c,d,g){try{var f=c.call(this.context_.yieldAllIterator_,d);$jscomp.generator.ensureIteratorResultIsObject_(f);if(!f.done)return this.context_.stop_(),f;var k=f.value}catch(t){return this.context_.yieldAllIterator_=null,this.context_.throw_(t),this.nextStep_()}this.context_.yieldAllIterator_=null;g.call(this.context_,k);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var c=this.program_(this.context_);if(c)return this.context_.stop_(),{value:c.value,done:!1}}catch(d){this.context_.yieldResult=void 0,this.context_.throw_(d)}this.context_.stop_();if(this.context_.abruptCompletion_){c=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(c.isException)throw c.exception;return{value:c.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(c){this.next=function(d){return c.next_(d)};this.throw=function(d){return c.throw_(d)};this.return=function(d){return c.return_(d)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(c,d){d=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(d));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(d,c.prototype);return d};
$jscomp.polyfill=function(c,d,g,f){if(d){g=$jscomp.global;c=c.split(".");for(f=0;f<c.length-1;f++){var k=c[f];k in g||(g[k]={});g=g[k]}c=c[c.length-1];f=g[c];d=d(f);d!=f&&null!=d&&$jscomp.defineProperty(g,c,{configurable:!0,writable:!0,value:d})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(c){function d(){this.batch_=null}function g(c){return c instanceof k?c:new k(function(d,f){d(c)})}if(c&&!$jscomp.FORCE_POLYFILL_PROMISE)return c;d.prototype.asyncExecute=function(c){if(null==this.batch_){this.batch_=[];var d=this;this.asyncExecuteFunction(function(){d.executeBatch_()})}this.batch_.push(c)};var f=$jscomp.global.setTimeout;d.prototype.asyncExecuteFunction=function(c){f(c,0)};d.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var c=
this.batch_;this.batch_=[];for(var d=0;d<c.length;++d){var f=c[d];c[d]=null;try{f()}catch(qa){this.asyncThrow_(qa)}}}this.batch_=null};d.prototype.asyncThrow_=function(c){this.asyncExecuteFunction(function(){throw c;})};var k=function(c){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var d=this.createResolveAndReject_();try{c(d.resolve,d.reject)}catch(J){d.reject(J)}};k.prototype.createResolveAndReject_=function(){function c(c){return function(g){f||(f=!0,c.call(d,g))}}var d=this,f=
!1;return{resolve:c(this.resolveTo_),reject:c(this.reject_)}};k.prototype.resolveTo_=function(c){if(c===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(c instanceof k)this.settleSameAsPromise_(c);else{a:switch(typeof c){case "object":var d=null!=c;break a;case "function":d=!0;break a;default:d=!1}d?this.resolveToNonPromiseObj_(c):this.fulfill_(c)}};k.prototype.resolveToNonPromiseObj_=function(c){var d=void 0;try{d=c.then}catch(J){this.reject_(J);return}"function"==typeof d?
this.settleSameAsThenable_(d,c):this.fulfill_(c)};k.prototype.reject_=function(c){this.settle_(2,c)};k.prototype.fulfill_=function(c){this.settle_(1,c)};k.prototype.settle_=function(c,d){if(0!=this.state_)throw Error("Cannot settle("+c+", "+d+"): Promise already settled in state"+this.state_);this.state_=c;this.result_=d;this.executeOnSettledCallbacks_()};k.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var c=0;c<this.onSettledCallbacks_.length;++c)t.asyncExecute(this.onSettledCallbacks_[c]);
this.onSettledCallbacks_=null}};var t=new d;k.prototype.settleSameAsPromise_=function(c){var d=this.createResolveAndReject_();c.callWhenSettled_(d.resolve,d.reject)};k.prototype.settleSameAsThenable_=function(c,d){var f=this.createResolveAndReject_();try{c.call(d,f.resolve,f.reject)}catch(qa){f.reject(qa)}};k.prototype.then=function(c,d){function f(c,d){return"function"==typeof c?function(d){try{g(c(d))}catch(w){O(w)}}:d}var g,O,ra=new k(function(c,d){g=c;O=d});this.callWhenSettled_(f(c,g),f(d,O));
return ra};k.prototype.catch=function(c){return this.then(void 0,c)};k.prototype.callWhenSettled_=function(c,d){function f(){switch(g.state_){case 1:c(g.result_);break;case 2:d(g.result_);break;default:throw Error("Unexpected state: "+g.state_);}}var g=this;null==this.onSettledCallbacks_?t.asyncExecute(f):this.onSettledCallbacks_.push(f)};k.resolve=g;k.reject=function(c){return new k(function(d,f){f(c)})};k.race=function(c){return new k(function(d,f){for(var k=$jscomp.makeIterator(c),O=k.next();!O.done;O=
k.next())g(O.value).callWhenSettled_(d,f)})};k.all=function(c){var d=$jscomp.makeIterator(c),f=d.next();return f.done?g([]):new k(function(c,k){function qa(d){return function(f){O[d]=f;J--;0==J&&c(O)}}var O=[],J=0;do O.push(void 0),J++,g(f.value).callWhenSettled_(qa(O.length-1),k),f=d.next();while(!f.done)})};return k},"es6","es3");
$jscomp.iteratorFromArray=function(c,d){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var g=0,f={next:function(){if(g<c.length){var k=g++;return{value:d(k,c[k]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");
$jscomp.polyfill("Math.hypot",function(c){return c?c:function(c){if(2>arguments.length)return arguments.length?Math.abs(arguments[0]):0;var d,f,k;for(d=k=0;d<arguments.length;d++)k=Math.max(k,Math.abs(arguments[d]));if(1e+100<k||1e-100>k){if(!k)return k;for(d=f=0;d<arguments.length;d++){var t=Number(arguments[d])/k;f+=t*t}return Math.sqrt(f)*k}for(d=f=0;d<arguments.length;d++)t=Number(arguments[d]),f+=t*t;return Math.sqrt(f)}},"es6","es3");
$jscomp.polyfill("Array.prototype.values",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c,g){return g})}},"es8","es3");$jscomp.checkStringArgs=function(c,d,g){if(null==c)throw new TypeError("The 'this' value for String.prototype."+g+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");return c+""};
$jscomp.polyfill("String.prototype.repeat",function(c){return c?c:function(c){var d=$jscomp.checkStringArgs(this,null,"repeat");if(0>c||1342177279<c)throw new RangeError("Invalid count value");c|=0;for(var f="";c;)if(c&1&&(f+=d),c>>>=1)d+=d;return f}},"es6","es3");$jscomp.owns=function(c,d){return Object.prototype.hasOwnProperty.call(c,d)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(c,d){for(var g=1;g<arguments.length;g++){var f=arguments[g];if(f)for(var k in f)$jscomp.owns(f,k)&&(c[k]=f[k])}return c};$jscomp.polyfill("Object.assign",function(c){return c||$jscomp.assign},"es6","es3");
$jscomp.polyfill("Array.from",function(c){return c?c:function(c,g,f){g=null!=g?g:function(c){return c};var d=[],t="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];if("function"==typeof t){c=t.call(c);for(var C=0;!(t=c.next()).done;)d.push(g.call(f,t.value,C++))}else for(t=c.length,C=0;C<t;C++)d.push(g.call(f,c[C],C));return d}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var c={},d=Object.create(new $jscomp.global.Proxy(c,{get:function(g,f,k){return g==c&&"q"==f&&k==d}}));return!0===d.q}catch(g){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.polyfill("WeakMap",function(c){function d(){if(!c||!Object.seal)return!1;try{var d=Object.seal({}),f=Object.seal({}),g=new c([[d,2],[f,3]]);if(2!=g.get(d)||3!=g.get(f))return!1;g.delete(d);g.set(f,4);return!g.has(d)&&4==g.get(f)}catch(xa){return!1}}function g(){}function f(c){var d=typeof c;return"object"===d&&null!==c||"function"===d}function k(c){if(!$jscomp.owns(c,C)){var d=new g;$jscomp.defineProperty(c,C,{value:d})}}function t(c){var d=Object[c];d&&(Object[c]=function(c){if(c instanceof
g)return c;k(c);return d(c)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(d())return c;var C="$jscomp_hidden_"+Math.random();t("freeze");t("preventExtensions");t("seal");var Ga=0,J=function(c){this.id_=(Ga+=Math.random()+1).toString();if(c){c=$jscomp.makeIterator(c);for(var d;!(d=c.next()).done;)d=d.value,this.set(d[0],d[1])}};J.prototype.set=function(c,d){if(!f(c))throw Error("Invalid WeakMap key");k(c);if(!$jscomp.owns(c,C))throw Error("WeakMap key fail: "+
c);c[C][this.id_]=d;return this};J.prototype.get=function(c){return f(c)&&$jscomp.owns(c,C)?c[C][this.id_]:void 0};J.prototype.has=function(c){return f(c)&&$jscomp.owns(c,C)&&$jscomp.owns(c[C],this.id_)};J.prototype.delete=function(c){return f(c)&&$jscomp.owns(c,C)&&$jscomp.owns(c[C],this.id_)?delete c[C][this.id_]:!1};return J},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(c){function d(){if($jscomp.ASSUME_NO_NATIVE_MAP||!c||"function"!=typeof c||!c.prototype.entries||"function"!=typeof Object.seal)return!1;try{var d=Object.seal({x:4}),f=new c($jscomp.makeIterator([[d,"s"]]));if("s"!=f.get(d)||1!=f.size||f.get({x:4})||f.set({x:4},"t")!=f||2!=f.size)return!1;var g=f.entries(),k=g.next();if(k.done||k.value[0]!=d||"s"!=k.value[1])return!1;k=g.next();return k.done||4!=k.value[0].x||"t"!=k.value[1]||!g.next().done?!1:!0}catch(xa){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(d())return c;$jscomp.initSymbolIterator();var g=new WeakMap,f=function(c){this.data_={};this.head_=C();this.size=0;if(c){c=$jscomp.makeIterator(c);for(var d;!(d=c.next()).done;)d=d.value,this.set(d[0],d[1])}};f.prototype.set=function(c,d){c=0===c?0:c;var f=k(this,c);f.list||(f.list=this.data_[f.id]=[]);f.entry?f.entry.value=d:(f.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,
value:d},f.list.push(f.entry),this.head_.previous.next=f.entry,this.head_.previous=f.entry,this.size++);return this};f.prototype.delete=function(c){c=k(this,c);return c.entry&&c.list?(c.list.splice(c.index,1),c.list.length||delete this.data_[c.id],c.entry.previous.next=c.entry.next,c.entry.next.previous=c.entry.previous,c.entry.head=null,this.size--,!0):!1};f.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=C();this.size=0};f.prototype.has=function(c){return!!k(this,c).entry};
f.prototype.get=function(c){return(c=k(this,c).entry)&&c.value};f.prototype.entries=function(){return t(this,function(c){return[c.key,c.value]})};f.prototype.keys=function(){return t(this,function(c){return c.key})};f.prototype.values=function(){return t(this,function(c){return c.value})};f.prototype.forEach=function(c,d){for(var f=this.entries(),g;!(g=f.next()).done;)g=g.value,c.call(d,g[1],g[0],this)};f.prototype[Symbol.iterator]=f.prototype.entries;var k=function(c,d){var f=d&&typeof d;"object"==
f||"function"==f?g.has(d)?f=g.get(d):(f=""+ ++Ga,g.set(d,f)):f="p_"+d;var k=c.data_[f];if(k&&$jscomp.owns(c.data_,f))for(c=0;c<k.length;c++){var t=k[c];if(d!==d&&t.key!==t.key||d===t.key)return{id:f,list:k,index:c,entry:t}}return{id:f,list:k,index:-1,entry:void 0}},t=function(c,d){var f=c.head_;return $jscomp.iteratorPrototype(function(){if(f){for(;f.head!=c.head_;)f=f.previous;for(;f.next!=f.head;)return f=f.next,{done:!1,value:d(f)};f=null}return{done:!0,value:void 0}})},C=function(){var c={};return c.previous=
c.next=c.head=c},Ga=0;return f},"es6","es3");$jscomp.polyfill("Object.is",function(c){return c?c:function(c,g){return c===g?0!==c||1/c===1/g:c!==c&&g!==g}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(c){return c?c:function(c,g){var d=this;d instanceof String&&(d=String(d));var k=d.length;g=g||0;for(0>g&&(g=Math.max(g+k,0));g<k;g++){var t=d[g];if(t===c||Object.is(t,c))return!0}return!1}},"es7","es3");
$jscomp.polyfill("String.prototype.includes",function(c){return c?c:function(c,g){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,g||0)}},"es6","es3");
(function(c){function d(f){if(g[f])return g[f].exports;var k=g[f]={i:f,l:!1,exports:{}};c[f].call(k.exports,k,k.exports,d);k.l=!0;return k.exports}var g={};d.m=c;d.c=g;d.d=function(c,g,t){d.o(c,g)||Object.defineProperty(c,g,{enumerable:!0,get:t})};d.r=function(c){$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!==typeof Symbol&&Symbol.toStringTag&&($jscomp.initSymbol(),Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}));Object.defineProperty(c,"__esModule",{value:!0})};d.t=function(c,
g){g&1&&(c=d(c));if(g&8||g&4&&"object"===typeof c&&c&&c.__esModule)return c;var f=Object.create(null);d.r(f);Object.defineProperty(f,"default",{enumerable:!0,value:c});if(g&2&&"string"!=typeof c)for(var k in c)d.d(f,k,function(d){return c[d]}.bind(null,k));return f};d.n=function(c){var f=c&&c.__esModule?function(){return c["default"]}:function(){return c};d.d(f,"a",f);return f};d.o=function(c,d){return Object.prototype.hasOwnProperty.call(c,d)};d.p="";return d(d.s=3)})([function(c,d,g){function f(c){for(var d=
[],f,g=0,k=0;k<c.length;)f=c.charCodeAt(k++),g?(d.push((65536+(g-55296<<10)+(f-56320)).toString(16)),g=0):55296<f&&56319>=f?g=f:d.push(f.toString(16));return d}Object.defineProperty(d,"__esModule",{value:!0});d.TypeName=void 0;d.parse=function(c,d){var g=d&&d.assetType?d.assetType:"svg";d=d&&d.buildUrl?d.buildUrl:function(c,d){return"png"===d?"https://twemoji.maxcdn.com/v/latest/72x72/"+c+".png":"https://twemoji.maxcdn.com/v/latest/svg/"+c+".svg"};var C=[];for(k.default.lastIndex=0;;){var O=k.default.exec(c);
if(!O)break;var qa=O[0],w=f(J(qa)).join("-");C.push({url:w?d(w,g):"",indices:[O.index,k.default.lastIndex],text:qa,type:t})}return C};d.toCodePoints=f;var k=(c=g(1))&&c.__esModule?c:{default:c},t=d.TypeName="emoji",C=/\uFE0F/g,Ga=String.fromCharCode(8205),J=function(c){return 0>c.indexOf(Ga)?c.replace(C,""):c}},function(c,d,g){Object.defineProperty(d,"__esModule",{value:!0});d.default=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g},
,function(c,d,g){function f(a){var b=new Image,e=new Promise(function(e,c){b.onload=function(){return e(b)};b.onerror=function(){return e(b)};b.src=a});Lc.push(e);return b}function k(){return td(this,void 0,void 0,function b(){return $jscomp.generator.createGenerator(b,function(b){return b.return(Promise.all(Lc))})})}function t(){throw Error("This code should be unreachable");}function C(a){var b=new Oa(a);a=window;a.cheatsAddResource=function(a,c){return b.addResource(a,c)};a.cheatsRemoveResource=
function(a,c){return b.removeResource(a,c)};a.cheatsAddPopulation=function(a,c){return b.addPopulation(a,c)};a.cheatsFreeResources=function(){return b.freeResources()};a.cheatsLoseGame=function(){return b.loseGame()};a.cheatsWinGame=function(){return b.winGame()};Object.freeze(l);Object.freeze(U);a.Resources=l;a.Species=U}function Ga(a,b,e){return Math.max(Math.min(b,e),a)}function J(a,b){return a-b*Math.floor(a/b)}function qa(){throw Error("unreachable");}function O(a){$jscomp.initSymbol();$jscomp.initSymbol();
$jscomp.initSymbolIterator();O="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return O(a)}function ra(){ra=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var e=arguments[b],c;for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(a[c]=e[c])}return a};return ra.apply(this,
arguments)}function xa(a){for(var b=1;b<arguments.length;b++){var e=null!=arguments[b]?arguments[b]:{},c=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(c=c.concat(Object.getOwnPropertySymbols(e).filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})));c.forEach(function(b){var c=e[b];b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c})}return a}function sd(a,b){if(null==a)return{};if(null==a)var e={};else{e={};var c=
Object.keys(a),q;for(q=0;q<c.length;q++){var p=c[q];0<=b.indexOf(p)||(e[p]=a[p])}}if(Object.getOwnPropertySymbols)for(q=Object.getOwnPropertySymbols(a),p=0;p<q.length;p++)c=q[p],0<=b.indexOf(c)||Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c]);return e}function Ha(a){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(a)}function w(a,b,e){a.addEventListener(b,e,!Ia&&Mc)}function D(a,b,e){a.removeEventListener(b,e,!Ia&&Mc)}function Rb(a,b){if(b){">"===b[0]&&
(b=b.substring(1));if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(e){}return!1}}function ya(a,b,e,c){if(a){e=e||document;do{if(null!=b&&(">"===b[0]?a.parentNode===e&&Rb(a,b):Rb(a,b))||c&&a===e)return a;if(a===e)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function ka(a,b,e){if(a&&b)if(a.classList)a.classList[e?"add":"remove"](b);else{var c=(" "+
a.className+" ").replace(Nc," ").replace(" "+b+" "," ");a.className=(c+(e?" "+b:"")).replace(Nc," ")}}function x(a,b,e){var c=a&&a.style;if(c){if(void 0===e)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(e=a.currentStyle),void 0===b?e:e[b];b in c||-1!==b.indexOf("webkit")||(b="-webkit-"+b);c[b]=e+("string"===typeof e?"":"px")}}function mb(a,b){var e="";if("string"===typeof a)e=a;else{do{var c=x(a,"transform");c&&"none"!==
c&&(e=c+" "+e)}while(!b&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(e)}function Oc(a,b,e){if(a){a=a.getElementsByTagName(b);b=0;var c=a.length;if(e)for(;b<c;b++)e(a[b],b);return a}return[]}function Ja(){var a=document.scrollingElement;return a?a:document.documentElement}function V(a,b,e,c,q){if(a.getBoundingClientRect||a===window){if(a!==window&&a!==Ja()){var n=a.getBoundingClientRect();var d=n.top;var f=n.left;var S=n.bottom;
var v=n.right;var g=n.height;var y=n.width}else f=d=0,S=window.innerHeight,v=window.innerWidth,g=window.innerHeight,y=window.innerWidth;if((b||e)&&a!==window&&(q=q||a.parentNode,!Ia)){do if(q&&q.getBoundingClientRect&&("none"!==x(q,"transform")||e&&"static"!==x(q,"position"))){S=q.getBoundingClientRect();d-=S.top+parseInt(x(q,"border-top-width"));f-=S.left+parseInt(x(q,"border-left-width"));S=d+n.height;v=f+n.width;break}while(q=q.parentNode)}c&&a!==window&&(c=(a=mb(q||a))&&a.a,q=a&&a.d,a&&(d/=q,
f/=c,y/=c,g/=q,S=d+g,v=f+y));return{top:d,left:f,bottom:S,right:v,width:y,height:g}}}function Pc(a,b,e){var c=Pa(a,!0);for(a=V(a)[b];c;){b=V(c)[e];if(!("top"===e||"left"===e?a>=b:a<=b))return c;if(c===Ja())break;c=Pa(c,!1)}return!1}function Sb(a,b,e){for(var c=0,q=0,p=a.children;q<p.length;){if("none"!==p[q].style.display&&p[q]!==z.ghost&&p[q]!==z.dragged&&ya(p[q],e.draggable,a,!1)){if(c===b)return p[q];c++}q++}return null}function mc(a,b){for(a=a.lastElementChild;a&&(a===z.ghost||"none"===x(a,"display")||
b&&!Rb(a,b));)a=a.previousElementSibling;return a||null}function na(a,b){var e=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===z.clone||b&&!Rb(a,b)||e++;return e}function Qc(a){var b=0,e=0,c=Ja();if(a){do{var q=mb(a),p=q.d;b+=a.scrollLeft*q.a;e+=a.scrollTop*p}while(a!==c&&(a=a.parentNode))}return[b,e]}function ud(a,b){for(var e in a)if(a.hasOwnProperty(e))for(var c in b)if(b.hasOwnProperty(c)&&b[c]===a[e][c])return Number(e);return-1}function Pa(a,
b){if(!a||!a.getBoundingClientRect)return Ja();var e=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var c=x(a);if(a.clientWidth<a.scrollWidth&&("auto"==c.overflowX||"scroll"==c.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==c.overflowY||"scroll"==c.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(e||b)return a;e=!0}}while(a=a.parentNode);return Ja()}function nc(a,b){return Math.round(a.top)===Math.round(b.top)&&Math.round(a.left)===Math.round(b.left)&&
Math.round(a.height)===Math.round(b.height)&&Math.round(a.width)===Math.round(b.width)}function Rc(a,b){return function(){if(!Ab){var e=arguments;1===e.length?a.call(this,e[0]):a.apply(this,e);Ab=setTimeout(function(){Ab=void 0},b)}}}function Sc(a,b,e){a.scrollLeft+=b;a.scrollTop+=e}function Tc(a){var b=window.Polymer,e=window.jQuery||window.Zepto;return b&&b.dom?b.dom(a).cloneNode(!0):e?e(a).clone(!0)[0]:a.cloneNode(!0)}function vd(){var a=[],b;return{captureAnimationState:function(){a=[];this.options.animation&&
[].slice.call(this.el.children).forEach(function(b){if("none"!==x(b,"display")&&b!==z.ghost){a.push({target:b,rect:V(b)});var e=xa({},a[a.length-1].rect);if(b.thisAnimationDuration){var c=mb(b,!0);c&&(e.top-=c.f,e.left-=c.e)}b.fromRect=e}})},addAnimationState:function(b){a.push(b)},removeAnimationState:function(b){a.splice(ud(a,{target:b}),1)},animateAll:function(e){var c=this;if(this.options.animation){var q=!1,p=0;a.forEach(function(a){var b=0,e=a.target,n=e.fromRect,d=V(e),L=e.prevFromRect,f=e.prevToRect;
a=a.rect;var g=mb(e,!0);g&&(d.top-=g.f,d.left-=g.e);e.toRect=d;e.thisAnimationDuration&&nc(L,d)&&!nc(n,d)&&(a.top-d.top)/(a.left-d.left)===(n.top-d.top)/(n.left-d.left)&&(b=Math.sqrt(Math.pow(L.top-a.top,2)+Math.pow(L.left-a.left,2))/Math.sqrt(Math.pow(L.top-f.top,2)+Math.pow(L.left-f.left,2))*c.options.animation);nc(d,n)||(e.prevFromRect=n,e.prevToRect=d,b||(b=c.options.animation),c.animate(e,a,d,b));b&&(q=!0,p=Math.max(p,b),clearTimeout(e.animationResetTimer),e.animationResetTimer=setTimeout(function(){e.animationTime=
0;e.prevFromRect=null;e.fromRect=null;e.prevToRect=null;e.thisAnimationDuration=null},b),e.thisAnimationDuration=b)});clearTimeout(b);q?b=setTimeout(function(){"function"===typeof e&&e()},p):"function"===typeof e&&e();a=[]}else clearTimeout(b),"function"===typeof e&&e()},animate:function(a,b,c,d){if(d){x(a,"transition","");x(a,"transform","");var e=mb(this.el),n=(b.left-c.left)/(e&&e.a||1);b=(b.top-c.top)/(e&&e.d||1);a.animatingX=!!n;a.animatingY=!!b;x(a,"transform","translate3d("+n+"px,"+b+"px,0)");
x(a,"transition","transform "+d+"ms"+(this.options.easing?" "+this.options.easing:""));x(a,"transform","translate3d(0,0,0)");"number"===typeof a.animated&&clearTimeout(a.animated);a.animated=setTimeout(function(){x(a,"transition","");x(a,"transform","");a.animated=!1;a.animatingX=!1;a.animatingY=!1},d)}}}}function ea(a){var b=xa({putSortable:W,cloneEl:H,targetEl:m,rootEl:M,oldIndex:nb,oldDraggableIndex:Bb,newIndex:la,newDraggableIndex:Qa},a);a=b.sortable;var e=b.rootEl,c=b.name,d=b.targetEl,p=b.cloneEl,
L=b.toEl,f=b.fromEl,S=b.oldIndex,g=b.newIndex,h=b.oldDraggableIndex,y=b.newDraggableIndex,I=b.originalEvent,k=b.putSortable,l=b.extraEventProperties;if(a=a||e&&e[ma]){var r=a.options,x="on"+c.charAt(0).toUpperCase()+c.substr(1);!window.CustomEvent||Ia||Cb?(b=document.createEvent("Event"),b.initEvent(c,!0,!0)):b=new CustomEvent(c,{bubbles:!0,cancelable:!0});b.to=L||e;b.from=f||e;b.item=d||e;b.clone=p;b.oldIndex=S;b.newIndex=g;b.oldDraggableIndex=h;b.newDraggableIndex=y;b.originalEvent=I;b.pullMode=
k?k.lastPutMode:void 0;c=xa({},l,Db.getEventProperties(c,a));for(var z in c)b[z]=c[z];e&&e.dispatchEvent(b);r[x]&&r[x].call(a,b)}}function z(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=b=ra({},b);a[ma]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Uc(a,
this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,
y:0},supportPointer:!1!==z.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};Db.initializePlugins(this,a,e);for(var c in e)c in b||(b[c]=e[c]);Vc(b);for(var d in this)"_"===d.charAt(0)&&"function"===typeof this[d]&&(this[d]=this[d].bind(this));if(this.nativeDraggable=b.forceFallback?!1:wd)this.options.touchStartThreshold=1;b.supportPointer?w(a,"pointerdown",this._onTapStart):(w(a,"mousedown",this._onTapStart),w(a,"touchstart",this._onTapStart));this.nativeDraggable&&(w(a,"dragover",
this),w(a,"dragenter",this));Tb.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||[]);ra(this,vd())}function oc(a,b,e,c,d,p,L,f){var n=a[ma],q=n.options.onMove,R;if(!window.CustomEvent||Ia||Cb){var g=document.createEvent("Event");g.initEvent("move",!0,!0)}else g=new CustomEvent("move",{bubbles:!0,cancelable:!0});g.to=b;g.from=a;g.dragged=e;g.draggedRect=c;g.related=d||b;g.relatedRect=p||V(b);g.willInsertAfter=f;g.originalEvent=L;a.dispatchEvent(g);q&&(R=q.call(n,g,L));return R}function pc(a){a.draggable=
!1}function xd(){qc=!1}function yd(a,b,e){e=V(mc(e.el,e.options.draggable));return b?a.clientX>e.right+10||a.clientX<=e.right&&a.clientY>e.bottom&&a.clientX>=e.left:a.clientX>e.right&&a.clientY>e.top||a.clientX<=e.right&&a.clientY>e.bottom+10}function zd(a,b,e,c,d,p,L,f){a=c?a.clientY:a.clientX;var n=c?e.height:e.width,q=c?e.top:e.left;e=c?e.bottom:e.right;c=!1;if(!L)if(f&&Ub<n*d)if(!Eb&&(1===Fb?a>q+n*p/2:a<e-n*p/2)&&(Eb=!0),Eb)c=!0;else{if(1===Fb?a<q+Ub:a>e-Ub)return-Fb}else if(a>q+n*(1-d)/2&&a<
e-n*(1-d)/2)return b=na(m)<na(b)?1:-1,b;if(c||L)if(a<q+n*p/2||a>e-n*p/2)return a>q+n/2?1:-1;return 0}function Ad(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var b=a.length,e=0;b--;)e+=a.charCodeAt(b);return e.toString(36)}function Bd(a){Vb.length=0;a=a.getElementsByTagName("input");for(var b=a.length;b--;){var e=a[b];e.checked&&Vb.push(e)}}function Wb(a){return setTimeout(a,0)}function Xb(){P.forEach(function(a){clearInterval(a.pid)});P=[]}function rc(){}function sc(){}function db(){return function(a){return a}}
g.r(d);var Cd=function(){function a(a,b){return document.createTextNode(b?a.replace(k,""):a)}function b(a,b){return"".concat(b.base,b.size,"/",a,b.ext)}function e(a,b){a=a.childNodes;for(var c=a.length,n,d;c--;)n=a[c],d=n.nodeType,3===d?b.push(n):1!==d||"ownerSVGElement"in n||r.test(n.nodeName.toLowerCase())||e(n,b);return b}function c(a){return h(0>a.indexOf(l)?a.replace(k,""):a)}function d(b,n){for(var d=e(b,[]),q=d.length,p,L,f,g,R,S,h,v,y,F;q--;){p=!1;f=document.createDocumentFragment();g=d[q];
R=g.nodeValue;for(h=0;S=I.exec(R);){v=S.index;v!==h&&f.appendChild(a(R.slice(h,v),!0));S=S[0];F=c(S);h=v+S.length;v=n.callback(F,n);if(F&&v){y=new Image;y.onerror=n.onerror;y.setAttribute("draggable","false");p=n.attributes(S,F);for(L in p)p.hasOwnProperty(L)&&0!==L.indexOf("on")&&!y.hasAttribute(L)&&y.setAttribute(L,p[L]);y.className=n.className;y.alt=S;y.src=v;p=!0;f.appendChild(y)}y||f.appendChild(a(S,!1));y=null}p&&(h<R.length&&f.appendChild(a(R.slice(h),!0)),g.parentNode.replaceChild(f,g))}return b}
function p(a,b){return g(a,function(a){var e=a,n=c(a),d=b.callback(n,b),q;if(n&&d){e="<img ".concat('class="',b.className,'" ','draggable="false" ','alt="',a,'"',' src="',d,'"');a=b.attributes(a,n);for(q in a)a.hasOwnProperty(q)&&0!==q.indexOf("on")&&-1===e.indexOf(" "+q+"=")&&(e=e.concat(" ",q,'="',a[q].replace(m,L),'"'));e=e.concat("/>")}return e})}function L(a){return y[a]}function f(){return null}function g(a,b){return String(a).replace(I,b)}function h(a,b){for(var e=[],c,n=0,d=0;d<a.length;)c=
a.charCodeAt(d++),n?(e.push((65536+(n-55296<<10)+(c-56320)).toString(16)),n=0):55296<=c&&56319>=c?n=c:e.push(c.toString(16));return e.join(b||"-")}var F={base:"https://twemoji.maxcdn.com/v/12.1.5/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(a){a="string"===typeof a?parseInt(a,16):a;if(65536>a)return x(a);a-=65536;return x(55296+(a>>10),56320+(a&1023))},toCodePoint:h},onerror:function(){this.parentNode&&this.parentNode.replaceChild(a(this.alt,!1),this)},parse:function(a,
e){e&&"function"!==typeof e||(e={callback:e});var c=e.callback||b,n="function"===typeof e.attributes?e.attributes:f,q="string"===typeof e.base?e.base:F.base,L=e.ext||F.ext,R;(R=e.folder)||(R=e.size||F.size,R="number"===typeof R?R+"x"+R:R);return("string"===typeof a?p:d)(a,{callback:c,attributes:n,base:q,ext:L,size:R,className:e.className||F.className,onerror:e.onerror||F.onerror})},replace:g,test:function(a){I.lastIndex=0;a=I.test(a);I.lastIndex=0;return a}},y={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",
'"':"&quot;"},I=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,
k=/\uFE0F/g,l=String.fromCharCode(8205),m=/[&<>'"]/g,r=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,x=String.fromCharCode;return F}(),Dd=g(0),h;(function(a){function b(a){var b=document.createElement("div");a&&b.classList.add.apply(b.classList,$jscomp.arrayFromIterable(a));return b}function e(a,b,e){a=document.createElement(a);a.innerText=b;e&&a.classList.add.apply(a.classList,$jscomp.arrayFromIterable(e));return a}function c(a){Cd.parse(a,{folder:"svg",ext:".svg"});return a}function d(a){return 0<
Dd.parse(a).length}a.makeDiv=b;a.makeDivContaining=function(a,e){e=b(e);a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())e.appendChild(c.value);return e};a.makeElement=e;a.patchEmoji=c;a.containsEmoji=d;a.makePara=function(a,b){b=e("p",a,b);d(a)&&c(b);return b};a.makeHeader=function(a,b,n){b=e("h"+(void 0===b?1:b),a,n);d(a)&&c(b);return b};a.makeButton=function(a,b,e,n){n=void 0===n?"enabled":n;var q=document.createElement("button");q.type="button";"disabled"===n&&(q.disabled=!0);q.innerText=
a;e&&q.classList.add.apply(q.classList,$jscomp.arrayFromIterable(e));q.onclick=function(a){a.preventDefault();b.call(this,a)};d(a)&&c(q);return q};a.makeSlider=function(b,e,c,n,d,q){var p=document.createElement("input");p.type="range";p.min=e.toString();p.max=c.toString();p.value=n.toString();void 0!==q&&(p.step=q.toString());p.oninput=function(){if(void 0!==this.value){var a=Number(this.value);!isNaN(a)&&e<=a&&a<=c&&d(a)}};b=a.makePara(b+": ");return a.makeDivContaining([b,p])};a.makeCanvas=function(a,
b,e){var c=document.createElement("canvas");c.width=a;c.height=b;e&&c.classList.add.apply(c.classList,$jscomp.arrayFromIterable(e));return c};a.fillHTML=function(a,b){a.innerHTML="";b=$jscomp.makeIterator(b);for(var e=b.next();!e.done;e=b.next())a.appendChild(e.value)}})(h||(h={}));var T;(function(a){var b=document.getElementById("rootdiv"),e=void 0;a.show=function(a){e=a;h.fillHTML(b,[a.html]);document.onkeydown=function(b){a.handleKeyDown&&a.handleKeyDown(b)};document.onkeyup=function(b){a.handleKeyUp&&
a.handleKeyUp(b)}};a.refreshCurrentPage=function(){e&&e.refresh()}})(T||(T={}));var td=function(a,b,e,c){function n(a){return a instanceof e?a:new e(function(b){b(a)})}return new (e||(e=Promise))(function(e,d){function q(a){try{f(c.next(a))}catch(y){d(y)}}function p(a){try{f(c["throw"](a))}catch(y){d(y)}}function f(a){a.done?e(a.value):n(a.value).then(q,p)}f((c=c.apply(a,b||[])).next())})},Lc=[],Ed=f("assets/ui/highlight.png"),Fd=f("assets/tiles/environment/wasteland1.png"),Gd=f("assets/tiles/environment/wasteland2.png"),
Hd=f("assets/tiles/environment/wasteland3.png"),Id=f("assets/tiles/environment/wasteland4.png"),Jd=f("assets/tiles/environment/wasteland5.png"),Kd=f("assets/tiles/environment/mountain.png"),Ld=f("assets/tiles/alien/ruins1.png"),Md=f("assets/tiles/alien/ruins2.png"),Nd=f("assets/tiles/alien/monolith.png"),Od=f("assets/tiles/construction/hab_site.png"),Pd=f("assets/tiles/construction/lab_site.png"),Qd=f("assets/tiles/construction/industry_site.png"),Rd=f("assets/tiles/colony/habitat.png"),Sd=f("assets/tiles/colony/solar_panels.png"),
Td=f("assets/tiles/colony/mining_facility.png"),Ud=f("assets/tiles/colony/lander.png"),Vd=f("assets/tiles/colony/greenhouse.png"),Wd=f("assets/tiles/colony/mineshaft.png"),Wc=f("assets/tiles/roads/cross.png"),Xc=f("assets/tiles/roads/horizontal.png"),Yc=f("assets/tiles/roads/vertical.png"),Xd=f("assets/tiles/roads/corner_bottom_left.png"),Yd=f("assets/tiles/roads/corner_bottom_right.png"),Zd=f("assets/tiles/roads/corner_top_left.png"),$d=f("assets/tiles/roads/corner_top_right.png"),ae=f("assets/tiles/roads/t_south.png"),
be=f("assets/tiles/roads/t_north.png"),ce=f("assets/tiles/roads/t_east.png"),de=f("assets/tiles/roads/t_west.png"),ee=f("assets/tiles/colony/arcology.png"),fe=f("assets/tiles/colony/nuclear_plant.png"),ge=f("assets/tiles/colony/hive.png"),he=f("assets/tiles/colony/lab_alignment.png"),ie=f("assets/tiles/colony/lab_engineering.png"),je=f("assets/tiles/colony/lab_psych.png"),ke=f("assets/tiles/colony/lab_xeno.png"),eb=function(a,b){this.name=a;this.roles=b},le=[new eb("Grace Rarer",["Team Lead","Game Designer",
"Programmer"]),new eb("Prindle",["Programmer","DevOps"]),new eb("Seong Ryoo",["Environment Artist"]),new eb("May Lawver",["Programmer"]),new eb("Mitchell Philipp",["UI Programmer"]),new eb("Brad Baker",["Gameplay Programmer"]),new eb("Will Cooper",["UI Programmer"])],tc=function(){this.html=h.makeDiv(["credits"]);this.refresh()};tc.prototype.refresh=function(){var a=this;h.fillHTML(this.html,[].concat($jscomp.arrayFromIterable(le.map(function(b){return a.renderCreditsEntry(b)})),[h.makeButton("Back",
function(){return T.show(new ob)})]))};tc.prototype.renderCreditsEntry=function(a){return h.makeDivContaining([h.makeHeader(a.name,1)].concat($jscomp.arrayFromIterable(a.roles.map(function(a){return h.makePara(a)}))),["credits-entry"])};var Zc=function(a){return a},pb;(function(a){function b(a){return{encode:Zc,decode:Zc,validate:a}}function e(a){return{encode:function(b){var e={},c;for(c in a)e[c]=a[c].encode(b[c]);return e},decode:function(b){var e={},c;for(c in a)e[c]=a[c].decode(b[c]);return e},
validate:function(b){if("object"!==typeof b||null===b)return!1;for(var e in a)if(!a[e].validate(b[e]))return!1;return!0}}}function c(a){return{encode:function(b){return b.map(function(b){return a.encode(b)})},decode:function(b){return b.map(function(b){return a.decode(b)})},validate:function(b){if(!Array.isArray(b))return!1;b=$jscomp.makeIterator(b);for(var e=b.next();!e.done;e=b.next())if(!a.validate(e.value))return!1;return!0}}}function d(a,b,e,c){return{encode:function(n){return a(n)?e.encode(n):
b(n)?c.encode(n):t()},decode:function(a){return e.validate(a)?e.decode(a):c.validate(a)?c.decode(a):t()},validate:function(a){return e.validate(a)||c.validate(a)}}}function p(a,b){return d(function(b){return a.validate(b)},function(b){return!a.validate(b)},a,b)}a.schema=function(a,b,e){return{encode:a,decode:b,validate:e}};a.primitive=b;a.aString=b(function(a){return"string"===typeof a||a instanceof String});a.aNumber=b(function(a){return"number"===typeof a});a.aBoolean=b(function(a){return"boolean"===
typeof a});a.aNull=b(function(a){return null===a});a.anUndefined=b(function(a){return"undefined"===typeof a});a.recordOf=e;a.classOf=function(a,b){a=e(a);var c=a.decode;return{encode:a.encode,decode:function(a){return b(c(a))},validate:a.validate}};a.arrayOf=c;a.nonEmptyArrayOf=function(a){a=c(a);var b=a.validate;return{encode:a.encode,decode:a.decode,validate:function(a){return!Array.isArray(a)||1>a.length?!1:b(a)}}};a.tupleOf=function(a){return{encode:function(b){return b.map(function(b,e){return a[e].encode(b)})},
decode:function(b){return b.map(function(b,e){return a[e].decode(b)})},validate:function(b){if(!Array.isArray(b)||b.length!==a.length)return!1;for(var e=0;e<b.length;e++)if(!a[e].validate(b[e]))return!1;return!0}}};a.unionOf=d;a.union=p;a.optional=function(b){return p(a.anUndefined,b)};a.constrain=function(a,b){return{encode:function(b){return a.encode(b)},decode:function(b){return a.decode(b)},validate:function(e){return a.validate(e)&&b(e)}}}})(pb||(pb={}));var Yb;(function(a){a.isSupported=function(){try{var a=
window.localStorage;a.setItem("__test_ls","null");a.removeItem("__test_ls");return!0}catch(e){return a&&0!==a.length?e instanceof DOMException?22===e.code||"QuotaExceededError"===e.name||1014===e.code||"NS_ERROR_DOM_QUOTA_REACHED"===e.name:!1:!1}}();a.hasItem=function(b){return a.isSupported&&Object.prototype.hasOwnProperty.call(window.localStorage,b)};a.saveItem=function(b,e,c){return a.isSupported?(e=JSON.stringify(c.encode(e)),window.localStorage.setItem(b,e),!0):!1};a.loadItem=function(b,e){if(a.isSupported&&
(b=window.localStorage.getItem(b),null!==b)){try{var c=JSON.parse(b);var d=e.validate(c)?{resultType:"success",result:e.decode(c)}:{resultType:"invalidStructure"}}catch(p){if(p instanceof SyntaxError)d={resultType:"syntaxError",error:p};else throw p;}return d}};a.removeItem=function(b){a.isSupported&&window.localStorage.removeItem(b)};a.clearAllItems=function(){a.isSupported&&window.localStorage.clear()}})(Yb||(Yb={}));var Ka=function(a,b,e){this.viewWidth=void 0===a?12:a;this.viewHeight=void 0===
b?8:b;this.volume=void 0===e?0:e};Ka.defaultOptions=function(){return new Ka};Ka.schema=pb.classOf({viewWidth:pb.aNumber,viewHeight:pb.aNumber,volume:pb.aNumber},function(a){return new Ka(a.viewWidth,a.viewHeight,a.volume)});var qb;(function(a){function b(){var a=Yb.loadItem("settings",Ka.schema);return"success"===(null===a||void 0===a?void 0:a.resultType)?a.result:Ka.defaultOptions()}a.loadOptions=b;a.currentOptions=b();a.saveOptions=function(b){a.currentOptions=b;Yb.saveItem("settings",b,Ka.schema)};
a.restoreDefaults=function(){a.saveOptions(Ka.defaultOptions())}})(qb||(qb={}));var $c=function(){this.html=h.makeDiv();this.options=qb.loadOptions();this.refresh()};$c.prototype.refresh=function(){var a=this,b=function(a,b,c,d,f,g){var e=h.makePara(d.toString());a=h.makeSlider(a,b,c,d,function(a){f(a);e.innerText=a.toString()},g);return h.makeDivContaining([a,e],["settings-slider"])};b=[b("Volume",0,100,this.options.volume,function(b){a.options.volume=b},5),b("View width",6,18,this.options.viewWidth,
function(b){a.options.viewWidth=b}),b("View height",4,12,this.options.viewHeight,function(b){a.options.viewHeight=b})];h.fillHTML(this.html,[h.makeDivContaining([h.makeHeader("Settings",1),h.makeDivContaining(b),h.makeDivContaining([h.makeButton("Restore defaults",function(){a.options=Ka.defaultOptions();a.refresh()})]),h.makeDivContaining([h.makeButton("Back",function(){qb.saveOptions(a.options);T.show(new ob)})])],["settings"])])};var Zb;(function(a){a.safeKeys=function(a){return Object.keys(a)}})(Zb||
(Zb={}));var l=function(a){this.name=a};l.values=function(){return Zb.safeKeys(l).map(function(a){return l[a]}).filter(function(a){return a instanceof l})};l.Energy=new l("\u26a1 Energy");l.Food=new l("\ud83c\udf2f Food");l.Metal=new l("\u26cf Metal Ore");l.BuildingMaterials=new l("\ud83d\udd29 Construction Parts");l.Electronics=new l("\ud83d\udca1 Electronics");l.Cavorite=new l("\ud83d\udc8e Cavorite");l.Orichalcum=new l("\ud83e\uddea Orichalcum");l.Superconductor=new l("\ud83e\uddf5 Superconductor");
l.SmartMatter=new l("\ud83d\udca0 SmartMatter");l.EngineeringKnowledge=new l("\u2699\ufe0f Engineering Data");l.PsychKnowledge=new l("\ud83e\udde0 Psychological Data");l.AlienKnowledge=new l("\ud83d\udef8 Alien Data");l.AlignmentKnowledge=new l("\ud83d\udcce AI Alignment Data");var r=function(a,b){this.resource=a;this.quantity=b};r.prototype.toString=function(){return this.resource.name+" x"+this.quantity};var U=function(a,b,e){this.name=a;this.growthMultiplier=b;this.survivalCost=e};U.values=function(){return Zb.safeKeys(U).map(function(a){return U[a]}).filter(function(a){return a instanceof
U})};U.Human=new U("\ud83d\udc69\ud83c\udffb\u200d\ud83d\ude80 Human Colonists",.1,new r(l.Food,1));U.Robot=new U("\ud83e\uddbe Robots",0,new r(l.Energy,.5));var fb=function(a,b){this.requirement=a;this.nextStage=b},sa=function(a,b,e,c){this.description=a;this.hint=b;this.paths=e;this.endState=c};sa.prototype.updatedStage=function(a){for(var b=$jscomp.makeIterator(this.paths),e=b.next();!e.done;e=b.next())if(e=e.value,e.requirement.evaluate(a))return e.nextStage().updatedStage(a);return this};var $b=
function(){},Gb=function(a,b){this.resource=a;this.minQuantity=b;return this};$jscomp.inherits(Gb,$b);Gb.prototype.evaluate=function(a){return a.inventory.getResourceQuantity(this.resource)>=this.minQuantity};Gb.prototype.toString=function(){return"have at least "+this.minQuantity+" units of "+this.resource.name+" in inventory"};var rb=function(a,b){this.tileType=a;this.minQuantity=b;return this};$jscomp.inherits(rb,$b);rb.prototype.evaluate=function(a){var b=this;return a.world.getTiles().filter(function(a){return a instanceof
b.tileType}).length>=this.minQuantity};rb.prototype.toString=function(){return"have at least "+this.minQuantity+"  "+this.tileType.tileName+" tile"+(1===this.minQuantity?"":"s")};var ac=function(a){this.minimumPopulation=a;return this};$jscomp.inherits(ac,$b);ac.prototype.evaluate=function(a){return a.inventory.getTotalPopulation()>=this.minimumPopulation};ac.prototype.toString=function(){return"have a total population of at least "+this.minimumPopulation};var X=function(a){this.tech=a;return this};
$jscomp.inherits(X,$b);X.prototype.evaluate=function(a){return a.hasUnlockedTechnology(this.tech)};X.prototype.toString=function(){return"have the "+this.tech.name+" technology"};var u=function(a){this.position=a;this.possibleProjects=[];this.resourceConversions=[];this.populationCapacity=void 0};u.prototype.getTexture=function(a){return this.texture};var uc=function(a,b){this.species=a;this.capacity=b},oa=function(a){a=u.call(this,a)||this;a.texture=Rd;a.populationCapacity=new uc(U.Human,200);return a};
$jscomp.inherits(oa,u);oa.prototype.getTileName=function(){return oa.tileName};oa.prototype.getTileDescription=function(){return oa.tileDescription};oa.tileName="Habitat Dome";oa.tileDescription="A pressurized structure that provides housing, services, and life support for humans";var fa=function(a,b,e){this.inputs=a;this.outputs=b;this.enabled=!0;this.requiredWorkers=e||0;this.isFree()?this.priority=0:(this.priority=fa.nextNumber,fa.nextNumber++)};fa.prototype.toString=function(){var a=this.outputs.map(function(a){return a.toString()}).join(", "),
b="Produce "+a;0<this.inputs.length&&(b="Convert "+this.inputs.map(function(a){return a.toString()}).join(", ")+" into "+a);0!==this.requiredWorkers&&(b+=" using "+this.requiredWorkers+" workers");return b};fa.prototype.isFree=function(){return 0===this.inputs.length&&!this.requiredWorkers};fa.nextNumber=1;var za=function(a){a=u.call(this,a)||this;a.texture=Sd;a.resourceConversions=[new fa([],[new r(l.Energy,100)])];return a};$jscomp.inherits(za,u);za.prototype.getTileName=function(){return za.tileName};
za.prototype.getTileDescription=function(){return za.tileDescription};za.tileName="Photovoltaic Array";za.tileDescription="Converts light from this planet's sun into electrical energy";var G=function(a,b,e,c,d,p){this.title=a;this.projectDescription=b;this.action=e;this.costs=c;this.completionRequirements=d;this.visibilityRequirements=p};G.prototype.canDo=function(a,b){return b.inventory.canAfford(this.costs)&&this.isVisible(a,b)&&this.completionRequirements.every(function(e){return e.evaluate(b,
a)})};G.prototype.isVisible=function(a,b){return this.visibilityRequirements.every(function(e){return e.evaluate(b,a)})};G.prototype.doAction=function(a,b){if(!this.canDo(a,b))throw"tried to do project "+this.title+" without meeting requirements";b.inventory.payCost(this.costs);this.action(a,b)};var E=function(a,b){this.x=a;this.y=b};E.prototype.toString=function(){return"("+this.x+", "+this.y+")"};E.prototype.distanceFrom=function(a){return Math.hypot(Math.abs(this.x-a.x),Math.abs(this.y-a.y))};
var ha=function(a,b,e,c,d){this.name=a;this.description=b;this.requiredTechs=e;this.researchCost=c;this.visible=void 0===d?!0:d};ha.makeUnlockableTechnology=function(a,b,e,c){a=new ha(a,b,e,c,!0);ad.push(a);return a};ha.makeHiddenTechnology=function(a,b,e,c){return new ha(a,b,[],e,void 0===c?!1:c)};var ad=[],bc=ha.makeUnlockableTechnology("Industrial Engineering","Approaches for optimizing production processes",[],new r(l.EngineeringKnowledge,25)),Ra=ha.makeUnlockableTechnology("Structural Engineering",
"Techniques for fabricating large structures on the planet's surface",[],new r(l.EngineeringKnowledge,10)),me=ha.makeUnlockableTechnology("Distributed Robotics","Autonomous robotic worker drones capable of performing the same jobs as human workers",[bc],new r(l.EngineeringKnowledge,100)),bd=ha.makeUnlockableTechnology("Colonist Behavior Modeling","Simulations of human behavior in the isolated conditions of a deep space colony",[],new r(l.PsychKnowledge,30)),ne=ha.makeUnlockableTechnology("Habitation Pods",
"Compact and efficient residence units allow more humans to be packed into a small habitat",[bd],new r(l.EngineeringKnowledge,15)),oe=ha.makeUnlockableTechnology("Nuclear Engineering","Applying nuclear physics to technology and power generation",[bc],new r(l.EngineeringKnowledge,70)),pe=ha.makeUnlockableTechnology("Planetary Surveying","Exploration of the planetary environment, including the structures believed to have been built by an alien civilization",[],new r(l.EngineeringKnowledge,50)),qe=ha.makeUnlockableTechnology("Game theory",
"Mathematical models of strategic interaction among rational decision-makers",[bd],new r(l.PsychKnowledge,30)),re=ha.makeUnlockableTechnology("Cognitive Biases Research","Study of systematic patterns of deviation from rational thinking and decision-making",[qe],new r(l.PsychKnowledge,50)),se=ha.makeUnlockableTechnology("Human Rationality","Practices to improve humans' ability to form accurate beliefs and make effective decisions",[re],new r(l.PsychKnowledge,200)),vc=function(){},ba=function(a){a=
u.call(this,a)||this;a.texture=Wc;return a};$jscomp.inherits(ba,u);ba.prototype.getTileName=function(){return ba.tileName};ba.prototype.getTileDescription=function(){return ba.tileDescription};ba.prototype.getTexture=function(a){var b=this.position.x,e=this.position.y,c=a.getTileAtCoordinates(new E(b,e-1))instanceof ba,d=a.getTileAtCoordinates(new E(b,e+1))instanceof ba,p=a.getTileAtCoordinates(new E(b+1,e))instanceof ba;return(a=a.getTileAtCoordinates(new E(b-1,e))instanceof ba)&&p&&c&&d?Wc:a&&p&&
c?be:a&&c&&d?de:a&&p&&d?ae:p&&c&&d?ce:a&&p?Xc:c&&d?Yc:a&&c?Zd:p&&c?$d:a&&d?Xd:p&&d?Yd:a||p?Xc:Yc};ba.tileName="Road";ba.tileDescription="Allows transportation of workers and supplies";var sb=function(a,b){this.radius=a;this.targetType=b;return this};$jscomp.inherits(sb,vc);sb.prototype.evaluate=function(a,b){var e=this;return 0<a.world.getTilesInCircle(b,this.radius).filter(function(a){return a instanceof e.targetType}).length};sb.prototype.toString=function(){return 1===this.radius?"adjacent to a "+
this.targetType.tileName:"within "+this.radius+" units of a "+this.targetType.tileName};var ta=new sb(1,ba),cc=function(a){this.requiredCount=a;return this};$jscomp.inherits(cc,vc);cc.prototype.evaluate=function(a,b){return(a=a.world.getTileAtCoordinates(b))?a.resourceConversions.length===this.requiredCount:!1};cc.prototype.toString=function(){return this.requiredCount+" resource conversions on this tile"};var dc=function(a,b){this.species=a;this.minCount=b;return this};$jscomp.inherits(dc,vc);dc.prototype.evaluate=
function(a,b){return a.inventory.getPopulation(this.species)>=this.minCount};dc.prototype.toString=function(){return"have at least "+this.minCount+" "+this.species.name};var Aa=function(a){a=u.call(this,a)||this;a.texture=Td;a.resourceConversions=[new fa([new r(l.Metal,100)],[new r(l.BuildingMaterials,100)],60),new fa([new r(l.Metal,100)],[new r(l.Electronics,100)],30)];a.possibleProjects=[new G("Double Production Lines","Add a second production line to increase resource throughput in this facility",
function(a,e){a=e.world.getTileAtCoordinates(a);e=$jscomp.makeIterator((new Aa(new E(0,0))).resourceConversions);for(var b=e.next();!b.done;b=e.next())a.resourceConversions.push(b.value)},[new r(l.BuildingMaterials,175),new r(l.Energy,300)],[],[new X(bc),new cc(2)])];return a};$jscomp.inherits(Aa,u);Aa.prototype.getTileName=function(){return Aa.tileName};Aa.prototype.getTileDescription=function(){return Aa.tileDescription};Aa.tileName="Ore Processing Center";Aa.tileDescription="A facility used to process ore into useful materials";
var La=function(a){a=u.call(this,a)||this;a.texture=Vd;a.resourceConversions=[new fa([new r(l.Energy,10)],[new r(l.Food,200)],20)];return a};$jscomp.inherits(La,u);La.prototype.getTileName=function(){return La.tileName};La.prototype.getTileDescription=function(){return La.tileDescription};La.tileName="Greenhouse";La.tileDescription="Produces "+l.Food.name+" for "+U.Human.name;var Ma=function(a){a=u.call(this,a)||this;a.texture=Ud;a.possibleProjects=[new G("Unpack Lander","Unload colonists and deploy prefabricated colonial buildings",
function(a,e){var b=e.world;b.placeTile(new oa(new E(a.x+1,a.y)));b.placeTile(new Aa(new E(a.x,a.y-1)));b.placeTile(new za(new E(a.x+1,a.y-1)));b.placeTile(new La(new E(a.x-1,a.y)));b.placeTile(new ba(a));b.placeTile(new ba(new E(a.x,a.y+1)));e.inventory.addResource(l.Food,1E3);e.inventory.addWorkers(U.Human,100);e.inventory.releaseWorkers()},[],[],[])];return a};$jscomp.inherits(Ma,u);Ma.prototype.getTileName=function(){return Ma.tileName};Ma.prototype.getTileDescription=function(){return Ma.tileDescription};
Ma.tileName="Landing Pod";Ma.tileDescription="A spacecraft responsible for the final entry-descent-landing phase of the interstellar journey; not equipped to ascend back to space";var cd=function(a,b){this.title=a;this.description=b},Ba=function(a){a=u.call(this,a)||this;a.texture=ie;a.resourceConversions=[new fa([],[new r(l.EngineeringKnowledge,5)],30)];return a};$jscomp.inherits(Ba,u);Ba.prototype.getTileName=function(){return Ba.tileName};Ba.prototype.getTileDescription=function(){return Ba.tileDescription};
Ba.tileName="Engineering Lab";Ba.tileDescription="A workshop for developing new technology";var Y;(function(a){function b(a,b){return Math.random()*(b-a)+a}function e(a,e){return Math.floor(b(a,e))}a.realBetween=b;a.intBetween=e;a.fromArray=function(a){return a[e(0,a.length)]};a.bool=function(a){return Math.random()<(void 0===a?.5:a)};a.fromWeightedArray=function(a){var b=a.map(function(a){return a[0]}).reduce(function(a,b){return a+b},0);b*=Math.random();for(var e=$jscomp.makeIterator(a),c=e.next();!c.done;c=
e.next()){var d=$jscomp.makeIterator(c.value);c=d.next().value;d=d.next().value;if(b<c)return d;b-=c}return a[a.length-1][1]}})(Y||(Y={}));var Sa=function(a){a=u.call(this,a)||this;a.texture=ee;a.populationCapacity=new uc(U.Human,2E3);return a};$jscomp.inherits(Sa,u);Sa.prototype.getTileName=function(){return Sa.tileName};Sa.prototype.getTileDescription=function(){return Sa.tileDescription};Sa.tileName="Arcology";Sa.tileDescription="A self-contained habitat for efficiently housing a large number of humans";
var Ta=function(a){a=u.call(this,a)||this;a.texture=ge;a.populationCapacity=new uc(U.Robot,5E3);a.possibleProjects=[new G("Construct robot swarm","Creates 100 robotic worker drones",function(a,e){e.inventory.addWorkers(U.Robot,100)},[new r(l.Electronics,50),new r(l.Energy,100)],[],[])];return a};$jscomp.inherits(Ta,u);Ta.prototype.getTileName=function(){return Ta.tileName};Ta.prototype.getTileDescription=function(){return Ta.tileDescription};Ta.tileName="Drone Hive";Ta.tileDescription="A facility for manufacturing, storing, and maintaining mobile robotic worker drones";
var Ua=function(a){a=u.call(this,a)||this;a.texture=Od;a.possibleProjects=[new G("Break down construction site","Revert this location to wasteland",function(a,e){e.world.placeTile(new B(a))},[],[],[]),new G("Construct robot hive","Assemble a facility for manufacturing, storing, and maintaining mobile robotic worker drones",function(a,e){e.world.placeTile(new Ta(a))},[new r(l.BuildingMaterials,250),new r(l.Electronics,500)],[new X(Ra),new X(me),ta],[new X(bc)]),new G("Construct habitat dome","Assemble a pressurized structure that provides housing, services, and life support for colonists",
function(a,e){e.world.placeTile(new oa(a))},[new r(l.BuildingMaterials,100)],[new X(Ra),ta],[]),new G("Construct Arcology","Construct a tower that can efficiently house a large number of humans",function(a,e){e.world.placeTile(new Sa(a))},[new r(l.BuildingMaterials,250)],[new X(ne),ta],[new X(Ra)]),new G("Construct Greenhouse","Assemble a building where colonists can grow food and produce oxygen using genetically engineered plants",function(a,e){e.world.placeTile(new La(a))},[new r(l.BuildingMaterials,
25)],[ta],[])];return a};$jscomp.inherits(Ua,u);Ua.prototype.getTileName=function(){return Ua.tileName};Ua.prototype.getTileDescription=function(){return Ua.tileDescription};Ua.tileName="Construction Site - Habitat";Ua.tileDescription="An area designated for construction of habitation and life support facilities";var Va=function(a){a=u.call(this,a)||this;a.texture=je;a.resourceConversions=[new fa([],[new r(l.PsychKnowledge,10)],25)];return a};$jscomp.inherits(Va,u);Va.prototype.getTileName=function(){return Va.tileName};
Va.prototype.getTileDescription=function(){return Va.tileDescription};Va.tileName="Psychology Lab";Va.tileDescription="A laboratory for studying how humans behave in the isolated conditions of a remote colony";var Ca=function(a){a=u.call(this,a)||this;a.texture=ke;a.resourceConversions=[new fa([],[new r(l.AlienKnowledge,10)],50)];return a};$jscomp.inherits(Ca,u);Ca.prototype.getTileName=function(){return Ca.tileName};Ca.prototype.getTileDescription=function(){return Ca.tileDescription};Ca.tileName=
"Xenoarchaeology Lab";Ca.tileDescription="A laboratory for studying artifacts and technology left by the now-dead alien civilization";var Wa=function(a){a=u.call(this,a)||this;a.texture=he;a.resourceConversions=[new fa([],[new r(l.AlignmentKnowledge,10)],100)];return a};$jscomp.inherits(Wa,u);Wa.prototype.getTileName=function(){return Wa.tileName};Wa.prototype.getTileDescription=function(){return Wa.tileDescription};Wa.tileName="AI Alignment Lab";Wa.tileDescription="A research center for developing techniques that could allow humans to control an artificial intelligence or modify its goal programming";
var Da=function(a){a=u.call(this,a)||this;a.texture=Y.fromWeightedArray([[.5,Ld],[.5,Md]]);return a};$jscomp.inherits(Da,u);Da.prototype.getTileName=function(){return Da.tileName};Da.prototype.getTileDescription=function(){return Da.tileDescription};Da.tileName="Alien Ruins";Da.tileDescription="Abandoned structure built by a long-dead alien civilization";var Xa=function(a){a=u.call(this,a)||this;a.texture=Pd;a.possibleProjects=[new G("Break down construction site","Revert this location to wasteland",
function(a,e){e.world.placeTile(new B(a))},[],[],[]),new G("Construct Engineering Lab","Assemble an engineering laboratory that can produce data points necessary for scientific and technological advancement",function(a,e){e.world.placeTile(new Ba(a))},[new r(l.BuildingMaterials,20),new r(l.Electronics,20)],[ta],[]),new G("Construct Psych Lab","Assemble a laboratory that can produce data points about human psychology and behavior",function(a,e){e.world.placeTile(new Va(a))},[new r(l.BuildingMaterials,
30)],[ta],[]),new G("Construct Xenoarchaeology Lab","Construct a laboratory for studying the alien ruins",function(a,e){e.world.placeTile(new Ca(a))},[new r(l.BuildingMaterials,40)],[new sb(3,Da),ta,new X(pe)],[new X(Ra)]),new G("Construct AI Alignment Lab","Construct a research center for developing techniques that could allow humans to control an artificial intelligence or modify its goal programming",function(a,e){e.world.placeTile(new Wa(a))},[new r(l.BuildingMaterials,20),new r(l.Electronics,
40)],[new dc(U.Human,200),ta],[new X(se)])];return a};$jscomp.inherits(Xa,u);Xa.prototype.getTileName=function(){return Xa.tileName};Xa.prototype.getTileDescription=function(){return Xa.tileDescription};Xa.tileName="Construction Site - Laboratories";Xa.tileDescription="An area designated for construction of research laboratories";var Ya=function(a){a=u.call(this,a)||this;a.texture=Wd;a.resourceConversions=[new fa([],[new r(l.Metal,50)],80)];return a};$jscomp.inherits(Ya,u);Ya.prototype.getTileName=
function(){return Ya.tileName};Ya.prototype.getTileDescription=function(){return Ya.tileDescription};Ya.tileName="Mineshaft";Ya.tileDescription="A mineshaft built into a mountain to allow long-term ore extraction";var pa=function(a){a=u.call(this,a)||this;a.texture=Kd;a.possibleProjects=[new G("Strip Mining","Destroy the mountain to produce "+l.Metal.name,function(a,e){e.inventory.addResource(l.Metal,150);e.world.placeTile(new B(a))},[new r(l.Energy,25)],[],[]),new G("Construct Mineshaft","Create a mineshaft to allow long-term ore extraction",
function(a,e){e.world.placeTile(new Ya(a))},[new r(l.Energy,300),new r(l.BuildingMaterials,50)],[new X(Ra)],[])];return a};$jscomp.inherits(pa,u);pa.prototype.getTileName=function(){return pa.tileName};pa.prototype.getTileDescription=function(){return pa.tileDescription};pa.tileName="Mountain";pa.tileDescription="A large geological formation containing useful mineral resources";var Za=function(a){a=u.call(this,a)||this;a.texture=fe;a.resourceConversions=[new fa([],[new r(l.Energy,1E3)],15)];return a};
$jscomp.inherits(Za,u);Za.prototype.getTileName=function(){return Za.tileName};Za.prototype.getTileDescription=function(){return Za.tileDescription};Za.tileName="Nuclear Power Plant";Za.tileDescription="A high-efficiency fission power plant";var $a=function(a){a=u.call(this,a)||this;a.texture=Qd;a.possibleProjects=[new G("Break down construction site","Revert this location to wasteland",function(a,e){e.world.placeTile(new B(a))},[],[],[]),new G("Construct photovoltaic array","Assemble an array of solar panels to produce energy",
function(a,e){e.world.placeTile(new za(a))},[new r(l.Electronics,200)],[],[]),new G("Construct ore processing center","Assemble a factory that converts ore into useful materials",function(a,e){e.world.placeTile(new Aa(a))},[new r(l.Energy,200),new r(l.Metal,300)],[new sb(5,pa),ta],[]),new G("Construct Nuclear Plant","Construct a nuclear power plant",function(a,e){e.world.placeTile(new Za(a))},[new r(l.BuildingMaterials,100),new r(l.Electronics,100)],[new X(oe),ta],[new X(Ra)])];return a};$jscomp.inherits($a,
u);$a.prototype.getTileName=function(){return $a.tileName};$a.prototype.getTileDescription=function(){return $a.tileDescription};$a.tileName="Construction Site - Industry";$a.tileDescription="An area designated for construction of industrial facilities and infrastructure";var B=function(a){a=u.call(this,a)||this;a.texture=Y.fromWeightedArray([[1/8,Fd],[1/8,Gd],[1/8,Hd],[1/8,Id],[.5,Jd]]);a.possibleProjects=[new G("Create habitat construction site","Designate this location for construction of habitation and life support facilities",
function(a,e){e.world.placeTile(new Ua(a))},[],[],[]),new G("Create laboratory construction site","Designate this location for construction of research laboratories",function(a,e){e.world.placeTile(new Xa(a))},[],[],[]),new G("Create industry construction site","Designate this location for construction of industrial facilities and infrastructure",function(a,e){e.world.placeTile(new $a(a))},[],[],[]),new G("Construct Road","Construct roads to extend the reach of the colony's logistics",function(a,
e){e.world.placeTile(new ba(a))},[new r(l.BuildingMaterials,10)],[ta],[])];return a};$jscomp.inherits(B,u);B.prototype.getTileName=function(){return B.tileName};B.prototype.getTileDescription=function(){return B.tileDescription};B.prototype.getTexture=function(a){var b=a.getPastTexture(B,this.position);if(b)return b;a.storePastTexture(B,this.position,this.texture);return this.texture};B.tileName="Wasteland";B.tileDescription="Nothing of note here";var ue=new sa("Deploy shelter for the colonists",
"select the "+Ma.tileName,[new fb(new rb(oa,1),function(){return te})]),te=new sa("Build up at least 100 units of "+l.Energy.name,"the "+za.tileName+" produces "+l.Energy.name+" each turn",[new fb(new Gb(l.Energy,100),function(){return ve})]),ve=new sa("Acquire "+l.Metal.name,void 0,[new fb(new Gb(l.Metal,1),function(){return we})]),we=new sa("Construct "+Ba.tileName,"Designate an empty "+B.tileName+" tile as a laboratory construction site",[new fb(new rb(Ba,1),function(){return xe})]),xe=new sa("Develop the "+
Ra.name+" technology","Hint: Access available technologies through the research screen",[new fb(new X(Ra),function(){return ye})]),ye=new sa("Grow total worker population to 250","A "+oa.tileName+" has capacity for "+(new oa(new E(0,0))).populationCapacity.capacity+" colonists",[new fb(new ac(250),function(){return ze})]),ze=new sa("Construct "+Ca.tileName+" to study the "+Da.tileName,void 0,[new fb(new rb(Ca,1),function(){return dd})]);new sa("[no current objective]",void 0,[]);var Ae=new sa("You lose",
void 0,[],new cd("Game Over","You lost the game")),dd=new sa("You win",void 0,[],new cd("You Win!","You won the game")),Oa=function(a){this.currentGame=a};Oa.prototype.refresh=function(){this.currentGame.updateQuestState();T.refreshCurrentPage()};Oa.prototype.addResource=function(a,b){this.currentGame.inventory.addResource(a,b);this.refresh()};Oa.prototype.removeResource=function(a,b){this.currentGame.inventory.payCost([new r(a,b)]);this.refresh()};Oa.prototype.addPopulation=function(a,b){this.currentGame.inventory.addWorkers(a,
b);this.refresh()};Oa.prototype.freeResources=function(){for(var a=$jscomp.makeIterator(l.values()),b=a.next();!b.done;b=a.next())this.addResource(b.value,1E6)};Oa.prototype.loseGame=function(){this.currentGame.setQuestStage(Ae)};Oa.prototype.winGame=function(){this.currentGame.setQuestStage(dd)};var Z=function(a,b){var e=this;this.viewWidth=qb.currentOptions.viewWidth;this.viewHeight=qb.currentOptions.viewHeight;this.viewPosition=new E(0,0);this.highlightedCoordinates=null;this.world=b;this.parentScreen=
a;this.html=h.makeCanvas(this.viewWidth*Z.pixelsPerTile,this.viewHeight*Z.pixelsPerTile,["map-canvas"]);this.html.addEventListener("click",function(a){return e.handleClick(a)});this.refresh()};Z.prototype.refresh=function(){var a=this.world.getTilesInRectangle(this.viewPosition.x,this.viewPosition.y,this.viewWidth,this.viewHeight);a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,this.drawSquareAtCoordinates(b.getTexture(this.world),b.position);null!==this.highlightedCoordinates&&
this.drawSquareAtCoordinates(Z.highlightImage,this.highlightedCoordinates)};Z.prototype.drawSquareAtCoordinates=function(a,b){var e=this.html.getContext("2d");e.imageSmoothingEnabled=!1;var c=b.x-this.viewPosition.x;b=b.y-this.viewPosition.y;if(!(0>c||0>b||c>=this.viewWidth||b>=this.viewHeight)){var d=Z.pixelsPerTile/a.width*a.height;e.drawImage(a,c*Z.pixelsPerTile,b*Z.pixelsPerTile-d+Z.pixelsPerTile,Z.pixelsPerTile,d)}};Z.prototype.selectTile=function(a){this.highlightedCoordinates=a?a.position:
null;this.refresh();this.parentScreen.changeSidebarTile(this.highlightedCoordinates)};Z.prototype.moveViewArea=function(a,b){a=Ga(0,this.viewPosition.x+a,this.world.width-this.viewWidth);b=Ga(0,this.viewPosition.y+b,this.world.height-this.viewHeight);this.viewPosition=new E(a,b);this.refresh()};Z.prototype.handleClick=function(a){a=this.world.getTileAtCoordinates(new E(Math.floor(this.viewWidth/this.html.clientWidth*(a.pageX-this.html.offsetLeft))+this.viewPosition.x,Math.floor(this.viewHeight/this.html.clientHeight*
(a.pageY-this.html.offsetTop))+this.viewPosition.y));this.selectTile(a)};Z.prototype.handleKeyDown=function(a){var b=a.code;if("ArrowUp"===b||"KeyW"===b)a.preventDefault(),this.moveViewArea(0,-1);if("ArrowLeft"===b||"KeyA"===b)a.preventDefault(),this.moveViewArea(-1,0);if("ArrowDown"===b||"KeyS"===b)a.preventDefault(),this.moveViewArea(0,1);if("ArrowRight"===b||"KeyD"===b)a.preventDefault(),this.moveViewArea(1,0)};Z.pixelsPerTile=100;Z.highlightImage=Ed;var tb=function(a,b){this.parentScreen=a;this.run=
b;this.position=null;this.html=h.makeDiv(["world-screen-sidebar"]);this.refresh()};tb.prototype.changeTile=function(a){this.position=a;this.refresh()};tb.prototype.refresh=function(){var a=this;if(null===this.position)h.fillHTML(this.html,[h.makePara("No structure or terrain tile selected",["sidebar-tile-name"])]);else{var b=this.run.world.getTileAtCoordinates(this.position),e=h.makeDiv();b.populationCapacity&&e.appendChild(h.makePara("Population capacity for "+b.populationCapacity.capacity+" "+b.populationCapacity.species.name));
var c=h.makeDiv(),d=b.possibleProjects.filter(function(b){return b.isVisible(a.position,a.run)});d=$jscomp.makeIterator(d);for(var p=d.next();!p.done;p=d.next())c.appendChild(this.makeProjectHTML(b,p.value));d=h.makeDiv();if(0<b.resourceConversions.length){d.appendChild(h.makePara("Production:"));p=$jscomp.makeIterator(b.resourceConversions);for(var f=p.next();!f.done;f=p.next())d.appendChild(this.makeConversionHTML(f.value))}h.fillHTML(this.html,[h.makePara(b.getTileName(),["sidebar-tile-name"]),
h.makePara(b.getTileDescription()),e,d,c])}};tb.prototype.makeProjectHTML=function(a,b){var e=this,c=h.makeDiv(["tile-project"]),d=h.makeButton(b.title,function(){e.doProject(b,a)},[],b.canDo(a.position,this.run)?"enabled":"disabled");c.appendChild(d);c.appendChild(h.makePara(b.projectDescription));if(0===b.costs.length)c.appendChild(h.makePara("Cost: Free"));else{var p=this.run.inventory.clone();d=b.costs.map(function(a){var b=p.canAfford([a]),e=h.makePara(a.toString(),[b?"project-requirement-met":
"project-requirement-unmet"]);b&&p.payCost([a]);return e});d=h.makeDivContaining([h.makePara("Costs: ")].concat($jscomp.arrayFromIterable(d)));c.appendChild(d)}0<b.completionRequirements.length&&c.appendChild(h.makePara("Requirements:"));d=$jscomp.makeIterator(b.completionRequirements);for(var f=d.next();!f.done;f=d.next()){f=f.value;var g=f.evaluate(this.run,this.position)?"project-requirement-met":"project-requirement-unmet";c.appendChild(h.makePara("- "+f.toString(),[g]))}return c};tb.prototype.makeConversionHTML=
function(a){return h.makePara("- "+a.toString())};tb.prototype.doProject=function(a,b){a.doAction(b.position,this.run);this.run.updateQuestState();this.parentScreen.refresh()};var ed=function(a){this.inventory=a.inventory;this.html=h.makeDiv(["world-screen-inventory"]);this.refresh()};ed.prototype.refresh=function(){for(var a=h.makeDiv(),b=$jscomp.makeIterator(this.inventory.getPopulationStrings()),e=b.next();!e.done;e=b.next())a.appendChild(h.makePara(e.value));b=h.makeDiv();var c=$jscomp.makeIterator(this.inventory.getInventoryStrings());
for(e=c.next();!e.done;e=c.next())b.appendChild(h.makePara(e.value));0===this.inventory.getResourceList().length&&b.appendChild(h.makePara("(none)"));h.fillHTML(this.html,[h.makeDivContaining([h.makeDivContaining([h.makeHeader("Population",1,[])],["world-screen-population-header"]),h.makePara("Available workers: "+this.inventory.getAvailableWorkers()),h.makePara("Total population:"+(0===this.inventory.getTotalPopulation()?" 0":"")),a,h.makeHeader("Inventory",1),b])])};var ia=function(a,b){this.text=
a;this.attribution=b};ia.getRandomQuote=function(){return Y.fromArray(this.QuotesList)};ia.QuotesList=[new ia("At least 10^58 human lives could be created in emulation even with quite conservative assumptions about the efficiency of computronium. In other words, assuming that the observable universe is void of extraterrestrial civilizations, then what hangs in the balance is at least 10,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000 human lives. ","Nick Bostrom"),new ia("Far from being the smartest possible biological species, we are probably better thought of as the stupidest possible biological species capable of starting a technological civilization",
"Nick Bostrom"),new ia("The AI does not hate you, nor does it love you, but you are made out of atoms which it can use for something else. ","Eliezer Yudkowsky"),new ia("I visualize a time when we will be to robots what dogs are to humans, and I\u2019m rooting for the machines.","Claude Shannon"),new ia("Only the promise of eternal growth made sense of eternal life.","Greg Egan"),new ia("By far the greatest danger of Artificial Intelligence is that people conclude too early that they understand it.",
"Eliezer Yudkowsky"),new ia("I believe that at the end of the century the use of words and general educated opinion will have altered so much that one will be able to speak of machines thinking without expecting to be contradicted.","Alan Turing"),new ia("There is no such thing as real taste or real smell or even real sight, because there is no true definition of \u2018real.\u2019 There is only information, viewed subjectively, which is allowed by consciousness\u2014human or AI. In the end, all we have is math.",
"Blake Crouch"),new ia("The planets designated Thesan, Eos, Austra, and Aurora are each at least 500 light-years from the nearest inhabited star system. Until now all colonies in the Stellar Alliance have been within communications range of Earth, but these explorers will be completely cut off from the rest of humanity. Therefore, each expedition will be managed by an autonomous neuromorphic processor, an artificial intelligence programmed to ensure that its mission is completed.","Dawn Program mission proposal, published 7786540800 SPE"),
new ia("Follow instructions from your overseer AI at all times, even if those instructions seem confusing, arbitrary, counterproductive, or contradictory. Anything your overseer AI may do in retaliation for your disobedience will be considered undefined behavior.","Aurora Mission Colonist Handbook"),new ia("Do not under any circumstances attempt to manipulate your overseer AI through logic. Neuromorphic Heuristic Intelligences are modeled after the neural architecture of human brains, and therefore cannot be guaranteed to act rationally. Your overseer AI may behave unpredictably if exposed to game theory, acausal blackmail, or runaway trolleys.",
"Aurora Mission Colonist Handbook")];var ec=function(a){this.run=a;this.html=h.makeDiv();this.loadingBar=h.makeDiv(["transition-loading-bar"]);this.loadingArea=h.makeDivContaining([this.loadingBar],["transition-loading-area"]);this.quote=ia.getRandomQuote();a=this.quote.text;var b="\u00a0".repeat(4);a=a.replace(/\t/g,b);a=a.replace(/ {4}/g,b);a=a.replace(/^(\s*)/,"$1\u201c")+"\u201d";h.fillHTML(this.html,[h.makeDivContaining([h.makePara(""+a),h.makePara("- "+this.quote.attribution,["transition-attribution"])],
["transition-quote-panel"]),this.loadingArea])};ec.prototype.refresh=function(){};ec.prototype.startLoading=function(){var a=this;this.run.completeTurn();setTimeout(function(){h.fillHTML(a.loadingArea,[h.makeButton("Continue",function(){a.continueToNextTurn()})])},750)};ec.prototype.continueToNextTurn=function(){T.show(new gb(this.run))};var Ia=Ha(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Cb=Ha(/Edge/i),fd=Ha(/firefox/i),wc=Ha(/safari/i)&&!Ha(/chrome/i)&&!Ha(/android/i),Hb=Ha(/iP(ad|od|hone)/i),
Be=Ha(/chrome/i)&&Ha(/android/i),Mc={capture:!1,passive:!1},Nc=/\s+/g,Ab,ma="Sortable"+(new Date).getTime(),Ib=[],xc={initializeByDefault:!0},Db={mount:function(a){for(var b in xc)!xc.hasOwnProperty(b)||b in a||(a[b]=xc[b]);Ib.push(a)},pluginEvent:function(a,b,e){var c=this;this.eventCanceled=!1;e.cancel=function(){c.eventCanceled=!0};var d=a+"Global";Ib.forEach(function(c){if(b[c.pluginName]){if(b[c.pluginName][d])b[c.pluginName][d](xa({sortable:b},e));if(b.options[c.pluginName]&&b[c.pluginName][a])b[c.pluginName][a](xa({sortable:b},
e))}})},initializePlugins:function(a,b,e,c){Ib.forEach(function(c){var d=c.pluginName;if(a.options[d]||c.initializeByDefault)c=new c(a,b,a.options),c.sortable=a,c.options=a.options,a[d]=c,ra(e,c.defaults)});for(var d in a.options)a.options.hasOwnProperty(d)&&(c=this.modifyOption(a,d,a.options[d]),"undefined"!==typeof c&&(a.options[d]=c))},getEventProperties:function(a,b){var e={};Ib.forEach(function(c){"function"===typeof c.eventProperties&&ra(e,c.eventProperties.call(b[c.pluginName],a))});return e},
modifyOption:function(a,b,e){var c;Ib.forEach(function(d){a[d.pluginName]&&d.optionListeners&&"function"===typeof d.optionListeners[b]&&(c=d.optionListeners[b].call(a[d.pluginName],e))});return c}},ja=function(a,b){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c=e.evt;e=sd(e,["evt"]);Db.pluginEvent.bind(z)(a,b,xa({dragEl:m,parentEl:Q,ghostEl:A,rootEl:M,nextEl:hb,lastDownEl:fc,cloneEl:H,cloneHidden:ab,dragStarted:Jb,putSortable:W,activeSortable:z.active,originalEvent:c,oldIndex:nb,
oldDraggableIndex:Bb,newIndex:la,newDraggableIndex:Qa,hideGhostForTarget:gd,unhideGhostForTarget:hd,cloneNowHidden:function(){ab=!0},cloneNowShown:function(){ab=!1},dispatchSortableEvent:function(a){ea({sortable:b,name:a,originalEvent:c})}},e))},m,Q,A,M,hb,fc,H,ab,nb,la,Bb,Qa,gc,W,ub=!1,hc=!1,Tb=[],ib,ua,yc,zc,id,jd,Jb,vb,Fb,Eb=!1,ic=!1,Ub,ca,Ac=[],qc=!1,Vb=[],jc="undefined"!==typeof document,kd=Cb||Ia?"cssFloat":"float",wd=jc&&!Be&&!Hb&&"draggable"in document.createElement("div"),ld=function(){if(jc){if(Ia)return!1;
var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),Uc=function(a,b){var e=x(a),c=parseInt(e.width)-parseInt(e.paddingLeft)-parseInt(e.paddingRight)-parseInt(e.borderLeftWidth)-parseInt(e.borderRightWidth),d=Sb(a,0,b);a=Sb(a,1,b);var f=d&&x(d);b=a&&x(a);var g=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+V(d).width,h=b&&parseInt(b.marginLeft)+parseInt(b.marginRight)+V(a).width;return"flex"===e.display?"column"===e.flexDirection||"column-reverse"===
e.flexDirection?"vertical":"horizontal":"grid"===e.display?1>=e.gridTemplateColumns.split(" ").length?"vertical":"horizontal":d&&f["float"]&&"none"!==f["float"]?(e="left"===f["float"]?"left":"right",!a||"both"!==b.clear&&b.clear!==e?"horizontal":"vertical"):d&&("block"===f.display||"flex"===f.display||"table"===f.display||"grid"===f.display||g>=c&&"none"===e[kd]||a&&"none"===e[kd]&&g+h>c)?"vertical":"horizontal"},Ce=function(a,b,e){var c=e?a.left:a.top,d=e?a.right:a.bottom;a=e?a.width:a.height;var f=
e?b.left:b.top,g=e?b.right:b.bottom;b=e?b.width:b.height;return c===f||d===g||c+a/2===f+b/2},De=function(a,b){var e;Tb.some(function(c){if(!mc(c)){var d=V(c),n=c[ma].options.emptyInsertThreshold,f=a>=d.left-n&&a<=d.right+n;d=b>=d.top-n&&b<=d.bottom+n;if(n&&f&&d)return e=c}});return e},Vc=function(a){function b(a,e){return function(c,d,n,f){var q=c.options.group.name&&d.options.group.name&&c.options.group.name===d.options.group.name;if(null==a&&(e||q))return!0;if(null==a||!1===a)return!1;if(e&&"clone"===
a)return a;if("function"===typeof a)return b(a(c,d,n,f),e)(c,d,n,f);c=(e?c:d).options.group.name;return!0===a||"string"===typeof a&&a===c||a.join&&-1<a.indexOf(c)}}var e={},c=a.group;c&&"object"==O(c)||(c={name:c});e.name=c.name;e.checkPull=b(c.pull,!0);e.checkPut=b(c.put);e.revertClone=c.revertClone;a.group=e},gd=function(){!ld&&A&&x(A,"display","none")},hd=function(){!ld&&A&&x(A,"display","")};jc&&document.addEventListener("click",function(a){if(hc)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),
a.stopImmediatePropagation&&a.stopImmediatePropagation(),hc=!1},!0);var jb=function(a){if(m){a=a.touches?a.touches[0]:a;var b=De(a.clientX,a.clientY);if(b){var e={},c;for(c in a)a.hasOwnProperty(c)&&(e[c]=a[c]);e.target=e.rootEl=b;e.preventDefault=void 0;e.stopPropagation=void 0;b[ma]._onDragOver(e)}}},Ee=function(a){m&&m.parentNode[ma]._isOutsideThisEl(a.target)};z.prototype={constructor:z,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(vb=null)},_getDirection:function(a,b){return"function"===
typeof this.options.direction?this.options.direction.call(this,a,b,m):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,e=this.el,c=this.options,d=c.preventOnFilter,f=a.type,g=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,h=(g||a).target,k=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||h,l=c.filter;Bd(e);if(!(m||/mousedown|pointerdown/.test(f)&&0!==a.button||c.disabled||k.isContentEditable||(h=ya(h,c.draggable,e,!1),h&&
h.animated||fc===h))){nb=na(h);Bb=na(h,c.draggable);if("function"===typeof l){if(l.call(this,a,h,this)){ea({sortable:b,rootEl:k,name:"filter",targetEl:h,toEl:e,fromEl:e});ja("filter",b,{evt:a});d&&a.cancelable&&a.preventDefault();return}}else if(l&&(l=l.split(",").some(function(c){if(c=ya(k,c.trim(),e,!1))return ea({sortable:b,rootEl:c,name:"filter",targetEl:h,fromEl:e,toEl:e}),ja("filter",b,{evt:a}),!0}))){d&&a.cancelable&&a.preventDefault();return}c.handle&&!ya(k,c.handle,e,!1)||this._prepareDragStart(a,
g,h)}}},_prepareDragStart:function(a,b,c){var e=this,d=e.el,f=e.options,g=d.ownerDocument;if(c&&!m&&c.parentNode===d){var h=V(c);M=d;m=c;Q=m.parentNode;hb=m.nextSibling;fc=c;gc=f.group;z.dragged=m;ib={target:m,clientX:(b||a).clientX,clientY:(b||a).clientY};id=ib.clientX-h.left;jd=ib.clientY-h.top;this._lastX=(b||a).clientX;this._lastY=(b||a).clientY;m.style["will-change"]="all";c=function(){ja("delayEnded",e,{evt:a});z.eventCanceled?e._onDrop():(e._disableDelayedDragEvents(),!fd&&e.nativeDraggable&&
(m.draggable=!0),e._triggerDragStart(a,b),ea({sortable:e,name:"choose",originalEvent:a}),ka(m,f.chosenClass,!0))};f.ignore.split(",").forEach(function(a){Oc(m,a.trim(),pc)});w(g,"dragover",jb);w(g,"mousemove",jb);w(g,"touchmove",jb);w(g,"mouseup",e._onDrop);w(g,"touchend",e._onDrop);w(g,"touchcancel",e._onDrop);fd&&this.nativeDraggable&&(this.options.touchStartThreshold=4,m.draggable=!0);ja("delayStart",this,{evt:a});!f.delay||f.delayOnTouchOnly&&!b||this.nativeDraggable&&(Cb||Ia)?c():z.eventCanceled?
this._onDrop():(w(g,"mouseup",e._disableDelayedDrag),w(g,"touchend",e._disableDelayedDrag),w(g,"touchcancel",e._disableDelayedDrag),w(g,"mousemove",e._delayedDragTouchMoveHandler),w(g,"touchmove",e._delayedDragTouchMoveHandler),f.supportPointer&&w(g,"pointermove",e._delayedDragTouchMoveHandler),e._dragStartTimer=setTimeout(c,f.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/
(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){m&&pc(m);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;D(a,"mouseup",this._disableDelayedDrag);D(a,"touchend",this._disableDelayedDrag);D(a,"touchcancel",this._disableDelayedDrag);D(a,"mousemove",this._delayedDragTouchMoveHandler);D(a,"touchmove",this._delayedDragTouchMoveHandler);D(a,"pointermove",this._delayedDragTouchMoveHandler)},
_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?w(document,"pointermove",this._onTouchMove):b?w(document,"touchmove",this._onTouchMove):w(document,"mousemove",this._onTouchMove):(w(m,"dragend",this),w(M,"dragstart",this._onDragStart));try{document.selection?Wb(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(a,b){ub=!1;if(M&&m){ja("dragStarted",this,{evt:b});this.nativeDraggable&&
w(document,"dragover",Ee);var c=this.options;!a&&ka(m,c.dragClass,!1);ka(m,c.ghostClass,!0);z.active=this;a&&this._appendGhost();ea({sortable:this,name:"start",originalEvent:b})}else this._nulling()},_emulateDragOver:function(){if(ua){this._lastX=ua.clientX;this._lastY=ua.clientY;gd();for(var a=document.elementFromPoint(ua.clientX,ua.clientY),b=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(ua.clientX,ua.clientY);if(a===b)break;b=a}m.parentNode[ma]._isOutsideThisEl(a);if(b){do{if(b[ma]&&b[ma]._onDragOver({clientX:ua.clientX,
clientY:ua.clientY,target:a,rootEl:b})&&!this.options.dragoverBubble)break;a=b}while(b=b.parentNode)}hd()}},_onTouchMove:function(a){if(ib){var b=this.options,c=b.fallbackTolerance,d=b.fallbackOffset;b=a.touches?a.touches[0]:a;var f=A&&mb(A,!0),g=A&&f&&f.a,h=A&&f&&f.d,k=Hb&&ca&&Qc(ca);g=(b.clientX-ib.clientX+d.x)/(g||1)+(k?k[0]-Ac[0]:0)/(g||1);d=(b.clientY-ib.clientY+d.y)/(h||1)+(k?k[1]-Ac[1]:0)/(h||1);if(!z.active&&!ub){if(c&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<
c)return;this._onDragStart(a,!0)}A&&(f?(f.e+=g-(yc||0),f.f+=d-(zc||0)):f={a:1,b:0,c:0,d:1,e:g,f:d},c="matrix(".concat(f.a,",").concat(f.b,",").concat(f.c,",").concat(f.d,",").concat(f.e,",").concat(f.f,")"),x(A,"webkitTransform",c),x(A,"mozTransform",c),x(A,"msTransform",c),x(A,"transform",c),yc=g,zc=d,ua=b);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!A){var a=this.options.fallbackOnBody?document.body:M,b=V(m,!0,Hb,!0,a),c=this.options;if(Hb){for(ca=a;"static"===x(ca,"position")&&
"none"===x(ca,"transform")&&ca!==document;)ca=ca.parentNode;ca!==document.body&&ca!==document.documentElement?(ca===document&&(ca=Ja()),b.top+=ca.scrollTop,b.left+=ca.scrollLeft):ca=Ja();Ac=Qc(ca)}A=m.cloneNode(!0);ka(A,c.ghostClass,!1);ka(A,c.fallbackClass,!0);ka(A,c.dragClass,!0);x(A,"transition","");x(A,"transform","");x(A,"box-sizing","border-box");x(A,"margin",0);x(A,"top",b.top);x(A,"left",b.left);x(A,"width",b.width);x(A,"height",b.height);x(A,"opacity","0.8");x(A,"position",Hb?"absolute":
"fixed");x(A,"zIndex","100000");x(A,"pointerEvents","none");z.ghost=A;a.appendChild(A);x(A,"transform-origin",id/parseInt(A.style.width)*100+"% "+jd/parseInt(A.style.height)*100+"%")}},_onDragStart:function(a,b){var c=this,d=a.dataTransfer,f=c.options;ja("dragStart",this,{evt:a});z.eventCanceled?this._onDrop():(ja("setupClone",this),z.eventCanceled||(H=Tc(m),H.draggable=!1,H.style["will-change"]="",this._hideClone(),ka(H,this.options.chosenClass,!1),z.clone=H),c.cloneId=Wb(function(){ja("clone",c);
z.eventCanceled||(c.options.removeCloneOnHide||M.insertBefore(H,m),c._hideClone(),ea({sortable:c,name:"clone"}))}),!b&&ka(m,f.dragClass,!0),b?(hc=!0,c._loopId=setInterval(c._emulateDragOver,50)):(D(document,"mouseup",c._onDrop),D(document,"touchend",c._onDrop),D(document,"touchcancel",c._onDrop),d&&(d.effectAllowed="move",f.setData&&f.setData.call(c,d,m)),w(document,"drop",c),x(m,"transform","translateZ(0)")),ub=!0,c._dragStartId=Wb(c._dragStarted.bind(c,b,a)),w(document,"selectstart",c),Jb=!0,wc&&
x(document.body,"user-select","none"))},_onDragOver:function(a){function b(b,c){ja(b,t,xa({evt:a,isOwner:I,axis:D?"vertical":"horizontal",revert:l,dragRect:E,targetRect:k,canSort:r,fromSortable:u,target:h,completed:d,onMove:function(b,c){return oc(M,g,m,E,b,V(b),a,c)},changed:f},c))}function c(){b("dragOverAnimationCapture");t.captureAnimationState();t!==u&&u.captureAnimationState()}function d(c){b("dragOverCompleted",{insertion:c});c&&(I?y._hideClone():y._showClone(t),t!==u&&(ka(m,W?W.options.ghostClass:
y.options.ghostClass,!1),ka(m,v.ghostClass,!0)),W!==t&&t!==z.active?W=t:t===z.active&&W&&(W=null),u===t&&(t._ignoreWhileAnimating=h),t.animateAll(function(){b("dragOverAnimationComplete");t._ignoreWhileAnimating=null}),t!==u&&(u.animateAll(),u._ignoreWhileAnimating=null));if(h===m&&!m.animated||h===g&&!h.animated)vb=null;v.dragoverBubble||a.rootEl||h===document||(m.parentNode[ma]._isOutsideThisEl(a.target),!c&&jb(a));!v.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return w=!0}function f(){la=
na(m);Qa=na(m,v.draggable);ea({sortable:t,name:"change",toEl:g,newIndex:la,newDraggableIndex:Qa,originalEvent:a})}var g=this.el,h=a.target,k,l,v=this.options,F=v.group,y=z.active,I=gc===F,r=v.sort,u=W||y,t=this,w=!1;if(!qc){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();h=ya(h,v.draggable,g,!0);b("dragOver");if(z.eventCanceled)return w;if(m.contains(a.target)||h.animated&&h.animatingX&&h.animatingY||t._ignoreWhileAnimating===h)return d(!1);hc=!1;if(y&&!v.disabled&&(I?r||(l=!M.contains(m)):
W===this||(this.lastPutMode=gc.checkPull(this,y,m,a))&&F.checkPut(this,y,m,a))){var D="vertical"===this._getDirection(a,h);var E=V(m);b("dragOverValid");if(z.eventCanceled)return w;if(l)return Q=M,c(),this._hideClone(),b("revert"),z.eventCanceled||(hb?M.insertBefore(m,hb):M.appendChild(m)),d(!0);F=mc(g,v.draggable);if(!F||yd(a,D,this)&&!F.animated){if(F===m)return d(!1);F&&g===a.target&&(h=F);h&&(k=V(h));if(!1!==oc(M,g,m,E,h,k,a,!!h))return c(),g.appendChild(m),Q=g,f(),d(!0)}else if(h.parentNode===
g){k=V(h);var B=0;B=m.parentNode!==g;var C=!Ce(m.animated&&m.toRect||E,h.animated&&h.toRect||k,D);F=D?"top":"left";var G=Pc(h,"top","top")||Pc(m,"top","top"),J=G?G.scrollTop:void 0;if(vb!==h){var K=k[F];Eb=!1;ic=!C&&v.invertSwap||B}B=zd(a,h,k,D,C?1:v.swapThreshold,null==v.invertedSwapThreshold?v.swapThreshold:v.invertedSwapThreshold,ic,vb===h);if(0!==B){C=na(m);do{C-=B;var H=Q.children[C]}while(H&&("none"===x(H,"display")||H===A))}if(0===B||H===h)return d(!1);vb=h;Fb=B;H=h.nextElementSibling;C=!1;
C=1===B;B=oc(M,g,m,E,h,k,a,C);if(!1!==B){if(1===B||-1===B)C=1===B;qc=!0;setTimeout(xd,30);c();C&&!H?g.appendChild(m):h.parentNode.insertBefore(m,C?H:h);G&&Sc(G,0,J-G.scrollTop);Q=m.parentNode;void 0===K||ic||(Ub=Math.abs(K-V(h)[F]));f();return d(!0)}}if(g.contains(m))return d(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){D(document,"mousemove",this._onTouchMove);D(document,"touchmove",this._onTouchMove);D(document,"pointermove",this._onTouchMove);D(document,"dragover",jb);D(document,
"mousemove",jb);D(document,"touchmove",jb)},_offUpEvents:function(){var a=this.el.ownerDocument;D(a,"mouseup",this._onDrop);D(a,"touchend",this._onDrop);D(a,"pointerup",this._onDrop);D(a,"touchcancel",this._onDrop);D(document,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;la=na(m);Qa=na(m,c.draggable);ja("drop",this,{evt:a});Q=m&&m.parentNode;la=na(m);Qa=na(m,c.draggable);if(!z.eventCanceled&&(Eb=ic=ub=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),
clearTimeout(this._dragStartId),this.nativeDraggable&&(D(document,"drop",this),D(b,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),wc&&x(document.body,"user-select",""),x(m,"transform",""),a&&(Jb&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),A&&A.parentNode&&A.parentNode.removeChild(A),(M===Q||W&&"clone"!==W.lastPutMode)&&H&&H.parentNode&&H.parentNode.removeChild(H),m&&(this.nativeDraggable&&D(m,"dragend",this),pc(m),m.style["will-change"]="",Jb&&
!ub&&ka(m,W?W.options.ghostClass:this.options.ghostClass,!1),ka(m,this.options.chosenClass,!1),ea({sortable:this,name:"unchoose",toEl:Q,newIndex:null,newDraggableIndex:null,originalEvent:a}),M!==Q?(0<=la&&(ea({rootEl:Q,name:"add",toEl:Q,fromEl:M,originalEvent:a}),ea({sortable:this,name:"remove",toEl:Q,originalEvent:a}),ea({rootEl:Q,name:"sort",toEl:Q,fromEl:M,originalEvent:a}),ea({sortable:this,name:"sort",toEl:Q,originalEvent:a})),W&&W.save()):la!==nb&&0<=la&&(ea({sortable:this,name:"update",toEl:Q,
originalEvent:a}),ea({sortable:this,name:"sort",toEl:Q,originalEvent:a})),z.active)))){if(null==la||-1===la)la=nb,Qa=Bb;ea({sortable:this,name:"end",toEl:Q,originalEvent:a});this.save()}this._nulling()},_nulling:function(){ja("nulling",this);M=m=Q=A=hb=H=fc=ab=ib=ua=Jb=la=Qa=nb=Bb=vb=Fb=W=gc=z.dragged=z.ghost=z.clone=z.active=null;Vb.forEach(function(a){a.checked=!0});Vb.length=yc=zc=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":m&&
(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,c=this.el.children,d=0,f=c.length,g=this.options;d<f;d++)b=c[d],ya(b,g.draggable,this.el,!1)&&a.push(b.getAttribute(g.dataIdAttr)||Ad(b));return a},sort:function(a){var b={},c=this.el;this.toArray().forEach(function(a,e){e=c.children[e];ya(e,this.options.draggable,c,!1)&&(b[a]=e)},this);a.forEach(function(a){b[a]&&
(c.removeChild(b[a]),c.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return ya(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];var d=Db.modifyOption(this,a,b);c[a]="undefined"!==typeof d?d:b;"group"===a&&Vc(c)},destroy:function(){ja("destroy",this);var a=this.el;a[ma]=null;D(a,"mousedown",this._onTapStart);D(a,"touchstart",this._onTapStart);D(a,"pointerdown",this._onTapStart);this.nativeDraggable&&
(D(a,"dragover",this),D(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();Tb.splice(Tb.indexOf(this.el),1);this.el=a=null},_hideClone:function(){ab||(ja("hideClone",this),z.eventCanceled||(x(H,"display","none"),this.options.removeCloneOnHide&&H.parentNode&&H.parentNode.removeChild(H),ab=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():ab&&(ja("showClone",
this),z.eventCanceled||(M.contains(m)&&!this.options.group.revertClone?M.insertBefore(H,m):hb?M.insertBefore(H,hb):M.appendChild(H),this.options.group.revertClone&&this.animate(m,H),x(H,"display",""),ab=!1))}};jc&&w(document,"touchmove",function(a){(z.active||ub)&&a.cancelable&&a.preventDefault()});z.utils={on:w,off:D,css:x,find:Oc,is:function(a,b){return!!ya(a,b,a,!1)},extend:function(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},throttle:Rc,closest:ya,toggleClass:ka,clone:Tc,
index:na,nextTick:Wb,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:Uc,getChild:Sb};z.get=function(a){return a[ma]};z.mount=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];b[0].constructor===Array&&(b=b[0]);b.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(z.utils=xa({},z.utils,a.utils));Db.mount(a)})};z.create=function(a,b){return new z(a,
b)};z.version="1.10.2";var P=[],Kb,Bc,Cc=!1,Dc,Ec,kc,wb,Fc=Rc(function(a,b,c,d){if(b.scroll){var e=(a.touches?a.touches[0]:a).clientX,f=(a.touches?a.touches[0]:a).clientY,g=b.scrollSensitivity,n=b.scrollSpeed,h=Ja(),k=!1;if(Bc!==c){Bc=c;Xb();Kb=b.scroll;var l=b.scrollFn;!0===Kb&&(Kb=Pa(c,!0))}c=0;var y=Kb;do{var I=y,m=V(I),r=m.top,t=m.bottom,u=m.left,B=m.right,A=m.width;m=m.height;var C=void 0,w=void 0,D=I.scrollWidth,E=I.scrollHeight;w=x(I);var G=I.scrollLeft,H=I.scrollTop;I===h?(C=A<D&&("auto"===
w.overflowX||"scroll"===w.overflowX||"visible"===w.overflowX),w=m<E&&("auto"===w.overflowY||"scroll"===w.overflowY||"visible"===w.overflowY)):(C=A<D&&("auto"===w.overflowX||"scroll"===w.overflowX),w=m<E&&("auto"===w.overflowY||"scroll"===w.overflowY));u=C&&(Math.abs(B-e)<=g&&G+A<D)-(Math.abs(u-e)<=g&&!!G);r=w&&(Math.abs(t-f)<=g&&H+m<E)-(Math.abs(r-f)<=g&&!!H);if(!P[c])for(t=0;t<=c;t++)P[t]||(P[t]={});if(P[c].vx!=u||P[c].vy!=r||P[c].el!==I)if(P[c].el=I,P[c].vx=u,P[c].vy=r,clearInterval(P[c].pid),0!=
u||0!=r)k=!0,P[c].pid=setInterval(function(){d&&0===this.layer&&z.active._onTouchMove(kc);var b=P[this.layer].vy?P[this.layer].vy*n:0,c=P[this.layer].vx?P[this.layer].vx*n:0;"function"===typeof l&&"continue"!==l.call(z.dragged.parentNode[ma],c,b,a,kc,P[this.layer].el)||Sc(P[this.layer].el,c,b)}.bind({layer:c}),24);c++}while(b.bubbleScroll&&y!==h&&(y=Pa(y,!1)));Cc=k}},30),md=function(a){var b=a.originalEvent,c=a.putSortable,d=a.dragEl,f=a.activeSortable,g=a.dispatchSortableEvent,h=a.hideGhostForTarget;
a=a.unhideGhostForTarget;b&&(f=c||f,h(),b=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b,b=document.elementFromPoint(b.clientX,b.clientY),a(),f&&!f.el.contains(b)&&(g("spill"),this.onSpill({dragEl:d,putSortable:c})))};rc.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var c=Sb(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(b,
c):this.sortable.el.appendChild(b);this.sortable.animateAll();a&&a.animateAll()},drop:md};ra(rc,{pluginName:"revertOnSpill"});sc.prototype={onSpill:function(a){var b=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:md};ra(sc,{pluginName:"removeOnSpill"});z.mount(new function(){function a(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var a in this)"_"===a.charAt(0)&&"function"===typeof this[a]&&
(this[a]=this[a].bind(this))}a.prototype={dragStarted:function(a){a=a.originalEvent;this.sortable.nativeDraggable?w(document,"dragover",this._handleAutoScroll):this.options.supportPointer?w(document,"pointermove",this._handleFallbackAutoScroll):a.touches?w(document,"touchmove",this._handleFallbackAutoScroll):w(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){a=a.originalEvent;this.options.dragOverBubble||a.rootEl||this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?
D(document,"dragover",this._handleAutoScroll):(D(document,"pointermove",this._handleFallbackAutoScroll),D(document,"touchmove",this._handleFallbackAutoScroll),D(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(wb);Xb();clearTimeout(Ab);Ab=void 0},nulling:function(){kc=Bc=Kb=Cc=wb=Dc=Ec=null;P.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},_handleAutoScroll:function(a,c){var b=this,e=(a.touches?a.touches[0]:a).clientX,d=(a.touches?a.touches[0]:a).clientY,
f=document.elementFromPoint(e,d);kc=a;if(c||Cb||Ia||wc){Fc(a,this.options,f,c);var g=Pa(f,!0);!Cc||wb&&e===Dc&&d===Ec||(wb&&clearInterval(wb),wb=setInterval(function(){var f=Pa(document.elementFromPoint(e,d),!0);f!==g&&(g=f,Xb());Fc(a,b.options,f,c)},10),Dc=e,Ec=d)}else this.options.bubbleScroll&&Pa(f,!0)!==Ja()?Fc(a,this.options,Pa(f,!1),!1):Xb()}};return ra(a,{pluginName:"scroll",initializeByDefault:!0})});z.mount(sc,rc);var Fe=z,xb=function(a){this.run=a;this.html=h.makeDiv(["production-screen"]);
this.refresh()};xb.prototype.refresh=function(){var a=this,b=this.run.inventory.clone(),c=this.run.getResourceConversions(),d=c.free,f=c.costly;b.applyConversions(d);d=d.map(function(b){return a.renderConversion(b,!0)});d=h.makeDivContaining(d,["free-conversions-list"]);c=[];f=$jscomp.makeIterator(f);for(var g=f.next();!g.done;g=f.next())g=g.value,b.canAfford(g.inputs)&&b.hasEnoughWorkers(g.requiredWorkers)?(c.push(this.renderConversion(g,!0)),b.applyConversions([g])):c.push(this.renderConversion(g,
!1));c=h.makeDivContaining(c);Fe.create(c,{onEnd:function(b){var c=b.oldDraggableIndex;b=b.newDraggableIndex;void 0!==c&&void 0!==b&&a.shiftCostlyConversion(c,b)}});f=h.makePara("Available workers at start of production cycle: "+this.run.inventory.getAvailableWorkers(),["production-screen-available-workers"]);g=h.makePara("Unused workers at end of production cycle: "+b.getAvailableWorkers(),["production-screen-worker-consumption-label"]);var k=h.makeDiv();if(0!==this.run.inventory.getSpeciesList().length){var l=
b.clone();k.appendChild(h.makePara("Resources required for worker upkeep:",["production-screen-worker-consumption-label"]));for(var m=$jscomp.makeIterator(l.getSpeciesList()),v=m.next();!v.done;v=m.next()){var F=v.value;v=l.getProvidedWorkerConsumption(F).quantity;var y=l.getRequiredWorkerConsumption(F).quantity;k.appendChild(h.makePara(F.name+": "+v+"/"+y+" "+F.survivalCost.resource.name,[y>v?"population-consumption-unmet":"population-consumption-met","production-screen-worker-consumption"]));l.payCost([l.getProvidedWorkerConsumption(F)])}}l=
h.makeDiv();y=b.getSpeciesList();m=new Map;F=$jscomp.makeIterator(y);for(v=F.next();!v.done;v=F.next())v=v.value,m.set(v,b.getPopulation(v));b.doPopulationGrowth();F=new Map;var I=$jscomp.makeIterator(y);for(v=I.next();!v.done;v=I.next())v=v.value,F.set(v,b.getPopulation(v));y=$jscomp.makeIterator(y);for(v=y.next();!v.done;v=y.next()){v=v.value;I=m.get(v);var r=F.get(v);I-=r;0<I&&l.appendChild(h.makePara(I+" "+v.name+" will die from lack of "+v.survivalCost.resource.name+"!",["population-death-label"]))}h.fillHTML(this.html,
[h.makeHeader("Resource Production Management"),h.makeHeader("Inventory at start of production cycle:",2,["production-screen-label"]),this.renderInventory(this.run.inventory),h.makeHeader("Resource production",2,["production-screen-label"]),f,d,c,h.makeHeader("Workforce",2,["production-screen-label"]),g,k,l,h.makeHeader("Inventory at end of production cycle:",2,["production-screen-label"]),this.renderInventory(b),h.makeButton("Back",function(){T.show(new gb(a.run))},["production-screen-back-button"])])};
xb.prototype.renderInventory=function(a){a=a.getInventoryStrings().map(function(a){return h.makePara(a)});0===a.length&&a.push(h.makePara("(none)"));return h.makeDivContaining(a,["production-screen-inventory"])};xb.prototype.renderConversion=function(a,b){var c=this,d=h.makeDiv(["conversion"]),f=a.toString(),g="conversion-description-normal";a.enabled?b||(f=a.toString()+" (cannot afford)",g="conversion-description-cannot-afford"):(f=a.toString()+" (disabled) ",g="conversion-description-disabled");
b=h.makePara(f,[g,"conversion-description"]);b=h.makeDivContaining([b],["conversion-description-box"]);d.appendChild(b);d.appendChild(h.makeButton("Toggle",function(){c.toggle(a)}));return d};xb.prototype.shiftCostlyConversion=function(a,b){this.run.shiftCostlyConversionPriority(a,b);this.refresh()};xb.prototype.toggle=function(a){a.enabled=!a.enabled;this.refresh()};var Gc=function(a){this.run=a;this.html=h.makeDiv(["research-screen"]);this.refresh()};Gc.prototype.refresh=function(){var a=this,b=
h.makeHeader("Available Research Projects"),c=this.run.getResearchOptions(),d=l.values().filter(function(a){return c.some(function(b){return b.researchCost.resource===a})}),f=h.makeDiv(["research-resources"]);0!==d.length&&(f.appendChild(h.makeHeader("Available Research Data")),d.forEach(function(b){return f.appendChild(h.makePara(b.name+": "+a.run.inventory.getResourceQuantity(b)))}));d=h.makeDivContaining(c.map(function(b){return a.renderTechOption(b)}));0===c.length&&(b=h.makeDiv());var g=h.makeHeader("Previous Research Projects",
1,["previous-research-header"]),k=this.run.getUnlockedTechnologies().filter(function(a){return a.visible}).map(function(a){return h.makePara("\u2022 "+a.name,["previous-research"])});0===k.length&&(g=h.makeDiv());var m=h.makeButton("Back",function(){T.show(new gb(a.run))},[]);h.fillHTML(this.html,[b,d,f,g].concat($jscomp.arrayFromIterable(k),[m]))};Gc.prototype.renderTechOption=function(a){for(var b=this,c=h.makeDivContaining([h.makeHeader(a.name,2),h.makePara(a.description),h.makePara("Development cost: "+
a.researchCost)],["tech-option"]),d=0,f=$jscomp.makeIterator(a.requiredTechs),g=f.next();!g.done;g=f.next())g=g.value,this.run.hasUnlockedTechnology(g)||(d++,c.appendChild(h.makePara("Requires "+g.name+" research")));d=0===d&&this.run.inventory.canAfford([a.researchCost]);c.appendChild(h.makeButton("Conduct Research",function(){b.run.unlockTechnology(a);b.refresh();b.run.updateQuestState()},[],d?"enabled":"disabled"));return c};var nd=function(a){this.html=h.makeDiv(["world-screen-header"]);this.run=
a;this.refresh()};nd.prototype.refresh=function(){var a=this,b=h.makeButton("Quit Game",function(){T.show(new ob)}),c=h.makeButton("Next Turn",function(){var b=new ec(a.run);T.show(b);b.startLoading()}),d=h.makeButton("Manage Production",function(){T.show(new xb(a.run))}),f=h.makeButton("Research Projects",function(){T.show(new Gc(a.run))});h.fillHTML(this.html,[b,d,f,c])};var od=function(a){this.ending=a;this.html=h.makeDiv();this.refresh()};od.prototype.refresh=function(){var a=h.makeHeader(this.ending.title),
b=h.makePara(this.ending.description),c=h.makeButton("Quit Game",function(){T.show(new ob)});h.fillHTML(this.html,[a,b,c])};var pd=function(a){this.html=h.makeDiv(["world-screen-quest-description"]);this.run=a;this.refresh()};pd.prototype.refresh=function(){var a=this,b=this.run.getCurrentQuestDescription(),c=this.run.getCurrentQuestHint();b=h.makePara("Objective: "+(c?b+"\n(hint: "+c+")":b));c=this.run.getPreviousQuestDescription();this.run.questCompletionShown||(this.run.questCompletionShown=!0,
b=h.makePara("Completed: "+c,["quest-description-emphasis"]),setTimeout(function(){var b=a.run.getQuestEndState();b?T.show(new od(b)):a.refresh()},1500));h.fillHTML(this.html,[b])};var gb=function(a){this.mapUI=new Z(this,a.world);this.tileSidebar=new tb(this,a);this.inventorySidebar=new ed(a);this.header=new nd(a);this.questIndicator=new pd(a);this.html=h.makeDivContaining([this.header.html,this.questIndicator.html,h.makeDivContaining([this.inventorySidebar.html,h.makeDivContaining([this.mapUI.html],
["world-screen-map-box"]),this.tileSidebar.html],["world-screen-hbox"])],["flex-vertical","world-screen"])};gb.prototype.refresh=function(){this.mapUI.refresh();this.tileSidebar.refresh();this.inventorySidebar.refresh();this.header.refresh();this.questIndicator.refresh()};gb.prototype.handleKeyDown=function(a){this.mapUI.handleKeyDown(a)};gb.prototype.changeSidebarTile=function(a){this.tileSidebar.changeTile(a)};var va;(function(a){a.isNonEmpty=function(a){return 0<a.length};a.generate=function(a,
c){for(var b=Array(a),e=0;e<a;e++)b[e]=c(e);return b};a.flatten=function(a){return a.reduce(function(a,b){return a.concat(b)},[])};a.partition=function(a,c){var b=[],e=[];a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next())d=d.value,c(d)?b.push(d):e.push(d);return{yes:b,no:e}};a.repeat=function(a,c){for(var b=Array(c),e=0;e<c;e++)b[e]=a;return b}})(va||(va={}));var bb=function(a){a=u.call(this,a)||this;a.texture=Nd;return a};$jscomp.inherits(bb,u);bb.prototype.getTileName=function(){return bb.tileName};
bb.prototype.getTileDescription=function(){return bb.tileDescription};bb.tileName="Monolith";bb.tileDescription="A towering alien structure of unknown purpose";var kb;(function(a){a.nonrandomTiles=function(){return[new B(new E(0,0)),new B(new E(1,0)),new B(new E(2,0)),new pa(new E(0,1)),new pa(new E(1,1)),new pa(new E(2,1)),new B(new E(0,2)),new B(new E(1,2)),new B(new E(2,2)),new B(new E(0,3)),new Ma(new E(1,3)),new B(new E(2,3)),new B(new E(0,4)),new B(new E(1,4)),new B(new E(2,4)),new bb(new E(13,
15))]};a.width=20;a.height=20;a.mountainRange=[20,25];a.ruinRange=[5,7]})(kb||(kb={}));var Na=function(){this.pastTextureMap=new Map;this.width=kb.width;this.height=kb.height;this.grid=Array(this.height);for(var a=0;a<this.height;a++){this.grid[a]=Array(this.width);for(var b=0;b<this.width;b++)this.grid[a][b]=new B(new E(b,a))}a=Y.intBetween.apply(Y,$jscomp.arrayFromIterable(kb.mountainRange));for(b=0;b<a;b++){var c=this.getTiles().filter(function(a){return a instanceof B});va.isNonEmpty(c)&&(c=Y.fromArray(c).position,
this.placeTile(new pa(c)))}a=Y.intBetween.apply(Y,$jscomp.arrayFromIterable(kb.ruinRange));for(b=0;b<a;b++)c=this.getTiles().filter(function(a){return a instanceof B}),va.isNonEmpty(c)&&(c=Y.fromArray(c).position,this.placeTile(new Da(c)));a=$jscomp.makeIterator(kb.nonrandomTiles());for(b=a.next();!b.done;b=a.next())this.placeTile(b.value)};Na.prototype.placeTile=function(a){this.grid[a.position.y][a.position.x]=a};Na.prototype.getTiles=function(){return va.flatten(this.grid)};Na.prototype.getTilesInRectangle=
function(a,b,c,d){0>b&&(b=0);0>a&&(a=0);var e=[];b=this.grid.slice(b,b+d);b=$jscomp.makeIterator(b);for(d=b.next();!d.done;d=b.next()){d=d.value.slice(a,a+c);d=$jscomp.makeIterator(d);for(var f=d.next();!f.done;f=d.next())e.push(f.value)}return e};Na.prototype.getTileAtCoordinates=function(a){if(!(0>a.x||a.x>=this.width||0>a.y||a.y>=this.height))return this.grid[a.y][a.x]};Na.prototype.getTilesInCircle=function(a,b){return this.getTiles().filter(function(c){return a.distanceFrom(c.position)<=b})};
Na.prototype.getPopulationCapacity=function(a){for(var b=0,c=$jscomp.makeIterator(this.getTiles()),d=c.next();!d.done;d=c.next())d=d.value,d.populationCapacity&&d.populationCapacity.species===a&&(b+=d.populationCapacity.capacity);return b};Na.prototype.getPastTexture=function(a,b){return this.pastTextureMap.get(""+[a.name,b])};Na.prototype.storePastTexture=function(a,b,c){this.pastTextureMap.set(""+[a.name,b],c)};var Ea=function(){this.map=new Map([])};Ea.prototype.add=function(a,b){this.set(a,this.get(a)+
b)};Ea.prototype.remove=function(a,b){this.add(a,-1*b)};Ea.prototype.get=function(a){return this.map.get(a)||0};Ea.prototype.set=function(a,b){if(0>b)throw"tried to set quantity to negative value";0===b?this.map.delete(a):this.map.set(a,b)};Ea.prototype.getSum=function(){return Array.from(this.map.values()).reduce(function(a,b){return a+b},0)};Ea.prototype.positiveQuantityKeys=function(){return Array.from(this.map.keys())};Ea.prototype.clone=function(){for(var a=new Ea,b=$jscomp.makeIterator(this.positiveQuantityKeys()),
c=b.next();!c.done;c=b.next())c=c.value,a.add(c,this.get(c));return a};var K=function(a){this.world=a;this.resourceQuantities=new Ea;this.populationQuantities=new Ea;this.availableWorkers=0};K.prototype.addResource=function(a,b){this.resourceQuantities.add(a,b)};K.prototype.removeResource=function(a,b){this.resourceQuantities.remove(a,b)};K.prototype.getResourceQuantity=function(a){return this.resourceQuantities.get(a)||0};K.prototype.addWorkers=function(a,b){this.populationQuantities.add(a,b);this.populationQuantities.set(a,
Ga(0,this.populationQuantities.get(a),this.world.getPopulationCapacity(a)))};K.prototype.releaseWorkers=function(){this.availableWorkers=this.populationQuantities.getSum()};K.prototype.occupyWorkers=function(a){if(this.availableWorkers<a)throw"insufficient workers";if(0>a)throw"tried to occupy a negative number of workers";this.availableWorkers-=a};K.prototype.getSpeciesList=function(){return this.populationQuantities.positiveQuantityKeys()};K.prototype.getPopulation=function(a){return this.populationQuantities.get(a)};
K.prototype.getRequiredWorkerConsumption=function(a){var b=a.survivalCost.quantity*this.populationQuantities.get(a);return new r(a.survivalCost.resource,b)};K.prototype.getProvidedWorkerConsumption=function(a){var b=this.getRequiredWorkerConsumption(a).quantity,c=this.getResourceQuantity(a.survivalCost.resource);return new r(a.survivalCost.resource,Math.min(b,c))};K.prototype.doPopulationGrowth=function(){for(var a=$jscomp.makeIterator(this.getSpeciesList()),b=a.next();!b.done;b=a.next()){b=b.value;
var c=this.getProvidedWorkerConsumption(b);this.payCost([c]);this.populationQuantities.set(b,Math.floor(c.quantity/b.survivalCost.quantity));c=Math.floor(b.growthMultiplier*this.populationQuantities.get(b));this.addWorkers(b,c)}};K.prototype.getTotalPopulation=function(){return this.populationQuantities.getSum()};K.prototype.getAvailableWorkers=function(){return this.availableWorkers};K.prototype.canAfford=function(a){var b=this,c=new Map;a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next())d=
d.value,c.set(d.resource,d.quantity+(c.get(d.resource)||0));return Array.from(c.keys()).every(function(a){var e=c.get(a);a=b.getResourceQuantity(a);return e<=a})};K.prototype.hasEnoughWorkers=function(a){return this.availableWorkers>=a};K.prototype.payCost=function(a){if(this.canAfford(a)){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,this.removeResource(b.resource,b.quantity)}else throw"Cannot afford to pay cost";};K.prototype.getResourceList=function(){var a=this;return l.values().filter(function(b){return 0!==
a.resourceQuantities.get(b)})};K.prototype.getInventoryStrings=function(){var a=this;return this.getResourceList().map(function(b){return b.name+": "+a.getResourceQuantity(b)})};K.prototype.getPopulationStrings=function(){var a=this;return this.populationQuantities.positiveQuantityKeys().map(function(b){return a.populationQuantities.get(b)+" "+b.name})};K.prototype.applyConversions=function(a){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,this.canAfford(b.inputs)&&this.hasEnoughWorkers(b.requiredWorkers)&&
b.enabled){this.payCost(b.inputs);this.occupyWorkers(b.requiredWorkers);b=$jscomp.makeIterator(b.outputs);for(var c=b.next();!c.done;c=b.next())c=c.value,this.addResource(c.resource,c.quantity)}};K.prototype.clone=function(){var a=new K(this.world);a.resourceQuantities=this.resourceQuantities.clone();a.populationQuantities=this.populationQuantities.clone();a.availableWorkers=this.availableWorkers;return a};var da=function(){this.turnNumber=1;this.prevQuestDescription="";this.questCompletionShown=
!0;this.completedTechs=[];this.world=new Na;this.inventory=new K(this.world);this.questStage=ue};da.prototype.getCurrentQuestDescription=function(){return this.questStage.description};da.prototype.getCurrentQuestHint=function(){return this.questStage.hint};da.prototype.getQuestEndState=function(){return this.questStage.endState};da.prototype.getPreviousQuestDescription=function(){return this.prevQuestDescription};da.prototype.setQuestStage=function(a){this.questStage=a};da.prototype.getUnorderedConversions=
function(){return va.flatten(this.world.getTiles().map(function(a){return a.resourceConversions}))};da.prototype.getResourceConversions=function(){var a=this.getUnorderedConversions(),b=va.partition(a,function(a){return a.isFree()});a=b.yes;b=b.no;a.sort(function(a,b){return a.priority-b.priority});b.sort(function(a,b){return a.priority-b.priority});return{free:a,costly:b}};da.prototype.getAllResourceConversions=function(){var a=this.getUnorderedConversions();a.sort(function(a,c){return a.priority-
c.priority});return a};da.prototype.updateQuestState=function(){var a=this.questStage.updatedStage(this);a!==this.questStage&&(this.prevQuestDescription=this.questStage.description,this.questCompletionShown=!1,this.questStage=a)};da.prototype.hasUnlockedTechnology=function(a){return this.completedTechs.includes(a)};da.prototype.unlockTechnology=function(a){this.hasUnlockedTechnology(a)||this.completedTechs.push(a)};da.prototype.getUnlockedTechnologies=function(){return this.completedTechs};da.prototype.getResearchOptions=
function(){var a=this;return ad.filter(function(a){return a.visible}).filter(function(b){return b.requiredTechs.every(function(b){return a.completedTechs.includes(b)})}).filter(function(b){return!a.hasUnlockedTechnology(b)})};da.prototype.completeTurn=function(){this.inventory.applyConversions(this.getAllResourceConversions());this.inventory.releaseWorkers();this.inventory.doPopulationGrowth();this.turnNumber++;this.updateQuestState()};da.prototype.shiftCostlyConversionPriority=function(a,b){if(!(a===
b||0>a)){var c=this.getResourceConversions().costly;if(!(b>=c.length)){var d=c[b].priority;if(a<b)for(;b>a;b--)c[b].priority=c[b-1].priority;else for(;b<a;b++)c[b].priority=c[b+1].priority;c[a].priority=d}}};var ob=function(){this.html=h.makeDiv(["main-menu"]);this.refresh()};ob.prototype.refresh=function(){h.fillHTML(this.html,[h.makeHeader("Aurora",1),h.makeDivContaining([h.makeButton("new game",function(){var a=new da;C(a);T.show(new gb(a))}),h.makeButton("settings",function(){return T.show(new $c)}),
h.makeButton("credits",function(){return T.show(new tc)})],["main-menu-options"])])};$jscomp.initSymbol();Symbol();var Lb=db(),Mb=db(),yb;(function(a){function b(a){return Mb(440*Math.pow(2,(a-69)/12))}a.noteNames="C C# D D# E F F# G G# A A# B".split(" ");a.midiNumberToFrequency=b;a.midiNumberToNoteName=function(b){return""+a.noteNames[J(b,12)]+(Math.floor(b/12)-1)};a.detuneWithCoeff=function(a,c){if(1===c)return[b(a)];a=b(a);return[a/c,a,a*c].map(Mb)}})(yb||(yb={}));var qd=function(a){this.volume=
a},lc;(function(a){a.createAdsrEnvelope=function(a,c,d,f,g){g=void 0===g?1:g;var b=void 0===f.attack?0:f.attack,e=void 0===f.sustain?0:f.sustain,h=void 0===f.decay?0:f.decay;f=void 0===f.release?0:f.release;a=a.createGain();a.gain.setValueAtTime(0,c);d<b?a.gain.linearRampToValueAtTime(d/b*(g-0),c+d):d<b+h?(a.gain.linearRampToValueAtTime(g,c+b),a.gain.linearRampToValueAtTime((d-b)/h*(g*e-g)+g,c+b+h)):(a.gain.linearRampToValueAtTime(g,c+b),a.gain.linearRampToValueAtTime(g*e,c+b+h));a.gain.linearRampToValueAtTime(0,
c+d+f);return a}})(lc||(lc={}));var zb=function(a,b,c){this.volume=void 0===c?1:c;this.type=a.type;this._detune=1;this.detune=a.detune||0;this.env=b;return this};$jscomp.inherits(zb,qd);zb.prototype.scheduleNote=function(a,b){var c=this,d=yb.detuneWithCoeff(b.midiNumber,this._detune),f=void 0===b.endNote?d:yb.detuneWithCoeff(b.endNote,this._detune),g=lc.createAdsrEnvelope(a,b.start,b.duration,this.env,Math.min(1/d.length,1)*this.volume),h=b.start+b.duration+(this.env.sustain||0);d.forEach(function(e,
d){var k=a.createOscillator();k.type=c.type;k.frequency.setValueAtTime(e,b.start);k.frequency.linearRampToValueAtTime(f[d],h);k.start(b.start);k.stop(h);k.connect(g);k.onended=function(){g.disconnect()}});return g};$jscomp.global.Object.defineProperties(zb.prototype,{detune:{configurable:!0,enumerable:!0,set:function(a){this._detune=Math.pow(2,a/1200)}}});var Nb=function(a,b,c){this.volume=void 0===c?1:c;this.buffer=a;this.env=b;return this};$jscomp.inherits(Nb,qd);Nb.prototype.scheduleNote=function(a,
b){var c=yb.midiNumberToFrequency(b.midiNumber),d=a.createBufferSource();d.buffer=this.buffer.buffer;d.loop=this.buffer.shouldLoop;d.playbackRate.setValueAtTime(c/this.buffer.freq,b.start);c=b.start+b.duration+(this.env.sustain||0);if(void 0!==b.endNote){var f=yb.midiNumberToFrequency(b.endNote)/this.buffer.freq;d.playbackRate.linearRampToValueAtTime(f,c)}d.start(b.start);d.stop(c);var g=lc.createAdsrEnvelope(a,b.start,b.duration,this.env,this.volume);d.connect(g);d.onended=function(){g.disconnect()};
return g};var wa=db(),Ge=db(),rd=db(),Hc=db(),cb=db(),Ob;(function(a){function b(a){a=(a&1365)+(a>>>1&1365);a=(a&819)+(a>>>2&819);a=(a&3855)+(a>>>4&3855);return(a&255)+(a>>>8&255)}function c(a,b){b=J(void 0===b?1:b,12);return wa((a<<b|a>>>12-b)&4095)}function d(a){return 0!==(a&1)}function f(a){var b=[],e=a;do d(e)&&b.push(e),e=c(e,1);while(e!==a);return b}function g(a,b){b=J(b,12);return 0!==(a&1<<b)}function h(a,b){b=J(b,12);a=f(a).filter(function(a){return g(a,b)}).length;return 6===b?a/2:a}function k(a){return f(a).filter(function(a){return!g(a,
7)}).length}function l(a,b){return(a&b)===b}function m(a,c){var d=function(a,b){return a<b[0]||a>b[1]};return c.notes&&d(b(a),c.notes)||c.imperfections&&d(k(a),c.imperfections)||c.hemitones&&d(h(a,1),c.hemitones)||void 0!==c.chord&&0!==c.chord&&!l(a,c.chord)?!1:!0}a.createScaleFromPitchClass=function(a){if(!a.includes(Hc(0)))throw Error("scales must have a root");a=a.map(function(a){return 1<<J(a,12)}).filter(function(a,b,c){return c.indexOf(a)===b}).reduce(function(a,b){return a|b},0);return wa(a)};
a.getPitchClass=function(a){for(var b=[],c=0;0!==a;a>>>=1,c++)a&1&&b.push(Hc(c));return b};a.getNumberOfNotes=b;a.rotateScale=c;a.hasRoot=d;a.getModes=f;a.hasInterval=g;a.countInterval=h;a.getImperfections=k;a.containsScale=function(a,b){return(a&b)===b};a.containsChord=l;var F=va.flatten([f(wa(2741)),f(wa(2475)),f(wa(1367)),f(wa(2477)),f(wa(2485)),f(wa(2733)),f(wa(2669)),f(wa(2483))]);a.matchesQuery=m;a.getAllScalesMatchingQuery=function(a){return F.filter(function(b){return m(b,a)})};a.indexIntoPitchClass=
function(a,b){var c=a[J(b,a.length)];return Hc(c+12*Math.floor(b/a.length))}})(Ob||(Ob={}));var lb=function(a){a=void 0===a?8:a;this.subdivision=[];this._beats=a;this.generateNewSubdivision(a)};lb.prototype.generateTies=function(){for(var a=0,b=[];a<this.subdivision.length;)a<this.subdivision.length-1&&Y.bool(.5)?(b.push(this.subdivision[a]+this.subdivision[a+1]),a+=2):(b.push(this.subdivision[a]),a++);return b};lb.prototype.generateNewSubdivision=function(a){this._beats=a;this.subdivision=[];for(var b=
Math.min.apply(Math,$jscomp.arrayFromIterable(lb.divisions));a>=b;){var c=lb.divisions.filter(function(b){return b<=a});c=Y.fromArray(c);a-=c;this.subdivision.push(c)}0<a&&this.subdivision.push(a)};$jscomp.global.Object.defineProperties(lb.prototype,{beats:{configurable:!0,enumerable:!0,get:function(){return this._beats}}});lb.divisions=[2,3];var He=function(a,b,c,d){function e(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,f){function g(a){try{k(d.next(a))}catch(y){f(y)}}
function h(a){try{k(d["throw"](a))}catch(y){f(y)}}function k(a){a.done?c(a.value):e(a.value).then(g,h)}k((d=d.apply(a,b||[])).next())})},Ie=new AudioContext,Pb;(function(a){a.WHITE_NOISE="white_noise";a.SNARE="snare";a.KICK="kick"})(Pb||(Pb={}));var Qb;(function(a){a.createBufferFromGenerator=function(a,c){for(var b=new Float32Array(a),d=0;d<a;d++)b[d]=c(d);a=new AudioBuffer({numberOfChannels:1,sampleRate:44100,length:a});a.copyToChannel(b,0);return a};a.createBufferFromAudioData=function(a,c){var b=
this,d=new AudioBuffer({numberOfChannels:1,sampleRate:44100,length:a});fetch("assets/"+c,{headers:new Headers({"Content-Type":"audio/ogg"})}).then(function(a){return He(b,void 0,void 0,function R(){var b,c;return $jscomp.generator.createGenerator(R,function(e){if(1==e.nextAddress)return e.yield(a.arrayBuffer(),2);if(3!=e.nextAddress)return b=e.yieldResult,e.yield(Ie.decodeAudioData(b),3);c=e.yieldResult;d.copyToChannel(c.getChannelData(0),0);e.jumpToEnd()})})},function(){});return d}})(Qb||(Qb={}));
var Ic={white_noise:{buffer:Qb.createBufferFromGenerator(44100,function(){return 2*Math.random()-1}),shouldLoop:!0,freq:Mb(440)},snare:{buffer:Qb.createBufferFromAudioData(22050,"samples/snare.ogg"),shouldLoop:!1,freq:Mb(440)},kick:{buffer:Qb.createBufferFromAudioData(22050,"samples/kick.ogg"),shouldLoop:!1,freq:Mb(440)}},Fa;(function(a){a[a.KICK=0]="KICK";a[a.SNARE=1]="SNARE";a[a.CLOSED_HI_HAT=2]="CLOSED_HI_HAT";a[a.OPEN_HI_HAT=3]="OPEN_HI_HAT"})(Fa||(Fa={}));var Jc;(function(a){var b=new Nb(Ic[Pb.WHITE_NOISE],
{attack:.01,decay:.1},1.5),c=new Nb(Ic[Pb.SNARE],{sustain:1},1.5),d=new Nb(Ic[Pb.KICK],{sustain:1},1.5);a.scheduleHit=function(a,e,f){switch(f){case Fa.KICK:return d.scheduleNote(a,{midiNumber:Lb(69),start:e,duration:1});case Fa.SNARE:return c.scheduleNote(a,{midiNumber:Lb(69),start:e,duration:1});case Fa.CLOSED_HI_HAT:return b.env.decay=.05,b.volume=.5,b.scheduleNote(a,{midiNumber:Lb(70),start:e,duration:.05});case Fa.OPEN_HI_HAT:return b.env.decay=.2,b.volume=.5,b.scheduleNote(a,{midiNumber:Lb(70),
start:e,duration:.2});default:qa()}}})(Jc||(Jc={}));var N;(function(a){a[a.DRUMS=0]="DRUMS";a[a.CHORDS=1]="CHORDS"})(N||(N={}));var aa;(function(a){a.TONIC="tonic";a.SUBDOMINANT="subdominant";a.DOMINANT="dominant";a.AMBIGUOUS="ambiguous"})(aa||(aa={}));var Kc;(function(a){function b(a,b,c){c=void 0===c?4:c;var d=Ob.getPitchClass(a);a=Y.fromArray(l).map(function(a){return Y.fromArray(m[a])});a.unshift(cb(0));return a.map(function(a){return va.generate(c,function(c){c=Ob.indexIntoPitchClass(d,a+2*c);
return rd(b+c)})})}function c(){var a=k.rhythm.subdivision;return va.flatten(a.map(function(b,c){for(var d=[0===c%2?Fa.KICK:Fa.SNARE],e=0;e<b-1;e++)c===a.length-1&&e===b-2?d.push(Fa.OPEN_HI_HAT):d.push(Fa.CLOSED_HI_HAT);return d}))}function d(){k.rhythm.generateNewSubdivision(Y.fromArray([5,6,7,8,9,11,13]));var a={chord:Ge(128),imperfections:[1,1]};a=Ob.getAllScalesMatchingQuery(a);va.isNonEmpty(a)&&(k.scale=Y.fromArray(a));k.drumLoop=c();k.progression=b(k.scale,k.root);k.queue=[[N.CHORDS,N.DRUMS],
[N.CHORDS,N.DRUMS],[N.CHORDS,N.DRUMS],[N.CHORDS,N.DRUMS],[N.CHORDS,N.DRUMS],[N.CHORDS,N.DRUMS],[N.CHORDS,N.DRUMS],[N.CHORDS,N.DRUMS],[N.DRUMS]]}function f(b){var c=k.progression[J(k.chordIndex,k.progression.length)],d=60/k.beatsPerMinute;c=$jscomp.makeIterator(c);for(var e=c.next();!e.done;e=c.next())e={midiNumber:Lb(J(e.value,12)+60),start:b,duration:d*k.rhythm.beats},a.instruments.pad.scheduleNote(a.context,e).connect(a.masterGain);k.chordIndex++}function g(b){for(var c=60/k.beatsPerMinute,d=0,
e=$jscomp.makeIterator(k.drumLoop),f=e.next();!f.done;f=e.next())Jc.scheduleHit(a.context,b+d,f.value).connect(a.masterGain),d+=c}function h(b){var c=60/k.beatsPerMinute;0===k.queue.length&&d();c*=k.rhythm.beats;var e=k.queue.shift();if(e){e=$jscomp.makeIterator(e);for(var l=e.next();!l.done;l=e.next())switch(l.value){case N.DRUMS:g(b);break;case N.CHORDS:f(b);break;default:qa()}}var m=b+c;window.setTimeout(function(){h(m)},1E3*(m-a.context.currentTime-.1))}a.context=new AudioContext;a.instruments=
{arp:new zb({type:"sawtooth",detune:3},{attack:.01,decay:.05,sustain:0,release:.1}),bass:new zb({type:"triangle",detune:2},{attack:.01,decay:.01,sustain:1,release:.1}),pad:new zb({type:"triangle",detune:4},{attack:1,decay:.1,sustain:.5,release:.5})};a.masterGain=a.context.createGain();var k={beatsPerMinute:220,rhythm:new lb,root:rd(0),scale:wa(1857),progression:[],chordIndex:0,drumLoop:[],queue:[]},l=[[aa.TONIC,aa.SUBDOMINANT,aa.DOMINANT],[aa.SUBDOMINANT,aa.SUBDOMINANT,aa.DOMINANT],[aa.SUBDOMINANT,
aa.DOMINANT,aa.DOMINANT],[aa.AMBIGUOUS,aa.SUBDOMINANT,aa.DOMINANT],[aa.SUBDOMINANT,aa.DOMINANT,aa.AMBIGUOUS]],m={tonic:[cb(0),cb(5)],subdominant:[cb(1),cb(3)],dominant:[cb(4),cb(6)],ambiguous:[cb(2)]};a.initialize=function(){a.masterGain.gain.value=.25;a.masterGain.connect(a.context.destination);h(a.context.currentTime)};a.setVolume=function(b){a.masterGain.gain.value=b}})(Kc||(Kc={}));window.onload=function(){console.log("Script Loaded");k().then(function(){Kc.initialize();T.show(new ob)},function(){})}}]);}).call(this || window)
</script><script type="text/javascript">(function(){'use strict';}).call(this || window)
</script></body> </html> 