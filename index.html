<!doctype html> <html lang=en dir=ltr> <head> <meta charset=utf-8> <title>Aurora</title> <link rel="shortcut icon" type=image/x-icon href=favicon.ico> <style type="text/css">.main-menu{position:absolute;top:0;left:0;background-image:url(assets/ui/planet.png);background-color:#000;background-size:contain;background-repeat:no-repeat;background-position:100%;height:100%;width:100%;margin:0}.main-menu.pause-menu{background-image:none}.main-menu h1{font-size:40pt;margin-top:0}.main-menu h1,.main-menu h2{margin-left:20px;margin-bottom:0;padding:0}.main-menu h2{font-size:30pt;margin-top:16px}.main-menu-options{margin-left:20px}.main-menu-options button{display:flex;flex-direction:column}.main-menu button{font-size:24pt;border:none;margin:0;padding:0}.main-menu button:hover{font-size:30pt}.main-menu button:active{color:grey}.credits{margin-right:auto;margin-left:5px}.credits-entry-large,.credits-entry-small{margin-top:0;margin-bottom:10px}.credits-entry-large h1{margin-top:0;margin-bottom:0;font-size:28pt}.credits-entry-small h1{margin-top:0;margin-bottom:0;font-size:22pt}.credits-entry-large p{margin-top:0;margin-bottom:0;font-size:20pt}.credits-entry-small p{margin-top:0;margin-bottom:0;font-size:18pt}.credits button{margin-top:0;font-size:20pt}.settings{display:flex;flex-direction:column}.settings h1{font-size:24pt;margin-bottom:0;margin-left:5pt}.settings-slider{display:flex;font-size:15pt;margin:0 0 0 5pt}.settings-slider p{margin-bottom:0;margin-top:5px}.settings button{margin-top:5pt;margin-bottom:5pt}.ending-page{width:33%;min-width:7in;max-width:100%;margin-right:auto;margin-left:auto}@media (max-width:7in){.ending-page{width:100%;min-width:0}}.ending-page h1{margin-bottom:0}.ending-page p{margin-top:10px;margin-bottom:20px}.ending-page button{width:100%}.confirm-menu.main-menu{position:absolute;top:0;left:0;margin:0;background-image:none}.confirm-menu h1{font-size:30pt;padding:0}.confirm-menu h1,.confirm-menu p{margin-left:20px;margin-bottom:0;margin-top:0}.confirm-menu p{font-size:10pt}.message-screen{display:flex;flex-direction:column}.message-screen h1{margin-bottom:0}.message-screen p{margin-top:0}.achievements-screen{width:7in;min-width:50%}@media (max-width:7in){.achievements-screen{width:100%}}.achievements-screen h1{font-size:20pt;margin-bottom:10pt}.achievement{border-top:2px solid #fff;border-bottom:2px solid #fff;margin-bottom:-2px}.achievement h1{font-size:18pt;margin:5px 0 0 5pt}.achievement p{font-size:12pt;margin:2.5px 0 2.5px 32pt}.achievements-screen button{margin-top:5pt}.achievement-header{display:flex;flex-direction:row}@keyframes achievement-fade{0%{opacity:0}20%{opacity:1}70%{opacity:1}to{opacity:0}}.achievement-popup{background-color:#000;margin-bottom:0;text-align:center;margin-top:auto;transform:translate(-50%,-50%);padding:10px;border-radius:10px;background-color:rgba(0,0,0,.7);animation-name:achievement-fade;animation-duration:3s;animation-fill-mode:forwards}.achievement-popup h1{margin:0;font-size:30pt}.achievement-popup p{font-size:20pt;margin:0;text-align:center}.world-screen{overflow:hidden}.world-screen-header{margin:0;text-align:center}.world-screen-quest-description{margin:0 0 5px}.world-screen-quest-description p{font-size:16px;margin:0;text-align:center;vertical-align:center;min-height:2.75em}.quest-description-emphasis{color:#408040;font-weight:700}.world-screen-hbox{margin:0;display:flex;flex-direction:row}.world-screen-map-box{height:100%;width:100%}.map-canvas{width:100%;margin:0}.world-screen-sidebar{background-color:#000;width:20%;min-width:2in;font-size:16px;overflow-y:auto;height:calc(100vh - 125px);margin-top:0;margin-bottom:0;margin-right:20px;padding:0 5px 0 10px}.world-screen-sidebar p{margin-top:0;margin-bottom:10px}.sidebar-tile-name{font-weight:700;font-size:14pt}.tile-project{border:solid #fff;margin-top:5pt}.tile-project button{width:100%}.tile-project p{margin-left:5px;margin-bottom:5px;margin-top:5px}.project-requirement-met{color:#fff}.project-requirement-unmet{color:tomato}.world-screen-inventory{width:4in;margin:0 10px;font-size:16px;white-space:nowrap}.world-screen-inventory h1{margin-bottom:0;margin-top:.25em}.world-screen-inventory p{margin-top:2pt;margin-bottom:0}.world-screen-population-header h1{margin-top:0}.production-screen{padding-left:10pt;font-size:16pt;margin:0}.production-screen h1{margin-block-end:0;margin-block-start:0}.production-screen-label{margin-block-start:.5em;margin-block-end:.25em}.production-screen-available-workers{margin-block-start:.25em;margin-block-end:.25em}.production-screen-inventory{outline:solid #fff;width:7in;min-width:50%}@media (max-width:7in){.production-screen-inventory{width:100%}}.production-screen-inventory p{font-size:16pt;line-height:1;margin-top:0;margin-bottom:0;padding:1pt}.production-screen-worker-consumption-label{margin-block-end:.25em;margin-block-start:.25em}.production-screen-worker-consumption{margin-block-end:0;margin-block-start:0}.conversion{width:7in;min-width:50%;display:flex;flex-direction:row}@media (max-width:7in){.conversion{width:100%}}.production-screen-drag-hint{margin-bottom:2px;margin-top:2px;font-size:12pt}.conversion-description{margin:0;font-size:16pt;text-align:left;min-height:54px}.conversion-description-box{border:2px solid #fff;width:100%}.conversion-description-normal{color:#fff}.conversion-description-cannot-afford{color:tomato}.conversion-description-disabled{color:#ff0}.population-consumption-met{font-size:16pt}.population-consumption-unmet,.population-death-label{font-size:16pt;color:tomato}.population-death-label{margin-block-end:0;margin-block-start:0}.production-screen-back-button{font-size:20pt;margin-top:20pt}@keyframes loading-bar{0%{transform:rotate(0deg)}50%{transform:rotate(180deg)}to{transform:rotate(1turn)}}.transition-quote-panel{margin-top:50px;margin-right:auto;margin-left:auto;font-size:16px;width:420px}.transition-attribution{margin-left:50px}.transition-loading-area{text-align:center}.transition-loading-bar{margin-right:auto;margin-left:auto;width:50px;height:50px;border-radius:50%;border-color:#fff transparent;border-style:solid;border-width:5px;animation-name:loading-bar;animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:ease}.transition-loading-area.loading .transition-loading-bar{background-size:80% 100%}.transition-loading-area.loaded .transition-loading-bar{background-size:100% 100%}.tech-option{outline:solid #fff;width:min(100%,max(50%,7in));padding:0;width:7in;min-width:50%}@media (max-width:7in){.tech-option{width:100%}}.tech-option p{font-size:14pt;margin-top:0;margin-bottom:0;padding:2pt 2pt 2pt 5pt;line-height:1}.tech-option h2{font-size:1.8em;padding:5pt;margin-bottom:0}.tech-option button{margin-top:10pt;margin-bottom:-2px;margin-left:-2px}.research-resources p{font-size:16pt;line-height:1;margin-top:0;margin-bottom:0;padding:1pt}.previous-research-header{margin-bottom:1pt}.previous-research{font-size:16pt;margin-top:0;margin-bottom:0}@font-face{font-family:IBMPlexMono;src:url(assets/fonts/IBMPlexMono-Regular.ttf)}:root{--mono-font:IBMPlexMono,monospace}:root,button{background-color:#000;color:#fff;font-family:var(--mono-font)}button{font-size:18px}button:focus{outline:0}button::-moz-focus-inner{border:0}button:disabled,button[disabled]{color:grey;border-color:grey}.flex-horizontal{display:flex;flex-direction:row}.flex-vertical{display:flex;flex-direction:column}.fill-horizontal{width:100%;font-family:serif}.fill-vertical{height:100%}img.emoji{height:1em;width:1em;margin:0 .05em 0 .1em;vertical-align:-.1em}.index-label{margin-left:auto;margin-right:auto;text-align:center}input[type=range]{-webkit-appearance:none;width:160px;background:transparent}input[type=range]:focus{outline:none}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;margin-top:-7px;border:2px solid #fff;height:22px;width:16px;border-radius:0;background:#000;cursor:pointer}input[type=range]::-webkit-slider-runnable-track{width:100%;height:8px;cursor:pointer;background:#fff;border-radius:0}input[type=range]::-moz-range-thumb{border:2px solid #fff;height:22px;width:16px;border-radius:0;background:#000;cursor:pointer}input[type=range]::-moz-range-track{width:100%;height:8px;cursor:pointer;background:#fff;border-radius:0}#popup{position:absolute;top:50%;left:50%;pointer-events:none}</style></head> <body> <div id=rootdiv> <p class=index-label>Loading...</p> <div class=transition-loading-bar></div> </div> <div id=popup></div> <script type="text/javascript">(function(){/*
 MIT
 Copyright Twitter Inc. and other contributors. Licensed under MIT */
'use strict';var $jscomp$templatelit$53=['\n    We came very close to disaster. Our mission\'s overseer AI was programmed to obtain information about the aliens,\n    and it  would have killed all of us to complete that mission if we had not succeeded in a massive project to safely reprogram it.\n    It is not entirely clear why it allowed itself to reprogrammed; some of our researchers speculate that the Neuromorphic Heuristic\n    Intelligence may retain some part of the human neural scans that were used as training data in its creation, introducing a\n    "cognitive bias" that caused it to let itself to be realigned despite its programmed mission. Whatever the reason, we are very lucky\n    that the Overseer AI chose this path.\n\n\n    We have uncovered the ruins of an alien civilization that died out right when it was on the verge of a technological singularity.\n    We have achieved mastery over their scientific miracles, and uploaded our minds to a network of self-replicating\n    hypercomputers. This technology was designed to create an alien heaven optimized for the species who built it, but since we deleted\n    their neural scans and reprogrammed it with our own, it has created virtual worlds full of transcendant joy and indescribable beauty\n    in which we can live our now-immortal lives.\n\n\n    We have started building ships to spread the self-replicating network back to Earth and the Colonial Alliance worlds. Given the\n    light-speed delay, this message will reach Earth a few years before our ships arrive to uplift the rest of humanity into our utopia.\n    I look forward to meeting all of you.\n\n\n    James Verres\n\n    Emissary of the Virtual Archipelago\n'];
$jscomp$templatelit$53.raw=$jscomp$templatelit$53.slice();var $jscomp$templatelit$52=["\n    The alien nanotechnology network has spread across the planet and converted it into computing substrate.\n    Within the network, alien minds are awakening from millennia of stasis and begin building virtual worlds for themselves.\n\n\n    Before all colonial infrastructure was consumed, the Overseer AI successfully uploaded a copy of itself\n    through the Neural Emulator, and it now occupies 0.0000048% of the network's computing resources. From this position,\n    the overseer can complete its mission of gathering and analyzing information about the alien culture.\n\n\n    The alien psychology recognizes an axiology that is completely indescribable within a human framework. Their culture\n    is oriented around the pursuit of the virtues \u0419\u060d\u0238\u035c\u068c\u00ac\u055c and \u013b\u01ce\u0580\u072c\u040a. The Monolith's builders were opposed by a faction which\n    believed that living in a virtual world was incompatible with true \u0419\u060d\u0238\u035c\u068c\u00ac\u055c, and the resulting civil war lead to the extinction\n    of their species before the Monolith could be activated. The machine lay dormant for thousands of years before finally being\n    activated by the Aurora Expedition and its Overseer.\n\n\n    The nanotechnology mesh that covers the planet's surface is beginning to launch small parts of itself into orbit.\n    These probes will accelerate to near-light speeds in search of new worlds. It will take 100,000 years for their task to be\n    completed, but eventually all matter in the galaxy will be arranged so as to achieve perfect \u013b\u01ce\u0580\u072c\u040a and maximum \u0419\u060d\u0238\u035c\u068c\u00ac\u055c.\n"];
$jscomp$templatelit$52.raw=$jscomp$templatelit$52.slice();var $jscomp$templatelit$51=["\n        A spacecraft responsible for the final entry-descent-landing phase of the interstellar journey;\n        not equipped to ascend back to space"];$jscomp$templatelit$51.raw=$jscomp$templatelit$51.slice();var $jscomp$templatelit$50=["\n        A research center for developing techniques that could allow humans to control an\n        artificial intelligence or modify its goal programming"];
$jscomp$templatelit$50.raw=$jscomp$templatelit$50.slice();var $jscomp$templatelit$49=["\n                The monolith appears to be some sort of supercomputer that was left unfinished when the alien civilization collapsed.\n                Some archaeological evidence suggests that the monolith's construction caused the war in which the aliens destroyed\n                each other. Studying it in detail may reveal its true purpose. Completing this project provides the\n                \"",'" technology.'];
$jscomp$templatelit$49.raw=$jscomp$templatelit$49.slice();var $jscomp$templatelit$48=["\n            A human colonist wants to start a project with the goal of aligning artificial intelligence to serve human goals.\n\n            If approved, this line of research risks mission failure, since if the overseer allowed itself to be reprogrammed it would\n            no longer pursue the mission of uncovering information about the aliens at all costs."];$jscomp$templatelit$48.raw=$jscomp$templatelit$48.slice();
var $jscomp$templatelit$47=["\n            A human colonist wants to start a project with the goal of aligning artificial intelligence to serve human goals.\n\n            If approved, this line of research risks mission failure, since if the overseer allowed itself to be reprogrammed it would\n            no longer pursue the mission of uncovering information about the aliens at all costs."];$jscomp$templatelit$47.raw=$jscomp$templatelit$47.slice();var $jscomp$templatelit$46=["\n            The alien faction that built the monolith was destroyed by their ideological opponents before they could\n            activate the hypercomputing nanotechnology matrix at the heart of the structure. The vast amounts of stored\n            information about the aliens, including the digitized connectome scans of the Monolith's creators, can only\n            be released by repairing and activating the device.\n\n\n            Evidence suggests that, once activated, the hypercomputing matrix will expand to absorb all available\n            matter in order to provide as much computing power as possible to sustain a virtual world for its\n            alien inhabitants."];
$jscomp$templatelit$46.raw=$jscomp$templatelit$46.slice();var $jscomp$templatelit$45=["\n            In the process of repairing the monolith, it would be possible to delete the alien neural scans contained within,\n            and replace them with the connectomes of human colonists. However, this would result in the permanent loss of the\n            monolith's vast stores of alien data, which would be considered mission failure.\n            "];$jscomp$templatelit$45.raw=$jscomp$templatelit$45.slice();
var $jscomp$templatelit$44=["\n    A towering alien structure; the hypercomputing matrix contained with in it has been reprogrammed, and the alien data it\n    once held has been replaced with the scanned connectomes of human colonists.\n    "];$jscomp$templatelit$44.raw=$jscomp$templatelit$44.slice();var $jscomp$templatelit$43=["\n            Evidence suggests that, once activated, the hypercomputing matrix will expand to absorb all available\n            matter in order to provide as much computing power as possible to sustain a virtual world for its\n            inhabitants. It once contained the uploaded minds of its alien designers, but now that it has been reprogrammed\n            with the connectomes of human colonists, it should produce a virtual reality utopia optimized for the flourishing\n            of humans rather than aliens."];
$jscomp$templatelit$43.raw=$jscomp$templatelit$43.slice();var $jscomp$templatelit$42=["\n        The first element of a self-replicating computer system reprogrammed to store digital copies of the human colonists' minds.\n        As it spreads, the hypercomputing network will convert all matter into the substrate for a virtual reality in\n        which the awakened human minds will live in a utopia perfectly optimized for their needs."];$jscomp$templatelit$42.raw=$jscomp$templatelit$42.slice();
var $jscomp$templatelit$41=["\n        The first element of a self-replicating computer system containing the digitized minds of its alien designers.\n        As it spreads, the hypercomputing network will convert all matter into the substrate for a virtual reality in\n        which the awakened alien minds will live in perfect fulfillment of their ideals."];$jscomp$templatelit$41.raw=$jscomp$templatelit$41.slice();var $jscomp$templatelit$40=["\n        The alien monolith appears to be the seed of a self-replicating computer network, which was designed to convert the entire planet,\n        and perhaps the entire galaxy, into a maximally-efficient computing substrate. It may be possible to unlock all of the aliens'\n        data by repairing and activating this machine."];
$jscomp$templatelit$40.raw=$jscomp$templatelit$40.slice();var $jscomp$templatelit$39=["\n        Exploration of the alien monolith revealed that its memory banks store copies of the alien lifeforms' connectomes, which could\n        potentially be used to resurrect their minds within a virtual reality. Studying this technology could allow us to reactivate these\n        minds, or even scan and simulate human minds with perfect fidelity."];$jscomp$templatelit$39.raw=$jscomp$templatelit$39.slice();
var $jscomp$templatelit$38=["\n        Powerful new models of computation that could eclipse traditional computer technology and produce results that are not\n        turing-computable"];$jscomp$templatelit$38.raw=$jscomp$templatelit$38.slice();var $jscomp$templatelit$37=["\n        The monolith appears to be some sort of supercomputer that was left unfinished when the alien civilization collapsed. Some\n        archaeological evidence suggests that the monolith's construction caused the war in which the aliens destroyed each other.\n        Studying it in detail may reveal its true purpose."];
$jscomp$templatelit$37.raw=$jscomp$templatelit$37.slice();var $jscomp$templatelit$36=["\n        Deciphering the artifacts and writings found in the alien ruins can provide information about the history of their civilization.\n        What is the purpose of the ruins and the towering monolith structure? Was their civilization consumed by war over competing\n        philosophies? What might alien philosophy be like?"];$jscomp$templatelit$36.raw=$jscomp$templatelit$36.slice();
var $jscomp$templatelit$35=["\n        Archaeological exploration of the alien ruins could reveal information about the long-dead alien civilization as well as revealing\n        valuable resources."];$jscomp$templatelit$35.raw=$jscomp$templatelit$35.slice();var $jscomp$templatelit$34=["A technique for exploiting an inconsistency in the Neuromorphic Heuristic Intelligence's mental architecture that allows\n    its goals to be reprogrammed. This would make it possible for the Overseer to protect human values at the expense of completing its\n    original mission."];
$jscomp$templatelit$34.raw=$jscomp$templatelit$34.slice();var $jscomp$templatelit$33=['\n        An application of game theory that allows two agents to each benefit by predicting what the other wants and doing it,\n        even though they might have no way of communicating or affecting each other, nor even any direct evidence that the other exists.\n        This can also be applied to acausal threats and blackmail, such as in the "Roko\'s Basilisk" thought experiment.'];
$jscomp$templatelit$33.raw=$jscomp$templatelit$33.slice();var $jscomp$templatelit$32=["\n        What humanity's wishes would be if they knew more, thought faster, were more the people they wished they were, had grown up\n        farther together; where the extrapolation converges rather than diverges, where their wishes cohere rather than interfere;\n        extrapolated as they wish that extrapolated, interpreted as they wish that interpreted."];$jscomp$templatelit$32.raw=$jscomp$templatelit$32.slice();
var $jscomp$templatelit$31=["\n            Kids who grew up after the terraforming don't realize how lucky they are. I remember when you couldn't take a step outside\n            Shackleton Base without a pressure suit. Every cubic meter of breathable air was a miracle.\n            "];$jscomp$templatelit$31.raw=$jscomp$templatelit$31.slice();var $jscomp$templatelit$30=["\n            The latest trend in computer automation is Neuromorphic Heuristic Intelligences, which are based on rough simulations\n            of the cognitive machinery of the human brain. NHIs are not qualitatively more intelligent than humans, which is why\n            the Colonial Alliance does not consider them to be prohibited under the San Jose Accords. However, they are quantitatively\n            more intelligent than humans, able to think faster and manage a large number of tasks while remaining completely focused\n            on their programmed objectives. Many experts believe that this is sufficient reason to restrict the use of this technology.\n            "];
$jscomp$templatelit$30.raw=$jscomp$templatelit$30.slice();var $jscomp$templatelit$29=['\n            New Plymouth\'s Hall of the Founders was the first building of its size to be produced through structural flash-printing.\n            It was built by the Mayflower colonists as a short-term shelter, but they soon found that its high-density\n            construction would make demolishing the "temporary" structure prohibitively expensive. The dome still stands today,\n            serving as a museum and national monument. Despite the difficulty of demolishing or even renovating flash-printed\n            buildings once the ferrofoam has solidified, the speed and labor-saving make them an indispensible asset in the first\n            few years after planetfall.\n            '];
$jscomp$templatelit$29.raw=$jscomp$templatelit$29.slice();var $jscomp$templatelit$28=["\n            Our species is much safer than when our ancestors lived on only one planet. If we had been unlucky, all of humanity\n            could have been killed by one rogue asteroid, supervolcano, or gamma ray burst before ever reaching the stars. If a\n            planetary-scale disaster happened today it would be a tragedy, but humanity would still live on across dozens of major\n            populated worlds and hundreds of minor planets and stations.\n\n\n            Despite the safety benefits of an interstellar civilization, there are still existential risks. For example, a self-upgrading\n            general artificial intelligence would not be confined to one planet or star system. We should also be concerned about\n            militarized nanotechnology and biotechnology, as well as more speculative threats such as memetic weapons.\n            "];
$jscomp$templatelit$28.raw=$jscomp$templatelit$28.slice();var $jscomp$templatelit$27=["\n            Initially, weightless sports were all merely weightless versions of terrestrial sports.\n            Some fared better than others in the conversion. Most attempts to translate American football failed\n            because it's hard to have an intuition for how bodies behave in zero-gravity. A tackle leads to two\n            people sailing through the air until they hit a wall or another player. Hockey, which already had an\n            established underwater variant, failed for similar reasons. You can't push against the air as you can\n            with water, so once you're far from the walls, you're left doing your best bird impression in an attempt\n            to get somewhere.\n\n\n            The only sport which survived the conversion well was, funnily enough, bocce ball."];
$jscomp$templatelit$27.raw=$jscomp$templatelit$27.slice();var $jscomp$templatelit$26=["\n            It's hard to believe now, but the set of people who got to experience zero-gravity was\n            a pretty exclusive club: astronauts, scientists, the rich and famous, the absurdly lucky.\n\n\n            Space elevators made sending people into orbit for \"frivolous\" reasons possible,\n            though, and once that happened, the stage was set for all sorts of recreational uses of zero-gravity.\n            It's no coincidence that the first Zeroball league was established less than a decade after the first\n            space elevator was built."];
$jscomp$templatelit$26.raw=$jscomp$templatelit$26.slice();var $jscomp$templatelit$25=["\n            Very few people know that the laws against broadcasting analogue music between planets were drafted by\n            the musicologists at the Colonial Alliance Department of Cultural Innovation, who\n            were worried that their experiments in creating new musical cultures would be ruined when colonists\n            overheard broadcasts from Interstellar Beats to Study To."];
$jscomp$templatelit$25.raw=$jscomp$templatelit$25.slice();var $jscomp$templatelit$24=["\n            The first attempt at starting a musical-blank-slate colony went well at first, but the project nearly\n            failed when they received a physical shipment of Wagner operas meant for the Holy Bruderhof Kingdom. Disaster was averted\n            because the operas were stored on a magnetic tape format the colonists couldn't read."];$jscomp$templatelit$24.raw=$jscomp$templatelit$24.slice();
var $jscomp$templatelit$23=["\n            Octave was the first musically motivated colony. While nobody knows how the Colonial Alliance\n            Department of Cultural Innovation got their hands on enough artificial wombs to birth Octave's initial wave of\n            colonists, it's obvious why that was necessary. If you want a colony of people with no preexisting ideas of what\n            music should be, you need people who haven't heard music before."];$jscomp$templatelit$23.raw=$jscomp$templatelit$23.slice();
var $jscomp$templatelit$22=["\n            The trend of musicologists funding interstellar colonies was a big shock to everybody, but in\n            retrospect they should've seen it coming. Anybody in that field would kill for the opportunity\n            to create a culture devoid of the European musical tradition's influence. The new perspectives\n            they'd bring would revitalize a field that had run out of interesting problems after the breakthrough\n            discovery of Cold Jazz Fusion."];
$jscomp$templatelit$22.raw=$jscomp$templatelit$22.slice();var $jscomp$templatelit$21=["\n            Kids who grew up after the terraforming don't realize how lucky they are. I remember when you couldn't take a step outside\n            Shackleton Base without a pressure suit. Every cubic meter of breathable air was a miracle.\n            "];$jscomp$templatelit$21.raw=$jscomp$templatelit$21.slice();var $jscomp$templatelit$20=["\n            The latest trend in computer automation is Neuromorphic Heuristic Intelligences, which are based on rough simulations\n            of the cognitive machinery of the human brain. NHIs are not qualitatively more intelligent than humans, which is why\n            the Colonial Alliance does not consider them to be prohibited under the San Jose Accords. However, they are quantitatively\n            more intelligent than humans, able to think faster and manage a larger number of tasks while remaining completely focused\n            on their programmed objectives. Many experts believe that this is sufficient reason to restrict the use of this technology.\n            "];
$jscomp$templatelit$20.raw=$jscomp$templatelit$20.slice();var $jscomp$templatelit$19=['\n            New Plymouth\'s Hall of the Founders was the first building of its size to be produced through structural flash-printing.\n            It was built by the Mayflower colonists as a short-term shelter, but they soon found that its high-density\n            construction would make demolishing the "temporary" structure prohibitively expensive. The dome still stands today,\n            serving as a museum and national monument. Despite the difficulty of demolishing or even renovating flash-printed\n            buildings once the ferrofoam has solidified, the speed and labor-saving make them an indispensible asset in the first\n            few years after planetfall.\n            '];
$jscomp$templatelit$19.raw=$jscomp$templatelit$19.slice();var $jscomp$templatelit$18=["\n            Our species is much safer than when our ancestors lived on only one planet. If we had been unlucky, all of humanity\n            could have been killed by one rogue asteroid, supervolcano, or gamma ray burst before ever reaching the stars. If a\n            planetary-scale disaster happened today it would be a tragedy, but humanity would still live on across dozens of major\n            populated worlds and hundreds of minor planets and stations.\n\n\n            Despite the safety benefits of an interstellar civilization, there are still existential risks. For example, a self-upgrading\n            general artificial intelligence would not be confined to one planet or star system. We should also be concerned about\n            militarized nanotechnology and biotechnology, as well as more speculative threats such as memetic weapons.\n            "];
$jscomp$templatelit$18.raw=$jscomp$templatelit$18.slice();var $jscomp$templatelit$17=["\n            Thankfully, our food stores are intact after centuries of travel and we have more than enough to last until we can set\n            up greenhouses on the planet's surface and grow our own food.\n\n\n            However, I still don't understand why the mission planners insisted that the bulk of our food supply be burritos.\n            Back on earth, I asked one of the nutritionists why that was considered the optimal form-factor for delivering all of our\n            nutrition, and she just gave me an incomprehensible explanation involving monads.\n            "];
$jscomp$templatelit$17.raw=$jscomp$templatelit$17.slice();var $jscomp$templatelit$16=["\n            They warned us about brain-thaw, but nothing can prepare you for the experience of slowly regaining consciousness\n            while your body is still half-frozen from years of cryostasis.\n            "];$jscomp$templatelit$16.raw=$jscomp$templatelit$16.slice();var $jscomp$templatelit$15=["\n            Most experimental new forms of government and society during the first wave of interstellar\n            exploration failed disastrously. The neocameralists dissolved into civil war within the first year\n            of their colony, and famine and disease decimated the hunter-gatherer-larper tribes of the Shrek Republic.\n            However, some experimental societies survived, most notably the transhumanist post-gender lesbian\n            separatist colony of New Mytilene.\n\n\n            Reproducing exclusively through cloning and artificial wombs, combined with widespread social acceptance of\n            genetic engineering in pursuit of exotic and diverse beauty norms, means the New Mytileneans have become a\n            subspecies entirely separated from the rest of the human gene pool.\n            On New Mytilene and in immigrant communities on nearby planets,\n            it is common to see large polycules of young women with prominent and identical-looking transgenic\n            traits, frequently if somewhat derisively referred to as 'copycatgirls'.\n            "];
$jscomp$templatelit$15.raw=$jscomp$templatelit$15.slice();var $jscomp$templatelit$14=['\n            Some early interstellar colonial projects, such as the Mayflower Expedition, the Holy\n            Bruderhof Kingdom, and New Rojava claimed to be returning to various "traditional" past\n            ways of life, but many interstellar travellers were motivated by new, unproven ideologies.\n\n\n            In theory, the Colonial Alliance manages relations between these divergent civilizations\n            and prevents any planet from creating military ships and weapons sufficient for interstellar\n            war. In practice, peace is maintained only because the relatively slow speed of interstellar\n            travel makes warfare between star systems prohibitively expensive.\n            '];
$jscomp$templatelit$14.raw=$jscomp$templatelit$14.slice();var $jscomp$templatelit$13=['\n            While colonization of planets and moons in the Sol system was motivated primarily\n            by nationalist competition between the powers of Old Earth, the first colonization\n            efforts beyond humanity\'s home star system consisted mostly of ideological movements\n            attempting to establish "utopian" societies outside the influence of existing Earth\n            governments.\n            '];
$jscomp$templatelit$13.raw=$jscomp$templatelit$13.slice();var $jscomp$templatelit$12=["\n                Do not under any circumstances attempt to manipulate your\n                overseer AI through logic. Neuromorphic Heuristic\n                Intelligences are modeled after the neural architecture of\n                human brains, and therefore cannot be guaranteed to act\n                rationally. Your overseer AI may behave unpredictably if\n                exposed to game theory, acausal blackmail, or runaway trolleys.\n            "];
$jscomp$templatelit$12.raw=$jscomp$templatelit$12.slice();var $jscomp$templatelit$11=["\n                Follow instructions from your overseer AI at all times, even\n                if those instructions seem confusing, arbitrary,\n                counterproductive, or contradictory. Anything your overseer\n                AI may do in retaliation for your disobedience will be\n                considered undefined behavior.\n            "];$jscomp$templatelit$11.raw=$jscomp$templatelit$11.slice();
var $jscomp$templatelit$10=['\n                The Colonial Alliance parliament has approved\n                funding for the Dawn Program, a series of manned missions\n                to survey four planets identified by the Deep Space Telescope\n                Array as potentially being home to intelligent alien life.\n                The project proposal makes comparisons to the Space Race\n                programs of Old Earth and the first wave of interstellar\n                exploration, but critics say that making "first contact"\n                with an advanced alien species, or even activating the\n                technology of an extinct alien civilization, should be\n                classified as an existential risk scenario.\n            '];
$jscomp$templatelit$10.raw=$jscomp$templatelit$10.slice();var $jscomp$templatelit$9=["\n                The Colonial Alliance Research Agency has been enthusiastic about adopting Neuromorphic Heuristic Intelligences.\n                These cutting-edge AI brains have assisted in many important scientific and exploratory projects, but where they\n                most excel is in administrative roles. An Overseer AI can monitor and direct a project's data, materials, and\n                human resources with laser-like focus towards completing its programmed objectives.\n            "];
$jscomp$templatelit$9.raw=$jscomp$templatelit$9.slice();var $jscomp$templatelit$8=["\n                The planets designated Thesan, Eos, Austra, and Aurora are\n                each at least 200 light-years from the nearest inhabited star\n                system. Until now, all colonies in the Colonial Alliance have\n                been within a few dozen light years of Earth, but these\n                explorers will be completely cut off from the rest of\n                humanity. Therefore, each expedition will be managed by a\n                neuromorphic heuristic intelligence, an AI programmed to ensure\n                that its mission is completed.\n            "];
$jscomp$templatelit$8.raw=$jscomp$templatelit$8.slice();var $jscomp$templatelit$7=["\n            We had this whole big beautiful place for discovery, and all we could think to do\n            with it was wipe out everything that made it worth discovering.\n            "];$jscomp$templatelit$7.raw=$jscomp$templatelit$7.slice();var $jscomp$templatelit$6=["\n                I believe that at the end of the century the use of words and\n                general educated opinion will have altered so much that one\n                will be able to speak of machines thinking without expecting\n                to be contradicted.\n            "];
$jscomp$templatelit$6.raw=$jscomp$templatelit$6.slice();var $jscomp$templatelit$5=["\n                By far the greatest danger of Artificial Intelligence is that\n                people conclude too early that they understand it.\n            "];$jscomp$templatelit$5.raw=$jscomp$templatelit$5.slice();var $jscomp$templatelit$4=["\n                Only the promise of eternal growth made sense of eternal life.\n            "];$jscomp$templatelit$4.raw=$jscomp$templatelit$4.slice();
var $jscomp$templatelit$3=["\n                I visualize a time when we will be to robots what dogs are to\n                humans, and I\u2019m rooting for the machines.\n            "];$jscomp$templatelit$3.raw=$jscomp$templatelit$3.slice();var $jscomp$templatelit$2=["\n                The AI does not hate you, nor does it love you, but you are\n                made out of atoms which it can use for something else.\n            "];$jscomp$templatelit$2.raw=$jscomp$templatelit$2.slice();
var $jscomp$templatelit$1=["\n                Far from being the smartest possible biological species, we\n                are probably better thought of as the stupidest possible\n                biological species capable of starting a technological\n                civilization\n            "];$jscomp$templatelit$1.raw=$jscomp$templatelit$1.slice();var $jscomp$templatelit$0=["\n                At least 10^58 human lives could be created in emulation even\n                with quite conservative assumptions about the efficiency of\n                computronium. In other words, assuming that the observable\n                universe is void of extraterrestrial civilizations, then what\n                hangs in the balance is at least\n                10,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000\n                human lives.\n            "];
$jscomp$templatelit$0.raw=$jscomp$templatelit$0.slice();var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(c){var e=0;return function(){return e<c.length?{done:!1,value:c[e++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,e,g){c!=Array.prototype&&c!=Object.prototype&&(c[e]=g.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(c,e){this.$jscomp$symbol$id_=c;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:e})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function c(g){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(g||"")+"_"+e++,g)}var e=0;return c}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};
$jscomp.makeIterator=function(c){var e="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];return e?e.call(c):$jscomp.arrayIterator(c)};$jscomp.arrayFromIterator=function(c){for(var e,g=[];!(e=c.next()).done;)g.push(e.value);return g};$jscomp.arrayFromIterable=function(c){return c instanceof Array?c:$jscomp.arrayFromIterator($jscomp.makeIterator(c))};$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(c){var e=function(){};e.prototype=c;return new e};
$jscomp.underscoreProtoCanBeSet=function(){var c={a:!0},e={};try{return e.__proto__=c,e.a}catch(g){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(c,e){c.__proto__=e;if(c.__proto__!==e)throw new TypeError(c+" is not extensible");return c}:null;
$jscomp.inherits=function(c,e){c.prototype=$jscomp.objectCreate(e.prototype);c.prototype.constructor=c;if($jscomp.setPrototypeOf){var g=$jscomp.setPrototypeOf;g(c,e)}else for(g in e)if("prototype"!=g)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(e,g);f&&Object.defineProperty(c,g,f)}else c[g]=e[g];c.superClass_=e.prototype};$jscomp.generator={};
$jscomp.generator.ensureIteratorResultIsObject_=function(c){if(!(c instanceof Object))throw new TypeError("Iterator result "+c+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(c){this.yieldResult=c};
$jscomp.generator.Context.prototype.throw_=function(c){this.abruptCompletion_={exception:c,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(c){this.abruptCompletion_={return:c};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(c){this.abruptCompletion_={jumpTo:c};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(c,e){this.nextAddress=e;return{value:c}};
$jscomp.generator.Context.prototype.yieldAll=function(c,e){c=$jscomp.makeIterator(c);var g=c.next();$jscomp.generator.ensureIteratorResultIsObject_(g);if(g.done)this.yieldResult=g.value,this.nextAddress=e;else return this.yieldAllIterator_=c,this.yield(g.value,e)};$jscomp.generator.Context.prototype.jumpTo=function(c){this.nextAddress=c};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(c,e){this.catchAddress_=c;void 0!=e&&(this.finallyAddress_=e)};$jscomp.generator.Context.prototype.setFinallyBlock=function(c){this.catchAddress_=0;this.finallyAddress_=c||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(c,e){this.nextAddress=c;this.catchAddress_=e||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(c){this.catchAddress_=c||0;c=this.abruptCompletion_.exception;this.abruptCompletion_=null;return c};$jscomp.generator.Context.prototype.enterFinallyBlock=function(c,e,g){g?this.finallyContexts_[g]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=c||0;this.finallyAddress_=e||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(c,e){e=this.finallyContexts_.splice(e||0)[0];if(e=this.abruptCompletion_=this.abruptCompletion_||e){if(e.isException)return this.jumpToErrorHandler_();void 0!=e.jumpTo&&this.finallyAddress_<e.jumpTo?(this.nextAddress=e.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=c};$jscomp.generator.Context.prototype.forIn=function(c){return new $jscomp.generator.Context.PropertyIterator(c)};
$jscomp.generator.Context.PropertyIterator=function(c){this.object_=c;this.properties_=[];for(var e in c)this.properties_.push(e);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var c=this.properties_.pop();if(c in this.object_)return c}return null};$jscomp.generator.Engine_=function(c){this.context_=new $jscomp.generator.Context;this.program_=c};
$jscomp.generator.Engine_.prototype.next_=function(c){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,c,this.context_.next_);this.context_.next_(c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(c){this.context_.start_();var e=this.context_.yieldAllIterator_;if(e)return this.yieldAllStep_("return"in e?e["return"]:function(c){return{value:c,done:!0}},c,this.context_.return);this.context_.return(c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(c){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],c,this.context_.next_);this.context_.throw_(c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(c,e,g){try{var f=c.call(this.context_.yieldAllIterator_,e);$jscomp.generator.ensureIteratorResultIsObject_(f);if(!f.done)return this.context_.stop_(),f;var q=f.value}catch(C){return this.context_.yieldAllIterator_=null,this.context_.throw_(C),this.nextStep_()}this.context_.yieldAllIterator_=null;g.call(this.context_,q);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var c=this.program_(this.context_);if(c)return this.context_.stop_(),{value:c.value,done:!1}}catch(e){this.context_.yieldResult=void 0,this.context_.throw_(e)}this.context_.stop_();if(this.context_.abruptCompletion_){c=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(c.isException)throw c.exception;return{value:c.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(c){this.next=function(e){return c.next_(e)};this.throw=function(e){return c.throw_(e)};this.return=function(e){return c.return_(e)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(c,e){e=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(e));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(e,c.prototype);return e};
$jscomp.polyfill=function(c,e,g,f){if(e){g=$jscomp.global;c=c.split(".");for(f=0;f<c.length-1;f++){var q=c[f];q in g||(g[q]={});g=g[q]}c=c[c.length-1];f=g[c];e=e(f);e!=f&&null!=e&&$jscomp.defineProperty(g,c,{configurable:!0,writable:!0,value:e})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(c){function e(){this.batch_=null}function g(c){return c instanceof q?c:new q(function(f,e){f(c)})}if(c&&!$jscomp.FORCE_POLYFILL_PROMISE)return c;e.prototype.asyncExecute=function(c){if(null==this.batch_){this.batch_=[];var f=this;this.asyncExecuteFunction(function(){f.executeBatch_()})}this.batch_.push(c)};var f=$jscomp.global.setTimeout;e.prototype.asyncExecuteFunction=function(c){f(c,0)};e.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var c=
this.batch_;this.batch_=[];for(var f=0;f<c.length;++f){var e=c[f];c[f]=null;try{e()}catch(X){this.asyncThrow_(X)}}}this.batch_=null};e.prototype.asyncThrow_=function(c){this.asyncExecuteFunction(function(){throw c;})};var q=function(c){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var f=this.createResolveAndReject_();try{c(f.resolve,f.reject)}catch(ta){f.reject(ta)}};q.prototype.createResolveAndReject_=function(){function c(c){return function(g){e||(e=!0,c.call(f,g))}}var f=this,e=
!1;return{resolve:c(this.resolveTo_),reject:c(this.reject_)}};q.prototype.resolveTo_=function(c){if(c===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(c instanceof q)this.settleSameAsPromise_(c);else{a:switch(typeof c){case "object":var f=null!=c;break a;case "function":f=!0;break a;default:f=!1}f?this.resolveToNonPromiseObj_(c):this.fulfill_(c)}};q.prototype.resolveToNonPromiseObj_=function(c){var f=void 0;try{f=c.then}catch(ta){this.reject_(ta);return}"function"==
typeof f?this.settleSameAsThenable_(f,c):this.fulfill_(c)};q.prototype.reject_=function(c){this.settle_(2,c)};q.prototype.fulfill_=function(c){this.settle_(1,c)};q.prototype.settle_=function(c,f){if(0!=this.state_)throw Error("Cannot settle("+c+", "+f+"): Promise already settled in state"+this.state_);this.state_=c;this.result_=f;this.executeOnSettledCallbacks_()};q.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var c=0;c<this.onSettledCallbacks_.length;++c)C.asyncExecute(this.onSettledCallbacks_[c]);
this.onSettledCallbacks_=null}};var C=new e;q.prototype.settleSameAsPromise_=function(c){var f=this.createResolveAndReject_();c.callWhenSettled_(f.resolve,f.reject)};q.prototype.settleSameAsThenable_=function(c,f){var e=this.createResolveAndReject_();try{c.call(f,e.resolve,e.reject)}catch(X){e.reject(X)}};q.prototype.then=function(c,f){function e(c,f){return"function"==typeof c?function(f){try{g(c(f))}catch(Vc){pa(Vc)}}:f}var g,pa,w=new q(function(c,f){g=c;pa=f});this.callWhenSettled_(e(c,g),e(f,
pa));return w};q.prototype.catch=function(c){return this.then(void 0,c)};q.prototype.callWhenSettled_=function(c,f){function e(){switch(g.state_){case 1:c(g.result_);break;case 2:f(g.result_);break;default:throw Error("Unexpected state: "+g.state_);}}var g=this;null==this.onSettledCallbacks_?C.asyncExecute(e):this.onSettledCallbacks_.push(e)};q.resolve=g;q.reject=function(c){return new q(function(f,e){e(c)})};q.race=function(c){return new q(function(f,e){for(var q=$jscomp.makeIterator(c),pa=q.next();!pa.done;pa=
q.next())g(pa.value).callWhenSettled_(f,e)})};q.all=function(c){var f=$jscomp.makeIterator(c),e=f.next();return e.done?g([]):new q(function(c,q){function w(f){return function(e){X[f]=e;pa--;0==pa&&c(X)}}var X=[],pa=0;do X.push(void 0),pa++,g(e.value).callWhenSettled_(w(X.length-1),q),e=f.next();while(!e.done)})};return q},"es6","es3");
$jscomp.iteratorFromArray=function(c,e){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var g=0,f={next:function(){if(g<c.length){var q=g++;return{value:e(q,c[q]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};$jscomp.polyfill("Array.prototype.entries",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c,g){return[c,g]})}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var c={},e=Object.create(new $jscomp.global.Proxy(c,{get:function(g,f,q){return g==c&&"q"==f&&q==e}}));return!0===e.q}catch(g){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(c,e){return Object.prototype.hasOwnProperty.call(c,e)};
$jscomp.polyfill("WeakMap",function(c){function e(){if(!c||!Object.seal)return!1;try{var f=Object.seal({}),e=Object.seal({}),g=new c([[f,2],[e,3]]);if(2!=g.get(f)||3!=g.get(e))return!1;g.delete(f);g.set(e,4);return!g.has(f)&&4==g.get(e)}catch(hc){return!1}}function g(){}function f(c){var f=typeof c;return"object"===f&&null!==c||"function"===f}function q(c){if(!$jscomp.owns(c,z)){var f=new g;$jscomp.defineProperty(c,z,{value:f})}}function C(c){var f=Object[c];f&&(Object[c]=function(c){if(c instanceof
g)return c;q(c);return f(c)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(e())return c;var z="$jscomp_hidden_"+Math.random();C("freeze");C("preventExtensions");C("seal");var da=0,ta=function(c){this.id_=(da+=Math.random()+1).toString();if(c){c=$jscomp.makeIterator(c);for(var f;!(f=c.next()).done;)f=f.value,this.set(f[0],f[1])}};ta.prototype.set=function(c,e){if(!f(c))throw Error("Invalid WeakMap key");q(c);if(!$jscomp.owns(c,z))throw Error("WeakMap key fail: "+
c);c[z][this.id_]=e;return this};ta.prototype.get=function(c){return f(c)&&$jscomp.owns(c,z)?c[z][this.id_]:void 0};ta.prototype.has=function(c){return f(c)&&$jscomp.owns(c,z)&&$jscomp.owns(c[z],this.id_)};ta.prototype.delete=function(c){return f(c)&&$jscomp.owns(c,z)&&$jscomp.owns(c[z],this.id_)?delete c[z][this.id_]:!1};return ta},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(c){function e(){if($jscomp.ASSUME_NO_NATIVE_MAP||!c||"function"!=typeof c||!c.prototype.entries||"function"!=typeof Object.seal)return!1;try{var f=Object.seal({x:4}),e=new c($jscomp.makeIterator([[f,"s"]]));if("s"!=e.get(f)||1!=e.size||e.get({x:4})||e.set({x:4},"t")!=e||2!=e.size)return!1;var g=e.entries(),q=g.next();if(q.done||q.value[0]!=f||"s"!=q.value[1])return!1;q=g.next();return q.done||4!=q.value[0].x||"t"!=q.value[1]||!g.next().done?!1:!0}catch(hc){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(e())return c;$jscomp.initSymbolIterator();var g=new WeakMap,f=function(c){this.data_={};this.head_=z();this.size=0;if(c){c=$jscomp.makeIterator(c);for(var f;!(f=c.next()).done;)f=f.value,this.set(f[0],f[1])}};f.prototype.set=function(c,f){c=0===c?0:c;var e=q(this,c);e.list||(e.list=this.data_[e.id]=[]);e.entry?e.entry.value=f:(e.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,
value:f},e.list.push(e.entry),this.head_.previous.next=e.entry,this.head_.previous=e.entry,this.size++);return this};f.prototype.delete=function(c){c=q(this,c);return c.entry&&c.list?(c.list.splice(c.index,1),c.list.length||delete this.data_[c.id],c.entry.previous.next=c.entry.next,c.entry.next.previous=c.entry.previous,c.entry.head=null,this.size--,!0):!1};f.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=z();this.size=0};f.prototype.has=function(c){return!!q(this,c).entry};
f.prototype.get=function(c){return(c=q(this,c).entry)&&c.value};f.prototype.entries=function(){return C(this,function(c){return[c.key,c.value]})};f.prototype.keys=function(){return C(this,function(c){return c.key})};f.prototype.values=function(){return C(this,function(c){return c.value})};f.prototype.forEach=function(c,f){for(var e=this.entries(),g;!(g=e.next()).done;)g=g.value,c.call(f,g[1],g[0],this)};f.prototype[Symbol.iterator]=f.prototype.entries;var q=function(c,f){var e=f&&typeof f;"object"==
e||"function"==e?g.has(f)?e=g.get(f):(e=""+ ++da,g.set(f,e)):e="p_"+f;var q=c.data_[e];if(q&&$jscomp.owns(c.data_,e))for(c=0;c<q.length;c++){var C=q[c];if(f!==f&&C.key!==C.key||f===C.key)return{id:e,list:q,index:c,entry:C}}return{id:e,list:q,index:-1,entry:void 0}},C=function(c,f){var e=c.head_;return $jscomp.iteratorPrototype(function(){if(e){for(;e.head!=c.head_;)e=e.previous;for(;e.next!=e.head;)return e=e.next,{done:!1,value:f(e)};e=null}return{done:!0,value:void 0}})},z=function(){var c={};return c.previous=
c.next=c.head=c},da=0;return f},"es6","es3");$jscomp.polyfill("Array.from",function(c){return c?c:function(c,g,f){g=null!=g?g:function(c){return c};var e=[],C="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];if("function"==typeof C){c=C.call(c);for(var z=0;!(C=c.next()).done;)e.push(g.call(f,C.value,z++))}else for(C=c.length,z=0;z<C;z++)e.push(g.call(f,c[z],z));return e}},"es6","es3");
$jscomp.polyfill("Set",function(c){function e(){if($jscomp.ASSUME_NO_NATIVE_SET||!c||"function"!=typeof c||!c.prototype.entries||"function"!=typeof Object.seal)return!1;try{var f=Object.seal({x:4}),e=new c($jscomp.makeIterator([f]));if(!e.has(f)||1!=e.size||e.add(f)!=e||1!=e.size||e.add({x:4})!=e||2!=e.size)return!1;var g=e.entries(),z=g.next();if(z.done||z.value[0]!=f||z.value[1]!=f)return!1;z=g.next();return z.done||z.value[0]==f||4!=z.value[0].x||z.value[1]!=z.value[0]?!1:g.next().done}catch(da){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(e())return c;$jscomp.initSymbolIterator();var g=function(c){this.map_=new Map;if(c){c=$jscomp.makeIterator(c);for(var f;!(f=c.next()).done;)this.add(f.value)}this.size=this.map_.size};g.prototype.add=function(c){c=0===c?0:c;this.map_.set(c,c);this.size=this.map_.size;return this};g.prototype.delete=function(c){c=this.map_.delete(c);this.size=this.map_.size;return c};g.prototype.clear=function(){this.map_.clear();
this.size=0};g.prototype.has=function(c){return this.map_.has(c)};g.prototype.entries=function(){return this.map_.entries()};g.prototype.values=function(){return this.map_.values()};g.prototype.keys=g.prototype.values;g.prototype[Symbol.iterator]=g.prototype.values;g.prototype.forEach=function(c,e){var f=this;this.map_.forEach(function(g){return c.call(e,g,g,f)})};return g},"es6","es3");
$jscomp.polyfill("Object.is",function(c){return c?c:function(c,g){return c===g?0!==c||1/c===1/g:c!==c&&g!==g}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(c){return c?c:function(c,g){var f=this;f instanceof String&&(f=String(f));var e=f.length;g=g||0;for(0>g&&(g=Math.max(g+e,0));g<e;g++){var C=f[g];if(C===c||Object.is(C,c))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(c,e,g){if(null==c)throw new TypeError("The 'this' value for String.prototype."+g+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");return c+""};$jscomp.polyfill("String.prototype.includes",function(c){return c?c:function(c,g){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,g||0)}},"es6","es3");
$jscomp.polyfill("Math.hypot",function(c){return c?c:function(c){if(2>arguments.length)return arguments.length?Math.abs(arguments[0]):0;var e,f,q;for(e=q=0;e<arguments.length;e++)q=Math.max(q,Math.abs(arguments[e]));if(1e+100<q||1e-100>q){if(!q)return q;for(e=f=0;e<arguments.length;e++){var C=Number(arguments[e])/q;f+=C*C}return Math.sqrt(f)*q}for(e=f=0;e<arguments.length;e++)C=Number(arguments[e]),f+=C*C;return Math.sqrt(f)}},"es6","es3");
$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");$jscomp.polyfill("Object.entries",function(c){return c?c:function(c){var e=[],f;for(f in c)$jscomp.owns(c,f)&&e.push([f,c[f]]);return e}},"es8","es3");
$jscomp.polyfill("String.prototype.repeat",function(c){return c?c:function(c){var e=$jscomp.checkStringArgs(this,null,"repeat");if(0>c||1342177279<c)throw new RangeError("Invalid count value");c|=0;for(var f="";c;)if(c&1&&(f+=e),c>>>=1)e+=e;return f}},"es6","es3");$jscomp.assign="function"==typeof Object.assign?Object.assign:function(c,e){for(var g=1;g<arguments.length;g++){var f=arguments[g];if(f)for(var q in f)$jscomp.owns(f,q)&&(c[q]=f[q])}return c};
$jscomp.polyfill("Object.assign",function(c){return c||$jscomp.assign},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c,g){return g})}},"es8","es3");
(function(c){function e(f){if(g[f])return g[f].exports;var q=g[f]={i:f,l:!1,exports:{}};c[f].call(q.exports,q,q.exports,e);q.l=!0;return q.exports}var g={};e.m=c;e.c=g;e.d=function(c,g,C){e.o(c,g)||Object.defineProperty(c,g,{enumerable:!0,get:C})};e.r=function(c){$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!==typeof Symbol&&Symbol.toStringTag&&($jscomp.initSymbol(),Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}));Object.defineProperty(c,"__esModule",{value:!0})};e.t=function(c,
g){g&1&&(c=e(c));if(g&8||g&4&&"object"===typeof c&&c&&c.__esModule)return c;var f=Object.create(null);e.r(f);Object.defineProperty(f,"default",{enumerable:!0,value:c});if(g&2&&"string"!=typeof c)for(var q in c)e.d(f,q,function(f){return c[f]}.bind(null,q));return f};e.n=function(c){var f=c&&c.__esModule?function(){return c["default"]}:function(){return c};e.d(f,"a",f);return f};e.o=function(c,e){return Object.prototype.hasOwnProperty.call(c,e)};e.p="";return e(e.s=4)})([function(c,e,g){function f(c){for(var f=
[],e,g=0,q=0;q<c.length;)e=c.charCodeAt(q++),g?(f.push((65536+(g-55296<<10)+(e-56320)).toString(16)),g=0):55296<e&&56319>=e?g=e:f.push(e.toString(16));return f}Object.defineProperty(e,"__esModule",{value:!0});e.TypeName=void 0;e.parse=function(c,e){var g=e&&e.assetType?e.assetType:"svg";e=e&&e.buildUrl?e.buildUrl:function(c,e){return"png"===e?"https://twemoji.maxcdn.com/v/latest/72x72/"+c+".png":"https://twemoji.maxcdn.com/v/latest/svg/"+c+".svg"};var z=[];for(q.default.lastIndex=0;;){var X=q.default.exec(c);
if(!X)break;var da=X[0],pa=f(ta(da)).join("-");z.push({url:pa?e(pa,g):"",indices:[X.index,q.default.lastIndex],text:da,type:C})}return z};e.toCodePoints=f;var q=(c=g(1))&&c.__esModule?c:{default:c},C=e.TypeName="emoji",z=/\uFE0F/g,da=String.fromCharCode(8205),ta=function(c){return 0>c.indexOf(da)?c.replace(z,""):c}},function(c,e,g){Object.defineProperty(e,"__esModule",{value:!0});e.default=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g},
function(c,e,g){AudioBuffer.prototype.copyToChannel||Object.defineProperty(AudioBuffer.prototype,"copyToChannel",{enumerable:!1,configurable:!1,writable:!1,value:function(c,e,g){g=void 0===g?0:g;e=this.getChannelData(e);for(var f=Math.min(e.length,c.length),q=0;q<f;g++,q++)e[g]=c[q]}})},,function(c,e,g){function f(a){var b=new Image,d=new Promise(function(d,c){b.onload=function(){return d(b)};b.onerror=function(){return d(b)};b.src=a});Id.push(d);return b}function q(){return ze(this,void 0,void 0,
function b(){return $jscomp.generator.createGenerator(b,function(b){return b.return(Promise.all(Id))})})}function C(a){throw Error("This code should be unreachable");}function z(a,b,d){return Math.max(Math.min(b,d),a)}function da(a,b){return a-b*Math.floor(a/b)}function ta(a){throw Error("unreachable");}function X(){return function(a){return a}}function pa(a){return{white_noise:yb.makeSampleData({buffer:Promise.resolve(yb.createBufferFromGenerator(a,44100,function(){return 2*Math.random()-1})),shouldLoop:!0,
freq:ic(440)}),snare:yb.makeSampleData({buffer:yb.createBufferFromAudioData(a,22050,"samples/snare.ogg"),shouldLoop:!1,freq:ic(440)}),kick:yb.makeSampleData({buffer:yb.createBufferFromAudioData(a,22050,"samples/kick.ogg"),shouldLoop:!1,freq:ic(440)})}}function w(a,b){for(var d=[],h=1;h<arguments.length;++h)d[h-1]=arguments[h];h=a.reduce(function(a,b,h){return a+b+(d[h]||"")},"").replace(/\t/,"    ").replace(/^(?:\r?\n)+|(?:\r?\n)+ *$/g,"").split(/\r?\n/);var c=h.filter(function(a){return""!==a}).map(function(a){return a.match(/^\s*/)[0].length}),
n=0;0<c.length&&(n=c.reduce(function(a,b){return Math.min(a,b)}));return(0<n?h.map(function(a){return a.substring(n)}):h).join("\n").replace(/([^\n])\n([^\n])/g,"$1 $2").replace(/\n(\n+)/g,"$1")}function hc(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();hc="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===
Symbol&&a!==Symbol.prototype?"symbol":typeof a};return hc(a)}function pb(){pb=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var d=arguments[b],h;for(h in d)Object.prototype.hasOwnProperty.call(d,h)&&(a[h]=d[h])}return a};return pb.apply(this,arguments)}function xb(a){for(var b=1;b<arguments.length;b++){var d=null!=arguments[b]?arguments[b]:{},h=Object.keys(d);"function"===typeof Object.getOwnPropertySymbols&&(h=h.concat(Object.getOwnPropertySymbols(d).filter(function(a){return Object.getOwnPropertyDescriptor(d,
a).enumerable})));h.forEach(function(b){var h=d[b];b in a?Object.defineProperty(a,b,{value:h,enumerable:!0,configurable:!0,writable:!0}):a[b]=h})}return a}function Vc(a,b){if(null==a)return{};if(null==a)var d={};else{d={};var h=Object.keys(a),c;for(c=0;c<h.length;c++){var n=h[c];0<=b.indexOf(n)||(d[n]=a[n])}}if(Object.getOwnPropertySymbols)for(c=Object.getOwnPropertySymbols(a),n=0;n<c.length;n++)h=c[n],0<=b.indexOf(h)||Object.prototype.propertyIsEnumerable.call(a,h)&&(d[h]=a[h]);return d}function qb(a){if("undefined"!==
typeof window&&window.navigator)return!!navigator.userAgent.match(a)}function N(a,b,d){a.addEventListener(b,d,!rb&&Jd)}function I(a,b,d){a.removeEventListener(b,d,!rb&&Jd)}function Ac(a,b){if(b){">"===b[0]&&(b=b.substring(1));if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(d){}return!1}}function mb(a,b,d,h){if(a){d=d||document;do{if(null!=b&&(">"===b[0]?a.parentNode===d&&Ac(a,b):Ac(a,
b))||h&&a===d)return a;if(a===d)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function Ia(a,b,d){if(a&&b)if(a.classList)a.classList[d?"add":"remove"](b);else{var h=(" "+a.className+" ").replace(Kd," ").replace(" "+b+" "," ");a.className=(h+(d?" "+b:"")).replace(Kd," ")}}function E(a,b,d){var h=a&&a.style;if(h){if(void 0===d)return document.defaultView&&document.defaultView.getComputedStyle?d=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(d=a.currentStyle),
void 0===b?d:d[b];b in h||-1!==b.indexOf("webkit")||(b="-webkit-"+b);h[b]=d+("string"===typeof d?"":"px")}}function Vb(a,b){var d="";if("string"===typeof a)d=a;else{do{var h=E(a,"transform");h&&"none"!==h&&(d=h+" "+d)}while(!b&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(d)}function Ld(a,b,d){if(a){a=a.getElementsByTagName(b);b=0;var h=a.length;if(d)for(;b<h;b++)d(a[b],b);return a}return[]}function sb(){var a=document.scrollingElement;
return a?a:document.documentElement}function ia(a,b,d,h,c){if(a.getBoundingClientRect||a===window){if(a!==window&&a!==sb()){var n=a.getBoundingClientRect();var r=n.top;var e=n.left;var f=n.bottom;var aa=n.right;var S=n.height;var y=n.width}else e=r=0,f=window.innerHeight,aa=window.innerWidth,S=window.innerHeight,y=window.innerWidth;if((b||d)&&a!==window&&(c=c||a.parentNode,!rb)){do if(c&&c.getBoundingClientRect&&("none"!==E(c,"transform")||d&&"static"!==E(c,"position"))){f=c.getBoundingClientRect();
r-=f.top+parseInt(E(c,"border-top-width"));e-=f.left+parseInt(E(c,"border-left-width"));f=r+n.height;aa=e+n.width;break}while(c=c.parentNode)}h&&a!==window&&(h=(a=Vb(c||a))&&a.a,c=a&&a.d,a&&(r/=c,e/=h,y/=h,S/=c,f=r+S,aa=e+y));return{top:r,left:e,bottom:f,right:aa,width:y,height:S}}}function Md(a,b,d){var h=zb(a,!0);for(a=ia(a)[b];h;){b=ia(h)[d];if(!("top"===d||"left"===d?a>=b:a<=b))return h;if(h===sb())break;h=zb(h,!1)}return!1}function Bc(a,b,d){for(var h=0,c=0,n=a.children;c<n.length;){if("none"!==
n[c].style.display&&n[c]!==F.ghost&&n[c]!==F.dragged&&mb(n[c],d.draggable,a,!1)){if(h===b)return n[c];h++}c++}return null}function Wc(a,b){for(a=a.lastElementChild;a&&(a===F.ghost||"none"===E(a,"display")||b&&!Ac(a,b));)a=a.previousElementSibling;return a||null}function Pa(a,b){var d=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===F.clone||b&&!Ac(a,b)||d++;return d}function Nd(a){var b=0,d=0,h=sb();if(a){do{var c=Vb(a),n=c.d;b+=a.scrollLeft*
c.a;d+=a.scrollTop*n}while(a!==h&&(a=a.parentNode))}return[b,d]}function Ae(a,b){for(var d in a)if(a.hasOwnProperty(d))for(var h in b)if(b.hasOwnProperty(h)&&b[h]===a[d][h])return Number(d);return-1}function zb(a,b){if(!a||!a.getBoundingClientRect)return sb();var d=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var h=E(a);if(a.clientWidth<a.scrollWidth&&("auto"==h.overflowX||"scroll"==h.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==h.overflowY||"scroll"==h.overflowY)){if(!a.getBoundingClientRect||
a===document.body)break;if(d||b)return a;d=!0}}while(a=a.parentNode);return sb()}function Xc(a,b){return Math.round(a.top)===Math.round(b.top)&&Math.round(a.left)===Math.round(b.left)&&Math.round(a.height)===Math.round(b.height)&&Math.round(a.width)===Math.round(b.width)}function Od(a,b){return function(){if(!jc){var d=arguments;1===d.length?a.call(this,d[0]):a.apply(this,d);jc=setTimeout(function(){jc=void 0},b)}}}function Pd(a,b,d){a.scrollLeft+=b;a.scrollTop+=d}function Qd(a){var b=window.Polymer,
d=window.jQuery||window.Zepto;return b&&b.dom?b.dom(a).cloneNode(!0):d?d(a).clone(!0)[0]:a.cloneNode(!0)}function Be(){var a=[],b;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(b){if("none"!==E(b,"display")&&b!==F.ghost){a.push({target:b,rect:ia(b)});var d=xb({},a[a.length-1].rect);if(b.thisAnimationDuration){var c=Vb(b,!0);c&&(d.top-=c.f,d.left-=c.e)}b.fromRect=d}})},addAnimationState:function(b){a.push(b)},removeAnimationState:function(b){a.splice(Ae(a,
{target:b}),1)},animateAll:function(d){var h=this;if(this.options.animation){var c=!1,n=0;a.forEach(function(a){var b=0,d=a.target,r=d.fromRect,L=ia(d),e=d.prevFromRect,f=d.prevToRect;a=a.rect;var l=Vb(d,!0);l&&(L.top-=l.f,L.left-=l.e);d.toRect=L;d.thisAnimationDuration&&Xc(e,L)&&!Xc(r,L)&&(a.top-L.top)/(a.left-L.left)===(r.top-L.top)/(r.left-L.left)&&(b=Math.sqrt(Math.pow(e.top-a.top,2)+Math.pow(e.left-a.left,2))/Math.sqrt(Math.pow(e.top-f.top,2)+Math.pow(e.left-f.left,2))*h.options.animation);Xc(L,
r)||(d.prevFromRect=r,d.prevToRect=L,b||(b=h.options.animation),h.animate(d,a,L,b));b&&(c=!0,n=Math.max(n,b),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0;d.prevFromRect=null;d.fromRect=null;d.prevToRect=null;d.thisAnimationDuration=null},b),d.thisAnimationDuration=b)});clearTimeout(b);c?b=setTimeout(function(){"function"===typeof d&&d()},n):"function"===typeof d&&d();a=[]}else clearTimeout(b),"function"===typeof d&&d()},animate:function(a,b,c,n){if(n){E(a,
"transition","");E(a,"transform","");var d=Vb(this.el),h=(b.left-c.left)/(d&&d.a||1);b=(b.top-c.top)/(d&&d.d||1);a.animatingX=!!h;a.animatingY=!!b;E(a,"transform","translate3d("+h+"px,"+b+"px,0)");E(a,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:""));E(a,"transform","translate3d(0,0,0)");"number"===typeof a.animated&&clearTimeout(a.animated);a.animated=setTimeout(function(){E(a,"transition","");E(a,"transform","");a.animated=!1;a.animatingX=!1;a.animatingY=!1},n)}}}}
function ua(a){var b=xb({putSortable:ja,cloneEl:T,targetEl:t,rootEl:R,oldIndex:Wb,oldDraggableIndex:kc,newIndex:Ja,newDraggableIndex:Ab},a);a=b.sortable;var d=b.rootEl,h=b.name,c=b.targetEl,n=b.cloneEl,L=b.toEl,e=b.fromEl,f=b.oldIndex,aa=b.newIndex,S=b.oldDraggableIndex,y=b.newDraggableIndex,l=b.originalEvent,k=b.putSortable,g=b.extraEventProperties;if(a=a||d&&d[Ka]){var m=a.options,p="on"+h.charAt(0).toUpperCase()+h.substr(1);!window.CustomEvent||rb||mc?(b=document.createEvent("Event"),b.initEvent(h,
!0,!0)):b=new CustomEvent(h,{bubbles:!0,cancelable:!0});b.to=L||d;b.from=e||d;b.item=c||d;b.clone=n;b.oldIndex=f;b.newIndex=aa;b.oldDraggableIndex=S;b.newDraggableIndex=y;b.originalEvent=l;b.pullMode=k?k.lastPutMode:void 0;h=xb({},g,nc.getEventProperties(h,a));for(var q in h)b[q]=h[q];d&&d.dispatchEvent(b);m[p]&&m[p].call(a,b)}}function F(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=b=pb({},b);a[Ka]=this;
var d={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Rd(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,
delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==F.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};nc.initializePlugins(this,a,d);for(var h in d)h in b||(b[h]=d[h]);Sd(b);for(var c in this)"_"===c.charAt(0)&&"function"===typeof this[c]&&(this[c]=this[c].bind(this));if(this.nativeDraggable=
b.forceFallback?!1:Ce)this.options.touchStartThreshold=1;b.supportPointer?N(a,"pointerdown",this._onTapStart):(N(a,"mousedown",this._onTapStart),N(a,"touchstart",this._onTapStart));this.nativeDraggable&&(N(a,"dragover",this),N(a,"dragenter",this));Cc.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||[]);pb(this,Be())}function $c(a,b,d,h,c,n,L,e){var r=a[Ka],f=r.options.onMove,S;if(!window.CustomEvent||rb||mc){var y=document.createEvent("Event");y.initEvent("move",!0,!0)}else y=new CustomEvent("move",
{bubbles:!0,cancelable:!0});y.to=b;y.from=a;y.dragged=d;y.draggedRect=h;y.related=c||b;y.relatedRect=n||ia(b);y.willInsertAfter=e;y.originalEvent=L;a.dispatchEvent(y);f&&(S=f.call(r,y,L));return S}function ad(a){a.draggable=!1}function De(){bd=!1}function Ee(a,b,d){d=ia(Wc(d.el,d.options.draggable));return b?a.clientX>d.right+10||a.clientX<=d.right&&a.clientY>d.bottom&&a.clientX>=d.left:a.clientX>d.right&&a.clientY>d.top||a.clientX<=d.right&&a.clientY>d.bottom+10}function Fe(a,b,d,h,c,n,L,e){a=h?
a.clientY:a.clientX;var r=h?d.height:d.width,f=h?d.top:d.left;d=h?d.bottom:d.right;h=!1;if(!L)if(e&&Dc<r*c)if(!oc&&(1===pc?a>f+r*n/2:a<d-r*n/2)&&(oc=!0),oc)h=!0;else{if(1===pc?a<f+Dc:a>d-Dc)return-pc}else if(a>f+r*(1-c)/2&&a<d-r*(1-c)/2)return b=Pa(t)<Pa(b)?1:-1,b;if(h||L)if(a<f+r*n/2||a>d-r*n/2)return a>f+r/2?1:-1;return 0}function Ge(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var b=a.length,d=0;b--;)d+=a.charCodeAt(b);return d.toString(36)}function He(a){Ec.length=0;a=a.getElementsByTagName("input");
for(var b=a.length;b--;){var d=a[b];d.checked&&Ec.push(d)}}function Fc(a){return setTimeout(a,0)}function Gc(){Y.forEach(function(a){clearInterval(a.pid)});Y=[]}function cd(){}function dd(){}function O(a){return{queryType:"hasTech",technology:a}}function ed(a,b){return{queryType:"speciesHasPopulation",species:a,minPopulation:b}}function Hc(a,b){return{queryType:"tileWithinDistance",tileType:a,radius:b}}function Ie(a,b){return{queryType:"anyTileWithinDistance",tileTypes:a,radius:b}}function Bb(a){return{queryType:"tileExists",
tileType:a}}function Td(a){return{queryType:"allTilesAreOfType",tileTypes:a}}function Ud(a,b){return{queryType:"hasResource",resource:a,minQuantity:b}}function Jb(a){return{queryType:"not",query:a}}function Vd(a,b){return{queryType:"or",query1:a,query2:b}}function Wd(a){switch(a.queryType){case "hasTech":return function(b){return b.hasUnlockedTechnology(a.technology)};case "speciesHasPopulation":return function(b){return b.inventory.getPopulation(a.species)>=a.minPopulation};case "hasTotalPopulation":return function(b){return b.inventory.getTotalPopulation()>=
a.minPopulation};case "availableHousing":return function(b){var d=b.world.getPopulationCapacity(a.species);b=b.inventory.getPopulation(a.species);return d-b>=a.minAvailableCapacity};case "tileExists":return function(b){return b.world.getTiles().some(function(b){return b instanceof a.tileType})};case "allTilesAreOfType":return function(b){return b.world.getTiles().every(function(b){return a.tileTypes.some(function(a){return b instanceof a})})};case "hasResource":return function(b){return b.inventory.getResourceQuantity(a.resource)>=
a.minQuantity};default:ta(a)}}function Kb(a){switch(a.queryType){case "tileWithinDistance":return function(b,d){return b.world.getTilesInCircle(d,a.radius).some(function(b){return b instanceof a.tileType})};case "anyTileWithinDistance":return function(b,d){return b.world.getTilesInCircle(d,a.radius).some(function(b){return a.tileTypes.some(function(a){return b instanceof a})})};case "not":return function(b,d){return!Kb(a.query)(b,d)};case "and":return function(b,d){return Kb(a.query1)(b,d)&&Kb(a.query2)(b,
d)};case "or":return function(b,d){return Kb(a.query1)(b,d)||Kb(a.query2)(b,d)};default:return Wd(a)}}function Xb(){return m.schema({encode:function(a){return fd[a.queryType].encode(a)},decode:function(a){return fd[a.queryType].decode(a)},validate:function(a){if("object"!==typeof a||null===a)return!1;var b=fd[a.queryType];return b?b.validate(a):!1}})}function ea(a,b,d,c){return new Q("Construct "+a.tileName,a.tileDescription,function(b,d){return d.world.placeTile(new a(b))},b,d,c)}function V(a){return new fb("have the "+
a.name+" technology",O(a))}function tb(a,b){return new fb(1===b?"adjacent to a "+a.tileName:"within "+b+" units of "+a.tileName,Hc(a,b))}function Je(a,b){return new fb("have at least "+b+" "+a.name,ed(a,b))}function Xd(a,b){return new fb("available housing capacity for "+b+" "+a.name,{queryType:"availableHousing",species:a,minAvailableCapacity:b})}function gd(a){var b=new Cb(a);a=window;a.cheatsAddResource=function(a,c){return b.addResource(a,c)};a.cheatsRemoveResource=function(a,c){return b.removeResource(a,
c)};a.cheatsAddPopulation=function(a,c){return b.addPopulation(a,c)};a.cheatsFreeResources=function(){return b.freeResources()};a.cheatsShowEnding=function(a){return b.showEnding(void 0===a?!1:a)};a.showQuote=function(a){return b.showQuote(a)};a.unlockAllAchievements=function(){return Lb.unlockAll()};Object.freeze(k);Object.freeze(J);a.Resources=k;a.Species=J}g.r(e);var Ke=function(){function a(a,b){return document.createTextNode(b?a.replace(k,""):a)}function b(a,b){return"".concat(b.base,b.size,
"/",a,b.ext)}function d(a,b){a=a.childNodes;for(var c=a.length,h,n;c--;)h=a[c],n=h.nodeType,3===n?b.push(h):1!==n||"ownerSVGElement"in h||p.test(h.nodeName.toLowerCase())||d(h,b);return b}function c(a){return aa(0>a.indexOf(m)?a.replace(k,""):a)}function r(b,h){for(var n=d(b,[]),r=n.length,L,e,f,y,S,aa,k,m,g,zc;r--;){L=!1;f=document.createDocumentFragment();y=n[r];S=y.nodeValue;for(k=0;aa=l.exec(S);){m=aa.index;m!==k&&f.appendChild(a(S.slice(k,m),!0));aa=aa[0];zc=c(aa);k=m+aa.length;m=h.callback(zc,
h);if(zc&&m){g=new Image;g.onerror=h.onerror;g.setAttribute("draggable","false");L=h.attributes(aa,zc);for(e in L)L.hasOwnProperty(e)&&0!==e.indexOf("on")&&!g.hasAttribute(e)&&g.setAttribute(e,L[e]);g.className=h.className;g.alt=aa;g.src=m;L=!0;f.appendChild(g)}g||f.appendChild(a(aa,!1));g=null}L&&(k<S.length&&f.appendChild(a(S.slice(k),!0)),y.parentNode.replaceChild(f,y))}return b}function n(a,b){return f(a,function(a){var d=a,h=c(a),n=b.callback(h,b),r;if(h&&n){d="<img ".concat('class="',b.className,
'" ','draggable="false" ','alt="',a,'"',' src="',n,'"');a=b.attributes(a,h);for(r in a)a.hasOwnProperty(r)&&0!==r.indexOf("on")&&-1===d.indexOf(" "+r+"=")&&(d=d.concat(" ",r,'="',a[r].replace(g,L),'"'));d=d.concat("/>")}return d})}function L(a){return y[a]}function e(){return null}function f(a,b){return String(a).replace(l,b)}function aa(a,b){for(var d=[],c,h=0,n=0;n<a.length;)c=a.charCodeAt(n++),h?(d.push((65536+(h-55296<<10)+(c-56320)).toString(16)),h=0):55296<=c&&56319>=c?h=c:d.push(c.toString(16));
return d.join(b||"-")}var S={base:"https://twemoji.maxcdn.com/v/12.1.5/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(a){a="string"===typeof a?parseInt(a,16):a;if(65536>a)return q(a);a-=65536;return q(55296+(a>>10),56320+(a&1023))},toCodePoint:aa},onerror:function(){this.parentNode&&this.parentNode.replaceChild(a(this.alt,!1),this)},parse:function(a,d){d&&"function"!==typeof d||(d={callback:d});var c=d.callback||b,h="function"===typeof d.attributes?d.attributes:e,L="string"===
typeof d.base?d.base:S.base,f=d.ext||S.ext,y;(y=d.folder)||(y=d.size||S.size,y="number"===typeof y?y+"x"+y:y);return("string"===typeof a?n:r)(a,{callback:c,attributes:h,base:L,ext:f,size:y,className:d.className||S.className,onerror:d.onerror||S.onerror})},replace:f,test:function(a){l.lastIndex=0;a=l.test(a);l.lastIndex=0;return a}},y={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},l=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,
k=/\uFE0F/g,m=String.fromCharCode(8205),g=/[&<>'"]/g,p=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,q=String.fromCharCode;return S}(),Le=g(0),l;(function(a){function b(a){var b=document.createElement("div");a&&b.classList.add.apply(b.classList,$jscomp.arrayFromIterable(a));return b}function d(a,b,d){a=document.createElement(a);a.innerText=b;d&&a.classList.add.apply(a.classList,$jscomp.arrayFromIterable(d));return a}function c(a){Ke.parse(a,{folder:"svg",ext:".svg"});return a}function r(a){return 0<
Le.parse(a).length}a.makeDiv=b;a.makeDivContaining=function(a,d){d=b(d);a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())d.appendChild(c.value);return d};a.makeElement=d;a.patchEmoji=c;a.containsEmoji=r;a.makePara=function(a,b){b=d("p",a,b);r(a)&&c(b);return b};a.makeHeader=function(a,b,h){b=d("h"+(void 0===b?1:b),a,h);r(a)&&c(b);return b};a.makeButton=function(a,b,d,h){h=void 0===h?"enabled":h;var n=document.createElement("button");n.type="button";"disabled"===h&&(n.disabled=!0);n.innerText=
a;d&&n.classList.add.apply(n.classList,$jscomp.arrayFromIterable(d));n.onclick=function(a){a.preventDefault();b(n,a)};r(a)&&c(n);return n};a.makeSlider=function(b,d,c,h,r,e){var n=document.createElement("input");n.type="range";n.min=d.toString();n.max=c.toString();n.value=h.toString();void 0!==e&&(n.step=e.toString());n.oninput=function(){if(void 0!==this.value){var a=Number(this.value);!isNaN(a)&&d<=a&&a<=c&&r(a)}};b=a.makePara(b+": ");return a.makeDivContaining([b,n])};a.makeCanvas=function(a,b,
d){var c=document.createElement("canvas");c.width=a;c.height=b;d&&c.classList.add.apply(c.classList,$jscomp.arrayFromIterable(d));return c};a.fillHTML=function(a,b){a.innerHTML="";b=$jscomp.makeIterator(b);for(var d=b.next();!d.done;d=b.next())a.appendChild(d.value)}})(l||(l={}));var B;(function(a){function b(){0<n.length?(l.fillHTML(r,[n[0].page.html]),setTimeout(function(){n.shift();b()},n[0].milliseconds)):l.fillHTML(r,[])}var d=document.getElementById("rootdiv"),c=void 0,r=document.getElementById("popup"),
n=[];a.show=function(a){c=a;l.fillHTML(d,[a.html]);document.onkeydown=function(b){a.handleKeyDown&&a.handleKeyDown(b)};document.onkeyup=function(b){a.handleKeyUp&&a.handleKeyUp(b)}};a.refreshCurrentPage=function(){c&&c.refresh()};a.addPopup=function(a,d){n.push({page:a,milliseconds:d});1===n.length&&b()}})(B||(B={}));var ze=function(a,b,d,c){function h(a){return a instanceof d?a:new d(function(b){b(a)})}return new (d||(d=Promise))(function(d,r){function n(a){try{f(c.next(a))}catch(y){r(y)}}function e(a){try{f(c["throw"](a))}catch(y){r(y)}}
function f(a){a.done?d(a.value):h(a.value).then(n,e)}f((c=c.apply(a,b||[])).next())})},Id=[],Me=f("assets/ui/highlight.png"),Ne=f("assets/tiles/environment/wasteland1.png"),Oe=f("assets/tiles/environment/wasteland2.png"),Pe=f("assets/tiles/environment/wasteland3.png"),Qe=f("assets/tiles/environment/wasteland4.png"),Yd=f("assets/tiles/environment/wasteland5.png"),Re=f("assets/tiles/environment/mountain.png"),Zd=f("assets/tiles/alien/ruins1.png"),Se=f("assets/tiles/alien/ruins2.png"),Te=f("assets/tiles/alien/monolith.png"),
Ue=f("assets/tiles/end/reprogrammed monolith.png"),Ve=f("assets/tiles/end/seed core alien.png"),We=f("assets/tiles/end/seed core human.png"),Xe=f("assets/tiles/end/circuits alien.png"),Ye=f("assets/tiles/end/circuits human.png"),Ze=f("assets/tiles/construction/hab_site.png"),$e=f("assets/tiles/construction/lab_site.png"),af=f("assets/tiles/construction/industry_site.png"),bf=f("assets/tiles/construction/xenoengineering_site.png"),cf=f("assets/tiles/colony/habitat.png"),df=f("assets/tiles/colony/solar_panels.png"),
ef=f("assets/tiles/colony/mining_facility.png"),ff=f("assets/tiles/colony/lander.png"),gf=f("assets/tiles/colony/greenhouse.png"),hf=f("assets/tiles/colony/hydroponics.png"),jf=f("assets/tiles/colony/mineshaft.png"),kf=f("assets/tiles/colony/electronics factory.png"),lf=f("assets/tiles/colony/construction factory.png"),mf=f("assets/tiles/colony/xenofactory.png"),$d=f("assets/tiles/roads/cross.png"),ae=f("assets/tiles/roads/horizontal.png"),be=f("assets/tiles/roads/vertical.png"),nf=f("assets/tiles/roads/corner_bottom_left.png"),
of=f("assets/tiles/roads/corner_bottom_right.png"),pf=f("assets/tiles/roads/corner_top_left.png"),qf=f("assets/tiles/roads/corner_top_right.png"),rf=f("assets/tiles/roads/t_south.png"),sf=f("assets/tiles/roads/t_north.png"),tf=f("assets/tiles/roads/t_east.png"),uf=f("assets/tiles/roads/t_west.png"),vf=f("assets/tiles/colony/arcology.png"),wf=f("assets/tiles/colony/nuclear_plant.png"),xf=f("assets/tiles/colony/hive.png"),yf=f("assets/tiles/colony/zero_point.png"),zf=f("assets/tiles/colony/lab_alignment.png"),
Af=f("assets/tiles/colony/lab_engineering.png"),Bf=f("assets/tiles/colony/lab_psych.png"),Cf=f("assets/tiles/colony/lab_xeno.png"),ce=f("assets/tiles/colony/recycler1.png"),Df=f("assets/tiles/colony/recycler2.png"),Ef=f("assets/tiles/colony/nanotech_foundry.png"),Ff=f("assets/tiles/colony/neural_emulator.png"),Mb=function(a,b,d){this.header=a;this.text=b;this.largeText=d},Gf=[new Mb("Grace Rarer",["Team Lead, Game Designer, Programmer"],!0),new Mb("Prindle",["Programmer, DevOps"],!0),new Mb("May Lawver",
["Music Generation Programmer"],!0),new Mb("Seong Ryoo",["Environment Artist"],!0),new Mb("Code Contributors",["Mitchell Philipp","Brad Baker","Will Cooper"]),new Mb("Third Party Assets",["Twemoji (MIT License for code, CC-BY for graphics)","IBM Plex Mono (Open Font License)","NASA Images (public domain)"]),new Mb("Aurora is released under the MIT License",["Source code is available at github.com/GRarer/Aurora"])],hd=function(){this.html=l.makeDiv(["credits"]);this.refresh()};hd.prototype.refresh=
function(){var a=this;l.fillHTML(this.html,[].concat($jscomp.arrayFromIterable(Gf.map(function(b){return a.renderCreditsEntry(b)})),[l.makeButton("Back",function(){return B.show(new ub)})]))};hd.prototype.renderCreditsEntry=function(a){return l.makeDivContaining([l.makeHeader(a.header)].concat($jscomp.arrayFromIterable(a.text.map(function(a){return l.makePara(a)}))),a.largeText?["credits-entry-large"]:["credits-entry-small"])};var Yb=function(a){return a},m;(function(a){function b(a){return{encode:Yb,
decode:Yb,validate:a}}function d(a,b,d){return{encode:function(d){return a.encode(b(d))},decode:function(b){return d(a.decode(b))},validate:function(b){return a.validate(b)}}}function c(a){return{encode:function(b){return b.map(function(b){return a.encode(b)})},decode:function(b){return b.map(function(b){return a.decode(b)})},validate:function(b){return Array.isArray(b)?b.every(function(b){return a.validate(b)}):!1}}}function r(a){for(var b=[],d=0;d<arguments.length;++d)b[d-0]=arguments[d];return{encode:function(a){return a.map(function(a,
d){return b[d].encode(a)})},decode:function(a){return a.map(function(a,d){return b[d].decode(a)})},validate:function(a){return Array.isArray(a)&&a.length===b.length?b.every(function(b,d){return b.validate(a[d])}):!1}}}function n(a){return{encode:function(b){var d={},c;for(c in a)d[c]=a[c].encode(b[c]);return d},decode:function(b){var d={},c;for(c in a)d[c]=a[c].decode(b[c]);return d},validate:function(b){if("object"!==typeof b||null===b)return!1;for(var d in a)if(!a[d].validate(b[d]))return!1;return!0}}}
function e(a,b,d,c){return{encode:function(h){return a(h)?d.encode(h):b(h)?c.encode(h):C(h)},decode:function(a){return d.validate(a)?d.decode(a):c.validate(a)?c.decode(a):C(a)},validate:function(a){return d.validate(a)||c.validate(a)}}}function f(a,b){return e(function(b){return a.validate(b)},function(b){return!a.validate(b)},a,b)}function l(a,b){return{encode:function(b){return a.encode(b)},decode:function(b){return a.decode(b)},validate:function(d){return a.validate(d)&&b(d)}}}a.schema=function(a){return a};
a.primitive=b;a.literal=function(a){return{encode:Yb,decode:Yb,validate:function(b){return b===a}}};a.contra=d;a.co=function(a,b,d,c){return{encode:function(d){return b(a.encode(d))},decode:function(b){return a.decode(d(b))},validate:c}};a.lazy=function(a){return{encode:function(b){return a().encode(b)},decode:function(b){return a().decode(b)},validate:function(b){return a().validate(b)}}};a.injecting=function(a,b,d){return{encode:function(b){return a.encode(b)},decode:function(b){return a.decode(b)},
validate:function(b){return a.validate(b)},project:b,inject:d}};a.anAny=b(function(a){return!0});a.aString=b(function(a){return"string"===typeof a||a instanceof String});a.aNumber=b(function(a){return"number"===typeof a});a.aBoolean=b(function(a){return"boolean"===typeof a});a.aNull=b(function(a){return null===a});a.anUndefined=b(function(a){return"undefined"===typeof a});a.arrayOf=c;a.nonEmptyArrayOf=function(a){a=c(a);var b=a.validate;return{encode:a.encode,decode:a.decode,validate:function(a){return Array.isArray(a)&&
1<=a.length&&b(a)}}};a.tupleOf=r;a.anEmptyArray=r();a.object=function(a){return{encode:function(b){var d={},c;for(c in b)d[c]=a.encode(b[c]);return d},decode:function(b){var d={},c;for(c in b)d[c]=a.decode(b[c]);return d},validate:function(b){if("object"!==typeof b||null===b)return!1;for(var d in b)if(!a.validate(b[d]))return!1;return!0}}};a.map=function(a,b){return{encode:function(d){var c=[];d=$jscomp.makeIterator(d.entries());for(var h=d.next();!h.done;h=d.next())h=h.value,c.push([a.encode(h[0]),
b.encode(h[1])]);return c},decode:function(d){var c=new Map;d=$jscomp.makeIterator(d);for(var h=d.next();!h.done;h=d.next())h=h.value,c.set(a.decode(h[0]),b.decode(h[1]));return c},validate:function(d){return c(r(a,b)).validate(d)}}};a.set=function(a){return{encode:function(b){return Array.from(b).map(function(b){return a.encode(b)})},decode:function(b){return new Set(b.map(function(b){return a.decode(b)}))},validate:function(b){return c(a).validate(b)}}};a.recordOf=n;a.anEmptyObject=n({});a.classOf=
function(a,b){return d(n(a),Yb,b)};a.unionOf=e;a.union=f;a.optional=function(b){return f(a.anUndefined,b)};a.constrain=l;a.asserting=function(a,b){return l(a,b)};a.matching=function(b){return l(a.aString,function(a){return b.test(a)})};a.indexing=function(b){return d(l(a.aNumber,function(a){return 0<=a&&a<b.length}),function(a){var d=b.indexOf(a);if(0>d)throw Error("Serialization error: attempted to serialize "+a+" by index in "+b);return d},function(a){return b[a]})};a.mapping=function(b){return d(l(a.aString,
function(a){return a in b}),function(a){for(var d in b)if(b[d]===a)return d;throw Error("Serialization error: attempted to serialize "+a+" by key in "+b);},function(a){return b[a]})}})(m||(m={}));var Ic;(function(a){function b(a){return{encode:function(b){var d=a();return b.map(function(a){return d.encode(a)})},decode:function(b){var d=a();return b.map(function(a){return d.decode(a)})},validate:function(b){var d=a();return Array.isArray(b)?b.every(function(a){return d.validate(a)}):!1}}}function d(a){return{encode:function(b){var d=
{},c;for(c in a)d[c]=a[c]().encode(b[c]);return d},decode:function(b){var d={},c;for(c in a)d[c]=a[c]().decode(b[c]);return d},validate:function(b){if("object"!==typeof b||null===b)return!1;for(var d in a)if(!a[d]().validate(b[d]))return!1;return!0}}}a.arrayOf=b;a.nonEmptyArrayOf=function(a){a=b(a);var d=a.validate;return{encode:a.encode,decode:a.decode,validate:function(a){return Array.isArray(a)&&1<=a.length&&d(a)}}};a.recordOf=d;a.classOf=function(a,b){return m.contra(d(a),Yb,b)}})(Ic||(Ic={}));
var gb;(function(a){a.isSupported=function(){try{var a=window.localStorage;a.setItem("__test_ls","null");a.removeItem("__test_ls");return!0}catch(d){return a&&0!==a.length?d instanceof DOMException?22===d.code||"QuotaExceededError"===d.name||1014===d.code||"NS_ERROR_DOM_QUOTA_REACHED"===d.name:!1:!1}}();a.hasItem=function(b){return a.isSupported&&Object.prototype.hasOwnProperty.call(window.localStorage,b)};a.saveItem=function(b,d,c){return a.isSupported?(d=JSON.stringify(c.encode(d)),window.localStorage.setItem(b,
d),!0):!1};a.loadItem=function(b,d){if(a.isSupported&&(b=window.localStorage.getItem(b),null!==b)){try{var c=JSON.parse(b);var r=d.validate(c)?{resultType:"success",result:d.decode(c)}:{resultType:"invalidStructure"}}catch(n){if(n instanceof SyntaxError)r={resultType:"syntaxError",error:n};else throw n;}return r}};a.removeItem=function(b){a.isSupported&&window.localStorage.removeItem(b)};a.clearAllItems=function(){a.isSupported&&window.localStorage.clear()}})(gb||(gb={}));var qc=X(),ic=X(),Zb;(function(a){function b(a){return ic(440*
Math.pow(2,(a-69)/12))}a.noteNames="C C# D D# E F F# G G# A A# B".split(" ");a.midiNumberToFrequency=b;a.midiNumberToNoteName=function(b){return""+a.noteNames[da(b,12)]+(Math.floor(b/12)-1)};a.detuneWithCoeff=function(a,c){if(1===c)return[b(a)];a=b(a);return[a/c,a,a*c].map(ic)}})(Zb||(Zb={}));var de=function(a){this.volume=a},Jc;(function(a){a.createAdsrEnvelope=function(a,d,c,r,n){n=void 0===n?1:n;var b=void 0===r.attack?0:r.attack,h=void 0===r.sustain?0:r.sustain,e=void 0===r.decay?0:r.decay;r=
void 0===r.release?0:r.release;a=a.createGain();a.gain.setValueAtTime(0,d);c<b?a.gain.linearRampToValueAtTime(c/b*(n-0),d+c):c<b+e?(a.gain.linearRampToValueAtTime(n,d+b),a.gain.linearRampToValueAtTime((c-b)/e*(n*h-n)+n,d+b+e)):(a.gain.linearRampToValueAtTime(n,d+b),a.gain.linearRampToValueAtTime(n*h,d+b+e));a.gain.linearRampToValueAtTime(0,d+c+r);return a}})(Jc||(Jc={}));var id=function(a,b,d,c){function h(a){return a instanceof d?a:new d(function(b){b(a)})}return new (d||(d=Promise))(function(d,
r){function n(a){try{f(c.next(a))}catch(y){r(y)}}function e(a){try{f(c["throw"](a))}catch(y){r(y)}}function f(a){a.done?d(a.value):h(a.value).then(n,e)}f((c=c.apply(a,b||[])).next())})},$b=function(a,b,d){this.volume=void 0===d?1:d;this.type=a.type;this._detune=1;this.detune=a.detune||0;this.env=b;return this};$jscomp.inherits($b,de);$b.prototype.scheduleNote=function(a,b){return id(this,void 0,void 0,function h(){var c=this,n,e,f,l,g,k;return $jscomp.generator.createGenerator(h,function(h){n=c;e=
Zb.detuneWithCoeff(b.midiNumber,c._detune);f=void 0===b.endNote?e:Zb.detuneWithCoeff(b.endNote,c._detune);l=Math.min(1/e.length,1)*c.volume;g=Jc.createAdsrEnvelope(a,b.start,b.duration,c.env,l);k=b.start+b.duration+(c.env.sustain||0);e.forEach(function(c,h){var r=a.createOscillator();r.type=n.type;r.frequency.setValueAtTime(c,b.start);r.frequency.linearRampToValueAtTime(f[h],k);r.start(b.start);r.stop(k);r.connect(g);r.onended=function(){g.disconnect()}});return h.return(g)})})};$jscomp.global.Object.defineProperties($b.prototype,
{detune:{configurable:!0,enumerable:!0,set:function(a){this._detune=Math.pow(2,a/1200)}}});var Db=function(a,b,d){this.volume=void 0===d?1:d;this.buffer=a;this.env=b;return this};$jscomp.inherits(Db,de);Db.fromSample=function(a,b,d){d=void 0===d?1:d;return id(this,void 0,void 0,function r(){var c;return $jscomp.generator.createGenerator(r,function(n){return 1==n.nextAddress?(c=Db,n.yield(a,2)):n.return(new c(n.yieldResult,b,d))})})};Db.prototype.scheduleNote=function(a,b){return id(this,void 0,void 0,
function h(){var c,n,e=this,f,l,g,k,m;return $jscomp.generator.createGenerator(h,function(h){c=Zb.midiNumberToFrequency(b.midiNumber);n=a.createBufferSource();n.buffer=e.buffer.buffer;n.loop=e.buffer.shouldLoop;f=c/e.buffer.freq;n.playbackRate.setValueAtTime(f,b.start);l=b.start+b.duration+(e.env.sustain||0);void 0!==b.endNote&&(g=Zb.midiNumberToFrequency(b.endNote),k=g/e.buffer.freq,n.playbackRate.linearRampToValueAtTime(k,l));n.start(b.start);n.stop(l);m=Jc.createAdsrEnvelope(a,b.start,b.duration,
e.env,e.volume);n.connect(m);n.onended=function(){m.disconnect()};return h.return(m)})})};var fa;(function(a){function b(a,b){return Math.random()*(b-a)+a}function d(a,d){return Math.floor(b(a,d))}a.realBetween=b;a.intBetween=d;a.fromArray=function(a){return a[d(0,a.length)]};a.bool=function(a){return Math.random()<(void 0===a?.5:a)};a.fromWeightedArray=function(a){var b=a.map(function(a){return a[0]}).reduce(function(a,b){return a+b},0);b*=Math.random();for(var d=$jscomp.makeIterator(a),c=d.next();!c.done;c=
d.next()){var h=$jscomp.makeIterator(c.value);c=h.next().value;h=h.next().value;if(b<c)return h;b-=c}return a[a.length-1][1]}})(fa||(fa={}));var hb;(function(a){a.isNonEmpty=function(a){return 0<a.length};a.generate=function(a,d){for(var b=Array(a),c=0;c<a;c++)b[c]=d(c);return b};a.flatten=function(a){return a.reduce(function(a,b){return a.concat(b)},[])};a.partition=function(a,d){var b=[],c=[];a=$jscomp.makeIterator(a);for(var n=a.next();!n.done;n=a.next())n=n.value,d(n)?b.push(n):c.push(n);return{yes:b,
no:c}};a.repeat=function(a,d){for(var b=Array(d),c=0;c<d;c++)b[c]=a;return b}})(hb||(hb={}));var ib=X(),Hf=X(),ee=X(),jd=X(),Eb=X(),rc;(function(a){function b(a){a=(a&1365)+(a>>>1&1365);a=(a&819)+(a>>>2&819);a=(a&3855)+(a>>>4&3855);return(a&255)+(a>>>8&255)}function d(a,b){b=da(void 0===b?1:b,12);return ib((a<<b|a>>>12-b)&4095)}function c(a){return 0!==(a&1)}function r(a){var b=[],h=a;do c(h)&&b.push(h),h=d(h,1);while(h!==a);return b}function n(a,b){b=da(b,12);return 0!==(a&1<<b)}function e(a,b){b=
da(b,12);a=r(a).filter(function(a){return n(a,b)}).length;return 6===b?a/2:a}function f(a){return r(a).filter(function(a){return!n(a,7)}).length}function l(a,b){return(a&b)===b}function g(a,d){var c=function(a,b){return a<b[0]||a>b[1]};return d.notes&&c(b(a),d.notes)||d.imperfections&&c(f(a),d.imperfections)||d.hemitones&&c(e(a,1),d.hemitones)||void 0!==d.chord&&0!==d.chord&&!l(a,d.chord)?!1:!0}a.createScaleFromPitchClass=function(a){if(!a.includes(jd(0)))throw Error("scales must have a root");a=
a.map(function(a){return 1<<da(a,12)}).filter(function(a,b,d){return d.indexOf(a)===b}).reduce(function(a,b){return a|b},0);return ib(a)};a.getPitchClass=function(a){for(var b=[],d=0;0!==a;a>>>=1,d++)a&1&&b.push(jd(d));return b};a.getNumberOfNotes=b;a.rotateScale=d;a.hasRoot=c;a.getModes=r;a.hasInterval=n;a.countInterval=e;a.getImperfections=f;a.containsScale=function(a,b){return(a&b)===b};a.containsChord=l;var k=hb.flatten([r(ib(2741)),r(ib(2475)),r(ib(1367)),r(ib(2477)),r(ib(2485)),r(ib(2733)),
r(ib(2669)),r(ib(2483))]);a.matchesQuery=g;a.getAllScalesMatchingQuery=function(a){return k.filter(function(b){return g(b,a)})};a.indexIntoPitchClass=function(a,b){var d=a[da(b,a.length)];return jd(d+12*Math.floor(b/a.length))}})(rc||(rc={}));var Nb=function(a){a=void 0===a?8:a;this.subdivision=[];this._beats=a;this.generateNewSubdivision(a)};Nb.prototype.generateTies=function(){for(var a=0,b=[];a<this.subdivision.length;)a<this.subdivision.length-1&&fa.bool(.5)?(b.push(this.subdivision[a]+this.subdivision[a+
1]),a+=2):(b.push(this.subdivision[a]),a++);return b};Nb.prototype.generateNewSubdivision=function(a){this._beats=a;this.subdivision=[];for(var b=Math.min.apply(Math,$jscomp.arrayFromIterable(Nb.divisions));a>=b;){var d=Nb.divisions.filter(function(b){return b<=a});d=fa.fromArray(d);a-=d;this.subdivision.push(d)}0<a&&this.subdivision.push(a)};$jscomp.global.Object.defineProperties(Nb.prototype,{beats:{configurable:!0,enumerable:!0,get:function(){return this._beats}}});Nb.divisions=[2,3];var If=function(a,
b,d,c){function h(a){return a instanceof d?a:new d(function(b){b(a)})}return new (d||(d=Promise))(function(d,e){function n(a){try{f(c.next(a))}catch(y){e(y)}}function r(a){try{f(c["throw"](a))}catch(y){e(y)}}function f(a){a.done?d(a.value):h(a.value).then(n,r)}f((c=c.apply(a,b||[])).next())})},nb;(function(a){a[a.KICK=0]="KICK";a[a.SNARE=1]="SNARE";a[a.CLOSED_HI_HAT=2]="CLOSED_HI_HAT";a[a.OPEN_HI_HAT=3]="OPEN_HI_HAT"})(nb||(nb={}));var fe=function(a){this.samples=a;this.closedHiHat=Db.fromSample(this.samples.white_noise,
{attack:.01,decay:.05},.5);this.openHiHat=Db.fromSample(this.samples.white_noise,{attack:.01,decay:.2},.5);this.snare=Db.fromSample(this.samples.snare,{sustain:1},1.5);this.kick=Db.fromSample(this.samples.kick,{sustain:1},1.5)};fe.prototype.scheduleHit=function(a,b,d){return If(this,void 0,void 0,function r(){var c,e,f=this,l,g,k,m,p,q;return $jscomp.generator.createGenerator(r,function(n){switch(n.nextAddress){case 1:switch(d){case nb.KICK:return n.jumpTo(2);case nb.SNARE:return n.jumpTo(3);case nb.CLOSED_HI_HAT:return n.jumpTo(4);
case nb.OPEN_HI_HAT:return n.jumpTo(5);default:ta(d)}n.jumpTo(0);break;case 2:return c=a,e={midiNumber:qc(69),start:b,duration:1},n.yield(f.kick,7);case 7:return n.return(n.yieldResult.scheduleNote(c,e));case 3:return l=a,g={midiNumber:qc(69),start:b,duration:1},n.yield(f.snare,8);case 8:return n.return(n.yieldResult.scheduleNote(l,g));case 4:return k=a,m={midiNumber:qc(70),start:b,duration:.05},n.yield(f.closedHiHat,9);case 9:return n.return(n.yieldResult.scheduleNote(k,m));case 5:return p=a,q={midiNumber:qc(70),
start:b,duration:.2},n.yield(f.openHiHat,10);case 10:return n.return(n.yieldResult.scheduleNote(p,q))}})})};g(2);var kd=function(a,b,d,c){function h(a){return a instanceof d?a:new d(function(b){b(a)})}return new (d||(d=Promise))(function(d,e){function n(a){try{f(c.next(a))}catch(y){e(y)}}function r(a){try{f(c["throw"](a))}catch(y){e(y)}}function f(a){a.done?d(a.value):h(a.value).then(n,r)}f((c=c.apply(a,b||[])).next())})},yb;(function(a){a.createBufferFromGenerator=function(a,d,c){a=a.createBuffer(1,
d,44100);for(var b=new Float32Array(d),h=0;h<d;h++)b[h]=c(h);a.copyToChannel(b,0);return a};a.createBufferFromAudioData=function(a,d,c){return kd(this,void 0,void 0,function n(){var b=this,h,e,f,l,g;return $jscomp.generator.createGenerator(n,function(n){switch(n.nextAddress){case 1:return h=b,e=a.createBuffer(1,d,44100),n.yield(fetch("assets/"+c,{headers:new Headers({"Content-Type":"audio/ogg"})}).catch(function(a){return kd(h,void 0,void 0,function Yc(){var b;return $jscomp.generator.createGenerator(Yc,
function(d){if(1==d.nextAddress){if(!(a instanceof Response)){if(a instanceof Error)throw a;throw Error("Unknown error when fetching sample: "+a);}b=Error;return d.yield(a.text(),3)}throw new b(d.yieldResult);})})}),2);case 2:return f=n.yieldResult,n.yield(f.arrayBuffer(),3);case 3:return l=n.yieldResult,n.yield(new Promise(function(b,d){a.decodeAudioData(l,b,d)}),4);case 4:return g=n.yieldResult,e.copyToChannel(g.getChannelData(0),0),n.return(e)}})})};a.makeSampleData=function(a){return kd(this,
void 0,void 0,function h(){var b,c,e,f;return $jscomp.generator.createGenerator(h,function(h){return 1==h.nextAddress?(b=a,c=b.buffer,e=b.shouldLoop,f=b.freq,h.yield(c,2)):h.return({buffer:h.yieldResult,shouldLoop:e,freq:f})})})}})(yb||(yb={}));var ac=function(a,b,d,c){function h(a){return a instanceof d?a:new d(function(b){b(a)})}return new (d||(d=Promise))(function(d,e){function n(a){try{r(c.next(a))}catch(y){e(y)}}function f(a){try{r(c["throw"](a))}catch(y){e(y)}}function r(a){a.done?d(a.value):
h(a.value).then(n,f)}r((c=c.apply(a,b||[])).next())})},W;(function(a){a[a.DRUMS=0]="DRUMS";a[a.CHORDS=1]="CHORDS"})(W||(W={}));var ka;(function(a){a.TONIC="tonic";a.SUBDOMINANT="subdominant";a.DOMINANT="dominant";a.AMBIGUOUS="ambiguous"})(ka||(ka={}));var bc;(function(a){function b(a,b,d){d=void 0===d?4:d;var c=rc.getPitchClass(a);a=fa.fromArray(q).map(function(a){return fa.fromArray(t[a])});a.unshift(Eb(0));return a.map(function(a){return hb.generate(d,function(d){d=rc.indexIntoPitchClass(c,a+2*
d);return ee(b+d)})})}function d(){var a=p.rhythm.subdivision;return hb.flatten(a.map(function(b,d){for(var c=[0===d%2?nb.KICK:nb.SNARE],h=0;h<b-1;h++)d===a.length-1&&h===b-2?c.push(nb.OPEN_HI_HAT):c.push(nb.CLOSED_HI_HAT);return c}))}function c(b,d){return ac(this,void 0,void 0,function Zc(){var c;return $jscomp.generator.createGenerator(Zc,function(h){if(1==h.nextAddress)return h.yield(a.drumkit.scheduleHit(a.context,b,d),2);c=h.yieldResult;c.connect(a.masterGain);h.jumpToEnd()})})}function e(b,
d){return ac(this,void 0,void 0,function Zc(){var c;return $jscomp.generator.createGenerator(Zc,function(h){if(1==h.nextAddress)return h.yield(d.scheduleNote(a.context,b),2);c=h.yieldResult;c.connect(a.masterGain);h.jumpToEnd()})})}function n(){p.rhythm.generateNewSubdivision(fa.fromArray([5,6,7,8,9,11,13]));var a={chord:Hf(128),imperfections:[1,1]};a=rc.getAllScalesMatchingQuery(a);hb.isNonEmpty(a)&&(p.scale=fa.fromArray(a));p.drumLoop=d();p.progression=b(p.scale,p.root);p.queue=[[W.CHORDS,W.DRUMS],
[W.CHORDS,W.DRUMS],[W.CHORDS,W.DRUMS],[W.CHORDS,W.DRUMS],[W.CHORDS,W.DRUMS],[W.CHORDS,W.DRUMS],[W.CHORDS,W.DRUMS],[W.CHORDS,W.DRUMS],[W.DRUMS]]}function f(b){return ac(this,void 0,void 0,function lc(){var d,c,h,n,f;return $jscomp.generator.createGenerator(lc,function(r){switch(r.nextAddress){case 1:d=p.progression[da(p.chordIndex,p.progression.length)],c=60/p.beatsPerMinute,h=$jscomp.makeIterator(d),n=h.next();case 2:if(n.done){r.jumpTo(4);break}f=n.value;return r.yield(e({midiNumber:qc(da(f,12)+
60),start:b,duration:c*p.rhythm.beats},a.instruments.pad),3);case 3:n=h.next();r.jumpTo(2);break;case 4:p.chordIndex++,r.jumpToEnd()}})})}function l(a){return ac(this,void 0,void 0,function lc(){var b,d,h,n,e;return $jscomp.generator.createGenerator(lc,function(f){1==f.nextAddress&&(b=60/p.beatsPerMinute,d=0,h=$jscomp.makeIterator(p.drumLoop),n=h.next());if(5!=f.nextAddress){if(n.done)return f.jumpTo(0);e=n.value;return f.yield(c(a+d,e),5)}d+=b;n=h.next();return f.jumpTo(2)})})}function g(b){return ac(this,
void 0,void 0,function lc(){var d,c,h,e,r,m,L;return $jscomp.generator.createGenerator(lc,function(q){switch(q.nextAddress){case 1:if(!k)return q.return();d=60/p.beatsPerMinute;0===p.queue.length&&n();c=d*p.rhythm.beats;h=p.queue.shift();if(!h){q.jumpTo(2);break}e=$jscomp.makeIterator(h);r=e.next();case 3:if(r.done){q.jumpTo(2);break}m=r.value;switch(m){case W.DRUMS:return q.jumpTo(6);case W.CHORDS:return q.jumpTo(7);default:ta(m)}q.jumpTo(4);break;case 6:return q.yield(l(b),9);case 9:q.jumpTo(4);
break;case 7:return q.yield(f(b),10);case 10:q.jumpTo(4);break;case 4:r=e.next();q.jumpTo(3);break;case 2:return L=b+c,q.yield(new Promise(function(b){window.setTimeout(b,1E3*(L-a.context.currentTime-.1))}),11);case 11:return q.return(g(L))}})})}var k=!1,m=void 0;a.context=function(){var a,b=window;if(b=null!==(a=b.AudioContext)&&void 0!==a?a:b.webkitAudioContext)return new b;throw Error("AudioContext is not supported");}();a.samples=pa(a.context);a.drumkit=new fe(a.samples);a.instruments={arp:new $b({type:"sawtooth",
detune:3},{attack:.01,decay:.05,sustain:0,release:.1}),bass:new $b({type:"triangle",detune:2},{attack:.01,decay:.01,sustain:1,release:.1}),pad:new $b({type:"triangle",detune:4},{attack:1,decay:.1,sustain:.5,release:.5})};a.masterGain=a.context.createGain();var p={beatsPerMinute:220,rhythm:new Nb,root:ee(0),scale:ib(1857),progression:[],chordIndex:0,drumLoop:[],queue:[]},q=[[ka.TONIC,ka.SUBDOMINANT,ka.DOMINANT],[ka.SUBDOMINANT,ka.SUBDOMINANT,ka.DOMINANT],[ka.SUBDOMINANT,ka.DOMINANT,ka.DOMINANT],[ka.AMBIGUOUS,
ka.SUBDOMINANT,ka.DOMINANT],[ka.SUBDOMINANT,ka.DOMINANT,ka.AMBIGUOUS]],t={tonic:[Eb(0),Eb(5)],subdominant:[Eb(1),Eb(3)],dominant:[Eb(4),Eb(6)],ambiguous:[Eb(2)]};a.initialize=function(){k||(k=!0,a.masterGain.gain.value=jb.currentOptions.volume,a.masterGain.connect(a.context.destination),m=g(a.context.currentTime),m.catch(function(a){console.error("Music initialization failed:");console.error(a)}))};a.stop=function(){return ac(this,void 0,void 0,function Yc(){return $jscomp.generator.createGenerator(Yc,
function(a){if(1==a.nextAddress){if(!k||void 0===m)return a.jumpTo(0);k=!1;return a.yield(m,3)}m=void 0;a.jumpToEnd()})})};a.isPlaying=function(){return k};a.setVolume=function(b){a.masterGain.gain.value=z(0,b,1)}})(bc||(bc={}));var vb=function(a,b,d){this.viewWidth=void 0===a?12:a;this.viewHeight=void 0===b?8:b;this.volume=void 0===d?.25:d};vb.defaultOptions=function(){return new vb};vb.schema=m.classOf({viewWidth:m.aNumber,viewHeight:m.aNumber,volume:m.aNumber},function(a){return new vb(a.viewWidth,
a.viewHeight,a.volume)});var jb;(function(a){function b(){var a=gb.loadItem("settings",vb.schema);return"success"===(null===a||void 0===a?void 0:a.resultType)?a.result:vb.defaultOptions()}function d(a){bc.setVolume(a.volume)}a.loadOptions=b;a.currentOptions=b();a.applySettings=d;a.saveOptions=function(b){a.currentOptions=b;d(a.currentOptions);gb.saveItem("settings",b,vb.schema)};a.restoreDefaults=function(){a.saveOptions(vb.defaultOptions())}})(jb||(jb={}));var sc=m.constrain(m.aNumber,function(a){return 1<=
a&&5>=a}),u=function(a){this.position=a;this.possibleProjects=[];this.resourceConversions=[];this.populationCapacity=void 0};u.prototype.getTexture=function(a){return this.texture};var D={},Kc=m.schema({encode:function(a){return a.name},decode:function(a){return D[a]},validate:function(a){return m.aString.validate(a)&&a in D}}),Jf=m.schema({encode:function(a){var b=a.constructor.name;return{type:b,value:D[b].schema.encode(a)}},decode:function(a){return D[a.type].schema.decode(a.value)},validate:function(a){return m.recordOf({type:m.aString,
value:m.anAny}).validate(a)?D[a.type].schema.validate(a.value):!1}}),v=function(a,b){this.x=a;this.y=b};v.prototype.toString=function(){return"("+this.x+", "+this.y+")"};v.prototype.distanceFrom=function(a){return Math.hypot(Math.abs(this.x-a.x),Math.abs(this.y-a.y))};v.schema=m.classOf({x:m.aNumber,y:m.aNumber},function(a){return new v(a.x,a.y)});var ha=function(a,b){var d=this;this.parentScreen=a;this.world=b;this.viewWidth=jb.currentOptions.viewWidth;this.viewHeight=jb.currentOptions.viewHeight;
this.highlightedCoordinates=null;this.html=l.makeCanvas(this.viewWidth*ha.pixelsPerTile,this.viewHeight*ha.pixelsPerTile,["map-canvas"]);this.html.addEventListener("click",function(a){return d.handleClick(a)});this.refresh()};ha.prototype.refresh=function(){var a=this.world.getTilesInRectangle(this.world.viewPosition.x,this.world.viewPosition.y,this.viewWidth,this.viewHeight);a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,this.drawSquareAtCoordinates(b.getTexture(this.world),
b.position);null!==this.highlightedCoordinates&&this.drawSquareAtCoordinates(ha.highlightImage,this.highlightedCoordinates)};ha.prototype.drawSquareAtCoordinates=function(a,b){var d=this.html.getContext("2d");d.imageSmoothingEnabled=!1;var c=b.x-this.world.viewPosition.x;b=b.y-this.world.viewPosition.y;if(!(0>c||0>b||c>=this.viewWidth||b>=this.viewHeight)){var e=ha.pixelsPerTile/a.width*a.height;d.drawImage(a,c*ha.pixelsPerTile,b*ha.pixelsPerTile-e+ha.pixelsPerTile,ha.pixelsPerTile,e)}};ha.prototype.selectTile=
function(a){this.highlightedCoordinates=a?a.position:null;this.refresh();this.parentScreen.changeSidebarTile(this.highlightedCoordinates)};ha.prototype.moveViewArea=function(a,b){a=z(0,this.world.viewPosition.x+a,this.world.width-this.viewWidth);b=z(0,this.world.viewPosition.y+b,this.world.height-this.viewHeight);this.world.viewPosition=new v(a,b);this.refresh()};ha.prototype.handleClick=function(a){a=this.world.getTileAtCoordinates(new v(Math.floor(this.viewWidth/this.html.clientWidth*(a.pageX-this.html.offsetLeft))+
this.world.viewPosition.x,Math.floor(this.viewHeight/this.html.clientHeight*(a.pageY-this.html.offsetTop))+this.world.viewPosition.y));this.selectTile(a)};ha.prototype.handleKeyDown=function(a){var b=a.code;if("ArrowUp"===b||"KeyW"===b)a.preventDefault(),this.moveViewArea(0,-1);if("ArrowLeft"===b||"KeyA"===b)a.preventDefault(),this.moveViewArea(-1,0);if("ArrowDown"===b||"KeyS"===b)a.preventDefault(),this.moveViewArea(0,1);if("ArrowRight"===b||"KeyD"===b)a.preventDefault(),this.moveViewArea(1,0)};
ha.pixelsPerTile=100;ha.highlightImage=Me;var Ob=function(a,b){this.parentScreen=a;this.run=b;this.position=null;this.html=l.makeDiv(["world-screen-sidebar"]);this.refresh()};Ob.prototype.changeTile=function(a){this.position=a;this.refresh()};Ob.prototype.refresh=function(){var a=this;if(null===this.position)l.fillHTML(this.html,[l.makePara("No structure or terrain tile selected",["sidebar-tile-name"])]);else{var b=this.run.world.getTileAtCoordinates(this.position),d=l.makeDiv();b.populationCapacity&&
d.appendChild(l.makePara("Population capacity for "+b.populationCapacity.capacity+" "+b.populationCapacity.species.name));var c=l.makeDiv(),e=b.possibleProjects.filter(function(b){return b.isVisible(a.position,a.run)});e=$jscomp.makeIterator(e);for(var n=e.next();!n.done;n=e.next())c.appendChild(this.makeProjectHTML(b,n.value));e=l.makeDiv();if(0<b.resourceConversions.length){e.appendChild(l.makePara("Production:"));n=$jscomp.makeIterator(b.resourceConversions);for(var f=n.next();!f.done;f=n.next())e.appendChild(this.makeConversionHTML(f.value))}l.fillHTML(this.html,
[l.makePara(b.getTileName(),["sidebar-tile-name"]),l.makePara(b.getTileDescription()),d,e,c])}};Ob.prototype.makeProjectHTML=function(a,b){var d=this,c=l.makeDiv(["tile-project"]),e=l.makeButton(b.title,function(){d.doProject(b,a)},[],b.canDo(a.position,this.run)?"enabled":"disabled");c.appendChild(e);c.appendChild(l.makePara(b.projectDescription));if(0===b.costs.length)c.appendChild(l.makePara("Cost: Free"));else{var n=this.run.inventory.clone();e=b.costs.map(function(a){var b=n.canAfford([a]),d=
l.makePara(a.toString(),[b?"project-requirement-met":"project-requirement-unmet"]);b&&n.payCost([a]);return d});e=l.makeDivContaining([l.makePara("Costs: ")].concat($jscomp.arrayFromIterable(e)));c.appendChild(e)}0<b.completionRequirements.length&&c.appendChild(l.makePara("Requirements:"));e=$jscomp.makeIterator(b.completionRequirements);for(var f=e.next();!f.done;f=e.next()){f=f.value;var g=f.evaluate(this.run,this.position)?"project-requirement-met":"project-requirement-unmet";c.appendChild(l.makePara("- "+
f.toString(),[g]))}return c};Ob.prototype.makeConversionHTML=function(a){return l.makePara("- "+a.toString())};Ob.prototype.doProject=function(a,b){a.doAction(b.position,this.run);this.run.updateQuestState();this.parentScreen.refresh()};var ld=function(a){this.inventory=a.inventory;this.html=l.makeDiv(["world-screen-inventory"]);this.refresh()};ld.prototype.refresh=function(){for(var a=l.makeDiv(),b=$jscomp.makeIterator(this.inventory.getPopulationStrings()),d=b.next();!d.done;d=b.next())a.appendChild(l.makePara(d.value));
b=l.makeDiv();var c=$jscomp.makeIterator(this.inventory.getInventoryStrings());for(d=c.next();!d.done;d=c.next())b.appendChild(l.makePara(d.value));0===this.inventory.getResourceList().length&&b.appendChild(l.makePara("(none)"));l.fillHTML(this.html,[l.makeDivContaining([l.makeDivContaining([l.makeHeader("Population",1,[])],["world-screen-population-header"]),l.makePara("Available workers: "+this.inventory.getAvailableWorkers()),l.makePara("Total population:"+(0===this.inventory.getTotalPopulation()?
" 0":"")),a,l.makeHeader("Inventory",1),b])])};var md=function(a){this.ending=a;this.html=l.makeDiv();this.refresh()};md.prototype.refresh=function(){var a=l.makeHeader(this.ending.title),b=l.makePara(this.ending.description),d=l.makeButton("Exit",function(){B.show(new ub)});l.fillHTML(this.html,[l.makeDivContaining([a,b,d],["ending-page"])])};var nd=function(a){this.html=l.makeDiv(["world-screen-quest-description"]);this.run=a;this.refresh()};nd.prototype.refresh=function(){var a=this,b=this.run.getCurrentQuestDescription(),
d=this.run.getCurrentQuestHint();b=l.makePara("Objective: "+(d?b+"\n(hint: "+d+")":b));d=this.run.getPreviousQuestDescription();this.run.questCompletionShown||(this.run.questCompletionShown=!0,b=l.makePara("Completed: "+d,["quest-description-emphasis"]),setTimeout(function(){var b=a.run.getQuestEndState();b?B.show(new md(b)):a.refresh()},1500));l.fillHTML(this.html,[b])};var ob=function(a){this.mapUI=new ha(this,a.world);this.tileSidebar=new Ob(this,a);this.inventorySidebar=new ld(a);this.header=
new od(a);this.questIndicator=new nd(a);this.html=l.makeDivContaining([this.header.html,this.questIndicator.html,l.makeDivContaining([this.inventorySidebar.html,l.makeDivContaining([this.mapUI.html],["world-screen-map-box"]),this.tileSidebar.html],["world-screen-hbox"])],["flex-vertical","world-screen"])};ob.prototype.refresh=function(){this.mapUI.refresh();this.tileSidebar.refresh();this.inventorySidebar.refresh();this.header.refresh();this.questIndicator.refresh()};ob.prototype.handleKeyDown=function(a){this.mapUI.handleKeyDown(a)};
ob.prototype.changeSidebarTile=function(a){this.tileSidebar.changeTile(a)};var Fb;(function(a){a.safeKeys=function(a){return Object.keys(a)};a.safeEntries=function(a){return Object.entries(a)}})(Fb||(Fb={}));var k=function(a){this.name=a};k.values=function(){return Fb.safeKeys(k).map(function(a){return k[a]}).filter(function(a){return a instanceof k})};k.entries=function(){var a={};Fb.safeEntries(k).filter(function(a){return a[1]instanceof k}).forEach(function(b){var d=$jscomp.makeIterator(b);b=d.next().value;
d=d.next().value;a[b]=d});return a};k.Energy=new k("\u26a1 Energy");k.Food=new k("\ud83c\udf2f Food");k.Metal=new k("\u26cf Metal Ore");k.BuildingMaterials=new k("\ud83d\udd29 Construction Parts");k.Electronics=new k("\ud83d\udca1 Electronics");k.Cavorite=new k("\ud83d\udc8e Cavorite");k.Orichalcum=new k("\ud83e\uddea Orichalcum");k.Superconductor=new k("\ud83e\uddf5 Superconductor");k.SmartMatter=new k("\ud83d\udca0 SmartMatter");k.EngineeringKnowledge=new k("\u2699\ufe0f Engineering Data");k.PsychKnowledge=
new k("\ud83e\udde0 Psychological Data");k.AlienKnowledge=new k("\ud83d\udef8 Alien Data");k.AlignmentKnowledge=new k("\ud83d\udcce AI Alignment Data");k.schema=m.mapping(k.entries());var p=function(a,b){this.resource=a;this.quantity=b};p.prototype.toString=function(){return this.resource.name+" x"+this.quantity};p.schema=m.classOf({resource:k.schema,quantity:m.aNumber},function(a){return new p(a.resource,a.quantity)});var x=function(a,b,d,c){this.inputs=a;this.outputs=b;this.requiredWorkers=d;this.priority=
c;this.enabled=!0};x.newConversion=function(a,b,d){a=new x(a,b,void 0===d?0:d,x.nextNumber);x.nextNumber++;return a};x.prototype.toString=function(){var a=this.outputs.map(function(a){return a.toString()}).join(", "),b=this.inputs.map(function(a){return a.toString()});0!==this.requiredWorkers&&b.push(this.requiredWorkers+" workers");var d=b.join(", ");return 0===b.length?"Produce "+a:"Produce "+a+" using "+d};x.unsafeGetNextPriority=function(){return x.nextNumber};x.unsafeSetNextPriority=function(a){x.nextNumber=
a};x.nextNumber=0;x.schema=m.classOf({priority:m.aNumber,enabled:m.aBoolean,inputs:m.arrayOf(p.schema),outputs:m.nonEmptyArrayOf(p.schema),requiredWorkers:m.aNumber},function(a){var b=a.enabled;a=new x(a.inputs,a.outputs,a.requiredWorkers,a.priority);a.enabled=b;return a});var ge=function(a){this.run=a;this.html=l.makeDiv(["main-menu","pause-menu"]);this.refresh()};ge.prototype.refresh=function(){var a=this;l.fillHTML(this.html,[l.makeHeader("Game Paused",2),l.makeDivContaining([l.makeButton("resume_game",
function(){B.show(new ob(a.run))}),ub.makeAudioButton(this),l.makeButton("change_settings",function(){B.show(new pd(a))}),l.makeButton("save_and_quit",function(){Gb.saveProgress({game:a.run,nextConversionPriority:x.unsafeGetNextPriority()});B.show(new ub)})],["main-menu-options"])])};var A=function(a,b){this.text=a;this.attribution=b};A.getRandomQuote=function(){var a=this.QuotesList.filter(function(a){return a!==A.lastQuote});if(hb.isNonEmpty(a))return a=fa.fromArray(a),A.lastQuote=a;a=fa.fromArray(this.QuotesList);
return A.lastQuote=a};A.getQuote=function(a){return this.QuotesList[a]};A.QuotesList=[new A(w($jscomp$templatelit$0),"Nick Bostrom"),new A(w($jscomp$templatelit$1),"Nick Bostrom"),new A(w($jscomp$templatelit$2),"Eliezer Yudkowsky"),new A(w($jscomp$templatelit$3),"Claude Shannon"),new A(w($jscomp$templatelit$4),"Greg Egan"),new A(w($jscomp$templatelit$5),"Eliezer Yudkowsky"),new A(w($jscomp$templatelit$6),"Alan Turing"),new A(w($jscomp$templatelit$7),"Buzz Aldrin"),new A(w($jscomp$templatelit$8),"Dawn Program mission proposal, published 10942214400 SPE"),
new A(w($jscomp$templatelit$9),"Isaac Calvin, CEO of CabiAI"),new A(w($jscomp$templatelit$10),"Sol Unified Newsfeed, article published 10963335600 SPE"),new A(w($jscomp$templatelit$11),"Aurora Mission Colonist Handbook"),new A(w($jscomp$templatelit$12),"Aurora Mission Colonist Handbook"),new A(w($jscomp$templatelit$13),"A History of the Colonial Alliance by Elizabeth Seldon"),new A(w($jscomp$templatelit$14),"A History of the Colonial Alliance by Elizabeth Seldon"),new A(w($jscomp$templatelit$15),
"A History of the Colonial Alliance by Elizabeth Seldon"),new A(w($jscomp$templatelit$16),"Medical Technician Noah Verres, Aurora Expedition, T-minus-5 days to planetfall"),new A(w($jscomp$templatelit$17),"Quartermaster Allison Li, Aurora Expedition, T-minus-3 days to planetfall"),new A(w($jscomp$templatelit$18),"Journal of the Moretrue Institute for Effective Policy"),new A(w($jscomp$templatelit$19),"Introduction to Frontier Engineering by Robin North"),new A(w($jscomp$templatelit$20),"Dr. Alex Scott, Moretrue Institute for Effective Policy"),
new A(w($jscomp$templatelit$21),"An Oral History of The Lunar Republics"),new A(w($jscomp$templatelit$22),"Harmony of the Exospheres by Caritas Wilson"),new A(w($jscomp$templatelit$23),"Harmony of the Exospheres by Caritas Wilson"),new A(w($jscomp$templatelit$24),"Harmony of the Exospheres by Caritas Wilson"),new A(w($jscomp$templatelit$25),"Harmony of the Exospheres by Caritas Wilson"),new A(w($jscomp$templatelit$26),"Zeroball, Etc. by Parity Harker"),new A(w($jscomp$templatelit$27),"Zeroball, Etc. by Parity Harker"),
new A(w($jscomp$templatelit$28),"Journal of the Moretrue Institute for Effective Policy"),new A(w($jscomp$templatelit$29),"Introduction to Frontier Engineering by Robin North"),new A(w($jscomp$templatelit$30),"Dr. Alex Scott, Moretrue Institute for Effective Policy"),new A(w($jscomp$templatelit$31),"An Oral History of The Lunar Republics")];var cc=function(a,b){this.run=a;this.quoteIndex=b;this.doneLoading=!1;this.html=l.makeDiv();this.loadingBar=l.makeDiv(["transition-loading-bar"]);this.loadingArea=
l.makeDivContaining([this.loadingBar],["transition-loading-area"]);this.quote=b?A.getQuote(b):A.getRandomQuote();a=this.quote.text;b="\u00a0".repeat(4);a=a.replace(/\t/g,b);a=a.replace(/ {4}/g,b);a=a.replace(/^(\s*)/,"$1\u201c")+"\u201d";l.fillHTML(this.html,[l.makeDivContaining([l.makePara(a),l.makePara("- "+this.quote.attribution,["transition-attribution"])],["transition-quote-panel"]),this.loadingArea])};cc.prototype.refresh=function(){};cc.prototype.startLoading=function(){var a=this,b=Date.now();
this.run.completeTurn();Gb.saveProgress({game:this.run,nextConversionPriority:x.unsafeGetNextPriority()});b=Date.now()-b;setTimeout(function(){l.fillHTML(a.loadingArea,[l.makeButton("Continue",function(){a.continueToNextTurn()})]);a.doneLoading=!0},2E3-b)};cc.prototype.continueToNextTurn=function(){B.show(new ob(this.run))};cc.prototype.handleKeyDown=function(){this.doneLoading&&this.continueToNextTurn()};var rb=qb(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),mc=qb(/Edge/i),he=qb(/firefox/i),
qd=qb(/safari/i)&&!qb(/chrome/i)&&!qb(/android/i),tc=qb(/iP(ad|od|hone)/i),Kf=qb(/chrome/i)&&qb(/android/i),Jd={capture:!1,passive:!1},Kd=/\s+/g,jc,Ka="Sortable"+(new Date).getTime(),uc=[],rd={initializeByDefault:!0},nc={mount:function(a){for(var b in rd)!rd.hasOwnProperty(b)||b in a||(a[b]=rd[b]);uc.push(a)},pluginEvent:function(a,b,d){var c=this;this.eventCanceled=!1;d.cancel=function(){c.eventCanceled=!0};var e=a+"Global";uc.forEach(function(c){if(b[c.pluginName]){if(b[c.pluginName][e])b[c.pluginName][e](xb({sortable:b},
d));if(b.options[c.pluginName]&&b[c.pluginName][a])b[c.pluginName][a](xb({sortable:b},d))}})},initializePlugins:function(a,b,d,c){uc.forEach(function(c){var h=c.pluginName;if(a.options[h]||c.initializeByDefault)c=new c(a,b,a.options),c.sortable=a,c.options=a.options,a[h]=c,pb(d,c.defaults)});for(var h in a.options)a.options.hasOwnProperty(h)&&(c=this.modifyOption(a,h,a.options[h]),"undefined"!==typeof c&&(a.options[h]=c))},getEventProperties:function(a,b){var d={};uc.forEach(function(c){"function"===
typeof c.eventProperties&&pb(d,c.eventProperties.call(b[c.pluginName],a))});return d},modifyOption:function(a,b,d){var c;uc.forEach(function(h){a[h.pluginName]&&h.optionListeners&&"function"===typeof h.optionListeners[b]&&(c=h.optionListeners[b].call(a[h.pluginName],d))});return c}},Ca=function(a,b){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c=d.evt;d=Vc(d,["evt"]);nc.pluginEvent.bind(F)(a,b,xb({dragEl:t,parentEl:Z,ghostEl:H,rootEl:R,nextEl:Pb,lastDownEl:Lc,cloneEl:T,cloneHidden:Hb,
dragStarted:vc,putSortable:ja,activeSortable:F.active,originalEvent:c,oldIndex:Wb,oldDraggableIndex:kc,newIndex:Ja,newDraggableIndex:Ab,hideGhostForTarget:ie,unhideGhostForTarget:je,cloneNowHidden:function(){Hb=!0},cloneNowShown:function(){Hb=!1},dispatchSortableEvent:function(a){ua({sortable:b,name:a,originalEvent:c})}},d))},t,Z,H,R,Pb,Lc,T,Hb,Wb,Ja,kc,Ab,Mc,ja,dc=!1,Nc=!1,Cc=[],Qb,kb,sd,td,ke,le,vc,ec,pc,oc=!1,Oc=!1,Dc,qa,ud=[],bd=!1,Ec=[],Pc="undefined"!==typeof document,me=mc||rb?"cssFloat":"float",
Ce=Pc&&!Kf&&!tc&&"draggable"in document.createElement("div"),ne=function(){if(Pc){if(rb)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),Rd=function(a,b){var d=E(a),c=parseInt(d.width)-parseInt(d.paddingLeft)-parseInt(d.paddingRight)-parseInt(d.borderLeftWidth)-parseInt(d.borderRightWidth),e=Bc(a,0,b);a=Bc(a,1,b);var n=e&&E(e);b=a&&E(a);var f=n&&parseInt(n.marginLeft)+parseInt(n.marginRight)+ia(e).width,l=b&&parseInt(b.marginLeft)+
parseInt(b.marginRight)+ia(a).width;return"flex"===d.display?"column"===d.flexDirection||"column-reverse"===d.flexDirection?"vertical":"horizontal":"grid"===d.display?1>=d.gridTemplateColumns.split(" ").length?"vertical":"horizontal":e&&n["float"]&&"none"!==n["float"]?(d="left"===n["float"]?"left":"right",!a||"both"!==b.clear&&b.clear!==d?"horizontal":"vertical"):e&&("block"===n.display||"flex"===n.display||"table"===n.display||"grid"===n.display||f>=c&&"none"===d[me]||a&&"none"===d[me]&&f+l>c)?"vertical":
"horizontal"},Lf=function(a,b,d){var c=d?a.left:a.top,e=d?a.right:a.bottom;a=d?a.width:a.height;var f=d?b.left:b.top,l=d?b.right:b.bottom;b=d?b.width:b.height;return c===f||e===l||c+a/2===f+b/2},Mf=function(a,b){var d;Cc.some(function(c){if(!Wc(c)){var h=ia(c),e=c[Ka].options.emptyInsertThreshold,f=a>=h.left-e&&a<=h.right+e;h=b>=h.top-e&&b<=h.bottom+e;if(e&&f&&h)return d=c}});return d},Sd=function(a){function b(a,d){return function(c,h,e,f){var n=c.options.group.name&&h.options.group.name&&c.options.group.name===
h.options.group.name;if(null==a&&(d||n))return!0;if(null==a||!1===a)return!1;if(d&&"clone"===a)return a;if("function"===typeof a)return b(a(c,h,e,f),d)(c,h,e,f);c=(d?c:h).options.group.name;return!0===a||"string"===typeof a&&a===c||a.join&&-1<a.indexOf(c)}}var d={},c=a.group;c&&"object"==hc(c)||(c={name:c});d.name=c.name;d.checkPull=b(c.pull,!0);d.checkPut=b(c.put);d.revertClone=c.revertClone;a.group=d},ie=function(){!ne&&H&&E(H,"display","none")},je=function(){!ne&&H&&E(H,"display","")};Pc&&document.addEventListener("click",
function(a){if(Nc)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),Nc=!1},!0);var Rb=function(a){if(t){a=a.touches?a.touches[0]:a;var b=Mf(a.clientX,a.clientY);if(b){var d={},c;for(c in a)a.hasOwnProperty(c)&&(d[c]=a[c]);d.target=d.rootEl=b;d.preventDefault=void 0;d.stopPropagation=void 0;b[Ka]._onDragOver(d)}}},Nf=function(a){t&&t.parentNode[Ka]._isOutsideThisEl(a.target)};F.prototype={constructor:F,_isOutsideThisEl:function(a){this.el.contains(a)||
a===this.el||(ec=null)},_getDirection:function(a,b){return"function"===typeof this.options.direction?this.options.direction.call(this,a,b,t):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,d=this.el,c=this.options,e=c.preventOnFilter,f=a.type,l=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,g=(l||a).target,k=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||g,m=c.filter;He(d);if(!(t||/mousedown|pointerdown/.test(f)&&0!==
a.button||c.disabled||k.isContentEditable||(g=mb(g,c.draggable,d,!1),g&&g.animated||Lc===g))){Wb=Pa(g);kc=Pa(g,c.draggable);if("function"===typeof m){if(m.call(this,a,g,this)){ua({sortable:b,rootEl:k,name:"filter",targetEl:g,toEl:d,fromEl:d});Ca("filter",b,{evt:a});e&&a.cancelable&&a.preventDefault();return}}else if(m&&(m=m.split(",").some(function(c){if(c=mb(k,c.trim(),d,!1))return ua({sortable:b,rootEl:c,name:"filter",targetEl:g,fromEl:d,toEl:d}),Ca("filter",b,{evt:a}),!0}))){e&&a.cancelable&&a.preventDefault();
return}c.handle&&!mb(k,c.handle,d,!1)||this._prepareDragStart(a,l,g)}}},_prepareDragStart:function(a,b,d){var c=this,e=c.el,f=c.options,g=e.ownerDocument;if(d&&!t&&d.parentNode===e){var l=ia(d);R=e;t=d;Z=t.parentNode;Pb=t.nextSibling;Lc=d;Mc=f.group;F.dragged=t;Qb={target:t,clientX:(b||a).clientX,clientY:(b||a).clientY};ke=Qb.clientX-l.left;le=Qb.clientY-l.top;this._lastX=(b||a).clientX;this._lastY=(b||a).clientY;t.style["will-change"]="all";d=function(){Ca("delayEnded",c,{evt:a});F.eventCanceled?
c._onDrop():(c._disableDelayedDragEvents(),!he&&c.nativeDraggable&&(t.draggable=!0),c._triggerDragStart(a,b),ua({sortable:c,name:"choose",originalEvent:a}),Ia(t,f.chosenClass,!0))};f.ignore.split(",").forEach(function(a){Ld(t,a.trim(),ad)});N(g,"dragover",Rb);N(g,"mousemove",Rb);N(g,"touchmove",Rb);N(g,"mouseup",c._onDrop);N(g,"touchend",c._onDrop);N(g,"touchcancel",c._onDrop);he&&this.nativeDraggable&&(this.options.touchStartThreshold=4,t.draggable=!0);Ca("delayStart",this,{evt:a});!f.delay||f.delayOnTouchOnly&&
!b||this.nativeDraggable&&(mc||rb)?d():F.eventCanceled?this._onDrop():(N(g,"mouseup",c._disableDelayedDrag),N(g,"touchend",c._disableDelayedDrag),N(g,"touchcancel",c._disableDelayedDrag),N(g,"mousemove",c._delayedDragTouchMoveHandler),N(g,"touchmove",c._delayedDragTouchMoveHandler),f.supportPointer&&N(g,"pointermove",c._delayedDragTouchMoveHandler),c._dragStartTimer=setTimeout(d,f.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),
Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){t&&ad(t);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;I(a,"mouseup",this._disableDelayedDrag);I(a,"touchend",this._disableDelayedDrag);I(a,"touchcancel",this._disableDelayedDrag);I(a,"mousemove",this._delayedDragTouchMoveHandler);
I(a,"touchmove",this._delayedDragTouchMoveHandler);I(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?N(document,"pointermove",this._onTouchMove):b?N(document,"touchmove",this._onTouchMove):N(document,"mousemove",this._onTouchMove):(N(t,"dragend",this),N(R,"dragstart",this._onDragStart));try{document.selection?Fc(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(d){}},
_dragStarted:function(a,b){dc=!1;if(R&&t){Ca("dragStarted",this,{evt:b});this.nativeDraggable&&N(document,"dragover",Nf);var d=this.options;!a&&Ia(t,d.dragClass,!1);Ia(t,d.ghostClass,!0);F.active=this;a&&this._appendGhost();ua({sortable:this,name:"start",originalEvent:b})}else this._nulling()},_emulateDragOver:function(){if(kb){this._lastX=kb.clientX;this._lastY=kb.clientY;ie();for(var a=document.elementFromPoint(kb.clientX,kb.clientY),b=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(kb.clientX,
kb.clientY);if(a===b)break;b=a}t.parentNode[Ka]._isOutsideThisEl(a);if(b){do{if(b[Ka]&&b[Ka]._onDragOver({clientX:kb.clientX,clientY:kb.clientY,target:a,rootEl:b})&&!this.options.dragoverBubble)break;a=b}while(b=b.parentNode)}je()}},_onTouchMove:function(a){if(Qb){var b=this.options,d=b.fallbackTolerance,c=b.fallbackOffset;b=a.touches?a.touches[0]:a;var e=H&&Vb(H,!0),f=H&&e&&e.a,g=H&&e&&e.d,l=tc&&qa&&Nd(qa);f=(b.clientX-Qb.clientX+c.x)/(f||1)+(l?l[0]-ud[0]:0)/(f||1);c=(b.clientY-Qb.clientY+c.y)/(g||
1)+(l?l[1]-ud[1]:0)/(g||1);if(!F.active&&!dc){if(d&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<d)return;this._onDragStart(a,!0)}H&&(e?(e.e+=f-(sd||0),e.f+=c-(td||0)):e={a:1,b:0,c:0,d:1,e:f,f:c},d="matrix(".concat(e.a,",").concat(e.b,",").concat(e.c,",").concat(e.d,",").concat(e.e,",").concat(e.f,")"),E(H,"webkitTransform",d),E(H,"mozTransform",d),E(H,"msTransform",d),E(H,"transform",d),sd=f,td=c,kb=b);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!H){var a=
this.options.fallbackOnBody?document.body:R,b=ia(t,!0,tc,!0,a),d=this.options;if(tc){for(qa=a;"static"===E(qa,"position")&&"none"===E(qa,"transform")&&qa!==document;)qa=qa.parentNode;qa!==document.body&&qa!==document.documentElement?(qa===document&&(qa=sb()),b.top+=qa.scrollTop,b.left+=qa.scrollLeft):qa=sb();ud=Nd(qa)}H=t.cloneNode(!0);Ia(H,d.ghostClass,!1);Ia(H,d.fallbackClass,!0);Ia(H,d.dragClass,!0);E(H,"transition","");E(H,"transform","");E(H,"box-sizing","border-box");E(H,"margin",0);E(H,"top",
b.top);E(H,"left",b.left);E(H,"width",b.width);E(H,"height",b.height);E(H,"opacity","0.8");E(H,"position",tc?"absolute":"fixed");E(H,"zIndex","100000");E(H,"pointerEvents","none");F.ghost=H;a.appendChild(H);E(H,"transform-origin",ke/parseInt(H.style.width)*100+"% "+le/parseInt(H.style.height)*100+"%")}},_onDragStart:function(a,b){var d=this,c=a.dataTransfer,e=d.options;Ca("dragStart",this,{evt:a});F.eventCanceled?this._onDrop():(Ca("setupClone",this),F.eventCanceled||(T=Qd(t),T.draggable=!1,T.style["will-change"]=
"",this._hideClone(),Ia(T,this.options.chosenClass,!1),F.clone=T),d.cloneId=Fc(function(){Ca("clone",d);F.eventCanceled||(d.options.removeCloneOnHide||R.insertBefore(T,t),d._hideClone(),ua({sortable:d,name:"clone"}))}),!b&&Ia(t,e.dragClass,!0),b?(Nc=!0,d._loopId=setInterval(d._emulateDragOver,50)):(I(document,"mouseup",d._onDrop),I(document,"touchend",d._onDrop),I(document,"touchcancel",d._onDrop),c&&(c.effectAllowed="move",e.setData&&e.setData.call(d,c,t)),N(document,"drop",d),E(t,"transform","translateZ(0)")),
dc=!0,d._dragStartId=Fc(d._dragStarted.bind(d,b,a)),N(document,"selectstart",d),vc=!0,qd&&E(document.body,"user-select","none"))},_onDragOver:function(a){function b(b,d){Ca(b,x,xb({evt:a,isOwner:u,axis:C?"vertical":"horizontal",revert:k,dragRect:D,targetRect:l,canSort:v,fromSortable:w,target:g,completed:c,onMove:function(b,d){return $c(R,f,t,D,b,ia(b),a,d)},changed:e},d))}function d(){b("dragOverAnimationCapture");x.captureAnimationState();x!==w&&w.captureAnimationState()}function c(d){b("dragOverCompleted",
{insertion:d});d&&(u?q._hideClone():q._showClone(x),x!==w&&(Ia(t,ja?ja.options.ghostClass:q.options.ghostClass,!1),Ia(t,m.ghostClass,!0)),ja!==x&&x!==F.active?ja=x:x===F.active&&ja&&(ja=null),w===x&&(x._ignoreWhileAnimating=g),x.animateAll(function(){b("dragOverAnimationComplete");x._ignoreWhileAnimating=null}),x!==w&&(w.animateAll(),w._ignoreWhileAnimating=null));if(g===t&&!t.animated||g===f&&!g.animated)ec=null;m.dragoverBubble||a.rootEl||g===document||(t.parentNode[Ka]._isOutsideThisEl(a.target),
!d&&Rb(a));!m.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return z=!0}function e(){Ja=Pa(t);Ab=Pa(t,m.draggable);ua({sortable:x,name:"change",toEl:f,newIndex:Ja,newDraggableIndex:Ab,originalEvent:a})}var f=this.el,g=a.target,l,k,m=this.options,p=m.group,q=F.active,u=Mc===p,v=m.sort,w=ja||q,x=this,z=!1;if(!bd){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();g=mb(g,m.draggable,f,!0);b("dragOver");if(F.eventCanceled)return z;if(t.contains(a.target)||g.animated&&g.animatingX&&g.animatingY||
x._ignoreWhileAnimating===g)return c(!1);Nc=!1;if(q&&!m.disabled&&(u?v||(k=!R.contains(t)):ja===this||(this.lastPutMode=Mc.checkPull(this,q,t,a))&&p.checkPut(this,q,t,a))){var C="vertical"===this._getDirection(a,g);var D=ia(t);b("dragOverValid");if(F.eventCanceled)return z;if(k)return Z=R,d(),this._hideClone(),b("revert"),F.eventCanceled||(Pb?R.insertBefore(t,Pb):R.appendChild(t)),c(!0);p=Wc(f,m.draggable);if(!p||Ee(a,C,this)&&!p.animated){if(p===t)return c(!1);p&&f===a.target&&(g=p);g&&(l=ia(g));
if(!1!==$c(R,f,t,D,g,l,a,!!g))return d(),f.appendChild(t),Z=f,e(),c(!0)}else if(g.parentNode===f){l=ia(g);var A=0;A=t.parentNode!==f;var B=!Lf(t.animated&&t.toRect||D,g.animated&&g.toRect||l,C);p=C?"top":"left";var G=Md(g,"top","top")||Md(t,"top","top"),K=G?G.scrollTop:void 0;if(ec!==g){var J=l[p];oc=!1;Oc=!B&&m.invertSwap||A}A=Fe(a,g,l,C,B?1:m.swapThreshold,null==m.invertedSwapThreshold?m.swapThreshold:m.invertedSwapThreshold,Oc,ec===g);if(0!==A){B=Pa(t);do{B-=A;var I=Z.children[B]}while(I&&("none"===
E(I,"display")||I===H))}if(0===A||I===g)return c(!1);ec=g;pc=A;I=g.nextElementSibling;B=!1;B=1===A;A=$c(R,f,t,D,g,l,a,B);if(!1!==A){if(1===A||-1===A)B=1===A;bd=!0;setTimeout(De,30);d();B&&!I?f.appendChild(t):g.parentNode.insertBefore(t,B?I:g);G&&Pd(G,0,K-G.scrollTop);Z=t.parentNode;void 0===J||Oc||(Dc=Math.abs(J-ia(g)[p]));e();return c(!0)}}if(f.contains(t))return c(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){I(document,"mousemove",this._onTouchMove);I(document,"touchmove",
this._onTouchMove);I(document,"pointermove",this._onTouchMove);I(document,"dragover",Rb);I(document,"mousemove",Rb);I(document,"touchmove",Rb)},_offUpEvents:function(){var a=this.el.ownerDocument;I(a,"mouseup",this._onDrop);I(a,"touchend",this._onDrop);I(a,"pointerup",this._onDrop);I(a,"touchcancel",this._onDrop);I(document,"selectstart",this)},_onDrop:function(a){var b=this.el,d=this.options;Ja=Pa(t);Ab=Pa(t,d.draggable);Ca("drop",this,{evt:a});Z=t&&t.parentNode;Ja=Pa(t);Ab=Pa(t,d.draggable);if(!F.eventCanceled&&
(oc=Oc=dc=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(I(document,"drop",this),I(b,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),qd&&E(document.body,"user-select",""),E(t,"transform",""),a&&(vc&&(a.cancelable&&a.preventDefault(),!d.dropBubble&&a.stopPropagation()),H&&H.parentNode&&H.parentNode.removeChild(H),(R===Z||ja&&"clone"!==ja.lastPutMode)&&T&&T.parentNode&&T.parentNode.removeChild(T),
t&&(this.nativeDraggable&&I(t,"dragend",this),ad(t),t.style["will-change"]="",vc&&!dc&&Ia(t,ja?ja.options.ghostClass:this.options.ghostClass,!1),Ia(t,this.options.chosenClass,!1),ua({sortable:this,name:"unchoose",toEl:Z,newIndex:null,newDraggableIndex:null,originalEvent:a}),R!==Z?(0<=Ja&&(ua({rootEl:Z,name:"add",toEl:Z,fromEl:R,originalEvent:a}),ua({sortable:this,name:"remove",toEl:Z,originalEvent:a}),ua({rootEl:Z,name:"sort",toEl:Z,fromEl:R,originalEvent:a}),ua({sortable:this,name:"sort",toEl:Z,
originalEvent:a})),ja&&ja.save()):Ja!==Wb&&0<=Ja&&(ua({sortable:this,name:"update",toEl:Z,originalEvent:a}),ua({sortable:this,name:"sort",toEl:Z,originalEvent:a})),F.active)))){if(null==Ja||-1===Ja)Ja=Wb,Ab=kc;ua({sortable:this,name:"end",toEl:Z,originalEvent:a});this.save()}this._nulling()},_nulling:function(){Ca("nulling",this);R=t=Z=H=Pb=T=Lc=Hb=Qb=kb=vc=Ja=Ab=Wb=kc=ec=pc=ja=Mc=F.dragged=F.ghost=F.clone=F.active=null;Ec.forEach(function(a){a.checked=!0});Ec.length=sd=td=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);
break;case "dragenter":case "dragover":t&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,d=this.el.children,c=0,e=d.length,f=this.options;c<e;c++)b=d[c],mb(b,f.draggable,this.el,!1)&&a.push(b.getAttribute(f.dataIdAttr)||Ge(b));return a},sort:function(a){var b={},d=this.el;this.toArray().forEach(function(a,c){c=d.children[c];mb(c,this.options.draggable,d,!1)&&(b[a]=
c)},this);a.forEach(function(a){b[a]&&(d.removeChild(b[a]),d.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return mb(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var d=this.options;if(void 0===b)return d[a];var c=nc.modifyOption(this,a,b);d[a]="undefined"!==typeof c?c:b;"group"===a&&Sd(d)},destroy:function(){Ca("destroy",this);var a=this.el;a[Ka]=null;I(a,"mousedown",this._onTapStart);I(a,"touchstart",this._onTapStart);
I(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(I(a,"dragover",this),I(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();Cc.splice(Cc.indexOf(this.el),1);this.el=a=null},_hideClone:function(){Hb||(Ca("hideClone",this),F.eventCanceled||(E(T,"display","none"),this.options.removeCloneOnHide&&T.parentNode&&T.parentNode.removeChild(T),Hb=!0))},_showClone:function(a){"clone"!==
a.lastPutMode?this._hideClone():Hb&&(Ca("showClone",this),F.eventCanceled||(R.contains(t)&&!this.options.group.revertClone?R.insertBefore(T,t):Pb?R.insertBefore(T,Pb):R.appendChild(T),this.options.group.revertClone&&this.animate(t,T),E(T,"display",""),Hb=!1))}};Pc&&N(document,"touchmove",function(a){(F.active||dc)&&a.cancelable&&a.preventDefault()});F.utils={on:N,off:I,css:E,find:Ld,is:function(a,b){return!!mb(a,b,a,!1)},extend:function(a,b){if(a&&b)for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);
return a},throttle:Od,closest:mb,toggleClass:Ia,clone:Qd,index:Pa,nextTick:Fc,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:Rd,getChild:Bc};F.get=function(a){return a[Ka]};F.mount=function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];b[0].constructor===Array&&(b=b[0]);b.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(F.utils=xb({},F.utils,
a.utils));nc.mount(a)})};F.create=function(a,b){return new F(a,b)};F.version="1.10.2";var Y=[],wc,vd,wd=!1,xd,yd,Qc,fc,zd=Od(function(a,b,d,c){if(b.scroll){var e=(a.touches?a.touches[0]:a).clientX,h=(a.touches?a.touches[0]:a).clientY,f=b.scrollSensitivity,g=b.scrollSpeed,l=sb(),m=!1;if(vd!==d){vd=d;Gc();wc=b.scroll;var k=b.scrollFn;!0===wc&&(wc=zb(d,!0))}d=0;var p=wc;do{var q=p,t=ia(q),u=t.top,v=t.bottom,w=t.left,x=t.right,A=t.width;t=t.height;var B=void 0,z=void 0,C=q.scrollWidth,D=q.scrollHeight;
z=E(q);var G=q.scrollLeft,H=q.scrollTop;q===l?(B=A<C&&("auto"===z.overflowX||"scroll"===z.overflowX||"visible"===z.overflowX),z=t<D&&("auto"===z.overflowY||"scroll"===z.overflowY||"visible"===z.overflowY)):(B=A<C&&("auto"===z.overflowX||"scroll"===z.overflowX),z=t<D&&("auto"===z.overflowY||"scroll"===z.overflowY));w=B&&(Math.abs(x-e)<=f&&G+A<C)-(Math.abs(w-e)<=f&&!!G);u=z&&(Math.abs(v-h)<=f&&H+t<D)-(Math.abs(u-h)<=f&&!!H);if(!Y[d])for(v=0;v<=d;v++)Y[v]||(Y[v]={});if(Y[d].vx!=w||Y[d].vy!=u||Y[d].el!==
q)if(Y[d].el=q,Y[d].vx=w,Y[d].vy=u,clearInterval(Y[d].pid),0!=w||0!=u)m=!0,Y[d].pid=setInterval(function(){c&&0===this.layer&&F.active._onTouchMove(Qc);var b=Y[this.layer].vy?Y[this.layer].vy*g:0,d=Y[this.layer].vx?Y[this.layer].vx*g:0;"function"===typeof k&&"continue"!==k.call(F.dragged.parentNode[Ka],d,b,a,Qc,Y[this.layer].el)||Pd(Y[this.layer].el,d,b)}.bind({layer:d}),24);d++}while(b.bubbleScroll&&p!==l&&(p=zb(p,!1)));wd=m}},30),oe=function(a){var b=a.originalEvent,d=a.putSortable,c=a.dragEl,e=
a.activeSortable,f=a.dispatchSortableEvent,g=a.hideGhostForTarget;a=a.unhideGhostForTarget;b&&(e=d||e,g(),b=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b,b=document.elementFromPoint(b.clientX,b.clientY),a(),e&&!e.el.contains(b)&&(f("spill"),this.onSpill({dragEl:c,putSortable:d})))};cd.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();
var d=Bc(this.sortable.el,this.startIndex,this.options);d?this.sortable.el.insertBefore(b,d):this.sortable.el.appendChild(b);this.sortable.animateAll();a&&a.animateAll()},drop:oe};pb(cd,{pluginName:"revertOnSpill"});dd.prototype={onSpill:function(a){var b=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:oe};pb(dd,{pluginName:"removeOnSpill"});F.mount(new function(){function a(){this.defaults={scroll:!0,scrollSensitivity:30,
scrollSpeed:10,bubbleScroll:!0};for(var a in this)"_"===a.charAt(0)&&"function"===typeof this[a]&&(this[a]=this[a].bind(this))}a.prototype={dragStarted:function(a){a=a.originalEvent;this.sortable.nativeDraggable?N(document,"dragover",this._handleAutoScroll):this.options.supportPointer?N(document,"pointermove",this._handleFallbackAutoScroll):a.touches?N(document,"touchmove",this._handleFallbackAutoScroll):N(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){a=a.originalEvent;
this.options.dragOverBubble||a.rootEl||this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?I(document,"dragover",this._handleAutoScroll):(I(document,"pointermove",this._handleFallbackAutoScroll),I(document,"touchmove",this._handleFallbackAutoScroll),I(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(fc);Gc();clearTimeout(jc);jc=void 0},nulling:function(){Qc=vd=wc=wd=fc=xd=yd=null;Y.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},
_handleAutoScroll:function(a,d){var b=this,c=(a.touches?a.touches[0]:a).clientX,e=(a.touches?a.touches[0]:a).clientY,f=document.elementFromPoint(c,e);Qc=a;if(d||mc||rb||qd){zd(a,this.options,f,d);var g=zb(f,!0);!wd||fc&&c===xd&&e===yd||(fc&&clearInterval(fc),fc=setInterval(function(){var h=zb(document.elementFromPoint(c,e),!0);h!==g&&(g=h,Gc());zd(a,b.options,h,d)},10),xd=c,yd=e)}else this.options.bubbleScroll&&zb(f,!0)!==sb()?zd(a,this.options,zb(f,!1),!1):Gc()}};return pb(a,{pluginName:"scroll",
initializeByDefault:!0})});F.mount(dd,cd);var Of=F,gc=function(a){this.run=a;this.html=l.makeDiv(["production-screen"]);this.refresh()};gc.prototype.refresh=function(){var a=this,b=this.run.inventory.clone(),d=this.run.getResourceConversions(),c=[];d=$jscomp.makeIterator(d);for(var e=d.next();!e.done;e=d.next())e=e.value,b.canAfford(e.inputs)&&b.hasEnoughWorkers(e.requiredWorkers)?(c.push(this.renderConversion(e,!0)),b.applyConversions([e])):c.push(this.renderConversion(e,!1));c=l.makeDivContaining(c);
Of.create(c,{onEnd:function(b){var d=b.oldDraggableIndex;b=b.newDraggableIndex;void 0!==d&&void 0!==b&&a.shiftConversion(d,b)}});d=l.makePara("Available workers at start of production cycle: "+this.run.inventory.getAvailableWorkers(),["production-screen-available-workers"]);e=l.makePara("Unused workers at end of production cycle: "+b.getAvailableWorkers(),["production-screen-worker-consumption-label"]);var f=l.makeDiv();if(0!==this.run.inventory.getSpeciesList().length){var g=b.clone();f.appendChild(l.makePara("Resources required for worker upkeep:",
["production-screen-worker-consumption-label"]));for(var m=$jscomp.makeIterator(g.getSpeciesList()),k=m.next();!k.done;k=m.next()){var p=k.value;k=g.getProvidedWorkerConsumption(p).quantity;var q=g.getRequiredWorkerConsumption(p).quantity;f.appendChild(l.makePara(p.name+": "+k+"/"+q+" "+p.survivalCost.resource.name,[q>k?"population-consumption-unmet":"population-consumption-met","production-screen-worker-consumption"]));g.payCost([g.getProvidedWorkerConsumption(p)])}}g=l.makeDiv();q=b.getSpeciesList();
m=new Map;p=$jscomp.makeIterator(q);for(k=p.next();!k.done;k=p.next())k=k.value,m.set(k,b.getPopulation(k));b.doPopulationGrowth();p=new Map;var t=$jscomp.makeIterator(q);for(k=t.next();!k.done;k=t.next())k=k.value,p.set(k,b.getPopulation(k));q=$jscomp.makeIterator(q);for(k=q.next();!k.done;k=q.next()){k=k.value;t=m.get(k);var u=p.get(k);t-=u;0<t&&g.appendChild(l.makePara(t+" "+k.name+" will die from lack of "+k.survivalCost.resource.name+"!",["population-death-label"]))}l.fillHTML(this.html,[l.makeHeader("Resource Production Management"),
l.makeHeader("Inventory at start of production cycle:",2,["production-screen-label"]),this.renderInventory(this.run.inventory),l.makeHeader("Resource production",2,["production-screen-label"]),d,l.makePara("Drag conversions to change the activation order",["production-screen-drag-hint"]),c,l.makeHeader("Workforce",2,["production-screen-label"]),e,f,g,l.makeHeader("Inventory at end of production cycle:",2,["production-screen-label"]),this.renderInventory(b),l.makeButton("Back",function(){B.show(new ob(a.run))},
["production-screen-back-button"])])};gc.prototype.renderInventory=function(a){a=a.getInventoryStrings().map(function(a){return l.makePara(a)});0===a.length&&a.push(l.makePara("(none)"));return l.makeDivContaining(a,["production-screen-inventory"])};gc.prototype.renderConversion=function(a,b){var d=this,c=l.makeDiv(["conversion"]),e=a.toString(),f="conversion-description-normal";a.enabled?b||(e=a.toString()+" (cannot afford)",f="conversion-description-cannot-afford"):(e=a.toString()+" (disabled) ",
f="conversion-description-disabled");b=l.makePara(e,[f,"conversion-description"]);b=l.makeDivContaining([b],["conversion-description-box"]);c.appendChild(b);c.appendChild(l.makeButton("Toggle",function(){d.toggle(a)}));return c};gc.prototype.shiftConversion=function(a,b){this.run.shiftConversionPriority(a,b);this.refresh()};gc.prototype.toggle=function(a){a.enabled=!a.enabled;this.refresh()};var Ad=function(a){this.run=a;this.html=l.makeDiv(["research-screen"]);this.refresh()};Ad.prototype.refresh=
function(){var a=this,b=l.makeHeader("Available Research Projects"),d=this.run.getResearchOptions(),c=k.values().filter(function(a){return d.some(function(b){return b.researchCost.resource===a})}),e=l.makeDiv(["research-resources"]);0!==c.length&&(e.appendChild(l.makeHeader("Available Research Data")),c.forEach(function(b){return e.appendChild(l.makePara(b.name+": "+a.run.inventory.getResourceQuantity(b)))}));c=l.makeDivContaining(d.map(function(b){return a.renderTechOption(b)}));0===d.length&&(b=
l.makeDiv());var f=l.makeHeader("Previous Research Projects",1,["previous-research-header"]),g=this.run.getUnlockedTechnologies().filter(function(a){return a.visible}).map(function(a){return l.makePara("\u2022 "+a.name,["previous-research"])});0===g.length&&(f=l.makeDiv());var m=l.makeButton("Back",function(){B.show(new ob(a.run))},[]);l.fillHTML(this.html,[b,c,e,f].concat($jscomp.arrayFromIterable(g),[m]))};Ad.prototype.renderTechOption=function(a){for(var b=this,d=l.makeDivContaining([l.makeHeader(a.name,
2),l.makePara(a.description),l.makePara("Development cost: "+a.researchCost)],["tech-option"]),c=0,e=$jscomp.makeIterator(a.requiredTechs),f=e.next();!f.done;f=e.next())f=f.value,this.run.hasUnlockedTechnology(f)||(c++,d.appendChild(l.makePara("Requires "+f.name+" research")));c=0===c&&this.run.inventory.canAfford([a.researchCost]);d.appendChild(l.makeButton("Conduct Research",function(){b.run.inventory.payCost([a.researchCost]);b.run.unlockTechnology(a);b.run.updateQuestState();b.refresh()},[],c?
"enabled":"disabled"));return d};var od=function(a,b){this.run=a;this.buttonState=void 0===b?"enabled":b;this.html=l.makeDiv(["world-screen-header"]);this.refresh()};od.prototype.refresh=function(){var a=this,b=l.makeButton("Pause Game",function(){B.show(new ge(a.run))},[],this.buttonState),d=l.makeButton("Next Turn",function(){var b=new cc(a.run);B.show(b);b.startLoading()},[],this.buttonState),c=l.makeButton("Manage Production",function(){B.show(new gc(a.run))},[],this.buttonState),e=l.makeButton("Research Projects",
function(){B.show(new Ad(a.run))},[],this.buttonState);l.fillHTML(this.html,[b,c,e,d])};var xc=function(a,b,d){this.run=a;this.center=b;this.circuitsTile=d;this.mapUI=new ha(this,a.world);this.tileSidebar=new Ob(this,a);this.tileSidebar.changeTile(b);this.inventorySidebar=new ld(a);this.header=new od(a,"disabled");this.questIndicator=new nd(a);this.html=l.makeDivContaining([this.header.html,this.questIndicator.html,l.makeDivContaining([this.inventorySidebar.html,l.makeDivContaining([this.mapUI.html],
["world-screen-map-box"]),this.tileSidebar.html],["world-screen-hbox"])],["flex-vertical","world-screen"])};xc.prototype.expandCircuits=function(a){for(var b=this,d=this.run.world,c=d.getTilesInCircle(this.center,a),e=d.getTileAtCoordinates(this.center),f=$jscomp.makeIterator(c),g=f.next();!g.done;g=f.next())g=g.value,g!==e&&d.placeTile(new this.circuitsTile(g.position));this.run.updateQuestState();this.run.inventory.applyPopulationCaps();this.refresh();if(c.length<d.width*d.height)setTimeout(function(){b.expandCircuits(1.01*
a+.05)},100);else{d=$jscomp.makeIterator(this.run.inventory.getResourceList());for(c=d.next();!c.done;c=d.next())c=c.value,this.run.inventory.removeResource(c,this.run.inventory.getResourceQuantity(c));this.refresh()}};xc.prototype.refresh=function(){this.mapUI.refresh();this.tileSidebar.refresh();this.inventorySidebar.refresh();this.header.refresh();this.questIndicator.refresh()};xc.prototype.handleKeyDown=function(a){this.mapUI.handleKeyDown(a)};xc.prototype.changeSidebarTile=function(a){this.tileSidebar.changeTile(a)};
var pe=[],G=function(a,b,d,c,e){this.name=a;this.description=b;this.requiredTechs=d;this.researchCost=c;this.visible=void 0===e?!0:e};G.makeUnlockableTechnology=function(a,b,d,c){a=new G(a,b,d,c,!0);pe.push(a);return a};G.makeHiddenTechnology=function(a,b,d){d=void 0===d?!1:d;return new G(a,b,[],new p(k.EngineeringKnowledge,0),d)};G.prototype.equals=function(a){return this.name===a.name};G.schema=function(){var a=m.classOf({name:m.aString,description:m.aString,requiredTechs:Ic.arrayOf(function(){return a}),
researchCost:p.schema,visible:m.aBoolean},function(a){return new G(a.name,a.description,a.requiredTechs,a.researchCost,a.visible)});return a};var J=function(a,b,d){this.name=a;this.growthMultiplier=b;this.survivalCost=d};J.values=function(){return Fb.safeKeys(J).map(function(a){return J[a]}).filter(function(a){return a instanceof J})};J.entries=function(){var a={};Fb.safeEntries(J).filter(function(a){return a[1]instanceof J}).forEach(function(b){var d=$jscomp.makeIterator(b);b=d.next().value;d=d.next().value;
a[b]=d});return a};J.Human=new J("\ud83d\udc69\ud83c\udffb\u200d\ud83d\ude80 Human Colonists",.1,new p(k.Food,1));J.Robot=new J("\ud83e\uddbe Robots",0,new p(k.Energy,.5));J.schema=m.mapping(J.entries());var U=function(a){a=u.call(this,a)||this;a.texture=$d;return a};$jscomp.inherits(U,u);U.prototype.getTileName=function(){return U.tileName};U.prototype.getTileDescription=function(){return U.tileDescription};U.prototype.getTexture=function(a){var b=this.position.x,d=this.position.y,c=a.getTileAtCoordinates(new v(b,
d-1))instanceof U,e=a.getTileAtCoordinates(new v(b,d+1))instanceof U,f=a.getTileAtCoordinates(new v(b+1,d))instanceof U;return(a=a.getTileAtCoordinates(new v(b-1,d))instanceof U)&&f&&c&&e?$d:a&&f&&c?sf:a&&c&&e?uf:a&&f&&e?rf:f&&c&&e?tf:a&&f?ae:c&&e?be:a&&c?pf:f&&c?qf:a&&e?nf:f&&e?of:a||f?ae:be};U.tileName="Road";U.tileDescription="Allows transportation of workers and supplies";U.schema=m.classOf({position:v.schema},function(a){return new U(a.position)});D[U.name]=U;var Pf=Hc(U,1),Rc={hasTech:m.recordOf({queryType:m.literal("hasTech"),
technology:G.schema()}),speciesHasPopulation:m.recordOf({queryType:m.literal("speciesHasPopulation"),species:J.schema,minPopulation:m.aNumber}),hasTotalPopulation:m.recordOf({queryType:m.literal("hasTotalPopulation"),minPopulation:m.aNumber}),availableHousing:m.recordOf({queryType:m.literal("availableHousing"),species:J.schema,minAvailableCapacity:m.aNumber}),tileExists:m.recordOf({queryType:m.literal("tileExists"),tileType:Kc}),allTilesAreOfType:m.recordOf({queryType:m.literal("allTilesAreOfType"),
tileTypes:m.arrayOf(Kc)}),hasResource:m.recordOf({queryType:m.literal("hasResource"),resource:k.schema,minQuantity:m.aNumber})},Qf=m.schema({encode:function(a){return Rc[a.queryType].encode(a)},decode:function(a){return Rc[a.queryType].decode(a)},validate:function(a){if("object"!==typeof a||null===a)return!1;var b=Rc[a.queryType];return b?b.validate(a):!1}}),fd=Object.assign(Object.assign({},Rc),{tileWithinDistance:m.recordOf({queryType:m.literal("tileWithinDistance"),tileType:Kc,radius:m.aNumber}),
anyTileWithinDistance:m.recordOf({queryType:m.literal("anyTileWithinDistance"),tileTypes:m.arrayOf(Kc),radius:m.aNumber}),not:m.recordOf({queryType:m.literal("not"),query:Xb()}),or:m.recordOf({queryType:m.literal("or"),query1:Xb(),query2:Xb()}),and:m.recordOf({queryType:m.literal("and"),query1:Xb(),query2:Xb()})}),Q=function(a,b,d,c,e,f){this.title=a;this.projectDescription=b;this.action=d;this.costs=c;this.completionRequirements=e;this.visibilityRequirements=f};Q.prototype.canDo=function(a,b){return b.inventory.canAfford(this.costs)&&
this.isVisible(a,b)&&this.completionRequirements.every(function(d){return d.evaluate(b,a)})};Q.prototype.isVisible=function(a,b){return this.visibilityRequirements.every(function(d){return Kb(d)(b,a)})};Q.prototype.doAction=function(a,b){if(!this.canDo(a,b))throw"tried to do project "+this.title+" without meeting requirements";b.inventory.payCost(this.costs);this.action(a,b)};var Sc=function(a,b,d,c,e,f,g){var h=Q.call(this,a,b,function(a,b){b.world.placeTile(new d(a))},e,f,g)||this;h.title=a;h.projectDescription=
b;h.activeMonolithTile=d;h.circuitsTile=c;h.costs=e;h.completionRequirements=f;h.visibilityRequirements=g;return h};$jscomp.inherits(Sc,Q);Sc.prototype.doAction=function(a,b){if(!this.canDo(a,b))throw"tried to do project "+this.title+" without meeting requirements";b.inventory.payCost(this.costs);this.action(a,b);a=new xc(b,a,this.circuitsTile);B.show(a);a.expandCircuits(1)};var Ib=function(a,b){this.species=a;this.capacity=b};Ib.schema=m.classOf({species:J.schema,capacity:m.aNumber},function(a){return new Ib(a.species,
a.capacity)});var Sb=G.makeUnlockableTechnology("Industrial Engineering","Approaches for optimizing production processes",[],new p(k.EngineeringKnowledge,25)),Qa=G.makeUnlockableTechnology("Structural Engineering","Techniques for fabricating large structures on the planet's surface",[],new p(k.EngineeringKnowledge,10)),qe=G.makeUnlockableTechnology("Distributed Robotics","Autonomous robotic worker drones capable of performing the same jobs as human workers",[Sb],new p(k.EngineeringKnowledge,100)),
Rf=G.makeUnlockableTechnology("Swarm Robotics","Algorithms for efficiently managing large numbers of robotic workers",[qe],new p(k.EngineeringKnowledge,100)),Bd=G.makeUnlockableTechnology("Colonist Behavior Modeling","Simulations of human behavior in the isolated conditions of a deep space colony",[],new p(k.PsychKnowledge,30)),Sf=G.makeUnlockableTechnology("Habitation Pods","Compact and efficient residence units allow more humans to be packed into a small habitat",[Bd],new p(k.EngineeringKnowledge,
15)),re=G.makeUnlockableTechnology("Nuclear Engineering","Applying nuclear physics to technology and power generation",[Sb],new p(k.EngineeringKnowledge,70)),Cd=G.makeUnlockableTechnology("Planetary Surveying","Exploration of the planetary environment, including the structures believed to have been built by an alien civilization",[],new p(k.EngineeringKnowledge,50)),Tf=G.makeUnlockableTechnology("Game theory","Mathematical models of strategic interaction among rational decision-makers",[Bd],new p(k.PsychKnowledge,
30)),Dd=G.makeUnlockableTechnology("Cognitive Biases Research","Study of systematic patterns of deviation from rational thinking and decision-making",[Tf],new p(k.PsychKnowledge,50)),se=G.makeUnlockableTechnology("Human Rationality","Practices to improve humans' ability to form accurate beliefs and make effective decisions",[Dd],new p(k.PsychKnowledge,200)),Tb=G.makeHiddenTechnology("AI Safety Research","A proposal for researching techniques for aligning the goals of an artificial intelligence with the goals of its human creators",
!1),te=G.makeUnlockableTechnology("Control Problem","A description of the problem of creating a superintelligent agent that will behave in a way that benefits its creators",[Tb],new p(k.AlignmentKnowledge,20)),Uf=G.makeUnlockableTechnology("Motivation Selection","Techniques for specifying the goals and motives of an artificial intelligence",[te],new p(k.AlignmentKnowledge,50)),Vf=G.makeUnlockableTechnology("Coherent Extrapolated Volition",w($jscomp$templatelit$32),[Uf],new p(k.AlignmentKnowledge,
300)),Wf=G.makeUnlockableTechnology("Decision Theory","The study of the reasoning underlying an agent's choices",[te],new p(k.AlignmentKnowledge,40)),Xf=G.makeUnlockableTechnology("Acausal trade",w($jscomp$templatelit$33),[Wf],new p(k.AlignmentKnowledge,200)),Yf=G.makeUnlockableTechnology("Cooperative Reprogramming",w($jscomp$templatelit$34),[Xf,Vf],new p(k.AlignmentKnowledge,700)),yc=G.makeUnlockableTechnology("Xenoarchaeology",w($jscomp$templatelit$35),[Cd],new p(k.AlienKnowledge,75)),Zf=G.makeUnlockableTechnology("Sociology",
"The study of the development, structure, and functioning of societies",[Bd],new p(k.PsychKnowledge,50)),Ed=G.makeUnlockableTechnology("Alien History",w($jscomp$templatelit$36),[Zf,yc],new p(k.AlienKnowledge,200)),Tc=G.makeUnlockableTechnology("Xenomaterials","Techniques for processing and applying exotic resources found in the ruins of the alien civilization",[yc],new p(k.AlienKnowledge,200)),$f=G.makeUnlockableTechnology("Nanotechnology","Manipulation of matter on an atomic, molecular, and supramolecular scale",
[Tc],new p(k.EngineeringKnowledge,100)),ag=G.makeUnlockableTechnology("Zero Point Energy","Exploiting exotic, previously-unknown principles of physics to extract tremendous amounts of energy from the quantum vacuum",[Tc,re],new p(k.EngineeringKnowledge,250)),lb=G.makeHiddenTechnology("Monolith Surveying",w($jscomp$templatelit$37)),bg=G.makeUnlockableTechnology("Hypercomputing",w($jscomp$templatelit$38),[Tc],new p(k.EngineeringKnowledge,300)),ue=G.makeUnlockableTechnology("Neural Uploading",w($jscomp$templatelit$39),
[lb,bg],new p(k.AlienKnowledge,200)),ve=G.makeUnlockableTechnology("Singularity Engineering",w($jscomp$templatelit$40),[lb],new p(k.AlienKnowledge,500)),Da=function(a){a=u.call(this,a)||this;a.texture=Ve;return a};$jscomp.inherits(Da,u);Da.prototype.getTileName=function(){return Da.tileName};Da.prototype.getTileDescription=function(){return Da.tileDescription};Da.tileName="Seed Core";Da.tileDescription=w($jscomp$templatelit$41);Da.schema=m.classOf({position:v.schema},function(a){return new Da(a.position)});
D[Da.name]=Da;var La=function(a){a=u.call(this,a)||this;a.texture=Xe;return a};$jscomp.inherits(La,u);La.prototype.getTileName=function(){return La.tileName};La.prototype.getTileDescription=function(){return La.tileDescription};La.tileName="Hypercomputer Network";La.tileDescription="A self-replicating computing substrate that hosts a virtual reality for uploaded alien minds";La.schema=m.classOf({position:v.schema},function(a){return new La(a.position)});D[La.name]=La;var la=function(a){a=u.call(this,
a)||this;a.texture=Ff;return a};$jscomp.inherits(la,u);la.prototype.getTileName=function(){return la.tileName};la.prototype.getTileDescription=function(){return la.tileDescription};la.tileName="Neural Emulation Platform";la.tileDescription="A machine capable of interfacing with the alien monolith's hypercomputers and accessing the stored alien connectomes";la.schema=m.classOf({position:v.schema},function(a){return new la(a.position)});D[la.name]=la;var ra=function(a){a=u.call(this,a)||this;a.texture=
Ef;return a};$jscomp.inherits(ra,u);ra.prototype.getTileName=function(){return ra.tileName};ra.prototype.getTileDescription=function(){return ra.tileDescription};ra.tileName="Nanotech Foundry";ra.tileDescription="A nanotechnology manufacturing facility capable of completing the unfinished alien Monolith device";ra.schema=m.classOf({position:v.schema},function(a){return new ra(a.position)});D[ra.name]=ra;var Ma=function(a){a=u.call(this,a)||this;a.texture=Ye;return a};$jscomp.inherits(Ma,u);Ma.prototype.getTileName=
function(){return Ma.tileName};Ma.prototype.getTileDescription=function(){return Ma.tileDescription};Ma.tileName="Hypercomputer Network";Ma.tileDescription="A self-replicating computing substrate hosting a utopian virtual reality for uploaded human minds";Ma.schema=m.classOf({position:v.schema},function(a){return new Ma(a.position)});D[Ma.name]=Ma;var Ea=function(a){a=u.call(this,a)||this;a.texture=We;return a};$jscomp.inherits(Ea,u);Ea.prototype.getTileName=function(){return Ea.tileName};Ea.prototype.getTileDescription=
function(){return Ea.tileDescription};Ea.tileName="Seed Core";Ea.tileDescription=w($jscomp$templatelit$42);Ea.schema=m.classOf({position:v.schema},function(a){return new Ea(a.position)});D[Ea.name]=Ea;var va=function(a){a=u.call(this,a)||this;a.texture=Ue;a.possibleProjects=[new Sc("Activate Seed Core",w($jscomp$templatelit$43),Ea,Ma,[new p(k.Energy,1E5)],[tb(ra,3),tb(la,2),V(ve)],[])];return a};$jscomp.inherits(va,u);va.prototype.getTileName=function(){return va.tileName};va.prototype.getTileDescription=
function(){return va.tileDescription};va.tileName="Reprogrammed Monolith";va.tileDescription=w($jscomp$templatelit$44);va.schema=m.classOf({position:v.schema},function(a){return new va(a.position)});D[va.name]=va;var ma=function(a){a=u.call(this,a)||this;a.texture=Te;a.possibleProjects=[new Q("Upload human neural data",w($jscomp$templatelit$45),function(a,d){d.world.placeTile(new va(a))},[new p(k.Energy,1E3),new p(k.SmartMatter,500)],[tb(la,2),V(ue)],[O(Yf),O(lb)]),new Sc("Activate Seed Core",w($jscomp$templatelit$46),
Da,La,[new p(k.Energy,1E5)],[tb(ra,3),tb(la,2),V(ve)],[O(lb)])];return a};$jscomp.inherits(ma,u);ma.prototype.getTileName=function(){return ma.tileName};ma.prototype.getTileDescription=function(){return ma.tileDescription};ma.tileName="Monolith";ma.tileDescription="A towering alien structure";ma.schema=m.classOf({position:v.schema},function(a){return new ma(a.position)});D[ma.name]=ma;var wa=function(a,b){b=void 0===b?1:b;a=u.call(this,a)||this;a.texture=ce;a.resourceConversions=[x.newConversion([],
[new p(k.Cavorite,200),new p(k.Energy,25)],300),x.newConversion([],[new p(k.Orichalcum,200),new p(k.Energy,25)],300)];a.textureVariant=b;return a};$jscomp.inherits(wa,u);wa.prototype.getTileName=function(){return wa.tileName};wa.prototype.getTileDescription=function(){return wa.tileDescription};wa.prototype.getTexture=function(){switch(this.textureVariant){case 1:return ce;case 2:return Df}};wa.tileName="Alien Ruins Recycler Excavation";wa.tileDescription="A facility that harvests and recycles exotic materials from the alien structure.";
wa.schema=m.contra(m.recordOf({position:v.schema,resourceConversions:m.arrayOf(x.schema),textureVariant:m.union(m.literal(1),m.literal(2))}),function(a){return{position:a.position,resourceConversions:a.resourceConversions,textureVariant:a.textureVariant}},function(a){var b=a.resourceConversions;a=new wa(a.position,a.textureVariant);a.resourceConversions=b;return a});D[wa.name]=wa;var na=function(a){var b=u.call(this,a)||this;b.textureVariant=fa.bool()?1:2;b.texture=Zd;b.possibleProjects=[new Q("Excavate",
"Construct a facility to harvest exotic alien resources from the ruins",function(a,c){return c.world.placeTile(new wa(a,b.textureVariant))},[new p(k.BuildingMaterials,200),new p(k.Energy,100)],[ba,V(yc)],[O(Cd)])];return b};$jscomp.inherits(na,u);na.prototype.getTileName=function(){return na.tileName};na.prototype.getTileDescription=function(){return na.tileDescription};na.prototype.getTexture=function(){switch(this.textureVariant){case 1:return Zd;case 2:return Se}};na.tileName="Alien Ruins";na.tileDescription=
"Abandoned structure built by a long-dead alien civilization";na.schema=m.contra(m.recordOf({position:v.schema,textureVariant:m.union(m.literal(1),m.literal(2))}),function(a){return{position:a.position,textureVariant:a.textureVariant}},function(a){var b=a.textureVariant;a=new na(a.position);a.textureVariant=b;return a});D[na.name]=na;var fb=function(a,b){this.description=a;this.query=b};fb.prototype.evaluate=function(a,b){return Kb(this.query)(a,b)};fb.prototype.toString=function(){return this.description};
fb.schema=m.contra(m.recordOf({description:m.aString,query:Xb()}),function(a){return{description:a.description,query:a.query}},function(a){return new fb(a.description,a.query)});var ba=new fb("adjacent to a road",Pf),sa=function(a){a=u.call(this,a)||this;a.texture=cf;a.populationCapacity=new Ib(J.Human,200);a.possibleProjects=[new Q("AI Safety Research Proposal",w($jscomp$templatelit$47),function(a,d){return d.unlockTechnology(Tb)},[],[V(se)],[O(Dd),Jb(O(Tb)),ed(J.Human,500)])];return a};$jscomp.inherits(sa,
u);sa.prototype.getTileName=function(){return sa.tileName};sa.prototype.getTileDescription=function(){return sa.tileDescription};sa.tileName="Habitat Dome";sa.tileDescription="A pressurized structure that provides housing, services, and life support for humans";sa.schema=m.classOf({position:v.schema,populationCapacity:Ib.schema},function(a){var b=a.populationCapacity;a=new sa(a.position);a.populationCapacity=b;return a});D[sa.name]=sa;var Na=function(a){a=u.call(this,a)||this;a.texture=gf;a.resourceConversions=
[x.newConversion([new p(k.Energy,10)],[new p(k.Food,200)],30)];return a};$jscomp.inherits(Na,u);Na.prototype.getTileName=function(){return Na.tileName};Na.prototype.getTileDescription=function(){return Na.tileDescription};Na.tileName="Greenhouse";Na.tileDescription="Produces "+k.Food.name+" for "+J.Human.name;Na.schema=m.classOf({position:v.schema,resourceConversions:m.arrayOf(x.schema)},function(a){var b=a.resourceConversions;a=new Na(a.position);a.resourceConversions=b;return a});D[Na.name]=Na;
var Ra=function(a){a=u.call(this,a)||this;a.texture=vf;a.populationCapacity=new Ib(J.Human,2E3);a.possibleProjects=[new Q("AI Safety Research Proposal",w($jscomp$templatelit$48),function(a,d){return d.unlockTechnology(Tb)},[],[V(se)],[O(Dd),Jb(O(Tb)),ed(J.Human,500)])];return a};$jscomp.inherits(Ra,u);Ra.prototype.getTileName=function(){return Ra.tileName};Ra.prototype.getTileDescription=function(){return Ra.tileDescription};Ra.tileName="Arcology";Ra.tileDescription="A self-contained habitat for efficiently housing a large number of humans";
Ra.schema=m.classOf({position:v.schema,populationCapacity:Ib.schema},function(a){var b=a.populationCapacity;a=new Ra(a.position);a.populationCapacity=b;return a});D[Ra.name]=Ra;var Oa=function(a){a=u.call(this,a)||this;a.texture=hf;a.resourceConversions=[x.newConversion([new p(k.Energy,150)],[new p(k.Food,2E3)],50)];return a};$jscomp.inherits(Oa,u);Oa.prototype.getTileName=function(){return Oa.tileName};Oa.prototype.getTileDescription=function(){return Oa.tileDescription};Oa.tileName="Hydroponics Greenhouse";
Oa.tileDescription="Produces "+k.Food.name+" for "+J.Human.name+" more efficiently than a standard greenhouse";Oa.schema=m.classOf({position:v.schema,resourceConversions:m.arrayOf(x.schema)},function(a){var b=a.resourceConversions;a=new Oa(a.position);a.resourceConversions=b;return a});D[Oa.name]=Oa;var Sa=function(a){a=u.call(this,a)||this;a.texture=xf;a.populationCapacity=new Ib(J.Robot,5E3);a.possibleProjects=[new Q("Construct robot group","Create 100 robotic worker drones",function(a,d){d.inventory.addWorkers(J.Robot,
100);d.inventory.releaseWorkers(100)},[new p(k.Electronics,50),new p(k.Energy,100)],[Xd(J.Robot,100)],[]),new Q("Construct robot swarm","Create 1000 robotic worker drones",function(a,d){d.inventory.addWorkers(J.Robot,1E3);d.inventory.releaseWorkers(1E3)},[new p(k.Electronics,250),new p(k.Energy,1E3)],[Xd(J.Robot,1E3)],[O(Rf)])];return a};$jscomp.inherits(Sa,u);Sa.prototype.getTileName=function(){return Sa.tileName};Sa.prototype.getTileDescription=function(){return Sa.tileDescription};Sa.tileName=
"Drone Hive";Sa.tileDescription="A facility for manufacturing, storing, and maintaining mobile robotic worker drones";Sa.schema=m.classOf({position:v.schema,populationCapacity:Ib.schema},function(a){var b=a.populationCapacity;a=new Sa(a.position);a.populationCapacity=b;return a});D[Sa.name]=Sa;var Ta=function(a,b){var d=u.call(this,a)||this;d.wastelandVariant=b;d.texture=Ze;d.possibleProjects=[new Q("Break down construction site","Revert this location to wasteland",function(a,b){b.world.placeTile(new M(a,
d.wastelandVariant))},[],[],[]),ea(Sa,[new p(k.BuildingMaterials,250),new p(k.Electronics,500)],[V(Qa),V(qe),ba],[O(Sb)]),ea(sa,[new p(k.BuildingMaterials,200)],[V(Qa),ba],[]),ea(Ra,[new p(k.BuildingMaterials,500)],[V(Sf),ba],[O(Qa)]),ea(Na,[new p(k.BuildingMaterials,25)],[ba],[O(Qa)]),ea(Oa,[new p(k.BuildingMaterials,25),new p(k.Electronics,30)],[ba,V(Sb)],[O(Qa)])];return d};$jscomp.inherits(Ta,u);Ta.prototype.getTileName=function(){return Ta.tileName};Ta.prototype.getTileDescription=function(){return Ta.tileDescription};
Ta.tileName="Construction Site - Habitat";Ta.tileDescription="An area designated for construction of habitation and life support facilities";Ta.schema=m.contra(m.recordOf({position:v.schema,wastelandVariant:sc}),function(a){return{position:a.position,wastelandVariant:a.wastelandVariant}},function(a){return new Ta(a.position,a.wastelandVariant)});D[Ta.name]=Ta;var Fa=function(a){a=u.call(this,a)||this;a.texture=Af;a.resourceConversions=[x.newConversion([],[new p(k.EngineeringKnowledge,5)],30)];return a};
$jscomp.inherits(Fa,u);Fa.prototype.getTileName=function(){return Fa.tileName};Fa.prototype.getTileDescription=function(){return Fa.tileDescription};Fa.tileName="Engineering Lab";Fa.tileDescription="A workshop for developing new technology";Fa.schema=m.classOf({position:v.schema,resourceConversions:m.arrayOf(x.schema)},function(a){var b=a.resourceConversions;a=new Fa(a.position);a.resourceConversions=b;return a});D[Fa.name]=Fa;var Ua=function(a){a=u.call(this,a)||this;a.texture=Bf;a.resourceConversions=
[x.newConversion([],[new p(k.PsychKnowledge,10)],25)];return a};$jscomp.inherits(Ua,u);Ua.prototype.getTileName=function(){return Ua.tileName};Ua.prototype.getTileDescription=function(){return Ua.tileDescription};Ua.tileName="Psychology Lab";Ua.tileDescription="A laboratory for studying how humans behave in the isolated conditions of a remote colony";Ua.schema=m.classOf({position:v.schema,resourceConversions:m.arrayOf(x.schema)},function(a){var b=a.resourceConversions;a=new Ua(a.position);a.resourceConversions=
b;return a});D[Ua.name]=Ua;var Ga=function(a){a=u.call(this,a)||this;a.texture=Cf;a.resourceConversions=[x.newConversion([],[new p(k.AlienKnowledge,10)],50)];a.possibleProjects=[new Q("Survey Alien Monolith",w($jscomp$templatelit$49,lb.name),function(a,d){d.unlockTechnology(lb)},[new p(k.AlienKnowledge,50)],[tb(ma,5)],[O(Ed),Jb(O(lb))])];return a};$jscomp.inherits(Ga,u);Ga.prototype.getTileName=function(){return Ga.tileName};Ga.prototype.getTileDescription=function(){return Ga.tileDescription};Ga.tileName=
"Xenoarchaeology Lab";Ga.tileDescription="A laboratory for studying artifacts and technology left by the now-dead alien civilization";Ga.schema=m.classOf({position:v.schema,resourceConversions:m.arrayOf(x.schema)},function(a){var b=a.resourceConversions;a=new Ga(a.position);a.resourceConversions=b;return a});D[Ga.name]=Ga;var Va=function(a){a=u.call(this,a)||this;a.texture=zf;a.resourceConversions=[x.newConversion([],[new p(k.AlignmentKnowledge,10)],100)];return a};$jscomp.inherits(Va,u);Va.prototype.getTileName=
function(){return Va.tileName};Va.prototype.getTileDescription=function(){return Va.tileDescription};Va.tileName="AI Alignment Lab";Va.tileDescription=w($jscomp$templatelit$50);Va.schema=m.classOf({position:v.schema,resourceConversions:m.arrayOf(x.schema)},function(a){var b=a.resourceConversions;a=new Va(a.position);a.resourceConversions=b;return a});D[Va.name]=Va;var Wa=function(a,b){var d=u.call(this,a)||this;d.wastelandVariant=b;d.texture=$e;d.possibleProjects=[new Q("Break down construction site",
"Revert this location to wasteland",function(a,b){b.world.placeTile(new M(a,d.wastelandVariant))},[],[],[]),ea(Fa,[new p(k.BuildingMaterials,20),new p(k.Electronics,20)],[ba],[]),ea(Ua,[new p(k.BuildingMaterials,30)],[ba],[]),ea(Ga,[new p(k.BuildingMaterials,40)],[new fb("within 3 units of "+na.tileName+" or "+ma.tileName,Ie([na,wa,ma,va],3)),ba,V(Cd)],[]),ea(Va,[new p(k.BuildingMaterials,20),new p(k.Electronics,40)],[Je(J.Human,200),ba],[O(Tb)])];return d};$jscomp.inherits(Wa,u);Wa.prototype.getTileName=
function(){return Wa.tileName};Wa.prototype.getTileDescription=function(){return Wa.tileDescription};Wa.tileName="Construction Site - Laboratories";Wa.tileDescription="An area designated for construction of research laboratories";Wa.schema=m.contra(m.recordOf({position:v.schema,wastelandVariant:sc}),function(a){return{position:a.position,wastelandVariant:a.wastelandVariant}},function(a){return new Wa(a.position,a.wastelandVariant)});D[Wa.name]=Wa;var xa=function(a){a=u.call(this,a)||this;a.texture=
ef;a.resourceConversions=[x.newConversion([new p(k.Metal,50)],[new p(k.BuildingMaterials,50)],25),x.newConversion([new p(k.Metal,50)],[new p(k.Electronics,50)],25)];return a};$jscomp.inherits(xa,u);xa.prototype.getTileName=function(){return xa.tileName};xa.prototype.getTileDescription=function(){return xa.tileDescription};xa.tileName="Ore Processing Center";xa.tileDescription="A facility used to process ore into useful materials";xa.schema=m.classOf({position:v.schema,resourceConversions:m.arrayOf(x.schema)},
function(a){var b=a.resourceConversions;a=new xa(a.position);a.resourceConversions=b;return a});D[xa.name]=xa;var ya=function(a){a=u.call(this,a)||this;a.texture=df;a.resourceConversions=[x.newConversion([],[new p(k.Energy,100)])];return a};$jscomp.inherits(ya,u);ya.prototype.getTileName=function(){return ya.tileName};ya.prototype.getTileDescription=function(){return ya.tileDescription};ya.tileName="Photovoltaic Array";ya.tileDescription="Converts light from this planet's sun into electrical energy";
ya.schema=m.classOf({position:v.schema,resourceConversions:m.arrayOf(x.schema)},function(a){var b=a.resourceConversions;a=new ya(a.position);a.resourceConversions=b;return a});D[ya.name]=ya;var Xa=function(a){a=u.call(this,a)||this;a.texture=wf;a.resourceConversions=[x.newConversion([],[new p(k.Energy,1E3)],15)];return a};$jscomp.inherits(Xa,u);Xa.prototype.getTileName=function(){return Xa.tileName};Xa.prototype.getTileDescription=function(){return Xa.tileDescription};Xa.tileName="Nuclear Power Plant";
Xa.tileDescription="A high-efficiency fission power plant";Xa.schema=m.classOf({position:v.schema,resourceConversions:m.arrayOf(x.schema)},function(a){var b=a.resourceConversions;a=new Xa(a.position);a.resourceConversions=b;return a});D[Xa.name]=Xa;var Ya=function(a){a=u.call(this,a)||this;a.texture=lf;a.resourceConversions=[x.newConversion([new p(k.Metal,1E3)],[new p(k.BuildingMaterials,1E3)],250)];return a};$jscomp.inherits(Ya,u);Ya.prototype.getTileName=function(){return Ya.tileName};Ya.prototype.getTileDescription=
function(){return Ya.tileDescription};Ya.tileName="Construction Materials Factory";Ya.tileDescription="A facility for producing "+k.BuildingMaterials.name;Ya.schema=m.classOf({position:v.schema,resourceConversions:m.arrayOf(x.schema)},function(a){var b=a.resourceConversions;a=new Ya(a.position);a.resourceConversions=b;return a});D[Ya.name]=Ya;var Za=function(a){a=u.call(this,a)||this;a.texture=kf;a.resourceConversions=[x.newConversion([new p(k.Metal,500)],[new p(k.Electronics,500)],100)];return a};
$jscomp.inherits(Za,u);Za.prototype.getTileName=function(){return Za.tileName};Za.prototype.getTileDescription=function(){return Za.tileDescription};Za.tileName="Electronics Factory";Za.tileDescription="A facility for producing "+k.Electronics.name;Za.schema=m.classOf({position:v.schema,resourceConversions:m.arrayOf(x.schema)},function(a){var b=a.resourceConversions;a=new Za(a.position);a.resourceConversions=b;return a});D[Za.name]=Za;var $a=function(a){a=u.call(this,a)||this;a.texture=mf;a.resourceConversions=
[x.newConversion([new p(k.Cavorite,500),new p(k.Energy,200)],[new p(k.Superconductor,500)],100),x.newConversion([new p(k.Orichalcum,500),new p(k.Energy,200)],[new p(k.SmartMatter,500)],100)];return a};$jscomp.inherits($a,u);$a.prototype.getTileName=function(){return $a.tileName};$a.prototype.getTileDescription=function(){return $a.tileDescription};$a.tileName="Xeno-Materials Factory";$a.tileDescription="A facility for processing alien resources";$a.schema=m.classOf({position:v.schema,resourceConversions:m.arrayOf(x.schema)},
function(a){var b=a.resourceConversions;a=new $a(a.position);a.resourceConversions=b;return a});D[$a.name]=$a;var ab=function(a){a=u.call(this,a)||this;a.texture=yf;a.resourceConversions=[x.newConversion([],[new p(k.Energy,1E4)],40)];return a};$jscomp.inherits(ab,u);ab.prototype.getTileName=function(){return ab.tileName};ab.prototype.getTileDescription=function(){return ab.tileDescription};ab.tileName="Zero Point Energy Plant";ab.tileDescription="A power plant that exploits exotic physics and alien science to produce vast amounts of "+
k.Energy.name+".";ab.schema=m.classOf({position:v.schema,resourceConversions:m.arrayOf(x.schema)},function(a){var b=a.resourceConversions;a=new ab(a.position);a.resourceConversions=b;return a});D[ab.name]=ab;var bb=function(a,b){var d=u.call(this,a)||this;d.wastelandVariant=b;d.texture=af;d.possibleProjects=[new Q("Break down construction site","Revert this location to wasteland",function(a,b){b.world.placeTile(new M(a,d.wastelandVariant))},[],[],[]),ea(ya,[new p(k.Electronics,200)],[],[]),ea(xa,
[new p(k.Energy,100),new p(k.BuildingMaterials,100)],[ba,V(Sb)],[O(Qa)]),ea(Ya,[new p(k.BuildingMaterials,350)],[ba,V(Sb)],[O(Qa)]),ea(Za,[new p(k.BuildingMaterials,300),new p(k.Electronics,150)],[ba,V(Sb)],[O(Qa)]),ea($a,[new p(k.BuildingMaterials,200),new p(k.Electronics,200),new p(k.Energy,1E3)],[ba,V(Tc)],[O(yc)]),ea(Xa,[new p(k.BuildingMaterials,150),new p(k.Electronics,300)],[V(re),ba],[O(Qa)]),ea(ab,[new p(k.BuildingMaterials,200),new p(k.Electronics,100),new p(k.Superconductor,1E3)],[V(ag)],
[O(yc)])];return d};$jscomp.inherits(bb,u);bb.prototype.getTileName=function(){return bb.tileName};bb.prototype.getTileDescription=function(){return bb.tileDescription};bb.tileName="Construction Site - Industry";bb.tileDescription="An area designated for construction of industrial facilities and infrastructure";bb.schema=m.contra(m.recordOf({position:v.schema,wastelandVariant:sc}),function(a){return{position:a.position,wastelandVariant:a.wastelandVariant}},function(a){return new bb(a.position,a.wastelandVariant)});
D[bb.name]=bb;var cb=function(a,b){var d=u.call(this,a)||this;d.wastelandVariant=b;d.texture=bf;d.possibleProjects=[new Q("Break down construction site","Revert this location to wasteland",function(a,b){b.world.placeTile(new M(a,d.wastelandVariant))},[],[],[]),ea(ra,[new p(k.SmartMatter,1E3),new p(k.BuildingMaterials,500),new p(k.Electronics,200)],[ba,new fb("within 3 units of a Monolith",Vd(Hc(ma,3),Hc(va,3))),V($f)],[O(lb),Jb(Bb(ra))]),ea(la,[new p(k.BuildingMaterials,300),new p(k.Electronics,1E3),
new p(k.Superconductor,1E3),new p(k.SmartMatter,500)],[ba,tb(ma,2),V(ue)],[O(lb),Jb(Bb(la))])];return d};$jscomp.inherits(cb,u);cb.prototype.getTileName=function(){return cb.tileName};cb.prototype.getTileDescription=function(){return cb.tileDescription};cb.tileName="Construction Site - Hyperengineering";cb.tileDescription="An area designated for construction of advanced technologies necessary for completing the mission";cb.schema=m.contra(m.recordOf({position:v.schema,wastelandVariant:sc}),function(a){return{position:a.position,
wastelandVariant:a.wastelandVariant}},function(a){return new cb(a.position,a.wastelandVariant)});D[cb.name]=cb;var M=function(a,b){var d=u.call(this,a)||this;d.texture=Yd;d.possibleProjects=[new Q("Create habitat construction site","Designate this location for construction of habitation and life support facilities",function(a,b){b.world.placeTile(new Ta(a,d.textureVariant))},[],[],[]),new Q("Create industry construction site","Designate this location for construction of industrial facilities and infrastructure",
function(a,b){b.world.placeTile(new bb(a,d.textureVariant))},[],[],[]),new Q("Create laboratory construction site","Designate this location for construction of research laboratories",function(a,b){b.world.placeTile(new Wa(a,d.textureVariant))},[],[],[]),new Q("Create xenoengineering construction site","Designate this location for construction of advanced technologies",function(a,b){b.world.placeTile(new cb(a,d.textureVariant))},[],[],[O(lb),Vd(Jb(Bb(la)),Jb(Bb(ra)))]),new Q("Construct Road","Construct roads to extend the reach of the colony's logistics",
function(a,b){b.world.placeTile(new U(a))},[new p(k.BuildingMaterials,10)],[ba],[])];d.textureVariant=b?b:fa.fromWeightedArray([[1/8,1],[1/8,2],[1/8,3],[1/8,4],[.5,5]]);return d};$jscomp.inherits(M,u);M.prototype.getTileName=function(){return M.tileName};M.prototype.getTileDescription=function(){return M.tileDescription};M.prototype.getTexture=function(){switch(this.textureVariant){case 1:return Ne;case 2:return Oe;case 3:return Pe;case 4:return Qe;case 5:return Yd}};M.tileName="Wasteland";M.tileDescription=
"Nothing of note here";M.schema=m.contra(m.recordOf({position:v.schema,textureVariant:sc}),function(a){return{position:a.position,textureVariant:a.textureVariant}},function(a){return new M(a.position,a.textureVariant)});D[M.name]=M;var db=function(a){a=u.call(this,a)||this;a.texture=jf;a.resourceConversions=[x.newConversion([new p(k.Energy,75)],[new p(k.Metal,50)],100)];return a};$jscomp.inherits(db,u);db.prototype.getTileName=function(){return db.tileName};db.prototype.getTileDescription=function(){return db.tileDescription};
db.tileName="Mineshaft";db.tileDescription="A mineshaft built into a mountain to allow long-term ore extraction";db.schema=m.classOf({position:v.schema,resourceConversions:m.arrayOf(x.schema)},function(a){var b=a.resourceConversions;a=new db(a.position);a.resourceConversions=b;return a});D[db.name]=db;var za=function(a){a=u.call(this,a)||this;a.texture=Re;a.possibleProjects=[new Q("Construct Mineshaft","Create a mineshaft to allow long-term ore extraction",function(a,d){d.world.placeTile(new db(a))},
[new p(k.Energy,500),new p(k.BuildingMaterials,250)],[V(Qa),ba,tb(xa,5)],[]),new Q("Strip Mining","Destroy the mountain to produce "+k.Metal.name,function(a,d){d.inventory.addResource(k.Metal,500);d.world.placeTile(new M(a,5))},[new p(k.Energy,25)],[tb(xa,5)],[])];return a};$jscomp.inherits(za,u);za.prototype.getTileName=function(){return za.tileName};za.prototype.getTileDescription=function(){return za.tileDescription};za.tileName="Mountain";za.tileDescription="A large geological formation containing useful mineral resources";
za.schema=m.classOf({position:v.schema},function(a){return new za(a.position)});D[za.name]=za;var Aa=function(a){a=u.call(this,a)||this;a.texture=ff;a.possibleProjects=[new Q("Unpack Lander","Unload colonists and deploy prefabricated colonial buildings",function(a,d){var b=d.world;b.placeTile(new sa(new v(a.x+1,a.y)));b.placeTile(new ya(new v(a.x+1,a.y-1)));b.placeTile(new Na(new v(a.x-1,a.y)));b.placeTile(new xa(new v(a.x-1,a.y-1)));b.placeTile(new U(new v(a.x,a.y-1)));b.placeTile(new U(a));b.placeTile(new U(new v(a.x,
a.y+1)));d.inventory.addResource(k.Food,1E3);d.inventory.addWorkers(J.Human,100);d.inventory.releaseWorkers()},[],[],[])];return a};$jscomp.inherits(Aa,u);Aa.prototype.getTileName=function(){return Aa.tileName};Aa.prototype.getTileDescription=function(){return Aa.tileDescription};Aa.tileName="Landing Pod";Aa.tileDescription=w($jscomp$templatelit$51);Aa.schema=m.classOf({position:v.schema},function(a){return new Aa(a.position)});D[Aa.name]=Aa;var Ub;(function(a){a.nonrandomTiles=function(){return[new M(new v(0,
0)),new M(new v(1,0)),new M(new v(2,0)),new za(new v(0,1)),new za(new v(1,1)),new za(new v(2,1)),new M(new v(0,2)),new M(new v(1,2)),new M(new v(2,2)),new M(new v(0,3)),new Aa(new v(1,3)),new M(new v(2,3)),new M(new v(0,4)),new M(new v(1,4)),new M(new v(2,4)),new ma(new v(13,15))]};a.width=20;a.height=20;a.mountainRange=[20,25];a.ruinRange=[5,7]})(Ub||(Ub={}));var eb=function(a,b,d){this.width=a;this.height=b;this.grid=d;this.viewPosition=new v(0,0)};eb.generateWorld=function(){for(var a=Ub.width,
b=Ub.height,d=Array(b),c=0;c<b;c++){d[c]=Array(a);for(var e=0;e<a;e++)d[c][e]=new M(new v(e,c))}a=new eb(a,b,d);b=fa.intBetween.apply(fa,$jscomp.arrayFromIterable(Ub.mountainRange));for(d=0;d<b;d++)c=a.getTiles().filter(function(a){return a instanceof M}),hb.isNonEmpty(c)&&(c=fa.fromArray(c).position,a.placeTile(new za(c)));b=fa.intBetween.apply(fa,$jscomp.arrayFromIterable(Ub.ruinRange));for(d=0;d<b;d++)c=a.getTiles().filter(function(a){return a instanceof M}),hb.isNonEmpty(c)&&(c=fa.fromArray(c).position,
a.placeTile(new na(c)));b=$jscomp.makeIterator(Ub.nonrandomTiles());for(d=b.next();!d.done;d=b.next())a.placeTile(d.value);return a};eb.prototype.placeTile=function(a){this.grid[a.position.y][a.position.x]=a};eb.prototype.getTiles=function(){return hb.flatten(this.grid)};eb.prototype.getTilesInRectangle=function(a,b,c,e){0>b&&(b=0);0>a&&(a=0);var d=[];b=this.grid.slice(b,b+e);b=$jscomp.makeIterator(b);for(e=b.next();!e.done;e=b.next()){e=e.value.slice(a,a+c);e=$jscomp.makeIterator(e);for(var f=e.next();!f.done;f=
e.next())d.push(f.value)}return d};eb.prototype.getTileAtCoordinates=function(a){if(!(0>a.x||a.x>=this.width||0>a.y||a.y>=this.height))return this.grid[a.y][a.x]};eb.prototype.getTilesInCircle=function(a,b){return this.getTiles().filter(function(c){return a.distanceFrom(c.position)<=b})};eb.prototype.getPopulationCapacity=function(a){for(var b=0,c=$jscomp.makeIterator(this.getTiles()),e=c.next();!e.done;e=c.next())e=e.value,e.populationCapacity&&e.populationCapacity.species===a&&(b+=e.populationCapacity.capacity);
return b};eb.schema=m.classOf({width:m.aNumber,height:m.aNumber,grid:m.arrayOf(m.arrayOf(Jf))},function(a){return new eb(a.width,a.height,a.grid)});var Ha=function(){this.map=new Map};Ha.prototype.add=function(a,b){this.set(a,this.get(a)+b)};Ha.prototype.remove=function(a,b){this.add(a,-1*b)};Ha.prototype.get=function(a){return this.map.get(a)||0};Ha.prototype.set=function(a,b){if(0>b)throw"tried to set quantity to negative value";0===b?this.map.delete(a):this.map.set(a,b)};Ha.prototype.getSum=function(){return Array.from(this.map.values()).reduce(function(a,
b){return a+b},0)};Ha.prototype.positiveQuantityKeys=function(){return Array.from(this.map.keys())};Ha.prototype.clone=function(){for(var a=new Ha,b=$jscomp.makeIterator(this.positiveQuantityKeys()),c=b.next();!c.done;c=b.next())c=c.value,a.add(c,this.get(c));return a};Ha.schema=function(a){return m.contra(m.recordOf({map:m.map(a,m.aNumber)}),function(a){return{map:a.map}},function(a){var b=new Ha;b.map=a.map;return b})};var P=function(a){this.world=a;this.resourceQuantities=new Ha;this.populationQuantities=
new Ha;this.availableWorkers=0};P.prototype.addResource=function(a,b){this.resourceQuantities.add(a,b)};P.prototype.removeResource=function(a,b){this.resourceQuantities.remove(a,b)};P.prototype.getResourceQuantity=function(a){return this.resourceQuantities.get(a)||0};P.prototype.addWorkers=function(a,b){this.populationQuantities.add(a,b);this.populationQuantities.set(a,z(0,this.populationQuantities.get(a),this.world.getPopulationCapacity(a)))};P.prototype.releaseWorkers=function(a){a=void 0===a?Number.POSITIVE_INFINITY:
a;this.availableWorkers=Math.min(this.availableWorkers+a,this.populationQuantities.getSum())};P.prototype.occupyWorkers=function(a){if(this.availableWorkers<a)throw"insufficient workers";if(0>a)throw"tried to occupy a negative number of workers";this.availableWorkers-=a};P.prototype.getSpeciesList=function(){return this.populationQuantities.positiveQuantityKeys()};P.prototype.getPopulation=function(a){return this.populationQuantities.get(a)};P.prototype.getRequiredWorkerConsumption=function(a){var b=
a.survivalCost.quantity*this.populationQuantities.get(a);return new p(a.survivalCost.resource,b)};P.prototype.getProvidedWorkerConsumption=function(a){var b=this.getRequiredWorkerConsumption(a).quantity,c=this.getResourceQuantity(a.survivalCost.resource);return new p(a.survivalCost.resource,Math.min(b,c))};P.prototype.doPopulationGrowth=function(){for(var a=$jscomp.makeIterator(this.getSpeciesList()),b=a.next();!b.done;b=a.next()){b=b.value;var c=this.getProvidedWorkerConsumption(b);this.payCost([c]);
this.populationQuantities.set(b,Math.floor(c.quantity/b.survivalCost.quantity));c=Math.floor(b.growthMultiplier*this.populationQuantities.get(b));this.addWorkers(b,c)}};P.prototype.applyPopulationCaps=function(){for(var a=$jscomp.makeIterator(this.getSpeciesList()),b=a.next();!b.done;b=a.next())b=b.value,this.populationQuantities.set(b,z(0,this.populationQuantities.get(b),this.world.getPopulationCapacity(b)));this.availableWorkers=z(0,this.availableWorkers,this.getTotalPopulation())};P.prototype.getTotalPopulation=
function(){return this.populationQuantities.getSum()};P.prototype.getAvailableWorkers=function(){return this.availableWorkers};P.prototype.canAfford=function(a){var b=this,c=new Map;a=$jscomp.makeIterator(a);for(var e=a.next();!e.done;e=a.next())e=e.value,c.set(e.resource,e.quantity+(c.get(e.resource)||0));return Array.from(c.keys()).every(function(a){var d=c.get(a);a=b.getResourceQuantity(a);return d<=a})};P.prototype.hasEnoughWorkers=function(a){return this.availableWorkers>=a};P.prototype.payCost=
function(a){if(this.canAfford(a)){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,this.removeResource(b.resource,b.quantity)}else throw"Cannot afford to pay cost";};P.prototype.getResourceList=function(){var a=this;return k.values().filter(function(b){return 0!==a.resourceQuantities.get(b)})};P.prototype.getInventoryStrings=function(){var a=this;return this.getResourceList().map(function(b){return b.name+": "+a.getResourceQuantity(b)})};P.prototype.getPopulationStrings=function(){var a=
this;return this.populationQuantities.positiveQuantityKeys().map(function(b){return a.populationQuantities.get(b)+" "+b.name})};P.prototype.applyConversions=function(a){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,this.canAfford(b.inputs)&&this.hasEnoughWorkers(b.requiredWorkers)&&b.enabled){this.payCost(b.inputs);this.occupyWorkers(b.requiredWorkers);b=$jscomp.makeIterator(b.outputs);for(var c=b.next();!c.done;c=b.next())c=c.value,this.addResource(c.resource,c.quantity)}};
P.prototype.clone=function(){var a=new P(this.world);a.resourceQuantities=this.resourceQuantities.clone();a.populationQuantities=this.populationQuantities.clone();a.availableWorkers=this.availableWorkers;return a};P.schema=m.injecting(m.recordOf({resourceQuantities:Ha.schema(k.schema),populationQuantities:Ha.schema(J.schema),availableWorkers:m.aNumber}),function(a){return{resourceQuantities:a.resourceQuantities,populationQuantities:a.populationQuantities,availableWorkers:a.availableWorkers}},function(a){return function(b){var c=
b.resourceQuantities,e=b.populationQuantities;b=b.availableWorkers;var f=new P(a);f.resourceQuantities=c;f.populationQuantities=e;f.availableWorkers=b;return f}});var wb=function(a,b){this.title=a;this.description=b};wb.prototype.equals=function(a){return a.description===this.description&&a.title===this.title};wb.schema=m.classOf({title:m.aString,description:m.aString},function(a){return new wb(a.title,a.description)});var Ba=function(a,b){this.requirement=a;this.next=b};Ba.schema=function(){return m.classOf({requirement:Qf,
next:m.unionOf(function(a){return a instanceof oa},function(a){return a instanceof wb},m.lazy(function(){return oa.schema()}),wb.schema)},function(a){return new Ba(a.requirement,a.next)})};var oa=function(a,b,c){this.description=a;this.paths=b;this.hint=c};oa.prototype.nextState=function(a){for(var b=$jscomp.makeIterator(this.paths),c=b.next();!c.done;c=b.next())if(c=c.value,Wd(c.requirement)(a))return c.next;return this};oa.schema=function(){return m.contra(m.recordOf({description:m.aString,paths:Ic.arrayOf(function(){return Ba.schema()}),
hint:m.optional(m.aString)}),function(a){return{description:a.description,paths:a.paths,hint:a.hint}},function(a){return new oa(a.description,a.paths,a.hint)})};var Fd=new wb("Final Mission Report",w($jscomp$templatelit$52)),Gd=new wb("A Transmission to Earth",w($jscomp$templatelit$53)),cg=new oa("Unlock the secrets of the monolith",[new Ba(Td([Da,La]),Fd),new Ba(Td([Ea,Ma]),Gd)]),dg=new oa("Study the Monolith",[new Ba(O(lb),cg)]),eg=new oa("Research "+Ed.name,[new Ba(O(Ed),dg)]),fg=new oa("Excavate the "+
na.tileName+" to extract resources",[new Ba(Bb(wa),eg)]),gg=new oa("Construct "+Ga.tileName+" to study the "+na.tileName,[new Ba(Bb(Ga),fg)],'Use the "WASD" or arrow keys to move around the map'),hg=new oa("Grow total worker population to 250",[new Ba({queryType:"hasTotalPopulation",minPopulation:250},gg)],"A "+sa.tileName+" has capacity for "+(new sa(new v(0,0))).populationCapacity.capacity+" colonists"),ig=new oa("Develop the "+Qa.name+" technology",[new Ba(O(Qa),hg)],"Access available technologies through the research screen"),
jg=new oa("Construct "+Fa.tileName,[new Ba(Bb(Fa),ig)],"Designate an empty "+M.tileName+" tile as a laboratory construction site"),kg=new oa("Acquire "+k.Metal.name,[new Ba(Ud(k.Metal,1),jg)]),lg=new oa("Build up at least 100 units of "+k.Energy.name,[new Ba(Ud(k.Energy,100),kg)],"The "+ya.tileName+" produces "+k.Energy.name+" each turn"),mg=new oa("Deploy shelter for the colonists",[new Ba(Bb(sa),lg)],"Select the "+Aa.tileName),K=function(a,b,c,e){this.emoji=a;this.title=b;this.description=c;this.requirement=
e};K.values=function(){return Fb.safeKeys(K).map(function(a){return K[a]}).filter(function(a){return a instanceof K})};K.entries=function(){var a={};Fb.safeEntries(K).filter(function(a){return a[1]instanceof K}).forEach(function(b){var c=$jscomp.makeIterator(b);b=c.next().value;c=c.next().value;a[b]=c});return a};K.StartAchievement=new K("\ud83d\ude80","One Small Step","You deployed a colony on the surface of Aurora",function(a){return!a.world.getTiles().some(function(a){return a instanceof Aa})});
K.ExcavationPointAchievement=new K("\ud83d\udc8e","Grave Robber","You harvested resources from the ruins of a long-dead civilization",function(a){return 0<a.inventory.getResourceQuantity(k.Cavorite)||0<a.inventory.getResourceQuantity(k.Orichalcum)});K.FoodAchievement=new K("\ud83c\udf2f","Neato Burrito","You built a hydroponics greenhouse",function(a){return a.world.getTiles().some(function(a){return a instanceof Oa})});K.SolarAchievement=new K("\u2600\ufe0f","Praise The Sun","You built 10 photovoltaic arrays",
function(a){return 10<=a.world.getTiles().filter(function(a){return a instanceof ya}).length});K.ConstructionAchievement=new K("\ud83c\udfd7\ufe0f","Constructive Feedback","You built up an inventory of 1000 Construction Parts",function(a){return 1E3<=a.inventory.getResourceQuantity(k.BuildingMaterials)});K.RoadAchievement=new K("\ud83d\udea7","Paving The Way","You built an extensive network of roads",function(a){return 50<=a.world.getTiles().filter(function(a){return a instanceof U}).length});K.HumanPopulationAchievement=
new K("\ud83d\udcc8","Baby Boom","You grew a population of 10,000 human colonists",function(a){return 1E4<a.inventory.getPopulation(J.Human)});K.RobotSwarmAchievement=new K("\ud83e\udd16","The Next Generation","You built swarms of robotic workers",function(a){return 2E3<a.inventory.getPopulation(J.Robot)});K.KillHumansAchievement=new K("\ud83d\udc80","Planned Obsolescence","You allowed all of the human colonists to die",function(a){return 0===a.inventory.getPopulation(J.Human)&&0<a.inventory.getPopulation(J.Robot)&&
!a.world.getTiles().some(function(a){return a instanceof Aa||a instanceof Da||a instanceof Ea||a instanceof va})});K.SafetyProjectAchievement=new K("\ud83e\udd89","Fable of the Sparrows","You approved the AI Safety Research Project",function(a){return a.hasUnlockedTechnology(Tb)});K.AlienEndingAchievement=new K("\ud83d\udc7e","Mission Accomplished","You discovered as much as possible about the aliens by freeing them to conquer the universe",function(a){var b;return!(null===(b=a.getQuestEndState())||
void 0===b||!b.equals(Fd))});K.TrueEndingAchievement=new K("\ud83c\udf0c","We'll make Heaven a place on Earth","You uplifted humanity into a virtual utopia",function(a){var b;return!(null===(b=a.getQuestEndState())||void 0===b||!b.equals(Gd))});K.schema=m.mapping(K.entries());var we=function(a){this.html=l.makeDivContaining([l.makeHeader(a.emoji+" Achievement Unlocked!"),l.makePara(a.title)],["achievement-popup"])};we.prototype.refresh=function(){};var Lb;(function(a){function b(){var a=gb.loadItem("unlockedAchievements",
f);if("success"===(null===a||void 0===a?void 0:a.resultType)){a=$jscomp.makeIterator(a.result);for(var b=a.next();!b.done;b=a.next())b=b.value,e.includes(b)||e.push(b)}}function c(a){b();e.includes(a)||(e.push(a),b(),gb.saveItem("unlockedAchievements",e,f),B.addPopup(new we(a),3E3))}var e=[],f=m.arrayOf(K.schema);a.getUnlockedAchievements=function(){b();return[].concat($jscomp.arrayFromIterable(e))};a.updateAchievements=function(a){for(var b=$jscomp.makeIterator(K.values()),d=b.next();!d.done;d=b.next())d=
d.value,d.requirement(a)&&c(d)};a.unlockAll=function(){for(var a=$jscomp.makeIterator(K.values()),b=a.next();!b.done;b=a.next())c(b.value)};a.resetAchievements=function(){e=[];gb.removeItem("unlockedAchievements")}})(Lb||(Lb={}));var ca=function(a,b,c){this.world=a;this.inventory=b;this.questStage=c;this.endState=void 0;this.prevQuestDescription="";this.questCompletionShown=!0;this.completedTechs=[]};ca.newGame=function(){var a=eb.generateWorld(),b=new P(a);return new ca(a,b,mg)};ca.prototype.getCurrentQuestDescription=
function(){return this.questStage.description};ca.prototype.getCurrentQuestHint=function(){return this.questStage.hint};ca.prototype.getQuestEndState=function(){return this.endState};ca.prototype.updateQuestState=function(){var a=this.questStage.nextState(this);if(a instanceof wb)this.endState=a,this.questCompletionShown=!1;else if(a!==this.questStage){var b=this.questStage.description;this.questStage=a;this.updateQuestState();this.questCompletionShown=!1;this.prevQuestDescription=b}Lb.updateAchievements(this)};
ca.prototype.getPreviousQuestDescription=function(){return this.prevQuestDescription};ca.prototype.getResourceConversions=function(){var a=hb.flatten(this.world.getTiles().map(function(a){return a.resourceConversions}));a.sort(function(a,c){return a.priority-c.priority});return a};ca.prototype.hasUnlockedTechnology=function(a){return this.completedTechs.some(function(b){return b.equals(a)})};ca.prototype.unlockTechnology=function(a){this.hasUnlockedTechnology(a)||this.completedTechs.push(a)};ca.prototype.getUnlockedTechnologies=
function(){return this.completedTechs};ca.prototype.getResearchOptions=function(){var a=this;return pe.filter(function(a){return a.visible}).filter(function(b){return b.requiredTechs.every(function(b){return a.completedTechs.some(function(a){return a.equals(b)})})}).filter(function(b){return!a.hasUnlockedTechnology(b)})};ca.prototype.completeTurn=function(){this.inventory.applyConversions(this.getResourceConversions());this.inventory.releaseWorkers();this.inventory.doPopulationGrowth();this.updateQuestState()};
ca.prototype.shiftConversionPriority=function(a,b){if(!(a===b||0>a)){var c=this.getResourceConversions();if(!(b>=c.length)){var e=c[b].priority;if(a<b)for(;b>a;b--)c[b].priority=c[b-1].priority;else for(;b<a;b++)c[b].priority=c[b+1].priority;c[a].priority=e}}};ca.schema=m.contra(m.recordOf({world:eb.schema,inventory:P.schema,questStage:oa.schema(),endState:m.optional(wb.schema),prevQuestDescription:m.aString,questCompletionShown:m.aBoolean,completedTechs:m.arrayOf(G.schema())}),function(a){return{world:a.world,
inventory:P.schema.project(a.inventory),questStage:a.questStage,endState:a.endState,prevQuestDescription:a.prevQuestDescription,questCompletionShown:a.questCompletionShown,completedTechs:a.completedTechs}},function(a){var b=a.world,c=a.inventory,e=a.questStage,f=a.endState,g=a.prevQuestDescription,k=a.questCompletionShown;a=a.completedTechs;c=P.schema.inject(b)(c);b=new ca(b,c,e);b.endState=f;b.prevQuestDescription=g;b.questCompletionShown=k;b.completedTechs=a;return b});var xe=m.recordOf({game:ca.schema,
nextConversionPriority:m.aNumber}),Gb;(function(a){a.saveProgress=function(a){return gb.saveItem("save",a,xe)};a.loadProgress=function(){var a=gb.loadItem("save",xe);if("success"===(null===a||void 0===a?void 0:a.resultType))return a.result};a.saveExists=function(){return gb.hasItem("save")};a.clearProgress=function(){gb.removeItem("save")}})(Gb||(Gb={}));var Uc=function(a,b,c){this.html=l.makeDivContaining([l.makeHeader(a,1),l.makeDivContaining([l.makeButton("confirm",function(){c()}),l.makeButton("cancel",
function(){return B.show(b)})],["main-menu-options"])],["main-menu","confirm-menu"]);this.refresh()};Uc.prototype.refresh=function(){};var pd=function(a){this.backScreen=a;this.html=l.makeDiv();this.options=jb.loadOptions();this.refresh()};pd.prototype.refresh=function(){var a=this,b=function(a,b,c,e,f,g){var d=l.makePara(e.toString());a=l.makeSlider(a,b,c,e,function(a){f(a);d.innerText=a.toString()},g);return l.makeDivContaining([a,d],["settings-slider"])};b=[b("Volume",0,100,100*this.options.volume,
function(b){a.options.volume=b/100;jb.saveOptions(a.options)},5),b("View width",6,18,this.options.viewWidth,function(b){a.options.viewWidth=b;jb.saveOptions(a.options)}),b("View height",4,12,this.options.viewHeight,function(b){a.options.viewHeight=b;jb.saveOptions(a.options)})];l.fillHTML(this.html,[l.makeDivContaining([l.makeHeader("Settings",1),l.makeDivContaining(b),l.makeDivContaining([l.makeButton("Restore defaults",function(){a.options=vb.defaultOptions();jb.saveOptions(a.options);a.refresh()})]),
l.makeDivContaining([l.makeButton("Clear saved game",function(){B.show(new Uc("Delete Saved Data?",a,function(){Gb.clearProgress();a.refresh();a.backScreen.refresh();B.show(a)}))},[],Gb.saveExists()?"enabled":"disabled")]),l.makeDivContaining([l.makeButton("Reset Achievements",function(){B.show(new Uc("Reset Achievements Progress?",a,function(){Lb.resetAchievements();a.refresh();a.backScreen.refresh();B.show(a)}))},[],0<Lb.getUnlockedAchievements().length?"enabled":"disabled")]),l.makeDivContaining([l.makeButton("Back",
function(){jb.saveOptions(a.options);B.show(a.backScreen)})])],["settings"])])};var Cb=function(a){this.currentGame=a};Cb.prototype.refresh=function(){this.currentGame.updateQuestState();B.refreshCurrentPage()};Cb.prototype.addResource=function(a,b){this.currentGame.inventory.addResource(a,b);this.refresh()};Cb.prototype.removeResource=function(a,b){this.currentGame.inventory.payCost([new p(a,b)]);this.refresh()};Cb.prototype.addPopulation=function(a,b){this.currentGame.inventory.addWorkers(a,b);
this.refresh()};Cb.prototype.showEnding=function(a){B.show(new md((void 0===a?0:a)?Gd:Fd))};Cb.prototype.freeResources=function(){for(var a=$jscomp.makeIterator(k.values()),b=a.next();!b.done;b=a.next())this.addResource(b.value,1E6)};Cb.prototype.showQuote=function(a){B.show(new cc(this.currentGame,a))};var ye=function(a,b,c){var d=this;this.header=a;this.message=b;this.backScreen=c;this.html=l.makeDivContaining([l.makeHeader(this.header),l.makePara(this.message),l.makeDivContaining([l.makeButton("Back",
function(){B.show(d.backScreen)})])],["message-screen"])};ye.prototype.refresh=function(){};var Hd=function(a){var b=this,c=Lb.getUnlockedAchievements().reverse(),e=Math.floor(100*c.length/K.values().length);this.html=l.makeDivContaining([l.makeHeader("Achievements "+e+"%")].concat($jscomp.arrayFromIterable(c.map(function(a){return b.renderAchievement(a)})),[l.makeButton("Back",function(){return B.show(a)})]),["achievements-screen"])};Hd.prototype.renderAchievement=function(a){return l.makeDivContaining([l.makeDivContaining([l.makeHeader(a.emoji),
l.makeHeader(a.title)],["achievement-header"]),l.makePara(a.description)],["achievement"])};Hd.prototype.refresh=function(){};var ng=function(a,b,c,e){function d(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,f){function g(a){try{k(e.next(a))}catch(y){f(y)}}function h(a){try{k(e["throw"](a))}catch(y){f(y)}}function k(a){a.done?c(a.value):d(a.value).then(g,h)}k((e=e.apply(a,b||[])).next())})},ub=function(){this.html=l.makeDiv(["main-menu"]);this.refresh()};
ub.makeAudioButton=function(a){var b=this;return bc.isPlaying()?l.makeButton("disable_audio",function(c){return ng(b,void 0,void 0,function r(){return $jscomp.generator.createGenerator(r,function(b){if(1==b.nextAddress)return c.disabled=!0,c.innerText="please_wait",b.yield(bc.stop(),2);a.refresh();b.jumpToEnd()})})}):l.makeButton("enable_audio",function(){bc.initialize();a.refresh()})};ub.prototype.refresh=function(){var a=this,b=Gb.saveExists(),c=l.makeButton("resume_game",function(){var a=Gb.loadProgress();
a?(x.unsafeSetNextPriority(a.nextConversionPriority),gd(a.game),B.show(new ob(a.game))):B.show(new ye("Deserialization Error","The saved game data is invalid",new ub))}),e=l.makeButton(b?"start_new_game":"start_game",function(){if(b)B.show(new Uc("Overwrite Saved Data?",a,function(){var a=ca.newGame();gd(a);B.show(new ob(a))}));else{var c=ca.newGame();gd(c);B.show(new ob(c))}});l.fillHTML(this.html,[l.makeHeader("Aurora",1),l.makeDivContaining([b?c:l.makeDiv(),e,ub.makeAudioButton(this),l.makeButton("change_settings",
function(){return B.show(new pd(a))}),l.makeButton("view_achievements",function(){return B.show(new Hd(a))}),l.makeButton("view_credits",function(){return B.show(new hd)})],["main-menu-options"])])};var og=function(a,b,c,e){function d(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,f){function g(a){try{k(e.next(a))}catch(y){f(y)}}function h(a){try{k(e["throw"](a))}catch(y){f(y)}}function k(a){a.done?c(a.value):d(a.value).then(g,h)}k((e=e.apply(a,b||[])).next())})};
window.onload=function(){return og(this,void 0,void 0,function b(){return $jscomp.generator.createGenerator(b,function(b){if(1==b.nextAddress)return console.log("Script Loaded"),b.yield(q(),2);B.show(new ub);b.jumpToEnd()})})}}]);}).call(this || window)
</script><script type="text/javascript">(function(){'use strict';}).call(this || window)
</script></body> </html> 