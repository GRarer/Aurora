<!doctype html> <html lang=en dir=ltr> <head> <meta charset=utf-8> <title>Aurora</title> <style type="text/css">.main-menu{display:flex;flex-direction:column}.main-menu h1{font-size:40pt;margin:0;padding:0}.main-menu-options button{display:flex;flex-direction:column}.main-menu button{font-size:24pt;border:none;margin:0;padding:0}.main-menu button:hover{font-size:30pt}.main-menu button:active{color:grey}.credits h1{font-size:24pt;margin-bottom:10pt}.credits-container{display:flex;flex-direction:row}.credits-names-column{margin-right:24pt}.credits-name,.credits-roles{font-size:20pt;margin-top:0;margin-bottom:5pt}.credits button{margin-top:10pt;font-size:20pt}.world-screen-header{display:flex;flex-direction:row;margin:0;min-height:60px}.world-screen-quest-description{font-size:16px;padding-right:10px;padding-top:0;padding-bottom:0}.quest-description-emphasis{color:#408040;font-weight:700}.world-screen-hbox{margin:0;display:flex;flex-direction:row}.world-screen-map-box{height:100%;width:100%}.map-canvas{width:100%;margin:0}.world-screen-sidebar{background-color:#000;width:20%;padding:20px;font-size:16px;overflow-y:auto;height:calc(100vh - 125px)}.project-requirement-met{color:#fff}.project-requirement-unmet{color:tomato}.world-screen-inventory{width:20%;margin:10px;font-size:16px}.production-screen{padding-left:10pt}.production-screen-label{font-size:20pt}.production-screen-inventory{font-size:16pt;line-height:0;padding:1pt;outline:solid #fff;width:50%}.conversion-description{font-size:16pt;width:50%;text-align:left}.conversion-description-normal{color:#fff}.conversion-description-cannot-afford{color:tomato}.conversion-description-disabled{color:#ff0}.production-screen-back-button{font-size:20pt;margin-top:20pt}.transition-quote-panel{margin-top:150px;margin-right:auto;margin-left:auto;font-size:16px;width:420px}.transition-attribution{margin-left:50px}.transition-loading-area{text-align:center}.transition-loading-bar{margin-right:auto;margin-left:auto;width:350px;height:20px;border:2px solid #fff;background-image:linear-gradient(#fff,#fff);background-position:0;background-repeat:no-repeat;background-size:0 100%;transition:background-size .75s}.transition-loading-area.loading .transition-loading-bar{background-size:80% 100%}.transition-loading-area.loaded .transition-loading-bar{background-size:100% 100%}:root,button{background-color:#000;color:#fff;font-family:monospace}button{font-size:18px}button:focus{outline:0}button:disabled,button[disabled]{color:grey;border-color:grey}.flex-horizontal{display:flex;flex-direction:row}.flex-vertical{display:flex;flex-direction:column}.fill-horizontal{width:100%;font-family:serif}.fill-vertical{height:100%}</style></head> <body> <div id=rootdiv> <p>Loading scripts...</p> </div> <script type="text/javascript">(function(){'use strict';var $jscomp$templatelit$1=["\n           This is a multiline that does not\n           start with indentation"];$jscomp$templatelit$1.raw=$jscomp$templatelit$1.slice();var $jscomp$templatelit$0=["\n                Multiline versions are also possible,\n            and they can use indentation.\n\n                Line breaks are also supported."];$jscomp$templatelit$0.raw=$jscomp$templatelit$0.slice();var $jscomp=$jscomp||{};$jscomp.scope={};
$jscomp.arrayIteratorImpl=function(a){var d=0;return function(){return d<a.length?{done:!1,value:a[d++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,g){a!=Array.prototype&&a!=Object.prototype&&(a[d]=g.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,d){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:d})};
$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function a(g){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(g||"")+"_"+d++,g)}var d=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.makeIterator=function(a){var d="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return d?d.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var d,g=[];!(d=a.next()).done;)g.push(d.value);return g};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var d=function(){};d.prototype=a;return new d};
$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},d={};try{return d.__proto__=a,d.a}catch(g){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,d){a.__proto__=d;if(a.__proto__!==d)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,d){a.prototype=$jscomp.objectCreate(d.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var g=$jscomp.setPrototypeOf;g(a,d)}else for(g in d)if("prototype"!=g)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(d,g);e&&Object.defineProperty(a,g,e)}else a[g]=d[g];a.superClass_=d.prototype};
$jscomp.polyfill=function(a,d,g,e){if(d){g=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var f=a[e];f in g||(g[f]={});g=g[f]}a=a[a.length-1];e=g[a];d=d(e);d!=e&&null!=d&&$jscomp.defineProperty(g,a,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("Math.hypot",function(a){return a?a:function(a){if(2>arguments.length)return arguments.length?Math.abs(arguments[0]):0;var d,e,f;for(d=f=0;d<arguments.length;d++)f=Math.max(f,Math.abs(arguments[d]));if(1e+100<f||1e-100>f){if(!f)return f;for(d=e=0;d<arguments.length;d++){var m=Number(arguments[d])/f;e+=m*m}return Math.sqrt(e)*f}for(d=e=0;d<arguments.length;d++)m=Number(arguments[d]),e+=m*m;return Math.sqrt(e)}},"es6","es3");$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function d(){this.batch_=null}function g(a){return a instanceof f?a:new f(function(d,b){d(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;d.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var d=this;this.asyncExecuteFunction(function(){d.executeBatch_()})}this.batch_.push(a)};var e=$jscomp.global.setTimeout;d.prototype.asyncExecuteFunction=function(a){e(a,0)};d.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var d=0;d<a.length;++d){var b=a[d];a[d]=null;try{b()}catch(z){this.asyncThrow_(z)}}}this.batch_=null};d.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var f=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var d=this.createResolveAndReject_();try{a(d.resolve,d.reject)}catch(b){d.reject(b)}};f.prototype.createResolveAndReject_=function(){function a(a){return function(l){b||(b=!0,a.call(d,l))}}var d=this,b=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};f.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof f)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var d=null!=a;break a;case "function":d=!0;break a;default:d=!1}d?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};f.prototype.resolveToNonPromiseObj_=function(a){var d=void 0;try{d=a.then}catch(b){this.reject_(b);return}"function"==typeof d?
this.settleSameAsThenable_(d,a):this.fulfill_(a)};f.prototype.reject_=function(a){this.settle_(2,a)};f.prototype.fulfill_=function(a){this.settle_(1,a)};f.prototype.settle_=function(a,d){if(0!=this.state_)throw Error("Cannot settle("+a+", "+d+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=d;this.executeOnSettledCallbacks_()};f.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)m.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var m=new d;f.prototype.settleSameAsPromise_=function(a){var d=this.createResolveAndReject_();a.callWhenSettled_(d.resolve,d.reject)};f.prototype.settleSameAsThenable_=function(a,d){var b=this.createResolveAndReject_();try{a.call(d,b.resolve,b.reject)}catch(z){b.reject(z)}};f.prototype.then=function(a,d){function b(b,a){return"function"==typeof b?function(a){try{e(b(a))}catch(Z){l(Z)}}:a}var e,l,g=new f(function(b,a){e=b;l=a});this.callWhenSettled_(b(a,e),b(d,l));return g};
f.prototype.catch=function(a){return this.then(void 0,a)};f.prototype.callWhenSettled_=function(a,d){function b(){switch(e.state_){case 1:a(e.result_);break;case 2:d(e.result_);break;default:throw Error("Unexpected state: "+e.state_);}}var e=this;null==this.onSettledCallbacks_?m.asyncExecute(b):this.onSettledCallbacks_.push(b)};f.resolve=g;f.reject=function(a){return new f(function(d,b){b(a)})};f.race=function(a){return new f(function(d,b){for(var e=$jscomp.makeIterator(a),l=e.next();!l.done;l=e.next())g(l.value).callWhenSettled_(d,
b)})};f.all=function(a){var d=$jscomp.makeIterator(a),b=d.next();return b.done?g([]):new f(function(a,e){function l(b){return function(d){f[b]=d;z--;0==z&&a(f)}}var f=[],z=0;do f.push(void 0),z++,g(b.value).callWhenSettled_(l(f.length-1),e),b=d.next();while(!b.done)})};return f},"es6","es3");
$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var g=0,e={next:function(){if(g<a.length){var f=g++;return{value:d(f,a[f]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},d=Object.create(new $jscomp.global.Proxy(a,{get:function(g,e,f){return g==a&&"q"==e&&f==d}}));return!0===d.q}catch(g){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)};
$jscomp.polyfill("WeakMap",function(a){function d(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),d=Object.seal({}),e=new a([[b,2],[d,3]]);if(2!=e.get(b)||3!=e.get(d))return!1;e.delete(b);e.set(d,4);return!e.has(b)&&4==e.get(d)}catch(Y){return!1}}function g(){}function e(b){var a=typeof b;return"object"===a&&null!==b||"function"===a}function f(b){if(!$jscomp.owns(b,n)){var a=new g;$jscomp.defineProperty(b,n,{value:a})}}function m(b){var a=Object[b];a&&(Object[b]=function(b){if(b instanceof
g)return b;f(b);return a(b)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(d())return a;var n="$jscomp_hidden_"+Math.random();m("freeze");m("preventExtensions");m("seal");var N=0,b=function(b){this.id_=(N+=Math.random()+1).toString();if(b){b=$jscomp.makeIterator(b);for(var a;!(a=b.next()).done;)a=a.value,this.set(a[0],a[1])}};b.prototype.set=function(b,a){if(!e(b))throw Error("Invalid WeakMap key");f(b);if(!$jscomp.owns(b,n))throw Error("WeakMap key fail: "+
b);b[n][this.id_]=a;return this};b.prototype.get=function(b){return e(b)&&$jscomp.owns(b,n)?b[n][this.id_]:void 0};b.prototype.has=function(b){return e(b)&&$jscomp.owns(b,n)&&$jscomp.owns(b[n],this.id_)};b.prototype.delete=function(b){return e(b)&&$jscomp.owns(b,n)&&$jscomp.owns(b[n],this.id_)?delete b[n][this.id_]:!1};return b},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){function d(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),d=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=d.get(b)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var e=d.entries(),f=e.next();if(f.done||f.value[0]!=b||"s"!=f.value[1])return!1;f=e.next();return f.done||4!=f.value[0].x||"t"!=f.value[1]||!e.next().done?!1:!0}catch(Y){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(d())return a;$jscomp.initSymbolIterator();var g=new WeakMap,e=function(b){this.data_={};this.head_=n();this.size=0;if(b){b=$jscomp.makeIterator(b);for(var a;!(a=b.next()).done;)a=a.value,this.set(a[0],a[1])}};e.prototype.set=function(b,a){b=0===b?0:b;var d=f(this,b);d.list||(d.list=this.data_[d.id]=[]);d.entry?d.entry.value=a:(d.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:b,
value:a},d.list.push(d.entry),this.head_.previous.next=d.entry,this.head_.previous=d.entry,this.size++);return this};e.prototype.delete=function(b){b=f(this,b);return b.entry&&b.list?(b.list.splice(b.index,1),b.list.length||delete this.data_[b.id],b.entry.previous.next=b.entry.next,b.entry.next.previous=b.entry.previous,b.entry.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=n();this.size=0};e.prototype.has=function(b){return!!f(this,b).entry};
e.prototype.get=function(b){return(b=f(this,b).entry)&&b.value};e.prototype.entries=function(){return m(this,function(b){return[b.key,b.value]})};e.prototype.keys=function(){return m(this,function(b){return b.key})};e.prototype.values=function(){return m(this,function(b){return b.value})};e.prototype.forEach=function(b,a){for(var d=this.entries(),e;!(e=d.next()).done;)e=e.value,b.call(a,e[1],e[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var f=function(b,a){var d=a&&typeof a;"object"==
d||"function"==d?g.has(a)?d=g.get(a):(d=""+ ++N,g.set(a,d)):d="p_"+a;var e=b.data_[d];if(e&&$jscomp.owns(b.data_,d))for(b=0;b<e.length;b++){var f=e[b];if(a!==a&&f.key!==f.key||a===f.key)return{id:d,list:e,index:b,entry:f}}return{id:d,list:e,index:-1,entry:void 0}},m=function(b,a){var d=b.head_;return $jscomp.iteratorPrototype(function(){if(d){for(;d.head!=b.head_;)d=d.previous;for(;d.next!=d.head;)return d=d.next,{done:!1,value:a(d)};d=null}return{done:!0,value:void 0}})},n=function(){var b={};return b.previous=
b.next=b.head=b},N=0;return e},"es6","es3");$jscomp.polyfill("Array.from",function(a){return a?a:function(a,g,e){g=null!=g?g:function(a){return a};var d=[],m="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if("function"==typeof m){a=m.call(a);for(var n=0;!(m=a.next()).done;)d.push(g.call(e,m.value,n++))}else for(m=a.length,n=0;n<m;n++)d.push(g.call(e,a[n],n));return d}},"es6","es3");
$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,g){return g})}},"es8","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,g){return a===g?0!==a||1/a===1/g:a!==a&&g!==g}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,g){var d=this;d instanceof String&&(d=String(d));var f=d.length;g=g||0;for(0>g&&(g=Math.max(g+f,0));g<f;g++){var m=d[g];if(m===a||Object.is(m,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,d,g){if(null==a)throw new TypeError("The 'this' value for String.prototype."+g+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,g){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,g||0)}},"es6","es3");
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(a){var d=$jscomp.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var e="";a;)if(a&1&&(e+=d),a>>>=1)d+=d;return e}},"es6","es3");
(function(a){function d(e){if(g[e])return g[e].exports;var f=g[e]={i:e,l:!1,exports:{}};a[e].call(f.exports,f,f.exports,d);f.l=!0;return f.exports}var g={};d.m=a;d.c=g;d.d=function(a,f,g){d.o(a,f)||Object.defineProperty(a,f,{enumerable:!0,get:g})};d.r=function(a){$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!==typeof Symbol&&Symbol.toStringTag&&($jscomp.initSymbol(),Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}));Object.defineProperty(a,"__esModule",{value:!0})};d.t=function(a,
f){f&1&&(a=d(a));if(f&8||f&4&&"object"===typeof a&&a&&a.__esModule)return a;var e=Object.create(null);d.r(e);Object.defineProperty(e,"default",{enumerable:!0,value:a});if(f&2&&"string"!=typeof a)for(var g in a)d.d(e,g,function(d){return a[d]}.bind(null,g));return e};d.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};d.d(e,"a",e);return e};d.o=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)};d.p="";return d(d.s=1)})([,function(a,d,g){function e(c,
h,a){return Math.max(Math.min(h,a),c)}function f(c){var h=new Image,a=new Promise(function(a,b){h.onload=function(){return a(h)};h.onerror=function(){return a(h)};h.src=c});da.push(a);return h}function m(c,h){var a=new U(c,h);c=window;c.cheatsAddResource=function(c,h){return a.addResource(c,h)};c.cheatsAddPopulation=function(c,h){return a.addPopulation(c,h)};Object.freeze(k);Object.freeze(x);c.Resources=k;c.Species=x}function n(){var c=window;c.cheatsAddResource=void 0;c.cheatsAddPopulation=void 0;
c.Resources=void 0;c.Species=void 0}function N(c,h){for(var a=[],b=1;b<arguments.length;++b)a[b-1]=arguments[b];b=c.reduce(function(c,h,b){return c+h+(a[b]||"")}).replace(/\t/,"    ").replace(/^(?:\r?\n)+|(?:\r?\n)+$/g,"").split(/\r?\n/);var d=b.filter(function(c){return""!==c}).map(function(c){return c.match(/^\s*/)[0].length}),e=0;0<b.length&&(e=d.reduce(function(c,h){return Math.min(c,h)}));return 0<e?b.map(function(c){return c.substring(e)}).join("\n"):b.join("\n")}g.r(d);var b=function(){};b.makeDiv=
function(c){var h=document.createElement("div");c&&h.classList.add.apply(h.classList,$jscomp.arrayFromIterable(c));return h};b.makeDivContaining=function(c,h){h=this.makeDiv(h);c=$jscomp.makeIterator(c);for(var a=c.next();!a.done;a=c.next())h.appendChild(a.value);return h};b.makeElement=function(c,h,a){c=document.createElement(c);c.innerText=h;a&&c.classList.add.apply(c.classList,$jscomp.arrayFromIterable(a));return c};b.makePara=function(c,h){return b.makeElement("p",c,h)};b.makeHeader=function(c,
h,a){return b.makeElement("h"+(void 0===h?1:h),c,a)};b.makeButton=function(c,h,a,b){b=void 0===b?!1:b;var d=document.createElement("button");d.type="button";d.disabled=b;d.innerText=c;a&&d.classList.add.apply(d.classList,$jscomp.arrayFromIterable(a));d.onclick=function(c){c.preventDefault;h.call(this,c)};return d};b.makeCanvas=function(c,h,a){var b=document.createElement("canvas");b.width=c;b.height=h;a&&b.classList.add.apply(b.classList,$jscomp.arrayFromIterable(a));return b};b.fillHTML=function(c,
a){c.innerHTML="";a=$jscomp.makeIterator(a);for(var h=a.next();!h.done;h=a.next())c.appendChild(h.value)};var z=function(){};z.renderMainMenu=function(){return b.makeDivContaining([b.makeHeader("Aurora",1),b.makeDivContaining([b.makeButton("start_game",function(){return q.startGame()}),b.makeButton("display_credits",function(){return q.showCredits()})],["main-menu-options"])],["main-menu"])};var l=function(c,a){this.x=c;this.y=a};l.prototype.toString=function(){return"("+this.x+", "+this.y+")"};l.prototype.distanceFrom=
function(c){return Math.hypot(Math.abs(this.x-c.x),Math.abs(this.y-c.y))};var da=[];a=f("assets/ui/highlight.png");var Y=f("assets/tiles/habitat.png"),ia=f("assets/tiles/wasteland.png"),ja=f("assets/tiles/solar_panels.png"),Z=f("assets/tiles/mountain.png"),ka=f("assets/tiles/mining_facility.png"),la=f("assets/tiles/lander.png"),p=function(c,a){var h=this;this.viewWidth=12;this.viewHeight=8;this.viewPosition=new l(0,0);this.highlightedCoordinates=null;this.world=a;this.parentScreen=c;this.canvas=b.makeCanvas(this.viewWidth*
p.pixelsPerTile,this.viewHeight*p.pixelsPerTile,["map-canvas"]);this.canvas.addEventListener("click",function(c){return h.handleClick(c)});this.refreshViewableArea()};p.prototype.getViewCanvas=function(){return this.canvas};p.prototype.refreshViewableArea=function(){var c=this.world.getTilesInRectangle(this.viewPosition.x,this.viewPosition.y,this.viewWidth,this.viewHeight);c=$jscomp.makeIterator(c);for(var a=c.next();!a.done;a=c.next())this.rerenderTile(a.value)};p.prototype.drawSquareAtCoordinates=
function(c,a){var h=this.canvas.getContext("2d");h.imageSmoothingEnabled=!1;var b=a.x-this.viewPosition.x;a=a.y-this.viewPosition.y;0>b||0>a||b>=this.viewWidth||a>=this.viewHeight||h.drawImage(c,b*p.pixelsPerTile,a*p.pixelsPerTile,p.pixelsPerTile,p.pixelsPerTile)};p.prototype.rerenderTile=function(c){this.drawSquareAtCoordinates(c.texture,c.position);c.position===this.highlightedCoordinates&&this.drawSquareAtCoordinates(p.highlightImage,c.position)};p.prototype.selectTile=function(c){if(!c||c.position!==
this.highlightedCoordinates){if(this.highlightedCoordinates){var a=this.world.getTileAtCoordinates(this.highlightedCoordinates);this.highlightedCoordinates=null;this.rerenderTile(a)}c?(this.drawSquareAtCoordinates(p.highlightImage,c.position),this.highlightedCoordinates=c.position):this.highlightedCoordinates=null;this.parentScreen.changeSidebarTile(this.highlightedCoordinates)}};p.prototype.moveViewArea=function(c,a){var h=this.viewPosition.x,b=this.viewPosition.y;c=e(0,this.viewPosition.x+c,this.world.width-
this.viewWidth);a=e(0,this.viewPosition.y+a,this.world.height-this.viewHeight);this.viewPosition=new l(c,a);c=this.viewPosition.x-h;a=this.viewPosition.y-b;h=c*p.pixelsPerTile*-1;b=a*p.pixelsPerTile*-1;this.canvas.getContext("2d").drawImage(this.canvas,h,b);if(0<c)for(h=this.world.getTilesInRectangle(this.viewPosition.x+this.viewWidth-c,this.viewPosition.y,c,this.viewHeight),b=$jscomp.makeIterator(h),h=b.next();!h.done;h=b.next())this.rerenderTile(h.value);if(0>c)for(c=this.world.getTilesInRectangle(this.viewPosition.x,
this.viewPosition.y,-1*c,this.viewHeight),c=$jscomp.makeIterator(c),h=c.next();!h.done;h=c.next())this.rerenderTile(h.value);if(0<a)for(c=this.world.getTilesInRectangle(this.viewPosition.x,this.viewPosition.y+this.viewHeight-a,this.viewWidth,a),c=$jscomp.makeIterator(c),h=c.next();!h.done;h=c.next())this.rerenderTile(h.value);if(0>a)for(a=this.world.getTilesInRectangle(this.viewPosition.x,this.viewPosition.y,this.viewWidth,-1*a),a=$jscomp.makeIterator(a),h=a.next();!h.done;h=a.next())this.rerenderTile(h.value)};
p.prototype.handleClick=function(c){c=this.world.getTileAtCoordinates(new l(Math.floor(this.viewWidth/this.canvas.clientWidth*(c.pageX-this.canvas.offsetLeft))+this.viewPosition.x,Math.floor(this.viewHeight/this.canvas.clientHeight*(c.pageY-this.canvas.offsetTop))+this.viewPosition.y));this.selectTile(c)};p.prototype.handleKeyDown=function(c){c=c.code;"ArrowUp"!==c&&"KeyW"!==c||this.moveViewArea(0,-1);"ArrowLeft"!==c&&"KeyA"!==c||this.moveViewArea(-1,0);"ArrowDown"!==c&&"KeyS"!==c||this.moveViewArea(0,
1);"ArrowRight"!==c&&"KeyD"!==c||this.moveViewArea(1,0)};p.pixelsPerTile=64;p.highlightImage=a;var I=function(c,a){this.parentScreen=c;this.run=a;this.position=null;this.html=b.makeDiv(["world-screen-sidebar"]);this.refresh()};I.prototype.getHTML=function(){return this.html};I.prototype.changeTile=function(c){this.position=c;this.refresh()};I.prototype.refresh=function(){var c=this;if(null==this.position)b.fillHTML(this.html,[b.makePara("No structure or terrain tile selected")]);else{var a=this.run.world.getTileAtCoordinates(this.position),
d=b.makeDiv();a.populationCapacity&&d.appendChild(b.makePara("Population capacity for "+a.populationCapacity.capacity+" "+a.populationCapacity.species.name));var e=b.makeDiv(),f=a.possibleProjects.filter(function(a){return a.isVisible(c.position,c.run)});if(0<f.length){e.appendChild(b.makePara("Projects:"));f=$jscomp.makeIterator(f);for(var g=f.next();!g.done;g=f.next())e.appendChild(this.makeProjectHTML(a,g.value))}f=b.makeDiv();if(0<a.resourceConversions.length){f.appendChild(b.makePara("Production:"));
g=$jscomp.makeIterator(a.resourceConversions);for(var k=g.next();!k.done;k=g.next())f.appendChild(this.makeConversionHTML(k.value))}b.fillHTML(this.html,[b.makePara(a.getTileName()),b.makePara("Coordinates: "+this.position.x+", "+this.position.y),d,e,f])}};I.prototype.makeProjectHTML=function(c,a){var h=this,d=b.makeDiv(),e=!a.canDo(c.position,this.run);e=b.makeButton(a.title,function(){h.doProject(a,c)},[],e);d.appendChild(e);if(0==a.costs.length)d.appendChild(b.makePara("Cost: Free"));else{e=this.run.inventory.canAfford(a.costs)?
"project-requirement-met":"project-requirement-unmet";var f="Cost: "+a.costs.map(function(c){return""+c.toString()}).join(", ");d.appendChild(b.makePara(f,[e]))}0<a.completionRequirements.length&&d.appendChild(b.makePara("Requirements:"));e=$jscomp.makeIterator(a.completionRequirements);for(f=e.next();!f.done;f=e.next()){f=f.value;var g=f.evaluate(this.run,this.position)?"project-requirement-met":"project-requirement-unmet";d.appendChild(b.makePara("- "+f.toString(),[g]))}return d};I.prototype.makeConversionHTML=
function(c){return b.makePara("- "+c.toString())};I.prototype.doProject=function(c,a){c.doAction(a.position,this.run);this.run.updateQuestState();this.parentScreen.refreshComponents()};var aa=function(c){this.inventory=c.inventory;this.html=b.makeDiv(["world-screen-inventory"]);this.refresh()};aa.prototype.getHTML=function(){return this.html};aa.prototype.refresh=function(){for(var c=b.makeHeader("Population: "+this.inventory.getTotalPopulation(),1),a=b.makePara("Available workers: "+this.inventory.getAvailableWorkers()),
d=b.makeDiv(),e=$jscomp.makeIterator(this.inventory.getPopulationStrings()),f=e.next();!f.done;f=e.next())d.appendChild(b.makePara(f.value));e=b.makeDiv();var g=$jscomp.makeIterator(this.inventory.getInventoryStrings());for(f=g.next();!f.done;f=g.next())e.appendChild(b.makePara(f.value));b.fillHTML(this.html,[b.makeDivContaining([c,a,d,b.makeHeader("Inventory:",1),e])])};var ba=function(c){this.html=b.makeDiv(["world-screen-header"]);this.run=c;this.refresh()};ba.prototype.refresh=function(){var c=
this,a=b.makeButton("Quit Game",function(){q.showMainMenu()}),d=b.makeButton("Next Turn",function(){q.transitionToNextTurn()}),e=b.makeButton("Manage Production",function(){q.showProductionScreen()}),f=b.makeButton("Research Projects",function(){q.showResearchScreen()}),g=this.run.getCurrentQuestHint(),k=this.run.getCurrentQuestDescription();g=b.makePara("Objective: "+(g?k+"\n(hint: "+g+")":k),["world-screen-quest-description"]);k=this.run.getPreviousQuestDescription();this.run.questCompletionShown||
(g=b.makePara("Completed: "+k,["world-screen-quest-description","quest-description-emphasis"]),setTimeout(function(){c.refresh()},1500));this.run.questCompletionShown=!0;b.fillHTML(this.html,[a,e,f,d,g])};ba.prototype.getHTML=function(){return this.html};var Q=function(c){this.mapUI=new p(this,c.world);this.tileSidebar=new I(this,c);var a=this.mapUI.getViewCanvas();this.inventorySidebar=new aa(c);var d=this.tileSidebar.getHTML(),e=this.inventorySidebar.getHTML();this.header=new ba(c);this.worldScreenHTML=
b.makeDivContaining([this.header.getHTML(),b.makeDivContaining([e,b.makeDivContaining([a],["world-screen-map-box"]),d],["world-screen-hbox"])],["flex-vertical"])};Q.prototype.getHTML=function(){return this.worldScreenHTML};Q.prototype.refreshComponents=function(){this.mapUI.refreshViewableArea();this.tileSidebar.refresh();this.inventorySidebar.refresh();this.header.refresh()};Q.prototype.handleKeyDown=function(c){this.mapUI.handleKeyDown(c)};Q.prototype.changeSidebarTile=function(c){this.tileSidebar.changeTile(c)};
var V=function(){};V.generate=function(c,a){for(var h=Array(c),b=0;b<c;b++)h[b]=a();return h};V.flatten=function(c){return c.reduce(function(c,a){c=void 0===c?[]:c;return c.concat(a)})};var w=function(c){this.position=c;this.possibleProjects=[];this.resourceConversions=[];this.populationCapacity=void 0},C=function(c,a,b,d,e){this.title=c;this.action=a;this.costs=b;this.completionRequirements=d;this.visibilityRequirements=e};C.prototype.canDo=function(c,a){return a.inventory.canAfford(this.costs)&&
this.isVisible(c,a)&&this.completionRequirements.every(function(b){return b.evaluate(a,c)})};C.prototype.isVisible=function(c,a){return this.visibilityRequirements.every(function(b){return b.evaluate(a,c)})};C.prototype.doAction=function(c,a){if(!this.canDo(c,a))throw"tried to do project "+this.title+" without meeting requirements";a.inventory.payCost(this.costs);this.action(c,a)};var x=function(c,a){this.name=c;this.growthMultiplier=a};x.values=function(){return Object.keys(x).map(function(c){return x[c]})};
x.Human=new x("Human Colonists",.1);x.Robot=new x("Robotic Platform",1);var ma=function(c,a){this.species=c;this.capacity=a},A=function(c){c=w.call(this,c)||this;c.texture=Y;c.populationCapacity=new ma(x.Human,200);return c};$jscomp.inherits(A,w);A.prototype.getTileName=function(){return A.tileName};A.tileName="Habitat Dome";var t=function(c,a){this.resource=c;this.quantity=a};t.prototype.toString=function(){return this.resource.name+" x"+this.quantity};var k=function(c){this.name=c};k.values=function(){return Object.keys(k).map(function(c){return k[c]})};
k.Energy=new k("Energy");k.Metal=new k("Metal Ore");k.BuildingMaterials=new k("Construction Materials");k.Electronics=new k("Electronics");k.EngineeringKnowledge=new k("Engineering Data");k.SocialKnowledge=new k("Sociological Data");a=function(){};var R=function(c,a){this.radius=c;this.targetType=a;return this};$jscomp.inherits(R,a);R.prototype.evaluate=function(c,a){var b=this;return 0<c.world.getTilesInCircle(a,this.radius).filter(function(c){return c instanceof b.targetType}).length};R.prototype.toString=
function(){return 1==this.radius?"adjacent to a "+this.targetType.tileName:"within "+this.radius+" units of a "+this.targetType.tileName};var W=function(c){this.requiredCount=c;return this};$jscomp.inherits(W,a);W.prototype.evaluate=function(c,a){return c.world.getTileAtCoordinates(a).resourceConversions.length===this.requiredCount};W.prototype.toString=function(){return this.requiredCount+" resource conversions on this tile"};var E=function(c,a,b){this.inputs=c;this.outputs=a;this.enabled=!0;this.requiredWorkers=
b||0;this.isFree()?this.priority=0:(this.priority=E.nextNumber,E.nextNumber++)};E.prototype.toString=function(){var c=this.outputs.map(function(c){return c.toString()}).join(", "),a="Produce "+c;0<this.inputs.length&&(a="Convert "+this.inputs.map(function(c){return c.toString()}).join(", ")+" into "+c);0!=this.requiredWorkers&&(a+=" using "+this.requiredWorkers+" workers");return a};E.prototype.isFree=function(){return 0==this.inputs.length&&!this.requiredWorkers};E.nextNumber=1;var y=function(){};
a=function(c,a){this.resource=c;this.minQuantity=a;return this};$jscomp.inherits(a,y);a.prototype.evaluate=function(c){return c.inventory.getResourceQuantity(this.resource)>=this.minQuantity};a.prototype.toString=function(){return"have at least "+this.minQuantity+" units of "+this.resource.name+" in inventory"};d=function(c,a){this.tileType=c;this.minQuantity=a;return this};$jscomp.inherits(d,y);d.prototype.evaluate=function(c){var a=this;return c.world.getTiles().filter(function(c){return c instanceof
a.tileType}).length>=this.minQuantity};d.prototype.toString=function(){return"have at least "+this.minQuantity+"  "+this.tileType.tileName+" tile"+(1==this.minQuantity?"":"s")};g=function(c){this.minimumPopulation=c;return this};$jscomp.inherits(g,y);g.prototype.evaluate=function(c){return c.inventory.getTotalPopulation()>=this.minimumPopulation};g.prototype.toString=function(){return"have a total population of at least "+this.minimumPopulation};var S=function(c){this.tech=c;return this};$jscomp.inherits(S,
y);S.prototype.evaluate=function(c){return c.hasUnlockedTechnology(this.tech)};S.prototype.toString=function(){return"have the "+this.tech.name+" technology"};var F=function(c,a,b,d,e){this.name=c;this.description=a;this.requiredTechs=b;this.researchCost=d;this.visible=void 0===e?!0:e};F.makeUnlockableTechnology=function(c,a,b,d){c=new F(c,a,b,d,!0);ea.push(c);return c};F.makeHiddenTechnology=function(c,a,b,d){return new F(c,a,[],b,void 0===d?!1:d)};var ea=[],na=F.makeUnlockableTechnology("Industrial Engineering",
"Approaches for optimizing production processes",[],new t(k.EngineeringKnowledge,25)),oa=F.makeUnlockableTechnology("Structural Engineering","Techniques for fabricating large structures on the planet's surface",[],new t(k.EngineeringKnowledge,10));y=F.makeUnlockableTechnology("Colonist Behavior Modeling","Simulations of human behavior in the isolated conditions of a deep space colony",[],new t(k.SocialKnowledge,30));F.makeUnlockableTechnology("Habitation Pods","Compact and efficient residence units allow more humans to be packed into a small habitat",
[y],new t(k.EngineeringKnowledge,15));var J=function(c){c=w.call(this,c)||this;c.texture=ka;c.resourceConversions=[new E([new t(k.Metal,100)],[new t(k.BuildingMaterials,100)],60),new E([new t(k.Metal,100)],[new t(k.Electronics,100)],30)];c.possibleProjects=[new C("Double Production Lines",function(c,a){c=a.world.getTileAtCoordinates(c);a=$jscomp.makeIterator((new J(new l(0,0))).resourceConversions);for(var b=a.next();!b.done;b=a.next())c.resourceConversions.push(b.value)},[new t(k.BuildingMaterials,
175),new t(k.Energy,300)],[],[new S(na),new W(2)])];return c};$jscomp.inherits(J,w);J.prototype.getTileName=function(){return J.tileName};J.tileName="Ore Processing Center";var D=function(c){c=w.call(this,c)||this;c.texture=Z;c.possibleProjects=[new C("Strip Mining",function(c,a){a.inventory.addResource(k.Metal,150);a.world.placeTile(new u(c))},[new t(k.Energy,25)],[],[])];return c};$jscomp.inherits(D,w);D.prototype.getTileName=function(){return D.tileName};D.tileName="Mountain";var K=function(c){c=
w.call(this,c)||this;c.texture=ja;c.resourceConversions=[new E([],[new t(k.Energy,100)])];return c};$jscomp.inherits(K,w);K.prototype.getTileName=function(){return K.tileName};K.tileName="Photovoltaic Array";var u=function(c){c=w.call(this,c)||this;c.texture=ia;c.possibleProjects=[new C("Construct habitat dome",function(c,a){a.world.placeTile(new A(c))},[new t(k.BuildingMaterials,100)],[new R(1,A),new S(oa)],[]),new C("Construct ore processing center",function(c,a){a.world.placeTile(new J(c))},[new t(k.Energy,
200),new t(k.Metal,300)],[new R(5,D)],[]),new C("Construct photovoltaic array",function(c,a){a.world.placeTile(new K(c))},[new t(k.Electronics,200)],[],[])];return c};$jscomp.inherits(u,w);u.prototype.getTileName=function(){return u.tileName};u.tileName="Wasteland";var G=function(){};G.realBetween=function(c,a){return Math.random()*(a-c)+c};G.intBetween=function(c,a){return Math.floor(G.realBetween(c,a))};G.fromArray=function(c){return c[G.intBetween(0,c.length)]};var L=function(c){this.width=c.worldWidth;
this.height=c.worldHeight;this.grid=Array(this.height);for(var a=0;a<this.height;a++){this.grid[a]=Array(this.width);for(var b=0;b<this.width;b++)this.grid[a][b]=new u(new l(b,a))}a=G.intBetween(c.minMountains,c.maxMountains);for(b=0;b<a;b++){var d=this.getTiles().filter(function(c){return c instanceof u});d=G.fromArray(d).position;this.placeTile(new D(d))}c=$jscomp.makeIterator(c.nonrandomTiles);for(a=c.next();!a.done;a=c.next())this.placeTile(a.value)};L.prototype.placeTile=function(c){this.grid[c.position.y][c.position.x]=
c};L.prototype.getTiles=function(){return V.flatten(this.grid)};L.prototype.getTilesInRectangle=function(c,a,b,d){0>a&&(a=0);0>c&&(c=0);var h=[];a=this.grid.slice(a,a+d);a=$jscomp.makeIterator(a);for(d=a.next();!d.done;d=a.next()){d=d.value.slice(c,c+b);d=$jscomp.makeIterator(d);for(var e=d.next();!e.done;e=d.next())h.push(e.value)}return h};L.prototype.getTileAtCoordinates=function(c){return this.grid[c.y][c.x]};L.prototype.getTilesInCircle=function(c,a){return this.getTiles().filter(function(b){return c.distanceFrom(b.position)<=
a})};L.prototype.getPopulationCapacity=function(c){for(var a=0,b=$jscomp.makeIterator(this.getTiles()),d=b.next();!d.done;d=b.next())d=d.value,d.populationCapacity&&d.populationCapacity.species==c&&(a+=d.populationCapacity.capacity);return a};var B=function(){this.map=new Map([])};B.prototype.add=function(c,a){this.set(c,this.get(c)+a)};B.prototype.remove=function(c,a){this.add(c,-1*a)};B.prototype.get=function(a){return this.map.get(a)||0};B.prototype.set=function(a,b){if(0>b)throw"tried to set quantity to negative value";
0==b?this.map.delete(a):this.map.set(a,b)};B.prototype.getSum=function(){return Array.from(this.map.values()).reduce(function(a,b){return a+b},0)};B.prototype.positiveQuantityKeys=function(){return Array.from(this.map.keys())};B.prototype.clone=function(){for(var a=new B,b=$jscomp.makeIterator(this.positiveQuantityKeys()),d=b.next();!d.done;d=b.next())d=d.value,a.add(d,this.get(d));return a};var r=function(a){this.world=a;this.resourceQuantities=new B;this.populationQuantities=new B;this.availableWorkers=
0};r.prototype.addResource=function(a,b){this.resourceQuantities.add(a,b)};r.prototype.removeResource=function(a,b){this.resourceQuantities.remove(a,b)};r.prototype.getResourceQuantity=function(a){return this.resourceQuantities.get(a)||0};r.prototype.addWorkers=function(a,b){this.populationQuantities.add(a,b);this.populationQuantities.set(a,e(0,this.populationQuantities.get(a),this.world.getPopulationCapacity(a)))};r.prototype.releaseWorkers=function(){this.availableWorkers=this.populationQuantities.getSum()};
r.prototype.occupyWorkers=function(a){if(this.availableWorkers<a)throw"insufficient workers";if(0>a)throw"tried to occupy a negative number of workers";this.availableWorkers-=a};r.prototype.doPopulationGrowth=function(){for(var a=$jscomp.makeIterator(this.populationQuantities.positiveQuantityKeys()),b=a.next();!b.done;b=a.next()){b=b.value;var d=Math.floor(b.growthMultiplier*this.populationQuantities.get(b));this.addWorkers(b,d)}};r.prototype.getTotalPopulation=function(){return this.populationQuantities.getSum()};
r.prototype.getAvailableWorkers=function(){return this.availableWorkers};r.prototype.canAfford=function(a){var c=this,b=new Map;a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next())d=d.value,b.set(d.resource,d.quantity+(b.get(d.resource)||0));return Array.from(b.keys()).every(function(a){var d=b.get(a);a=c.getResourceQuantity(a);return d<=a})};r.prototype.hasEnoughWorkers=function(a){return this.availableWorkers>=a};r.prototype.payCost=function(a){if(this.canAfford(a)){a=$jscomp.makeIterator(a);
for(var c=a.next();!c.done;c=a.next())c=c.value,this.removeResource(c.resource,c.quantity)}else throw"Cannot afford to pay cost";};r.prototype.getResourceList=function(){var a=this;return k.values().filter(function(c){return 0!=a.resourceQuantities.get(c)})};r.prototype.getInventoryStrings=function(){var a=this;return this.getResourceList().map(function(c){return c.name+": "+a.getResourceQuantity(c)})};r.prototype.getPopulationStrings=function(){var a=this;return this.populationQuantities.positiveQuantityKeys().map(function(c){return a.populationQuantities.get(c)+
" "+c.name})};r.prototype.applyConversions=function(a){a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())if(c=c.value,this.canAfford(c.inputs)&&this.hasEnoughWorkers(c.requiredWorkers)&&c.enabled){this.payCost(c.inputs);this.occupyWorkers(c.requiredWorkers);c=$jscomp.makeIterator(c.outputs);for(var b=c.next();!b.done;b=c.next())b=b.value,this.addResource(b.resource,b.quantity)}};r.prototype.clone=function(){var a=new r(this.world);a.resourceQuantities=this.resourceQuantities.clone();
a.populationQuantities=this.populationQuantities.clone();a.availableWorkers=this.availableWorkers;return a};var O=function(a){a=w.call(this,a)||this;a.texture=la;a.possibleProjects=[new C("Unpack Lander",function(a,c){var b=c.world;b.placeTile(new A(new l(a.x+1,a.y)));b.placeTile(new J(new l(a.x,a.y-1)));b.placeTile(new K(new l(a.x+1,a.y-1)));b.placeTile(new u(a));c.inventory.addWorkers(x.Human,100)},[],[],[])];return a};$jscomp.inherits(O,w);O.prototype.getTileName=function(){return O.tileName};
O.tileName="Landing Pod";var ca=function(a,b,d,e,f){this.nonrandomTiles=a;this.worldWidth=b;this.worldHeight=d;this.minMountains=e;this.maxMountains=f};ca.standardWorldParameters=function(){var a=[new D(new l(0,0)),new D(new l(1,0)),new D(new l(2,0)),new u(new l(0,1)),new u(new l(1,1)),new u(new l(2,1)),new u(new l(0,2)),new O(new l(1,2)),new u(new l(2,2)),new u(new l(0,3)),new u(new l(1,3)),new u(new l(2,4))];return new ca(a,20,20,20,25)};y=function(a,b){this.requirement=a;this.nextStage=b};var P=
function(a,b,d,e){this.description=a;this.hint=b;this.paths=d;this.isWinState=void 0===e?!1:e};P.prototype.updatedStage=function(a){for(var c=$jscomp.makeIterator(this.paths),b=c.next();!b.done;b=c.next())if(b=b.value,b.requirement.evaluate(a))return b.nextStage().updatedStage(a);return this};var qa=new P("Deploy shelter for the colonists","select the "+O.tileName,[new y(new d(A,1),function(){return pa})]),pa=new P("Build up at least 100 units of "+k.Energy.name,"the "+K.tileName+" produces "+k.Energy.name+
" each turn",[new y(new a(k.Energy,100),function(){return ra})]),ra=new P("Acquire "+k.Metal.name,void 0,[new y(new a(k.Metal,1),function(){return sa})]),sa=new P("Grow total worker population to 250","A "+A.tileName+" has capacity for "+(new A(new l(0,0))).populationCapacity.capacity+" colonists",[new y(new g(250),function(){return ta})]),ta=new P("[no current objective]",void 0,[]),v=function(){this.turnNumber=1;this.prevQuestDescription="";this.questCompletionShown=!0;this.completedTechs=[];this.world=
new L(ca.standardWorldParameters());this.inventory=new r(this.world);this.questStage=qa};v.prototype.getCurrentQuestDescription=function(){return this.questStage.description};v.prototype.getCurrentQuestHint=function(){return this.questStage.hint};v.prototype.getPreviousQuestDescription=function(){return this.prevQuestDescription};v.prototype.getResourceConversions=function(){var a=V.flatten(this.world.getTiles().map(function(a){return a.resourceConversions}));a.sort(function(a,c){return a.priority-
c.priority});return a};v.prototype.updateQuestState=function(){var a=this.questStage.updatedStage(this);a!=this.questStage&&(this.prevQuestDescription=this.questStage.description,this.questCompletionShown=!1,this.questStage=a)};v.prototype.hasUnlockedTechnology=function(a){return this.completedTechs.includes(a)};v.prototype.unlockTechnology=function(a){this.hasUnlockedTechnology(a)||this.completedTechs.push(a)};v.prototype.getUnlockedTechnologies=function(){return this.completedTechs};v.prototype.getResearchOptions=
function(){var a=this;return ea.filter(function(a){return a.visible}).filter(function(c){return c.requiredTechs.every(function(c){return a.completedTechs.includes(c)})}).filter(function(c){return!a.hasUnlockedTechnology(c)})};v.prototype.completeTurn=function(){this.inventory.applyConversions(this.getResourceConversions());this.inventory.releaseWorkers();this.inventory.doPopulationGrowth();this.turnNumber++;this.updateQuestState()};v.prototype.increaseConversionPriority=function(a){if(0!=a.priority){var c=
this.getResourceConversions(),b=c.indexOf(a);-1!=b&&0!=b&&(c=c[b-1],0!=c.priority&&(b=$jscomp.makeIterator([c.priority,a.priority]),a.priority=b.next().value,c.priority=b.next().value))}};v.prototype.decreaseConversionPriority=function(a){if(0!=a.priority){var c=this.getResourceConversions(),b=c.indexOf(a);-1!=b&&b!=c.length-1&&(c=c[b+1],b=$jscomp.makeIterator([c.priority,a.priority]),a.priority=b.next().value,c.priority=b.next().value)}};var U=function(a,b){this.currentGame=a;this.worldScreen=b};
U.prototype.refresh=function(){this.currentGame.updateQuestState();this.worldScreen.refreshComponents()};U.prototype.addResource=function(a,b){this.currentGame.inventory.addResource(a,b);this.refresh()};U.prototype.addPopulation=function(a,b){this.currentGame.inventory.addWorkers(a,b);this.refresh()};var M=function(a,b){this.text=a;this.attribution=b};M.getRandomQuote=function(){return G.fromArray(this.QuotesList)};M.QuotesList=[new M("I am an example quote","Person McQuoteFace"),new M("Lorem ipsum dolor sit amet",
"Mx. Example"),new M(N($jscomp$templatelit$0),"Author Goes Here"),new M(N($jscomp$templatelit$1),"Name McNameFace")];var T=function(){this.html=b.makeDiv();this.loadingBar=b.makeDiv(["transition-loading-bar"]);this.loadingArea=b.makeDivContaining([this.loadingBar],["transition-loading-area"]);this.quote=M.getRandomQuote();var a=this.quote.text,d="\u00a0".repeat(4);a=a.replace(/\t/g,d);a=a.replace(/    /g,d);a=a.replace(/^(\s*)/,"$1\u201c")+"\u201d";b.fillHTML(this.html,[b.makeDivContaining([b.makePara(""+
a),b.makePara("-"+this.quote.attribution,["transition-attribution"])],["transition-quote-panel"]),this.loadingArea])};T.prototype.getHTML=function(){return this.html};T.prototype.startLoading=function(){var a=this;setTimeout(function(){return a.loadingArea.classList.add("loading")})};T.prototype.revealButton=function(){var a=this;setTimeout(function(){return a.loadingArea.classList.add("loaded")});setTimeout(function(){b.fillHTML(a.loadingArea,[b.makeButton("Continue",a.continueToNextTurn)])},750)};
T.prototype.continueToNextTurn=function(){q.showWorldScreen()};var H=function(a){this.run=a;this.html=b.makeDiv(["production-screen"]);this.refresh()};H.prototype.refresh=function(){var a=this,d=this.run.inventory.clone(),e=this.run.getResourceConversions().filter(function(a){return a.isFree()}),f=e.map(function(c){return a.renderConversion(c,!0,!1)});d.applyConversions(e);var g=this.run.getResourceConversions().filter(function(a){return!a.isFree()});e=[];g=$jscomp.makeIterator(g);for(var k=g.next();!k.done;k=
g.next())k=k.value,d.canAfford(k.inputs)&&d.hasEnoughWorkers(k.requiredWorkers)?(e.push(this.renderConversion(k,!0,!0)),d.applyConversions([k])):e.push(this.renderConversion(k,!1,!0));b.fillHTML(this.html,[b.makePara("Resource Production Report",["production-screen-label"]),b.makePara("Available workers at start of next production cycle: "+this.run.inventory.getAvailableWorkers(),["production-screen-label"]),b.makePara("Resources available at start of next production cycle:",["production-screen-label"]),
this.renderInventory(this.run.inventory),b.makePara("Resource generation in next production cycle:",["production-screen-label"]),b.makeDivContaining(f),b.makePara("Resource conversion in next production cycle:",["production-screen-label"]),b.makeDivContaining(e),b.makePara("Unused workers at end of next production cycle: "+d.getAvailableWorkers(),["production-screen-label"]),b.makePara("Resources available at end of next production cycle:",["production-screen-label"]),this.renderInventory(d),b.makeButton("Back",
function(){q.showWorldScreen()},["production-screen-back-button"])])};H.prototype.getHTML=function(){return this.html};H.prototype.renderInventory=function(a){a=a.getInventoryStrings().map(function(a){return b.makePara(a)});0==a.length&&a.push(b.makePara("(none)"));return b.makeDivContaining(a,["production-screen-inventory"])};H.prototype.renderConversion=function(a,d,e){var c=this,f=b.makeDiv(["flex-horizontal"]),g=a.toString(),h="conversion-description-normal";a.enabled?d||(g="(cannot afford) "+
a.toString(),h="conversion-description-cannot-afford"):(g="(disabled) "+a.toString(),h="conversion-description-disabled");f.appendChild(b.makeButton(g,function(){c.toggle(a)},[h,"conversion-description"]));e&&(f.appendChild(b.makeButton("Move Up",function(){return c.moveConversionUp(a)})),f.appendChild(b.makeButton("Move Down",function(){return c.moveConversionDown(a)})));return f};H.prototype.moveConversionUp=function(a){this.run.increaseConversionPriority(a);this.refresh()};H.prototype.moveConversionDown=
function(a){this.run.decreaseConversionPriority(a);this.refresh()};H.prototype.toggle=function(a){a.enabled=!a.enabled;this.refresh()};a=function(a,b){this.name=a;this.roles=b};var fa=[new a("Grace Rarer",["Team Lead","Gameplay Programmer"]),new a("Prindle",["DevOps"]),new a("May Lawver",["Programmer (HTML Composition Code)"])],ha=function(){};ha.render=function(){var a=fa.map(function(a){return b.makePara(a.name,["credits-name"])}),d=fa.map(function(a){return b.makePara(a.roles.join(", "),["credits-roles"])});
return b.makeDivContaining([b.makeHeader("Credits",1),b.makeDivContaining([b.makeDivContaining(a,["credits-names-column"]),b.makeDivContaining(d)],["credits-container"]),b.makeButton("Back",function(){return q.showMainMenu()})],["credits"])};var X=function(a){this.run=a;this.html=b.makeDiv();this.refresh()};X.prototype.getHTML=function(){return this.html};X.prototype.refresh=function(){var a=this,d=b.makeHeader("Available Research Projects"),e=this.run.getResearchOptions(),f=b.makeDivContaining(e.map(function(b){return a.renderTechOption(b)}));
0==e.length&&(d=b.makeDiv());e=b.makeHeader("Previous Research Projects");var g=this.run.getUnlockedTechnologies().filter(function(a){return a.visible}).map(function(a){return b.makePara(a.name)});0==g.length&&(e=b.makeDiv());var k=b.makeButton("Back",function(){q.showWorldScreen()},[]);b.fillHTML(this.html,[d,f,e].concat($jscomp.arrayFromIterable(g),[k]))};X.prototype.renderTechOption=function(a){for(var c=this,d=b.makeDivContaining([b.makePara(a.name),b.makePara(a.description),b.makePara("Development cost: "+
a.researchCost)]),e=0,f=$jscomp.makeIterator(a.requiredTechs),g=f.next();!g.done;g=f.next())g=g.value,this.run.hasUnlockedTechnology(g)||(e++,d.appendChild(b.makePara("Requires "+g.name+" research")));e=0==e&&this.run.inventory.canAfford([a.researchCost]);d.appendChild(b.makeButton("Conduct Research",function(){c.run.unlockTechnology(a);c.refresh()},[],!e));return d};var q=function(){};q.showMainMenu=function(){n();b.fillHTML(this.rootDiv,[z.renderMainMenu()])};q.showCredits=function(){n();b.fillHTML(this.rootDiv,
[ha.render()])};q.startGame=function(){this.currentRun=new v;this.showWorldScreen()};q.showWorldScreen=function(){var a=new Q(this.currentRun);b.fillHTML(this.rootDiv,[a.getHTML()]);m(this.currentRun,a);document.onkeydown=function(b){a.handleKeyDown(b)}};q.showProductionScreen=function(){n();var a=new H(this.currentRun);b.fillHTML(this.rootDiv,[a.getHTML()])};q.showResearchScreen=function(){n();var a=new X(this.currentRun);b.fillHTML(this.rootDiv,[a.getHTML()])};q.transitionToNextTurn=function(){n();
var a=new T;b.fillHTML(this.rootDiv,[a.getHTML()]);a.startLoading();this.currentRun.completeTurn();a.revealButton()};q.rootDiv=document.getElementById("rootdiv");window.onload=function(){console.log("Script Loaded");Promise.all(da).then(function(){q.showMainMenu()})}}]);}).call(this || window)
</script><script type="text/javascript">(function(){'use strict';}).call(this || window)
</script></body> </html> 