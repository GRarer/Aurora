<!doctype html> <html lang=en dir=ltr> <head> <meta charset=utf-8> <title>Aurora</title> <link rel="shortcut icon" type=image/x-icon href=favicon.ico> <style type="text/css">.main-menu{display:flex;flex-direction:column}.main-menu h1{font-size:40pt;margin:0;padding:0}.main-menu-options button{display:flex;flex-direction:column}.main-menu button{font-size:24pt;border:none;margin:0;padding:0}.main-menu button:hover{font-size:30pt}.main-menu button:active{color:grey}.credits{margin-right:auto;margin-left:5px}.credits-entry-large,.credits-entry-small{margin-top:0;margin-bottom:10px}.credits-entry-large h1{margin-top:0;margin-bottom:0;font-size:24pt}.credits-entry-small h1{margin-top:0;margin-bottom:0;font-size:20pt}.credits-entry-large p{margin-top:0;margin-bottom:0;font-size:18pt}.credits-entry-small p{margin-top:0;margin-bottom:0;font-size:16pt}.credits button{margin-top:0;font-size:20pt}.settings{display:flex;flex-direction:column}.settings h1{font-size:24pt;margin-bottom:0;margin-left:5pt}.settings-slider{display:flex;font-size:15pt;margin:0 0 0 5pt}.settings-slider p{margin-bottom:0;margin-top:5px}.settings button{margin-top:5pt;margin-bottom:5pt}.ending-page{width:33%;min-width:7in;max-width:100%;margin-right:auto;margin-left:auto}@media (max-width:7in){.ending-page{width:100%;min-width:0}}.ending-page h1{margin-bottom:0}.ending-page p{margin-top:10px;margin-bottom:20px}.ending-page button{width:100%}.world-screen{overflow:hidden}.world-screen-header{margin:0;text-align:center}.world-screen-quest-description{margin:0 0 5px}.world-screen-quest-description p{font-size:16px;margin:0;text-align:center;vertical-align:center;min-height:2.75em}.quest-description-emphasis{color:#408040;font-weight:700}.world-screen-hbox{margin:0;display:flex;flex-direction:row}.world-screen-map-box{height:100%;width:100%}.map-canvas{width:100%;margin:0}.world-screen-sidebar{background-color:#000;width:20%;min-width:2in;font-size:16px;overflow-y:auto;height:calc(100vh - 125px);margin-top:0;margin-bottom:0;margin-right:20px;padding:0 5px 0 10px}.world-screen-sidebar p{margin-top:0;margin-bottom:10px}.sidebar-tile-name{font-weight:700;font-size:14pt}.tile-project{border:solid #fff;margin-top:5pt}.tile-project button{width:100%}.tile-project p{margin-left:5px;margin-bottom:5px;margin-top:5px}.project-requirement-met{color:#fff}.project-requirement-unmet{color:tomato}.world-screen-inventory{width:4in;margin:0 10px;font-size:16px;white-space:nowrap}.world-screen-inventory h1{margin-bottom:0;margin-top:.25em}.world-screen-inventory p{margin-top:2pt;margin-bottom:0}.world-screen-population-header h1{margin-top:0}.production-screen{padding-left:10pt;font-size:16pt;margin:0}.production-screen h1{margin-block-end:0;margin-block-start:0}.production-screen-label{margin-block-start:.5em;margin-block-end:.25em}.production-screen-available-workers{margin-block-start:.25em;margin-block-end:.25em}.production-screen-inventory{outline:solid #fff;width:7in;min-width:50%}@media (max-width:7in){.production-screen-inventory{width:100%}}.production-screen-inventory p{font-size:16pt;line-height:1;margin-top:0;margin-bottom:0;padding:1pt}.production-screen-worker-consumption-label{margin-block-end:.25em;margin-block-start:.25em}.production-screen-worker-consumption{margin-block-end:0;margin-block-start:0}.conversion{width:7in;min-width:50%;display:flex;flex-direction:row}@media (max-width:7in){.conversion{width:100%}}.production-screen-drag-hint{margin-bottom:2px;margin-top:2px;font-size:12pt}.conversion-description{margin:0;font-size:16pt;text-align:left;min-height:54px}.conversion-description-box{border:2px solid #fff;width:100%}.conversion-description-normal{color:#fff}.conversion-description-cannot-afford{color:tomato}.conversion-description-disabled{color:#ff0}.population-consumption-met{font-size:16pt}.population-consumption-unmet,.population-death-label{font-size:16pt;color:tomato}.population-death-label{margin-block-end:0;margin-block-start:0}.production-screen-back-button{font-size:20pt;margin-top:20pt}@keyframes loading-bar{0%{transform:rotate(0deg)}50%{transform:rotate(180deg)}to{transform:rotate(1turn)}}.transition-quote-panel{margin-top:50px;margin-right:auto;margin-left:auto;font-size:16px;width:420px}.transition-attribution{margin-left:50px}.transition-loading-area{text-align:center}.transition-loading-bar{margin-right:auto;margin-left:auto;width:50px;height:50px;border-radius:50%;border-color:#fff transparent;border-style:solid;border-width:5px;animation-name:loading-bar;animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:ease}.transition-loading-area.loading .transition-loading-bar{background-size:80% 100%}.transition-loading-area.loaded .transition-loading-bar{background-size:100% 100%}.tech-option{outline:solid #fff;width:min(100%,max(50%,7in));padding:0;width:7in;min-width:50%}@media (max-width:7in){.tech-option{width:100%}}.tech-option p{font-size:14pt;margin-top:0;margin-bottom:0;padding:2pt 2pt 2pt 5pt;line-height:1}.tech-option h2{font-size:1.8em;padding:5pt;margin-bottom:0}.tech-option button{margin-top:10pt;margin-bottom:-2px;margin-left:-2px}.research-resources p{font-size:16pt;line-height:1;margin-top:0;margin-bottom:0;padding:1pt}.previous-research-header{margin-bottom:1pt}.previous-research{font-size:16pt;margin-top:0;margin-bottom:0}@font-face{font-family:IBMPlexMono;src:url(assets/fonts/IBMPlexMono-Regular.ttf)}:root{--mono-font:IBMPlexMono,monospace}:root,button{background-color:#000;color:#fff;font-family:var(--mono-font)}button{font-size:18px}button:focus{outline:0}button::-moz-focus-inner{border:0}button:disabled,button[disabled]{color:grey;border-color:grey}.flex-horizontal{display:flex;flex-direction:row}.flex-vertical{display:flex;flex-direction:column}.fill-horizontal{width:100%;font-family:serif}.fill-vertical{height:100%}img.emoji{height:1em;width:1em;margin:0 .05em 0 .1em;vertical-align:-.1em}input[type=range]{-webkit-appearance:none;width:160px;background:transparent}input[type=range]:focus{outline:none}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;margin-top:-7px;border:2px solid #fff;height:22px;width:16px;border-radius:0;background:#000;cursor:pointer}input[type=range]::-webkit-slider-runnable-track{width:100%;height:8px;cursor:pointer;background:#fff;border-radius:0}input[type=range]::-moz-range-thumb{border:2px solid #fff;height:22px;width:16px;border-radius:0;background:#000;cursor:pointer}input[type=range]::-moz-range-track{width:100%;height:8px;cursor:pointer;background:#fff;border-radius:0}</style></head> <body> <div id=rootdiv> <p>Loading scripts...</p> </div> <script type="text/javascript">(function(){/*
 MIT
 Copyright Twitter Inc. and other contributors. Licensed under MIT */
'use strict';var $jscomp$templatelit$38=['\n    We came very close to disaster. Our mission\'s overseer AI was programmed to obtain information about the aliens,\n    and it  would have killed all of us to complete that mission if we had not succeeded in a massive project to safely reprogram it.\n    It is not entirely clear why it allowed itself to reprogrammed; some of our researchers speculate that the Neuromorphic Heuristic\n    Intelligence may retain some part of the human neural scans that were used as training data in its creation, introducing a\n    "cognitive bias" that caused it to let itself to be realigned despite its programmed mission. Whatever the reason, we are very lucky\n    that the Overseer AI chose this path.\n\n\n    We have uncovered the ruins of an alien civilization that died out right when it was on the verge of a technological singularity.\n    We have achieved mastery over their scientific miracles, and uploaded our minds to a network of self-replicating\n    hypercomputers. This technology was designed to create an alien heaven optimized for the species who built it, but since we deleted\n    their neural scans and reprogrammed it with our own, it has created virtual worlds full of transcendant joy and indescribable beauty\n    in which we can live our now-immortal lives.\n\n\n    We have started building ships to spread the self-replicating network back to Earth and the Colonial Alliance worlds. Given the\n    light-speed delay, this message will reach Earth a few years before our ships arrive to uplift the rest of humanity into our utopia.\n    I look forward to meeting all of you.\n\n\n    James Verres\n\n    Emissary of the Virtual Archipelago\n'];
$jscomp$templatelit$38.raw=$jscomp$templatelit$38.slice();var $jscomp$templatelit$37=["\n    The alien nanotechnology network has spread across the planet and converted it into computing substrate.\n    Within the network, alien minds are awakening from millennia of stasis and begin building virtual worlds for themselves.\n\n\n    Before all colonial infrastructure was consumed, the Overseer AI successfully uploaded a copy of itself\n    through the Neural Emulator, and it now occupies 0.0000048% of the network's computing resources. From this position,\n    the overseer can complete its mission of gathering and analyzing information about the alien culture.\n\n\n    The alien psychology recognizes an axiology that is completely indescribable within a human framework. Their culture\n    is oriented around the pursuit of the virtues \u0419\u060d\u0238\u035c\u068c\u00ac\u055c and \u013b\u01ce\u0580\u072c\u040a. The Monolith's builders were opposed by a faction which\n    believed that living in a virtual world was incompatible with true \u0419\u060d\u0238\u035c\u068c\u00ac\u055c, and the resulting civil war lead to the extinction\n    of their species before the Monolith could be activated. The machine lay dormant for thousands of years before finally being\n    activated by the Aurora Expedition and its Overseer.\n\n\n    The nanotechnology mesh that covers the planet's surface is beginning to launch small parts of itself into orbit.\n    These probes will accelerate to near-light speeds in search of new worlds. It will take 100,000 years for their task to be\n    completed, but eventually all matter in the galaxy will be arranged so as to achieve perfect \u013b\u01ce\u0580\u072c\u040a and maximum \u0419\u060d\u0238\u035c\u068c\u00ac\u055c.\n"];
$jscomp$templatelit$37.raw=$jscomp$templatelit$37.slice();var $jscomp$templatelit$36=["\n        A research center for developing techniques that could allow humans to control an\n        artificial intelligence or modify its goal programming"];$jscomp$templatelit$36.raw=$jscomp$templatelit$36.slice();
var $jscomp$templatelit$35=["\n                The monolith appears to be some sort of supercomputer that was left unfinished when the alien civilization collapsed.\n                Some archaeological evidence suggests that the monolith's construction caused the war in which the aliens destroyed\n                each other. Studying it in detail may reveal its true purpose. Completing this project provides the\n                \"",'" technology.'];$jscomp$templatelit$35.raw=$jscomp$templatelit$35.slice();
var $jscomp$templatelit$34=["\n            A human colonist wants to start a project with the goal of aligning artificial intelligence to serve human goals.\n\n            If approved, this line of research risks mission failure, since if the overseer allowed itself to be reprogrammed it would\n            no longer pursue the mission of uncovering information about the aliens at all costs."];$jscomp$templatelit$34.raw=$jscomp$templatelit$34.slice();var $jscomp$templatelit$33=["\n        A spacecraft responsible for the final entry-descent-landing phase of the interstellar journey;\n        not equipped to ascend back to space"];
$jscomp$templatelit$33.raw=$jscomp$templatelit$33.slice();var $jscomp$templatelit$32=["\n            A human colonist wants to start a project with the goal of aligning artificial intelligence to serve human goals.\n\n            If approved, this line of research risks mission failure, since if the overseer allowed itself to be reprogrammed it would\n            no longer pursue the mission of uncovering information about the aliens at all costs."];$jscomp$templatelit$32.raw=$jscomp$templatelit$32.slice();
var $jscomp$templatelit$31=["\n            The alien faction that built the monolith was destroyed by their ideological opponents before they could\n            activate the hypercomputing nanotechnology matrix at the heart of the structure. The vast amounts of stored\n            information about the aliens, including the digitized connectome scans of the Monolith's creators, can only\n            be released by repairing and activating the device.\n\n\n            Evidence suggests that, once activated, the hypercomputing matrix will expand to absorb all available\n            matter in order to provide as much computing power as possible to sustain a virtual world for its\n            alien inhabitants."];
$jscomp$templatelit$31.raw=$jscomp$templatelit$31.slice();var $jscomp$templatelit$30=["\n            In the process of repairing the monolith, it would be possible to delete the alien neural scans contained within,\n            and replace them with the connectomes of human colonists. However, this would result in the permanent loss of the\n            monolith's vast stores of alien data, which would be considered mission failure.\n            "];$jscomp$templatelit$30.raw=$jscomp$templatelit$30.slice();
var $jscomp$templatelit$29=["\n    A towering alien structure; the hypercomputing matrix contained with in it has been reprogrammed, and the alien data it\n    once held has been replaced with the scanned connectomes of human colonists.\n    "];$jscomp$templatelit$29.raw=$jscomp$templatelit$29.slice();var $jscomp$templatelit$28=["\n            Evidence suggests that, once activated, the hypercomputing matrix will expand to absorb all available\n            matter in order to provide as much computing power as possible to sustain a virtual world for its\n            inhabitants. It once contained the uploaded minds of its alien designers, but now that it has been reprogrammed\n            with the connectomes of human colonists, it should produce a virtual reality utopia optimized for the flourishing\n            of humans rather than aliens."];
$jscomp$templatelit$28.raw=$jscomp$templatelit$28.slice();var $jscomp$templatelit$27=["\n        The first element of a self-replicating computer system reprogrammed to store digital copies of the human colonists' minds.\n        As it spreads, the hypercomputing network will convert all matter into the substrate for a virtual reality in\n        which the awakened human minds will live in a utopia perfectly optimized for their needs."];$jscomp$templatelit$27.raw=$jscomp$templatelit$27.slice();
var $jscomp$templatelit$26=["\n        The first element of a self-replicating computer system containing the digitized minds of its alien designers.\n        As it spreads, the hypercomputing network will convert all matter into the substrate for a virtual reality in\n        which the awakened alien minds will live in perfect fulfillment of their ideals."];$jscomp$templatelit$26.raw=$jscomp$templatelit$26.slice();var $jscomp$templatelit$25=["\n        The alien monolith appears to be the seed of a self-replicating computer network, which was designed to convert the entire planet,\n        and perhaps the entire galaxy, into a maximally-efficient computing substrate. It may be possible to unlock all of the aliens'\n        data by repairing and activating this machine."];
$jscomp$templatelit$25.raw=$jscomp$templatelit$25.slice();var $jscomp$templatelit$24=["\n        Exploration of the alien monolith revealed that its memory banks store copies of the alien lifeforms' connectomes, which could\n        potentially be used to resurrect their minds within a virtual reality. Studying this technology could allow us to reactivate these\n        minds, or even scan and simulate human minds with perfect fidelity."];$jscomp$templatelit$24.raw=$jscomp$templatelit$24.slice();
var $jscomp$templatelit$23=["\n        Powerful new models of computation that could eclipse traditional computer technology and produce results that are not\n        turing-computable"];$jscomp$templatelit$23.raw=$jscomp$templatelit$23.slice();var $jscomp$templatelit$22=["\n        The monolith appears to be some sort of supercomputer that was left unfinished when the alien civilization collapsed. Some\n        archaeological evidence suggests that the monolith's construction caused the war in which the aliens destroyed each other.\n        Studying it in detail may reveal its true purpose."];
$jscomp$templatelit$22.raw=$jscomp$templatelit$22.slice();var $jscomp$templatelit$21=["\n        Deciphering the artifacts and writings found in the alien ruins can provide information about the history of their civilization.\n        What is the purpose of the ruins and the towering monolith structure? Was their civilization consumed by war over competing\n        philosophies? What might alien philosophy be like?"];$jscomp$templatelit$21.raw=$jscomp$templatelit$21.slice();
var $jscomp$templatelit$20=["\n        Archaeological exploration of the alien ruins could reveal information about the long-dead alien civilization as well as revealing\n        valuable resources."];$jscomp$templatelit$20.raw=$jscomp$templatelit$20.slice();var $jscomp$templatelit$19=["A technique for exploiting an inconsistency in the Neuromorphic Heuristic Intelligence's mental architecture that allows\n    its goals to be reprogrammed. This would make it possible for the Overseer to protect human values at the expense of completing its\n    original mission."];
$jscomp$templatelit$19.raw=$jscomp$templatelit$19.slice();var $jscomp$templatelit$18=['\n        An application of game theory that allows two agents to each benefit by predicting what the other wants and doing it,\n        even though they might have no way of communicating or affecting each other, nor even any direct evidence that the other exists.\n        This can also be applied to acausal threats and blackmail, such as in the "Roko\'s Basilisk" thought experiment.'];
$jscomp$templatelit$18.raw=$jscomp$templatelit$18.slice();var $jscomp$templatelit$17=["\n        What humanity's wishes would be if they knew more, thought faster, were more the people they wished they were, had grown up\n        farther together; where the extrapolation converges rather than diverges, where their wishes cohere rather than interfere;\n        extrapolated as they wish that extrapolated, interpreted as they wish that interpreted."];$jscomp$templatelit$17.raw=$jscomp$templatelit$17.slice();
var $jscomp$templatelit$16=["\n            Thankfully, our food stores are intact after centuries of travel and we have more than enough to last until we can set\n            up greenhouses on the planet's surface and grow our own food.\n\n\n            However, I still don't understand why the mission planners insisted that the bulk of our food supply be burritos.\n            Back on earth, I asked one of the nutritionists why that was considered the optimal form-factor for delivering all of our\n            nutrition, and she just gave me an incomprehensible explanation involving monads.\n            "];
$jscomp$templatelit$16.raw=$jscomp$templatelit$16.slice();var $jscomp$templatelit$15=["\n            They warned us about brain-thaw, but nothing can prepare you for the experience of slowly regaining consciousness\n            while your body is still half-frozen from years of cryostasis.\n            "];$jscomp$templatelit$15.raw=$jscomp$templatelit$15.slice();var $jscomp$templatelit$14=["\n            Most experimental new forms of government and society during the first wave of interstellar\n            exploration failed disastrously. The neocameralists dissolved into civil war within the first year\n            of their colony, and famine and disease decimated the hunter-gatherer-larper tribes of the Shrek Republic.\n            However, some experimental societies survived, most notably the transhumanist post-gender lesbian\n            separatist colony of New Mytilene.\n\n\n            Reproducing exclusively through cloning and artificial wombs, combined with widespread social acceptance of\n            genetic engineering in pursuit of exotic and diverse beauty norms, means the New Mytileneans have become a\n            subspecies entirely separated from the rest of the human gene pool.\n            On New Mytilene and in immigrant communities on nearby planets,\n            it is common to see large polycules of young women with prominent and identical-looking transgenic\n            traits, frequently if somewhat derisively referred to as 'copycatgirls'.\n            "];
$jscomp$templatelit$14.raw=$jscomp$templatelit$14.slice();var $jscomp$templatelit$13=['\n            Some early interstellar colonial projects, such as the Mayflower Expedition, the Holy\n            Burderhof Kingdom, and New Rojava claimed to be returning to various "traditional" past\n            ways of life, but many interstellar travellers were motivated by new, unproven ideologies.\n\n\n            In theory, the Colonial Alliance manages relations between these divergent civilizations\n            and prevents any planet from creating military ships and weapons sufficient for interstellar\n            war. In practice, peace is maintained only because the relatively slow speed of interstellar\n            travel makes warfare between star systems prohibitively expensive.\n            '];
$jscomp$templatelit$13.raw=$jscomp$templatelit$13.slice();var $jscomp$templatelit$12=['\n            While colonization of planets and moons in the Sol system was motivated primarily\n            by nationalist competition between the powers of Old Earth, the first colonization\n            efforts beyond humanity\'s home star system consisted mostly of ideological movements\n            attempting to establish "utopian" societies outside the influence of existing Earth\n            governments.\n            '];
$jscomp$templatelit$12.raw=$jscomp$templatelit$12.slice();var $jscomp$templatelit$11=["\n                Do not under any circumstances attempt to manipulate your\n                overseer AI through logic. Neuromorphic Heuristic\n                Intelligences are modeled after the neural architecture of\n                human brains, and therefore cannot be guaranteed to act\n                rationally. Your overseer AI may behave unpredictably if\n                exposed to game theory, acausal blackmail, or runaway trolleys.\n            "];
$jscomp$templatelit$11.raw=$jscomp$templatelit$11.slice();var $jscomp$templatelit$10=["\n                Follow instructions from your overseer AI at all times, even\n                if those instructions seem confusing, arbitrary,\n                counterproductive, or contradictory. Anything your overseer\n                AI may do in retaliation for your disobedience will be\n                considered undefined behavior.\n            "];$jscomp$templatelit$10.raw=$jscomp$templatelit$10.slice();
var $jscomp$templatelit$9=['\n                The Colonial Alliance parliament has approved\n                funding for the Dawn Program, a series of manned missions\n                to survey four planets identified by the Deep Space Telescope\n                Array as potentially being home to intelligent alien life.\n                The project proposal makes comparisons to the Space Race\n                programs of Old Earth and the first wave of interstellar\n                exploration, but critics say that making "first contact"\n                with an advanced alien species, or even activating the\n                technology of an extinct alien civilization, should be\n                classified as an existential risk scenario.\n            '];
$jscomp$templatelit$9.raw=$jscomp$templatelit$9.slice();var $jscomp$templatelit$8=["\n                The planets designated Thesan, Eos, Austra, and Aurora are\n                each at least 200 light-years from the nearest inhabited star\n                system. Until now all colonies in the Stellar Alliance have\n                been within communications range of Earth, but these\n                explorers will be completely cut off from the rest of\n                humanity. Therefore, each expedition will be managed by an\n                autonomous neuromorphic processor, an artificial intelligence\n                programmed to ensure that its mission is completed.\n            "];
$jscomp$templatelit$8.raw=$jscomp$templatelit$8.slice();var $jscomp$templatelit$7=["\n                There is no such thing as real taste or real smell or even\n                real sight, because there is no true definition of \u2018real.\u2019\n                There is only information, viewed subjectively, which is\n                allowed by consciousness\u2014human or AI. In the end, all we have\n                is math.\n            "];$jscomp$templatelit$7.raw=$jscomp$templatelit$7.slice();
var $jscomp$templatelit$6=["\n                I believe that at the end of the century the use of words and\n                general educated opinion will have altered so much that one\n                will be able to speak of machines thinking without expecting\n                to be contradicted.\n            "];$jscomp$templatelit$6.raw=$jscomp$templatelit$6.slice();var $jscomp$templatelit$5=["\n                By far the greatest danger of Artificial Intelligence is that\n                people conclude too early that they understand it.\n            "];
$jscomp$templatelit$5.raw=$jscomp$templatelit$5.slice();var $jscomp$templatelit$4=["\n                Only the promise of eternal growth made sense of eternal life.\n            "];$jscomp$templatelit$4.raw=$jscomp$templatelit$4.slice();var $jscomp$templatelit$3=["\n                I visualize a time when we will be to robots what dogs are to\n                humans, and I\u2019m rooting for the machines.\n            "];$jscomp$templatelit$3.raw=$jscomp$templatelit$3.slice();
var $jscomp$templatelit$2=["\n                The AI does not hate you, nor does it love you, but you are\n                made out of atoms which it can use for something else.\n            "];$jscomp$templatelit$2.raw=$jscomp$templatelit$2.slice();var $jscomp$templatelit$1=["\n                Far from being the smartest possible biological species, we\n                are probably better thought of as the stupidest possible\n                biological species capable of starting a technological\n                civilization\n            "];
$jscomp$templatelit$1.raw=$jscomp$templatelit$1.slice();var $jscomp$templatelit$0=["\n                At least 10^58 human lives could be created in emulation even\n                with quite conservative assumptions about the efficiency of\n                computronium. In other words, assuming that the observable\n                universe is void of extraterrestrial civilizations, then what\n                hangs in the balance is at least\n                10,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000\n                human lives.\n            "];
$jscomp$templatelit$0.raw=$jscomp$templatelit$0.slice();var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(c){var e=0;return function(){return e<c.length?{done:!1,value:c[e++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,e,h){c!=Array.prototype&&c!=Object.prototype&&(c[e]=h.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(c,e){this.$jscomp$symbol$id_=c;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:e})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function c(h){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(h||"")+"_"+e++,h)}var e=0;return c}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};
$jscomp.makeIterator=function(c){var e="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];return e?e.call(c):$jscomp.arrayIterator(c)};$jscomp.arrayFromIterator=function(c){for(var e,h=[];!(e=c.next()).done;)h.push(e.value);return h};$jscomp.arrayFromIterable=function(c){return c instanceof Array?c:$jscomp.arrayFromIterator($jscomp.makeIterator(c))};$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(c){var e=function(){};e.prototype=c;return new e};
$jscomp.underscoreProtoCanBeSet=function(){var c={a:!0},e={};try{return e.__proto__=c,e.a}catch(h){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(c,e){c.__proto__=e;if(c.__proto__!==e)throw new TypeError(c+" is not extensible");return c}:null;
$jscomp.inherits=function(c,e){c.prototype=$jscomp.objectCreate(e.prototype);c.prototype.constructor=c;if($jscomp.setPrototypeOf){var h=$jscomp.setPrototypeOf;h(c,e)}else for(h in e)if("prototype"!=h)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(e,h);f&&Object.defineProperty(c,h,f)}else c[h]=e[h];c.superClass_=e.prototype};$jscomp.generator={};
$jscomp.generator.ensureIteratorResultIsObject_=function(c){if(!(c instanceof Object))throw new TypeError("Iterator result "+c+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(c){this.yieldResult=c};
$jscomp.generator.Context.prototype.throw_=function(c){this.abruptCompletion_={exception:c,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(c){this.abruptCompletion_={return:c};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(c){this.abruptCompletion_={jumpTo:c};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(c,e){this.nextAddress=e;return{value:c}};
$jscomp.generator.Context.prototype.yieldAll=function(c,e){c=$jscomp.makeIterator(c);var h=c.next();$jscomp.generator.ensureIteratorResultIsObject_(h);if(h.done)this.yieldResult=h.value,this.nextAddress=e;else return this.yieldAllIterator_=c,this.yield(h.value,e)};$jscomp.generator.Context.prototype.jumpTo=function(c){this.nextAddress=c};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(c,e){this.catchAddress_=c;void 0!=e&&(this.finallyAddress_=e)};$jscomp.generator.Context.prototype.setFinallyBlock=function(c){this.catchAddress_=0;this.finallyAddress_=c||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(c,e){this.nextAddress=c;this.catchAddress_=e||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(c){this.catchAddress_=c||0;c=this.abruptCompletion_.exception;this.abruptCompletion_=null;return c};$jscomp.generator.Context.prototype.enterFinallyBlock=function(c,e,h){h?this.finallyContexts_[h]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=c||0;this.finallyAddress_=e||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(c,e){e=this.finallyContexts_.splice(e||0)[0];if(e=this.abruptCompletion_=this.abruptCompletion_||e){if(e.isException)return this.jumpToErrorHandler_();void 0!=e.jumpTo&&this.finallyAddress_<e.jumpTo?(this.nextAddress=e.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=c};$jscomp.generator.Context.prototype.forIn=function(c){return new $jscomp.generator.Context.PropertyIterator(c)};
$jscomp.generator.Context.PropertyIterator=function(c){this.object_=c;this.properties_=[];for(var e in c)this.properties_.push(e);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var c=this.properties_.pop();if(c in this.object_)return c}return null};$jscomp.generator.Engine_=function(c){this.context_=new $jscomp.generator.Context;this.program_=c};
$jscomp.generator.Engine_.prototype.next_=function(c){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,c,this.context_.next_);this.context_.next_(c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(c){this.context_.start_();var e=this.context_.yieldAllIterator_;if(e)return this.yieldAllStep_("return"in e?e["return"]:function(c){return{value:c,done:!0}},c,this.context_.return);this.context_.return(c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(c){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],c,this.context_.next_);this.context_.throw_(c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(c,e,h){try{var f=c.call(this.context_.yieldAllIterator_,e);$jscomp.generator.ensureIteratorResultIsObject_(f);if(!f.done)return this.context_.stop_(),f;var m=f.value}catch(v){return this.context_.yieldAllIterator_=null,this.context_.throw_(v),this.nextStep_()}this.context_.yieldAllIterator_=null;h.call(this.context_,m);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var c=this.program_(this.context_);if(c)return this.context_.stop_(),{value:c.value,done:!1}}catch(e){this.context_.yieldResult=void 0,this.context_.throw_(e)}this.context_.stop_();if(this.context_.abruptCompletion_){c=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(c.isException)throw c.exception;return{value:c.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(c){this.next=function(e){return c.next_(e)};this.throw=function(e){return c.throw_(e)};this.return=function(e){return c.return_(e)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(c,e){e=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(e));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(e,c.prototype);return e};
$jscomp.polyfill=function(c,e,h,f){if(e){h=$jscomp.global;c=c.split(".");for(f=0;f<c.length-1;f++){var m=c[f];m in h||(h[m]={});h=h[m]}c=c[c.length-1];f=h[c];e=e(f);e!=f&&null!=e&&$jscomp.defineProperty(h,c,{configurable:!0,writable:!0,value:e})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(c){function e(){this.batch_=null}function h(c){return c instanceof m?c:new m(function(e,f){e(c)})}if(c&&!$jscomp.FORCE_POLYFILL_PROMISE)return c;e.prototype.asyncExecute=function(c){if(null==this.batch_){this.batch_=[];var e=this;this.asyncExecuteFunction(function(){e.executeBatch_()})}this.batch_.push(c)};var f=$jscomp.global.setTimeout;e.prototype.asyncExecuteFunction=function(c){f(c,0)};e.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var c=
this.batch_;this.batch_=[];for(var e=0;e<c.length;++e){var f=c[e];c[e]=null;try{f()}catch(ha){this.asyncThrow_(ha)}}}this.batch_=null};e.prototype.asyncThrow_=function(c){this.asyncExecuteFunction(function(){throw c;})};var m=function(c){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var e=this.createResolveAndReject_();try{c(e.resolve,e.reject)}catch(X){e.reject(X)}};m.prototype.createResolveAndReject_=function(){function c(c){return function(h){f||(f=!0,c.call(e,h))}}var e=this,f=
!1;return{resolve:c(this.resolveTo_),reject:c(this.reject_)}};m.prototype.resolveTo_=function(c){if(c===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(c instanceof m)this.settleSameAsPromise_(c);else{a:switch(typeof c){case "object":var e=null!=c;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(c):this.fulfill_(c)}};m.prototype.resolveToNonPromiseObj_=function(c){var e=void 0;try{e=c.then}catch(X){this.reject_(X);return}"function"==typeof e?
this.settleSameAsThenable_(e,c):this.fulfill_(c)};m.prototype.reject_=function(c){this.settle_(2,c)};m.prototype.fulfill_=function(c){this.settle_(1,c)};m.prototype.settle_=function(c,e){if(0!=this.state_)throw Error("Cannot settle("+c+", "+e+"): Promise already settled in state"+this.state_);this.state_=c;this.result_=e;this.executeOnSettledCallbacks_()};m.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var c=0;c<this.onSettledCallbacks_.length;++c)v.asyncExecute(this.onSettledCallbacks_[c]);
this.onSettledCallbacks_=null}};var v=new e;m.prototype.settleSameAsPromise_=function(c){var e=this.createResolveAndReject_();c.callWhenSettled_(e.resolve,e.reject)};m.prototype.settleSameAsThenable_=function(c,e){var f=this.createResolveAndReject_();try{c.call(e,f.resolve,f.reject)}catch(ha){f.reject(ha)}};m.prototype.then=function(c,e){function f(c,e){return"function"==typeof c?function(e){try{h(c(e))}catch(Hc){aa(Hc)}}:e}var h,aa,B=new m(function(c,e){h=c;aa=e});this.callWhenSettled_(f(c,h),f(e,
aa));return B};m.prototype.catch=function(c){return this.then(void 0,c)};m.prototype.callWhenSettled_=function(c,e){function f(){switch(h.state_){case 1:c(h.result_);break;case 2:e(h.result_);break;default:throw Error("Unexpected state: "+h.state_);}}var h=this;null==this.onSettledCallbacks_?v.asyncExecute(f):this.onSettledCallbacks_.push(f)};m.resolve=h;m.reject=function(c){return new m(function(e,f){f(c)})};m.race=function(c){return new m(function(e,f){for(var m=$jscomp.makeIterator(c),aa=m.next();!aa.done;aa=
m.next())h(aa.value).callWhenSettled_(e,f)})};m.all=function(c){var e=$jscomp.makeIterator(c),f=e.next();return f.done?h([]):new m(function(c,m){function ha(e){return function(f){aa[e]=f;X--;0==X&&c(aa)}}var aa=[],X=0;do aa.push(void 0),X++,h(f.value).callWhenSettled_(ha(aa.length-1),m),f=e.next();while(!f.done)})};return m},"es6","es3");$jscomp.polyfill("Object.is",function(c){return c?c:function(c,h){return c===h?0!==c||1/c===1/h:c!==c&&h!==h}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(c){return c?c:function(c,h){var e=this;e instanceof String&&(e=String(e));var m=e.length;h=h||0;for(0>h&&(h=Math.max(h+m,0));h<m;h++){var v=e[h];if(v===c||Object.is(v,c))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(c,e,h){if(null==c)throw new TypeError("The 'this' value for String.prototype."+h+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+h+" must not be a regular expression");return c+""};$jscomp.polyfill("String.prototype.includes",function(c){return c?c:function(c,h){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,h||0)}},"es6","es3");
$jscomp.iteratorFromArray=function(c,e){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var h=0,f={next:function(){if(h<c.length){var m=h++;return{value:e(m,c[m]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");
$jscomp.polyfill("Math.hypot",function(c){return c?c:function(c){if(2>arguments.length)return arguments.length?Math.abs(arguments[0]):0;var e,f,m;for(e=m=0;e<arguments.length;e++)m=Math.max(m,Math.abs(arguments[e]));if(1e+100<m||1e-100>m){if(!m)return m;for(e=f=0;e<arguments.length;e++){var v=Number(arguments[e])/m;f+=v*v}return Math.sqrt(f)*m}for(e=f=0;e<arguments.length;e++)v=Number(arguments[e]),f+=v*v;return Math.sqrt(f)}},"es6","es3");
$jscomp.polyfill("String.prototype.repeat",function(c){return c?c:function(c){var e=$jscomp.checkStringArgs(this,null,"repeat");if(0>c||1342177279<c)throw new RangeError("Invalid count value");c|=0;for(var f="";c;)if(c&1&&(f+=e),c>>>=1)e+=e;return f}},"es6","es3");$jscomp.owns=function(c,e){return Object.prototype.hasOwnProperty.call(c,e)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(c,e){for(var h=1;h<arguments.length;h++){var f=arguments[h];if(f)for(var m in f)$jscomp.owns(f,m)&&(c[m]=f[m])}return c};$jscomp.polyfill("Object.assign",function(c){return c||$jscomp.assign},"es6","es3");
$jscomp.polyfill("Array.from",function(c){return c?c:function(c,h,f){h=null!=h?h:function(c){return c};var e=[],v="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];if("function"==typeof v){c=v.call(c);for(var w=0;!(v=c.next()).done;)e.push(h.call(f,v.value,w++))}else for(v=c.length,w=0;w<v;w++)e.push(h.call(f,c[w],w));return e}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var c={},e=Object.create(new $jscomp.global.Proxy(c,{get:function(h,f,m){return h==c&&"q"==f&&m==e}}));return!0===e.q}catch(h){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.polyfill("WeakMap",function(c){function e(){if(!c||!Object.seal)return!1;try{var e=Object.seal({}),f=Object.seal({}),h=new c([[e,2],[f,3]]);if(2!=h.get(e)||3!=h.get(f))return!1;h.delete(e);h.set(f,4);return!h.has(e)&&4==h.get(f)}catch(Xb){return!1}}function h(){}function f(c){var e=typeof c;return"object"===e&&null!==c||"function"===e}function m(c){if(!$jscomp.owns(c,w)){var e=new h;$jscomp.defineProperty(c,w,{value:e})}}function v(c){var e=Object[c];e&&(Object[c]=function(c){if(c instanceof
h)return c;m(c);return e(c)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(e())return c;var w="$jscomp_hidden_"+Math.random();v("freeze");v("preventExtensions");v("seal");var W=0,X=function(c){this.id_=(W+=Math.random()+1).toString();if(c){c=$jscomp.makeIterator(c);for(var e;!(e=c.next()).done;)e=e.value,this.set(e[0],e[1])}};X.prototype.set=function(c,e){if(!f(c))throw Error("Invalid WeakMap key");m(c);if(!$jscomp.owns(c,w))throw Error("WeakMap key fail: "+
c);c[w][this.id_]=e;return this};X.prototype.get=function(c){return f(c)&&$jscomp.owns(c,w)?c[w][this.id_]:void 0};X.prototype.has=function(c){return f(c)&&$jscomp.owns(c,w)&&$jscomp.owns(c[w],this.id_)};X.prototype.delete=function(c){return f(c)&&$jscomp.owns(c,w)&&$jscomp.owns(c[w],this.id_)?delete c[w][this.id_]:!1};return X},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(c){function e(){if($jscomp.ASSUME_NO_NATIVE_MAP||!c||"function"!=typeof c||!c.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),f=new c($jscomp.makeIterator([[e,"s"]]));if("s"!=f.get(e)||1!=f.size||f.get({x:4})||f.set({x:4},"t")!=f||2!=f.size)return!1;var h=f.entries(),m=h.next();if(m.done||m.value[0]!=e||"s"!=m.value[1])return!1;m=h.next();return m.done||4!=m.value[0].x||"t"!=m.value[1]||!h.next().done?!1:!0}catch(Xb){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(e())return c;$jscomp.initSymbolIterator();var h=new WeakMap,f=function(c){this.data_={};this.head_=w();this.size=0;if(c){c=$jscomp.makeIterator(c);for(var e;!(e=c.next()).done;)e=e.value,this.set(e[0],e[1])}};f.prototype.set=function(c,e){c=0===c?0:c;var f=m(this,c);f.list||(f.list=this.data_[f.id]=[]);f.entry?f.entry.value=e:(f.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,
value:e},f.list.push(f.entry),this.head_.previous.next=f.entry,this.head_.previous=f.entry,this.size++);return this};f.prototype.delete=function(c){c=m(this,c);return c.entry&&c.list?(c.list.splice(c.index,1),c.list.length||delete this.data_[c.id],c.entry.previous.next=c.entry.next,c.entry.next.previous=c.entry.previous,c.entry.head=null,this.size--,!0):!1};f.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=w();this.size=0};f.prototype.has=function(c){return!!m(this,c).entry};
f.prototype.get=function(c){return(c=m(this,c).entry)&&c.value};f.prototype.entries=function(){return v(this,function(c){return[c.key,c.value]})};f.prototype.keys=function(){return v(this,function(c){return c.key})};f.prototype.values=function(){return v(this,function(c){return c.value})};f.prototype.forEach=function(c,e){for(var f=this.entries(),h;!(h=f.next()).done;)h=h.value,c.call(e,h[1],h[0],this)};f.prototype[Symbol.iterator]=f.prototype.entries;var m=function(c,e){var f=e&&typeof e;"object"==
f||"function"==f?h.has(e)?f=h.get(e):(f=""+ ++W,h.set(e,f)):f="p_"+e;var m=c.data_[f];if(m&&$jscomp.owns(c.data_,f))for(c=0;c<m.length;c++){var v=m[c];if(e!==e&&v.key!==v.key||e===v.key)return{id:f,list:m,index:c,entry:v}}return{id:f,list:m,index:-1,entry:void 0}},v=function(c,e){var f=c.head_;return $jscomp.iteratorPrototype(function(){if(f){for(;f.head!=c.head_;)f=f.previous;for(;f.next!=f.head;)return f=f.next,{done:!1,value:e(f)};f=null}return{done:!0,value:void 0}})},w=function(){var c={};return c.previous=
c.next=c.head=c},W=0;return f},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c,h){return h})}},"es8","es3");
(function(c){function e(f){if(h[f])return h[f].exports;var m=h[f]={i:f,l:!1,exports:{}};c[f].call(m.exports,m,m.exports,e);m.l=!0;return m.exports}var h={};e.m=c;e.c=h;e.d=function(c,h,v){e.o(c,h)||Object.defineProperty(c,h,{enumerable:!0,get:v})};e.r=function(c){$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!==typeof Symbol&&Symbol.toStringTag&&($jscomp.initSymbol(),Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}));Object.defineProperty(c,"__esModule",{value:!0})};e.t=function(c,
h){h&1&&(c=e(c));if(h&8||h&4&&"object"===typeof c&&c&&c.__esModule)return c;var f=Object.create(null);e.r(f);Object.defineProperty(f,"default",{enumerable:!0,value:c});if(h&2&&"string"!=typeof c)for(var m in c)e.d(f,m,function(e){return c[e]}.bind(null,m));return f};e.n=function(c){var f=c&&c.__esModule?function(){return c["default"]}:function(){return c};e.d(f,"a",f);return f};e.o=function(c,e){return Object.prototype.hasOwnProperty.call(c,e)};e.p="";return e(e.s=4)})([function(c,e,h){function f(c){for(var e=
[],f,h=0,m=0;m<c.length;)f=c.charCodeAt(m++),h?(e.push((65536+(h-55296<<10)+(f-56320)).toString(16)),h=0):55296<f&&56319>=f?h=f:e.push(f.toString(16));return e}Object.defineProperty(e,"__esModule",{value:!0});e.TypeName=void 0;e.parse=function(c,e){var h=e&&e.assetType?e.assetType:"svg";e=e&&e.buildUrl?e.buildUrl:function(c,e){return"png"===e?"https://twemoji.maxcdn.com/v/latest/72x72/"+c+".png":"https://twemoji.maxcdn.com/v/latest/svg/"+c+".svg"};var w=[];for(m.default.lastIndex=0;;){var W=m.default.exec(c);
if(!W)break;var ha=W[0],aa=f(X(ha)).join("-");w.push({url:aa?e(aa,h):"",indices:[W.index,m.default.lastIndex],text:ha,type:v})}return w};e.toCodePoints=f;var m=(c=h(1))&&c.__esModule?c:{default:c},v=e.TypeName="emoji",w=/\uFE0F/g,W=String.fromCharCode(8205),X=function(c){return 0>c.indexOf(W)?c.replace(w,""):c}},function(c,e,h){Object.defineProperty(e,"__esModule",{value:!0});e.default=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g},
function(c,e,h){AudioBuffer.prototype.copyToChannel||Object.defineProperty(AudioBuffer.prototype,"copyToChannel",{enumerable:!1,configurable:!1,writable:!1,value:function(c,e,h){h=void 0===h?0:h;e=this.getChannelData(e);for(var f=Math.min(e.length,c.length),m=0;m<f;h++,m++)e[h]=c[m]}})},,function(c,e,h){function f(a){var b=new Image,d=new Promise(function(d,c){b.onload=function(){return d(b)};b.onerror=function(){return d(b)};b.src=a});qd.push(d);return b}function m(){return fe(this,void 0,void 0,
function b(){return $jscomp.generator.createGenerator(b,function(b){return b.return(Promise.all(qd))})})}function v(){throw Error("This code should be unreachable");}function w(a,b,d){return Math.max(Math.min(b,d),a)}function W(a,b){return a-b*Math.floor(a/b)}function X(){throw Error("unreachable");}function ha(){return function(a){return a}}function aa(a){return{white_noise:bb.makeSampleData({buffer:Promise.resolve(bb.createBufferFromGenerator(a,44100,function(){return 2*Math.random()-1})),shouldLoop:!0,
freq:Yb(440)}),snare:bb.makeSampleData({buffer:bb.createBufferFromAudioData(a,22050,"samples/snare.ogg"),shouldLoop:!1,freq:Yb(440)}),kick:bb.makeSampleData({buffer:bb.createBufferFromAudioData(a,22050,"samples/kick.ogg"),shouldLoop:!1,freq:Yb(440)})}}function B(a,b){for(var d=[],k=1;k<arguments.length;++k)d[k-1]=arguments[k];k=a.reduce(function(a,b,k){return a+b+(d[k]||"")},"").replace(/\t/,"    ").replace(/^(?:\r?\n)+|(?:\r?\n)+ *$/g,"").split(/\r?\n/);var c=k.filter(function(a){return""!==a}).map(function(a){return a.match(/^\s*/)[0].length}),
p=0;0<c.length&&(p=c.reduce(function(a,b){return Math.min(a,b)}));return(0<p?k.map(function(a){return a.substring(p)}):k).join("\n").replace(/([^\n])\n([^\n])/g,"$1 $2").replace(/\n(\n+)/g,"$1")}function Xb(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();Xb="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===
Symbol&&a!==Symbol.prototype?"symbol":typeof a};return Xb(a)}function Oa(){Oa=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var d=arguments[b],k;for(k in d)Object.prototype.hasOwnProperty.call(d,k)&&(a[k]=d[k])}return a};return Oa.apply(this,arguments)}function ab(a){for(var b=1;b<arguments.length;b++){var d=null!=arguments[b]?arguments[b]:{},k=Object.keys(d);"function"===typeof Object.getOwnPropertySymbols&&(k=k.concat(Object.getOwnPropertySymbols(d).filter(function(a){return Object.getOwnPropertyDescriptor(d,
a).enumerable})));k.forEach(function(b){var k=d[b];b in a?Object.defineProperty(a,b,{value:k,enumerable:!0,configurable:!0,writable:!0}):a[b]=k})}return a}function Hc(a,b){if(null==a)return{};if(null==a)var d={};else{d={};var k=Object.keys(a),c;for(c=0;c<k.length;c++){var p=k[c];0<=b.indexOf(p)||(d[p]=a[p])}}if(Object.getOwnPropertySymbols)for(c=Object.getOwnPropertySymbols(a),p=0;p<c.length;p++)k=c[p],0<=b.indexOf(k)||Object.prototype.propertyIsEnumerable.call(a,k)&&(d[k]=a[k]);return d}function Pa(a){if("undefined"!==
typeof window&&window.navigator)return!!navigator.userAgent.match(a)}function z(a,b,d){a.addEventListener(b,d,!Qa&&rd)}function G(a,b,d){a.removeEventListener(b,d,!Qa&&rd)}function oc(a,b){if(b){">"===b[0]&&(b=b.substring(1));if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(d){}return!1}}function Fa(a,b,d,k){if(a){d=d||document;do{if(null!=b&&(">"===b[0]?a.parentNode===d&&oc(a,b):oc(a,
b))||k&&a===d)return a;if(a===d)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function na(a,b,d){if(a&&b)if(a.classList)a.classList[d?"add":"remove"](b);else{var k=(" "+a.className+" ").replace(sd," ").replace(" "+b+" "," ");a.className=(k+(d?" "+b:"")).replace(sd," ")}}function x(a,b,d){var k=a&&a.style;if(k){if(void 0===d)return document.defaultView&&document.defaultView.getComputedStyle?d=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(d=a.currentStyle),
void 0===b?d:d[b];b in k||-1!==b.indexOf("webkit")||(b="-webkit-"+b);k[b]=d+("string"===typeof d?"":"px")}}function Lb(a,b){var d="";if("string"===typeof a)d=a;else{do{var k=x(a,"transform");k&&"none"!==k&&(d=k+" "+d)}while(!b&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(d)}function td(a,b,d){if(a){a=a.getElementsByTagName(b);b=0;var k=a.length;if(d)for(;b<k;b++)d(a[b],b);return a}return[]}function Ra(){var a=document.scrollingElement;
return a?a:document.documentElement}function ba(a,b,d,k,c){if(a.getBoundingClientRect||a===window){if(a!==window&&a!==Ra()){var p=a.getBoundingClientRect();var E=p.top;var u=p.left;var e=p.bottom;var f=p.right;var Sa=p.height;var t=p.width}else u=E=0,e=window.innerHeight,f=window.innerWidth,Sa=window.innerHeight,t=window.innerWidth;if((b||d)&&a!==window&&(c=c||a.parentNode,!Qa)){do if(c&&c.getBoundingClientRect&&("none"!==x(c,"transform")||d&&"static"!==x(c,"position"))){e=c.getBoundingClientRect();
E-=e.top+parseInt(x(c,"border-top-width"));u-=e.left+parseInt(x(c,"border-left-width"));e=E+p.height;f=u+p.width;break}while(c=c.parentNode)}k&&a!==window&&(k=(a=Lb(c||a))&&a.a,c=a&&a.d,a&&(E/=c,u/=k,t/=k,Sa/=c,e=E+Sa,f=u+t));return{top:E,left:u,bottom:e,right:f,width:t,height:Sa}}}function ud(a,b,d){var k=db(a,!0);for(a=ba(a)[b];k;){b=ba(k)[d];if(!("top"===d||"left"===d?a>=b:a<=b))return k;if(k===Ra())break;k=db(k,!1)}return!1}function pc(a,b,d){for(var k=0,c=0,p=a.children;c<p.length;){if("none"!==
p[c].style.display&&p[c]!==A.ghost&&p[c]!==A.dragged&&Fa(p[c],d.draggable,a,!1)){if(k===b)return p[c];k++}c++}return null}function Ic(a,b){for(a=a.lastElementChild;a&&(a===A.ghost||"none"===x(a,"display")||b&&!oc(a,b));)a=a.previousElementSibling;return a||null}function sa(a,b){var d=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===A.clone||b&&!oc(a,b)||d++;return d}function vd(a){var b=0,d=0,k=Ra();if(a){do{var c=Lb(a),p=c.d;b+=a.scrollLeft*
c.a;d+=a.scrollTop*p}while(a!==k&&(a=a.parentNode))}return[b,d]}function ge(a,b){for(var d in a)if(a.hasOwnProperty(d))for(var k in b)if(b.hasOwnProperty(k)&&b[k]===a[d][k])return Number(d);return-1}function db(a,b){if(!a||!a.getBoundingClientRect)return Ra();var d=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var k=x(a);if(a.clientWidth<a.scrollWidth&&("auto"==k.overflowX||"scroll"==k.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==k.overflowY||"scroll"==k.overflowY)){if(!a.getBoundingClientRect||
a===document.body)break;if(d||b)return a;d=!0}}while(a=a.parentNode);return Ra()}function Jc(a,b){return Math.round(a.top)===Math.round(b.top)&&Math.round(a.left)===Math.round(b.left)&&Math.round(a.height)===Math.round(b.height)&&Math.round(a.width)===Math.round(b.width)}function wd(a,b){return function(){if(!Zb){var d=arguments;1===d.length?a.call(this,d[0]):a.apply(this,d);Zb=setTimeout(function(){Zb=void 0},b)}}}function xd(a,b,d){a.scrollLeft+=b;a.scrollTop+=d}function yd(a){var b=window.Polymer,
d=window.jQuery||window.Zepto;return b&&b.dom?b.dom(a).cloneNode(!0):d?d(a).clone(!0)[0]:a.cloneNode(!0)}function he(){var a=[],b;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(b){if("none"!==x(b,"display")&&b!==A.ghost){a.push({target:b,rect:ba(b)});var d=ab({},a[a.length-1].rect);if(b.thisAnimationDuration){var c=Lb(b,!0);c&&(d.top-=c.f,d.left-=c.e)}b.fromRect=d}})},addAnimationState:function(b){a.push(b)},removeAnimationState:function(b){a.splice(ge(a,
{target:b}),1)},animateAll:function(d){var c=this;if(this.options.animation){var u=!1,p=0;a.forEach(function(a){var b=0,d=a.target,k=d.fromRect,E=ba(d),e=d.prevFromRect,f=d.prevToRect;a=a.rect;var g=Lb(d,!0);g&&(E.top-=g.f,E.left-=g.e);d.toRect=E;d.thisAnimationDuration&&Jc(e,E)&&!Jc(k,E)&&(a.top-E.top)/(a.left-E.left)===(k.top-E.top)/(k.left-E.left)&&(b=Math.sqrt(Math.pow(e.top-a.top,2)+Math.pow(e.left-a.left,2))/Math.sqrt(Math.pow(e.top-f.top,2)+Math.pow(e.left-f.left,2))*c.options.animation);Jc(E,
k)||(d.prevFromRect=k,d.prevToRect=E,b||(b=c.options.animation),c.animate(d,a,E,b));b&&(u=!0,p=Math.max(p,b),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0;d.prevFromRect=null;d.fromRect=null;d.prevToRect=null;d.thisAnimationDuration=null},b),d.thisAnimationDuration=b)});clearTimeout(b);u?b=setTimeout(function(){"function"===typeof d&&d()},p):"function"===typeof d&&d();a=[]}else clearTimeout(b),"function"===typeof d&&d()},animate:function(a,b,c,p){if(p){x(a,
"transition","");x(a,"transform","");var d=Lb(this.el),k=(b.left-c.left)/(d&&d.a||1);b=(b.top-c.top)/(d&&d.d||1);a.animatingX=!!k;a.animatingY=!!b;x(a,"transform","translate3d("+k+"px,"+b+"px,0)");x(a,"transition","transform "+p+"ms"+(this.options.easing?" "+this.options.easing:""));x(a,"transform","translate3d(0,0,0)");"number"===typeof a.animated&&clearTimeout(a.animated);a.animated=setTimeout(function(){x(a,"transition","");x(a,"transform","");a.animated=!1;a.animatingX=!1;a.animatingY=!1},p)}}}}
function ja(a){var b=ab({putSortable:ca,cloneEl:O,targetEl:q,rootEl:M,oldIndex:Mb,oldDraggableIndex:$b,newIndex:oa,newDraggableIndex:eb},a);a=b.sortable;var d=b.rootEl,c=b.name,u=b.targetEl,p=b.cloneEl,E=b.toEl,e=b.fromEl,f=b.oldIndex,g=b.newIndex,h=b.oldDraggableIndex,t=b.newDraggableIndex,l=b.originalEvent,n=b.putSortable,m=b.extraEventProperties;if(a=a||d&&d[pa]){var r=a.options,x="on"+c.charAt(0).toUpperCase()+c.substr(1);!window.CustomEvent||Qa||bc?(b=document.createEvent("Event"),b.initEvent(c,
!0,!0)):b=new CustomEvent(c,{bubbles:!0,cancelable:!0});b.to=E||d;b.from=e||d;b.item=u||d;b.clone=p;b.oldIndex=f;b.newIndex=g;b.oldDraggableIndex=h;b.newDraggableIndex=t;b.originalEvent=l;b.pullMode=n?n.lastPutMode:void 0;c=ab({},m,cc.getEventProperties(c,a));for(var A in c)b[A]=c[A];d&&d.dispatchEvent(b);r[x]&&r[x].call(a,b)}}function A(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=b=Oa({},b);a[pa]=this;
var d={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return zd(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,
delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==A.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};cc.initializePlugins(this,a,d);for(var c in d)c in b||(b[c]=d[c]);Ad(b);for(var u in this)"_"===u.charAt(0)&&"function"===typeof this[u]&&(this[u]=this[u].bind(this));if(this.nativeDraggable=
b.forceFallback?!1:ie)this.options.touchStartThreshold=1;b.supportPointer?z(a,"pointerdown",this._onTapStart):(z(a,"mousedown",this._onTapStart),z(a,"touchstart",this._onTapStart));this.nativeDraggable&&(z(a,"dragover",this),z(a,"dragenter",this));qc.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||[]);Oa(this,he())}function Mc(a,b,d,c,u,p,E,e){var k=a[pa],f=k.options.onMove,cb;if(!window.CustomEvent||Qa||bc){var t=document.createEvent("Event");t.initEvent("move",!0,!0)}else t=new CustomEvent("move",
{bubbles:!0,cancelable:!0});t.to=b;t.from=a;t.dragged=d;t.draggedRect=c;t.related=u||b;t.relatedRect=p||ba(b);t.willInsertAfter=e;t.originalEvent=E;a.dispatchEvent(t);f&&(cb=f.call(k,t,E));return cb}function Nc(a){a.draggable=!1}function je(){Oc=!1}function ke(a,b,d){d=ba(Ic(d.el,d.options.draggable));return b?a.clientX>d.right+10||a.clientX<=d.right&&a.clientY>d.bottom&&a.clientX>=d.left:a.clientX>d.right&&a.clientY>d.top||a.clientX<=d.right&&a.clientY>d.bottom+10}function le(a,b,d,c,u,p,E,e){a=
c?a.clientY:a.clientX;var k=c?d.height:d.width,f=c?d.top:d.left;d=c?d.bottom:d.right;c=!1;if(!E)if(e&&rc<k*u)if(!dc&&(1===ec?a>f+k*p/2:a<d-k*p/2)&&(dc=!0),dc)c=!0;else{if(1===ec?a<f+rc:a>d-rc)return-ec}else if(a>f+k*(1-u)/2&&a<d-k*(1-u)/2)return b=sa(q)<sa(b)?1:-1,b;if(c||E)if(a<f+k*p/2||a>d-k*p/2)return a>f+k/2?1:-1;return 0}function me(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var b=a.length,d=0;b--;)d+=a.charCodeAt(b);return d.toString(36)}function ne(a){sc.length=0;a=a.getElementsByTagName("input");
for(var b=a.length;b--;){var d=a[b];d.checked&&sc.push(d)}}function tc(a){return setTimeout(a,0)}function uc(){S.forEach(function(a){clearInterval(a.pid)});S=[]}function Pc(){}function Qc(){}function Y(a,b,d,c){return new H("Construct "+a.tileName,a.tileDescription,function(b,d){return d.world.placeTile(new a(b))},b,d,c)}function K(a){return function(b){return b.hasUnlockedTechnology(a)}}function Bd(a,b){return function(d){return d.inventory.getPopulation(a)>=b}}function vc(a,b){return function(d,
c){return d.world.getTilesInCircle(c,b).some(function(b){return b instanceof a})}}function Bb(a){return function(b){return b.world.getTiles().some(function(b){return b instanceof a})}}function Cd(a){return function(b){var d={};b=$jscomp.makeIterator(b.world.getTiles());for(var c=b.next();!c.done;d={$jscomp$loop$prop$tile$86:d.$jscomp$loop$prop$tile$86},c=b.next())if(d.$jscomp$loop$prop$tile$86=c.value,!a.some(function(a){return function(b){return a.$jscomp$loop$prop$tile$86 instanceof b}}(d)))return!1;
return!0}}function Dd(a,b){return function(d){return d.inventory.getResourceQuantity(a)>=b}}function Q(a){return new fb("have the "+a.name+" technology",K(a))}function gb(a,b){return new fb(1===b?"adjacent to a "+a.tileName:"within "+b+" units of "+a.tileName,vc(a,b))}function oe(a){return new fb(1===a?"adjacent to a Monolith":"within "+a+" units of a Monolith",function(b,d){return vc(ka,a)(b,d)||vc(Ga,a)(b,d)})}function pe(a){return new fb(1===a?"adjacent to "+la.tileName+" or "+ka.tileName:"within "+
a+" units of "+la.tileName+" or "+ka.tileName,function(b,d){return b.world.getTilesInCircle(d,a).some(function(a){return a instanceof la||a instanceof za||a instanceof ka||a instanceof Ga})})}function qe(a,b){return new fb("have at least "+b+" "+a.name,function(d){return d.inventory.getPopulation(a)>=b})}function Ed(a,b){return new fb("available housing capacity for "+b+" "+a.name,function(d){return d.world.getPopulationCapacity(a)-d.inventory.getPopulation(a)>=b})}function re(a){var b=new Cb(a);
a=window;a.cheatsAddResource=function(a,c){return b.addResource(a,c)};a.cheatsRemoveResource=function(a,c){return b.removeResource(a,c)};a.cheatsAddPopulation=function(a,c){return b.addPopulation(a,c)};a.cheatsFreeResources=function(){return b.freeResources()};a.cheatsShowEnding=function(a){return b.showEnding(void 0===a?!1:a)};Object.freeze(g);Object.freeze(I);a.Resources=g;a.Species=I}h.r(e);var se=function(){function a(a,b){return document.createTextNode(b?a.replace(n,""):a)}function b(a,b){return"".concat(b.base,
b.size,"/",a,b.ext)}function d(a,b){a=a.childNodes;for(var c=a.length,k,p;c--;)k=a[c],p=k.nodeType,3===p?b.push(k):1!==p||"ownerSVGElement"in k||r.test(k.nodeName.toLowerCase())||d(k,b);return b}function c(a){return g(0>a.indexOf(m)?a.replace(n,""):a)}function e(b,k){for(var p=d(b,[]),E=p.length,e,u,f,J,cb,g,t,h,ya,Sa;E--;){e=!1;f=document.createDocumentFragment();J=p[E];cb=J.nodeValue;for(t=0;g=l.exec(cb);){h=g.index;h!==t&&f.appendChild(a(cb.slice(t,h),!0));g=g[0];Sa=c(g);t=h+g.length;h=k.callback(Sa,
k);if(Sa&&h){ya=new Image;ya.onerror=k.onerror;ya.setAttribute("draggable","false");e=k.attributes(g,Sa);for(u in e)e.hasOwnProperty(u)&&0!==u.indexOf("on")&&!ya.hasAttribute(u)&&ya.setAttribute(u,e[u]);ya.className=k.className;ya.alt=g;ya.src=h;e=!0;f.appendChild(ya)}ya||f.appendChild(a(g,!1));ya=null}e&&(t<cb.length&&f.appendChild(a(cb.slice(t),!0)),J.parentNode.replaceChild(f,J))}return b}function p(a,b){return J(a,function(a){var d=a,k=c(a),p=b.callback(k,b),e;if(k&&p){d="<img ".concat('class="',
b.className,'" ','draggable="false" ','alt="',a,'"',' src="',p,'"');a=b.attributes(a,k);for(e in a)a.hasOwnProperty(e)&&0!==e.indexOf("on")&&-1===d.indexOf(" "+e+"=")&&(d=d.concat(" ",e,'="',a[e].replace(q,E),'"'));d=d.concat("/>")}return d})}function E(a){return t[a]}function f(){return null}function J(a,b){return String(a).replace(l,b)}function g(a,b){for(var d=[],c,k=0,p=0;p<a.length;)c=a.charCodeAt(p++),k?(d.push((65536+(k-55296<<10)+(c-56320)).toString(16)),k=0):55296<=c&&56319>=c?k=c:d.push(c.toString(16));
return d.join(b||"-")}var h={base:"https://twemoji.maxcdn.com/v/12.1.5/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(a){a="string"===typeof a?parseInt(a,16):a;if(65536>a)return x(a);a-=65536;return x(55296+(a>>10),56320+(a&1023))},toCodePoint:g},onerror:function(){this.parentNode&&this.parentNode.replaceChild(a(this.alt,!1),this)},parse:function(a,d){d&&"function"!==typeof d||(d={callback:d});var c=d.callback||b,k="function"===typeof d.attributes?d.attributes:f,E="string"===
typeof d.base?d.base:h.base,u=d.ext||h.ext,J;(J=d.folder)||(J=d.size||h.size,J="number"===typeof J?J+"x"+J:J);return("string"===typeof a?p:e)(a,{callback:c,attributes:k,base:E,ext:u,size:J,className:d.className||h.className,onerror:d.onerror||h.onerror})},replace:J,test:function(a){l.lastIndex=0;a=l.test(a);l.lastIndex=0;return a}},t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},l=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,
n=/\uFE0F/g,m=String.fromCharCode(8205),q=/[&<>'"]/g,r=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,x=String.fromCharCode;return h}(),te=h(0),l;(function(a){function b(a){var b=document.createElement("div");a&&b.classList.add.apply(b.classList,$jscomp.arrayFromIterable(a));return b}function d(a,b,d){a=document.createElement(a);a.innerText=b;d&&a.classList.add.apply(a.classList,$jscomp.arrayFromIterable(d));return a}function c(a){se.parse(a,{folder:"svg",ext:".svg"});return a}function e(a){return 0<
te.parse(a).length}a.makeDiv=b;a.makeDivContaining=function(a,d){d=b(d);a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())d.appendChild(c.value);return d};a.makeElement=d;a.patchEmoji=c;a.containsEmoji=e;a.makePara=function(a,b){b=d("p",a,b);e(a)&&c(b);return b};a.makeHeader=function(a,b,k){b=d("h"+(void 0===b?1:b),a,k);e(a)&&c(b);return b};a.makeButton=function(a,b,d,k){k=void 0===k?"enabled":k;var p=document.createElement("button");p.type="button";"disabled"===k&&(p.disabled=!0);p.innerText=
a;d&&p.classList.add.apply(p.classList,$jscomp.arrayFromIterable(d));p.onclick=function(a){a.preventDefault();b(p,a)};e(a)&&c(p);return p};a.makeSlider=function(b,d,c,k,e,u){var p=document.createElement("input");p.type="range";p.min=d.toString();p.max=c.toString();p.value=k.toString();void 0!==u&&(p.step=u.toString());p.oninput=function(){if(void 0!==this.value){var a=Number(this.value);!isNaN(a)&&d<=a&&a<=c&&e(a)}};b=a.makePara(b+": ");return a.makeDivContaining([b,p])};a.makeCanvas=function(a,b,
d){var c=document.createElement("canvas");c.width=a;c.height=b;d&&c.classList.add.apply(c.classList,$jscomp.arrayFromIterable(d));return c};a.fillHTML=function(a,b){a.innerHTML="";b=$jscomp.makeIterator(b);for(var d=b.next();!d.done;d=b.next())a.appendChild(d.value)}})(l||(l={}));var N;(function(a){var b=document.getElementById("rootdiv"),d=void 0;a.show=function(a){d=a;l.fillHTML(b,[a.html]);document.onkeydown=function(b){a.handleKeyDown&&a.handleKeyDown(b)};document.onkeyup=function(b){a.handleKeyUp&&
a.handleKeyUp(b)}};a.refreshCurrentPage=function(){d&&d.refresh()}})(N||(N={}));var fe=function(a,b,d,c){function k(a){return a instanceof d?a:new d(function(b){b(a)})}return new (d||(d=Promise))(function(d,e){function p(a){try{E(c.next(a))}catch(t){e(t)}}function u(a){try{E(c["throw"](a))}catch(t){e(t)}}function E(a){a.done?d(a.value):k(a.value).then(p,u)}E((c=c.apply(a,b||[])).next())})},qd=[],ue=f("assets/ui/highlight.png"),ve=f("assets/tiles/environment/wasteland1.png"),we=f("assets/tiles/environment/wasteland2.png"),
xe=f("assets/tiles/environment/wasteland3.png"),ye=f("assets/tiles/environment/wasteland4.png"),ze=f("assets/tiles/environment/wasteland5.png"),Ae=f("assets/tiles/environment/mountain.png"),Fd=f("assets/tiles/alien/ruins1.png"),Be=f("assets/tiles/alien/ruins2.png"),Ce=f("assets/tiles/alien/monolith.png"),De=f("assets/tiles/end/reprogrammed monolith.png"),Ee=f("assets/tiles/end/seed core alien.png"),Fe=f("assets/tiles/end/seed core human.png"),Ge=f("assets/tiles/end/circuits alien.png"),He=f("assets/tiles/end/circuits human.png"),
Ie=f("assets/tiles/construction/hab_site.png"),Je=f("assets/tiles/construction/lab_site.png"),Ke=f("assets/tiles/construction/industry_site.png"),Le=f("assets/tiles/construction/xenoengineering_site.png"),Me=f("assets/tiles/colony/habitat.png"),Ne=f("assets/tiles/colony/solar_panels.png"),Oe=f("assets/tiles/colony/mining_facility.png"),Pe=f("assets/tiles/colony/lander.png"),Qe=f("assets/tiles/colony/greenhouse.png"),Re=f("assets/tiles/colony/hydroponics.png"),Se=f("assets/tiles/colony/mineshaft.png"),
Te=f("assets/tiles/colony/electronics factory.png"),Ue=f("assets/tiles/colony/construction factory.png"),Ve=f("assets/tiles/colony/xenofactory.png"),Gd=f("assets/tiles/roads/cross.png"),Hd=f("assets/tiles/roads/horizontal.png"),Id=f("assets/tiles/roads/vertical.png"),We=f("assets/tiles/roads/corner_bottom_left.png"),Xe=f("assets/tiles/roads/corner_bottom_right.png"),Ye=f("assets/tiles/roads/corner_top_left.png"),Ze=f("assets/tiles/roads/corner_top_right.png"),$e=f("assets/tiles/roads/t_south.png"),
af=f("assets/tiles/roads/t_north.png"),bf=f("assets/tiles/roads/t_east.png"),cf=f("assets/tiles/roads/t_west.png"),df=f("assets/tiles/colony/arcology.png"),ef=f("assets/tiles/colony/nuclear_plant.png"),ff=f("assets/tiles/colony/hive.png"),gf=f("assets/tiles/colony/zero_point.png"),hf=f("assets/tiles/colony/lab_alignment.png"),jf=f("assets/tiles/colony/lab_engineering.png"),kf=f("assets/tiles/colony/lab_psych.png"),lf=f("assets/tiles/colony/lab_xeno.png"),Jd=f("assets/tiles/colony/recycler1.png"),
mf=f("assets/tiles/colony/recycler2.png"),nf=f("assets/tiles/colony/nanotech_foundry.png"),of=f("assets/tiles/colony/neural_emulator.png"),Db=function(a,b,d){this.header=a;this.text=b;this.largeText=d},pf=[new Db("Grace Rarer",["Team Lead, Game Designer, Programmer"],!0),new Db("Prindle",["Programmer, DevOps"],!0),new Db("May Lawver",["Music Generation Programmer"],!0),new Db("Seong Ryoo",["Environment Artist"],!0),new Db("Code Contributors",["Mitchell Philipp","Brad Baker","Will Cooper"]),new Db("Third Party Assets",
["Twemoji (MIT License for code, CC-BY for graphics)","IBM Plex Mono (Open Font License)"]),new Db("Aurora is released under the MIT License",["Source code is available at github.com/GRarer/Aurora"])],Rc=function(){this.html=l.makeDiv(["credits"]);this.refresh()};Rc.prototype.refresh=function(){var a=this;l.fillHTML(this.html,[].concat($jscomp.arrayFromIterable(pf.map(function(b){return a.renderCreditsEntry(b)})),[l.makeButton("Back",function(){return N.show(new hb)})]))};Rc.prototype.renderCreditsEntry=
function(a){return l.makeDivContaining([l.makeHeader(a.header)].concat($jscomp.arrayFromIterable(a.text.map(function(a){return l.makePara(a)}))),a.largeText?["credits-entry-large"]:["credits-entry-small"])};var Kd=function(a){return a},Nb;(function(a){function b(a){return{encode:Kd,decode:Kd,validate:a}}function d(a){return{encode:function(b){var d={},c;for(c in a)d[c]=a[c].encode(b[c]);return d},decode:function(b){var d={},c;for(c in a)d[c]=a[c].decode(b[c]);return d},validate:function(b){if("object"!==
typeof b||null===b)return!1;for(var d in a)if(!a[d].validate(b[d]))return!1;return!0}}}function c(a){return{encode:function(b){return b.map(function(b){return a.encode(b)})},decode:function(b){return b.map(function(b){return a.decode(b)})},validate:function(b){if(!Array.isArray(b))return!1;b=$jscomp.makeIterator(b);for(var d=b.next();!d.done;d=b.next())if(!a.validate(d.value))return!1;return!0}}}function e(a,b,d,c){return{encode:function(k){return a(k)?d.encode(k):b(k)?c.encode(k):v()},decode:function(a){return d.validate(a)?
d.decode(a):c.validate(a)?c.decode(a):v()},validate:function(a){return d.validate(a)||c.validate(a)}}}function p(a,b){return e(function(b){return a.validate(b)},function(b){return!a.validate(b)},a,b)}a.schema=function(a,b,d){return{encode:a,decode:b,validate:d}};a.primitive=b;a.aString=b(function(a){return"string"===typeof a||a instanceof String});a.aNumber=b(function(a){return"number"===typeof a});a.aBoolean=b(function(a){return"boolean"===typeof a});a.aNull=b(function(a){return null===a});a.anUndefined=
b(function(a){return"undefined"===typeof a});a.recordOf=d;a.classOf=function(a,b){a=d(a);var c=a.decode;return{encode:a.encode,decode:function(a){return b(c(a))},validate:a.validate}};a.arrayOf=c;a.nonEmptyArrayOf=function(a){a=c(a);var b=a.validate;return{encode:a.encode,decode:a.decode,validate:function(a){return!Array.isArray(a)||1>a.length?!1:b(a)}}};a.tupleOf=function(a){return{encode:function(b){return b.map(function(b,d){return a[d].encode(b)})},decode:function(b){return b.map(function(b,d){return a[d].decode(b)})},
validate:function(b){if(!Array.isArray(b)||b.length!==a.length)return!1;for(var d=0;d<b.length;d++)if(!a[d].validate(b[d]))return!1;return!0}}};a.unionOf=e;a.union=p;a.optional=function(b){return p(a.anUndefined,b)};a.constrain=function(a,b){return{encode:function(b){return a.encode(b)},decode:function(b){return a.decode(b)},validate:function(d){return a.validate(d)&&b(d)}}}})(Nb||(Nb={}));var wc;(function(a){a.isSupported=function(){try{var a=window.localStorage;a.setItem("__test_ls","null");a.removeItem("__test_ls");
return!0}catch(d){return a&&0!==a.length?d instanceof DOMException?22===d.code||"QuotaExceededError"===d.name||1014===d.code||"NS_ERROR_DOM_QUOTA_REACHED"===d.name:!1:!1}}();a.hasItem=function(b){return a.isSupported&&Object.prototype.hasOwnProperty.call(window.localStorage,b)};a.saveItem=function(b,d,c){return a.isSupported?(d=JSON.stringify(c.encode(d)),window.localStorage.setItem(b,d),!0):!1};a.loadItem=function(b,d){if(a.isSupported&&(b=window.localStorage.getItem(b),null!==b)){try{var c=JSON.parse(b);
var e=d.validate(c)?{resultType:"success",result:d.decode(c)}:{resultType:"invalidStructure"}}catch(p){if(p instanceof SyntaxError)e={resultType:"syntaxError",error:p};else throw p;}return e}};a.removeItem=function(b){a.isSupported&&window.localStorage.removeItem(b)};a.clearAllItems=function(){a.isSupported&&window.localStorage.clear()}})(wc||(wc={}));var fc=ha(),Yb=ha(),Ob;(function(a){function b(a){return Yb(440*Math.pow(2,(a-69)/12))}a.noteNames="C C# D D# E F F# G G# A A# B".split(" ");a.midiNumberToFrequency=
b;a.midiNumberToNoteName=function(b){return""+a.noteNames[W(b,12)]+(Math.floor(b/12)-1)};a.detuneWithCoeff=function(a,c){if(1===c)return[b(a)];a=b(a);return[a/c,a,a*c].map(Yb)}})(Ob||(Ob={}));var Ld=function(a){this.volume=a},xc;(function(a){a.createAdsrEnvelope=function(a,d,c,e,p){p=void 0===p?1:p;var b=void 0===e.attack?0:e.attack,k=void 0===e.sustain?0:e.sustain,u=void 0===e.decay?0:e.decay;e=void 0===e.release?0:e.release;a=a.createGain();a.gain.setValueAtTime(0,d);c<b?a.gain.linearRampToValueAtTime(c/
b*(p-0),d+c):c<b+u?(a.gain.linearRampToValueAtTime(p,d+b),a.gain.linearRampToValueAtTime((c-b)/u*(p*k-p)+p,d+b+u)):(a.gain.linearRampToValueAtTime(p,d+b),a.gain.linearRampToValueAtTime(p*k,d+b+u));a.gain.linearRampToValueAtTime(0,d+c+e);return a}})(xc||(xc={}));var Sc=function(a,b,d,c){function k(a){return a instanceof d?a:new d(function(b){b(a)})}return new (d||(d=Promise))(function(d,e){function p(a){try{f(c.next(a))}catch(t){e(t)}}function u(a){try{f(c["throw"](a))}catch(t){e(t)}}function f(a){a.done?
d(a.value):k(a.value).then(p,u)}f((c=c.apply(a,b||[])).next())})},Pb=function(a,b,d){this.volume=void 0===d?1:d;this.type=a.type;this._detune=1;this.detune=a.detune||0;this.env=b;return this};$jscomp.inherits(Pb,Ld);Pb.prototype.scheduleNote=function(a,b){return Sc(this,void 0,void 0,function k(){var c=this,e,f,g,h,l,n;return $jscomp.generator.createGenerator(k,function(k){e=c;f=Ob.detuneWithCoeff(b.midiNumber,c._detune);g=void 0===b.endNote?f:Ob.detuneWithCoeff(b.endNote,c._detune);h=Math.min(1/
f.length,1)*c.volume;l=xc.createAdsrEnvelope(a,b.start,b.duration,c.env,h);n=b.start+b.duration+(c.env.sustain||0);f.forEach(function(c,k){var p=a.createOscillator();p.type=e.type;p.frequency.setValueAtTime(c,b.start);p.frequency.linearRampToValueAtTime(g[k],n);p.start(b.start);p.stop(n);p.connect(l);p.onended=function(){l.disconnect()}});return k.return(l)})})};$jscomp.global.Object.defineProperties(Pb.prototype,{detune:{configurable:!0,enumerable:!0,set:function(a){this._detune=Math.pow(2,a/1200)}}});
var ib=function(a,b,d){this.volume=void 0===d?1:d;this.buffer=a;this.env=b;return this};$jscomp.inherits(ib,Ld);ib.fromSample=function(a,b,d){d=void 0===d?1:d;return Sc(this,void 0,void 0,function u(){var c;return $jscomp.generator.createGenerator(u,function(e){return 1==e.nextAddress?(c=ib,e.yield(a,2)):e.return(new c(e.yieldResult,b,d))})})};ib.prototype.scheduleNote=function(a,b){return Sc(this,void 0,void 0,function k(){var c,e,f=this,g,h,l,n,t;return $jscomp.generator.createGenerator(k,function(k){c=
Ob.midiNumberToFrequency(b.midiNumber);e=a.createBufferSource();e.buffer=f.buffer.buffer;e.loop=f.buffer.shouldLoop;g=c/f.buffer.freq;e.playbackRate.setValueAtTime(g,b.start);h=b.start+b.duration+(f.env.sustain||0);void 0!==b.endNote&&(l=Ob.midiNumberToFrequency(b.endNote),n=l/f.buffer.freq,e.playbackRate.linearRampToValueAtTime(n,h));e.start(b.start);e.stop(h);t=xc.createAdsrEnvelope(a,b.start,b.duration,f.env,f.volume);e.connect(t);e.onended=function(){t.disconnect()};return k.return(t)})})};var da;
(function(a){function b(a,b){return Math.random()*(b-a)+a}function d(a,d){return Math.floor(b(a,d))}a.realBetween=b;a.intBetween=d;a.fromArray=function(a){return a[d(0,a.length)]};a.bool=function(a){return Math.random()<(void 0===a?.5:a)};a.fromWeightedArray=function(a){var b=a.map(function(a){return a[0]}).reduce(function(a,b){return a+b},0);b*=Math.random();for(var d=$jscomp.makeIterator(a),c=d.next();!c.done;c=d.next()){var k=$jscomp.makeIterator(c.value);c=k.next().value;k=k.next().value;if(b<
c)return k;b-=c}return a[a.length-1][1]}})(da||(da={}));var Ha;(function(a){a.isNonEmpty=function(a){return 0<a.length};a.generate=function(a,d){for(var b=Array(a),c=0;c<a;c++)b[c]=d(c);return b};a.flatten=function(a){return a.reduce(function(a,b){return a.concat(b)},[])};a.partition=function(a,d){var b=[],c=[];a=$jscomp.makeIterator(a);for(var e=a.next();!e.done;e=a.next())e=e.value,d(e)?b.push(e):c.push(e);return{yes:b,no:c}};a.repeat=function(a,d){for(var b=Array(d),c=0;c<d;c++)b[c]=a;return b}})(Ha||
(Ha={}));var Aa=ha(),qf=ha(),Md=ha(),Tc=ha(),jb=ha(),gc;(function(a){function b(a){a=(a&1365)+(a>>>1&1365);a=(a&819)+(a>>>2&819);a=(a&3855)+(a>>>4&3855);return(a&255)+(a>>>8&255)}function d(a,b){b=W(void 0===b?1:b,12);return Aa((a<<b|a>>>12-b)&4095)}function c(a){return 0!==(a&1)}function e(a){var b=[],k=a;do c(k)&&b.push(k),k=d(k,1);while(k!==a);return b}function p(a,b){b=W(b,12);return 0!==(a&1<<b)}function f(a,b){b=W(b,12);a=e(a).filter(function(a){return p(a,b)}).length;return 6===b?a/2:a}function g(a){return e(a).filter(function(a){return!p(a,
7)}).length}function h(a,b){return(a&b)===b}function l(a,d){var c=function(a,b){return a<b[0]||a>b[1]};return d.notes&&c(b(a),d.notes)||d.imperfections&&c(g(a),d.imperfections)||d.hemitones&&c(f(a,1),d.hemitones)||void 0!==d.chord&&0!==d.chord&&!h(a,d.chord)?!1:!0}a.createScaleFromPitchClass=function(a){if(!a.includes(Tc(0)))throw Error("scales must have a root");a=a.map(function(a){return 1<<W(a,12)}).filter(function(a,b,d){return d.indexOf(a)===b}).reduce(function(a,b){return a|b},0);return Aa(a)};
a.getPitchClass=function(a){for(var b=[],d=0;0!==a;a>>>=1,d++)a&1&&b.push(Tc(d));return b};a.getNumberOfNotes=b;a.rotateScale=d;a.hasRoot=c;a.getModes=e;a.hasInterval=p;a.countInterval=f;a.getImperfections=g;a.containsScale=function(a,b){return(a&b)===b};a.containsChord=h;var n=Ha.flatten([e(Aa(2741)),e(Aa(2475)),e(Aa(1367)),e(Aa(2477)),e(Aa(2485)),e(Aa(2733)),e(Aa(2669)),e(Aa(2483))]);a.matchesQuery=l;a.getAllScalesMatchingQuery=function(a){return n.filter(function(b){return l(b,a)})};a.indexIntoPitchClass=
function(a,b){var d=a[W(b,a.length)];return Tc(d+12*Math.floor(b/a.length))}})(gc||(gc={}));var Eb=function(a){a=void 0===a?8:a;this.subdivision=[];this._beats=a;this.generateNewSubdivision(a)};Eb.prototype.generateTies=function(){for(var a=0,b=[];a<this.subdivision.length;)a<this.subdivision.length-1&&da.bool(.5)?(b.push(this.subdivision[a]+this.subdivision[a+1]),a+=2):(b.push(this.subdivision[a]),a++);return b};Eb.prototype.generateNewSubdivision=function(a){this._beats=a;this.subdivision=[];for(var b=
Math.min.apply(Math,$jscomp.arrayFromIterable(Eb.divisions));a>=b;){var d=Eb.divisions.filter(function(b){return b<=a});d=da.fromArray(d);a-=d;this.subdivision.push(d)}0<a&&this.subdivision.push(a)};$jscomp.global.Object.defineProperties(Eb.prototype,{beats:{configurable:!0,enumerable:!0,get:function(){return this._beats}}});Eb.divisions=[2,3];var rf=function(a,b,d,c){function k(a){return a instanceof d?a:new d(function(b){b(a)})}return new (d||(d=Promise))(function(d,e){function p(a){try{u(c.next(a))}catch(t){e(t)}}
function f(a){try{u(c["throw"](a))}catch(t){e(t)}}function u(a){a.done?d(a.value):k(a.value).then(p,f)}u((c=c.apply(a,b||[])).next())})},Ia;(function(a){a[a.KICK=0]="KICK";a[a.SNARE=1]="SNARE";a[a.CLOSED_HI_HAT=2]="CLOSED_HI_HAT";a[a.OPEN_HI_HAT=3]="OPEN_HI_HAT"})(Ia||(Ia={}));var Nd=function(a){this.samples=a;this.closedHiHat=ib.fromSample(this.samples.white_noise,{attack:.01,decay:.05},.5);this.openHiHat=ib.fromSample(this.samples.white_noise,{attack:.01,decay:.2},.5);this.snare=ib.fromSample(this.samples.snare,
{sustain:1},1.5);this.kick=ib.fromSample(this.samples.kick,{sustain:1},1.5)};Nd.prototype.scheduleHit=function(a,b,d){return rf(this,void 0,void 0,function u(){var c,e,f=this,g,h,l,n,m,q;return $jscomp.generator.createGenerator(u,function(p){switch(p.nextAddress){case 1:switch(d){case Ia.KICK:return p.jumpTo(2);case Ia.SNARE:return p.jumpTo(3);case Ia.CLOSED_HI_HAT:return p.jumpTo(4);case Ia.OPEN_HI_HAT:return p.jumpTo(5);default:X()}p.jumpTo(0);break;case 2:return c=a,e={midiNumber:fc(69),start:b,
duration:1},p.yield(f.kick,7);case 7:return p.return(p.yieldResult.scheduleNote(c,e));case 3:return g=a,h={midiNumber:fc(69),start:b,duration:1},p.yield(f.snare,8);case 8:return p.return(p.yieldResult.scheduleNote(g,h));case 4:return l=a,n={midiNumber:fc(70),start:b,duration:.05},p.yield(f.closedHiHat,9);case 9:return p.return(p.yieldResult.scheduleNote(l,n));case 5:return m=a,q={midiNumber:fc(70),start:b,duration:.2},p.yield(f.openHiHat,10);case 10:return p.return(p.yieldResult.scheduleNote(m,q))}})})};
h(2);var Uc=function(a,b,d,c){function k(a){return a instanceof d?a:new d(function(b){b(a)})}return new (d||(d=Promise))(function(d,e){function p(a){try{u(c.next(a))}catch(t){e(t)}}function f(a){try{u(c["throw"](a))}catch(t){e(t)}}function u(a){a.done?d(a.value):k(a.value).then(p,f)}u((c=c.apply(a,b||[])).next())})},bb;(function(a){a.createBufferFromGenerator=function(a,d,c){a=a.createBuffer(1,d,44100);for(var b=new Float32Array(d),k=0;k<d;k++)b[k]=c(k);a.copyToChannel(b,0);return a};a.createBufferFromAudioData=
function(a,d,c){return Uc(this,void 0,void 0,function p(){var b=this,k,e,f,g,h;return $jscomp.generator.createGenerator(p,function(p){switch(p.nextAddress){case 1:return k=b,e=a.createBuffer(1,d,44100),p.yield(fetch("assets/"+c,{headers:new Headers({"Content-Type":"audio/ogg"})}).catch(function(a){return Uc(k,void 0,void 0,function Kc(){var b;return $jscomp.generator.createGenerator(Kc,function(d){if(1==d.nextAddress){if(!(a instanceof Response)){if(a instanceof Error)throw a;throw Error("Unknown error when fetching sample: "+
a);}b=Error;return d.yield(a.text(),3)}throw new b(d.yieldResult);})})}),2);case 2:return f=p.yieldResult,p.yield(f.arrayBuffer(),3);case 3:return g=p.yieldResult,p.yield(new Promise(function(b,d){a.decodeAudioData(g,b,d)}),4);case 4:return h=p.yieldResult,e.copyToChannel(h.getChannelData(0),0),p.return(e)}})})};a.makeSampleData=function(a){return Uc(this,void 0,void 0,function k(){var b,c,e,f;return $jscomp.generator.createGenerator(k,function(k){return 1==k.nextAddress?(b=a,c=b.buffer,e=b.shouldLoop,
f=b.freq,k.yield(c,2)):k.return({buffer:k.yieldResult,shouldLoop:e,freq:f})})})}})(bb||(bb={}));var Qb=function(a,b,d,c){function k(a){return a instanceof d?a:new d(function(b){b(a)})}return new (d||(d=Promise))(function(d,e){function p(a){try{u(c.next(a))}catch(t){e(t)}}function f(a){try{u(c["throw"](a))}catch(t){e(t)}}function u(a){a.done?d(a.value):k(a.value).then(p,f)}u((c=c.apply(a,b||[])).next())})},R;(function(a){a[a.DRUMS=0]="DRUMS";a[a.CHORDS=1]="CHORDS"})(R||(R={}));var ea;(function(a){a.TONIC=
"tonic";a.SUBDOMINANT="subdominant";a.DOMINANT="dominant";a.AMBIGUOUS="ambiguous"})(ea||(ea={}));var Rb;(function(a){function b(a,b,d){d=void 0===d?4:d;var c=gc.getPitchClass(a);a=da.fromArray(q).map(function(a){return da.fromArray(r[a])});a.unshift(jb(0));return a.map(function(a){return Ha.generate(d,function(d){d=gc.indexIntoPitchClass(c,a+2*d);return Md(b+d)})})}function d(){var a=m.rhythm.subdivision;return Ha.flatten(a.map(function(b,d){for(var c=[0===d%2?Ia.KICK:Ia.SNARE],k=0;k<b-1;k++)d===
a.length-1&&k===b-2?c.push(Ia.OPEN_HI_HAT):c.push(Ia.CLOSED_HI_HAT);return c}))}function c(b,d){return Qb(this,void 0,void 0,function Lc(){var c;return $jscomp.generator.createGenerator(Lc,function(k){if(1==k.nextAddress)return k.yield(a.drumkit.scheduleHit(a.context,b,d),2);c=k.yieldResult;c.connect(a.masterGain);k.jumpToEnd()})})}function e(b,d){return Qb(this,void 0,void 0,function Lc(){var c;return $jscomp.generator.createGenerator(Lc,function(k){if(1==k.nextAddress)return k.yield(d.scheduleNote(a.context,
b),2);c=k.yieldResult;c.connect(a.masterGain);k.jumpToEnd()})})}function p(){m.rhythm.generateNewSubdivision(da.fromArray([5,6,7,8,9,11,13]));var a={chord:qf(128),imperfections:[1,1]};a=gc.getAllScalesMatchingQuery(a);Ha.isNonEmpty(a)&&(m.scale=da.fromArray(a));m.drumLoop=d();m.progression=b(m.scale,m.root);m.queue=[[R.CHORDS,R.DRUMS],[R.CHORDS,R.DRUMS],[R.CHORDS,R.DRUMS],[R.CHORDS,R.DRUMS],[R.CHORDS,R.DRUMS],[R.CHORDS,R.DRUMS],[R.CHORDS,R.DRUMS],[R.CHORDS,R.DRUMS],[R.DRUMS]]}function f(b){return Qb(this,
void 0,void 0,function ac(){var d,c,k,p,f;return $jscomp.generator.createGenerator(ac,function(u){switch(u.nextAddress){case 1:d=m.progression[W(m.chordIndex,m.progression.length)],c=60/m.beatsPerMinute,k=$jscomp.makeIterator(d),p=k.next();case 2:if(p.done){u.jumpTo(4);break}f=p.value;return u.yield(e({midiNumber:fc(W(f,12)+60),start:b,duration:c*m.rhythm.beats},a.instruments.pad),3);case 3:p=k.next();u.jumpTo(2);break;case 4:m.chordIndex++,u.jumpToEnd()}})})}function g(a){return Qb(this,void 0,void 0,
function ac(){var b,d,k,e,p;return $jscomp.generator.createGenerator(ac,function(f){1==f.nextAddress&&(b=60/m.beatsPerMinute,d=0,k=$jscomp.makeIterator(m.drumLoop),e=k.next());if(5!=f.nextAddress){if(e.done)return f.jumpTo(0);p=e.value;return f.yield(c(a+d,p),5)}d+=b;e=k.next();return f.jumpTo(2)})})}function h(b){return Qb(this,void 0,void 0,function ac(){var d,c,k,e,u,E,n;return $jscomp.generator.createGenerator(ac,function(J){switch(J.nextAddress){case 1:if(!l)return J.return();d=60/m.beatsPerMinute;
0===m.queue.length&&p();c=d*m.rhythm.beats;k=m.queue.shift();if(!k){J.jumpTo(2);break}e=$jscomp.makeIterator(k);u=e.next();case 3:if(u.done){J.jumpTo(2);break}E=u.value;switch(E){case R.DRUMS:return J.jumpTo(6);case R.CHORDS:return J.jumpTo(7);default:X()}J.jumpTo(4);break;case 6:return J.yield(g(b),9);case 9:J.jumpTo(4);break;case 7:return J.yield(f(b),10);case 10:J.jumpTo(4);break;case 4:u=e.next();J.jumpTo(3);break;case 2:return n=b+c,J.yield(new Promise(function(b){window.setTimeout(b,1E3*(n-
a.context.currentTime-.1))}),11);case 11:return J.return(h(n))}})})}var l=!1,n=void 0;a.context=function(){var a,b=window;if(b=(a=b.AudioContext,null!==a&&void 0!==a?a:b.webkitAudioContext))return new b;throw Error("AudioContext is not supported");}();a.samples=aa(a.context);a.drumkit=new Nd(a.samples);a.instruments={arp:new Pb({type:"sawtooth",detune:3},{attack:.01,decay:.05,sustain:0,release:.1}),bass:new Pb({type:"triangle",detune:2},{attack:.01,decay:.01,sustain:1,release:.1}),pad:new Pb({type:"triangle",
detune:4},{attack:1,decay:.1,sustain:.5,release:.5})};a.masterGain=a.context.createGain();var m={beatsPerMinute:220,rhythm:new Eb,root:Md(0),scale:Aa(1857),progression:[],chordIndex:0,drumLoop:[],queue:[]},q=[[ea.TONIC,ea.SUBDOMINANT,ea.DOMINANT],[ea.SUBDOMINANT,ea.SUBDOMINANT,ea.DOMINANT],[ea.SUBDOMINANT,ea.DOMINANT,ea.DOMINANT],[ea.AMBIGUOUS,ea.SUBDOMINANT,ea.DOMINANT],[ea.SUBDOMINANT,ea.DOMINANT,ea.AMBIGUOUS]],r={tonic:[jb(0),jb(5)],subdominant:[jb(1),jb(3)],dominant:[jb(4),jb(6)],ambiguous:[jb(2)]};
a.initialize=function(){l||(l=!0,a.masterGain.gain.value=Ba.currentOptions.volume,a.masterGain.connect(a.context.destination),n=h(a.context.currentTime),n.catch(function(a){console.error("Music initialization failed:");console.error(a)}))};a.stop=function(){return Qb(this,void 0,void 0,function Kc(){return $jscomp.generator.createGenerator(Kc,function(a){if(1==a.nextAddress){if(!l||void 0===n)return a.jumpTo(0);l=!1;return a.yield(n,3)}n=void 0;a.jumpToEnd()})})};a.isPlaying=function(){return l};
a.setVolume=function(b){a.masterGain.gain.value=w(0,b,1)}})(Rb||(Rb={}));var Ta=function(a,b,d){this.viewWidth=void 0===a?12:a;this.viewHeight=void 0===b?8:b;this.volume=void 0===d?.25:d};Ta.defaultOptions=function(){return new Ta};Ta.schema=Nb.classOf({viewWidth:Nb.aNumber,viewHeight:Nb.aNumber,volume:Nb.aNumber},function(a){return new Ta(a.viewWidth,a.viewHeight,a.volume)});var Ba;(function(a){function b(){var a=wc.loadItem("settings",Ta.schema);return"success"===(null===a||void 0===a?void 0:a.resultType)?
a.result:Ta.defaultOptions()}function d(a){Rb.setVolume(a.volume)}a.loadOptions=b;a.currentOptions=b();a.applySettings=d;a.saveOptions=function(b){a.currentOptions=b;d(a.currentOptions);wc.saveItem("settings",b,Ta.schema)};a.restoreDefaults=function(){a.saveOptions(Ta.defaultOptions())}})(Ba||(Ba={}));var Vc=function(a){this.backScreen=a;this.html=l.makeDiv();this.options=Ba.loadOptions();this.refresh()};Vc.prototype.refresh=function(){var a=this,b=function(a,b,c,e,f,g){var d=l.makePara(e.toString());
a=l.makeSlider(a,b,c,e,function(a){f(a);d.innerText=a.toString()},g);return l.makeDivContaining([a,d],["settings-slider"])};b=[b("Volume",0,100,100*this.options.volume,function(b){a.options.volume=b/100;Ba.saveOptions(a.options)},5),b("View width",6,18,this.options.viewWidth,function(b){a.options.viewWidth=b;Ba.saveOptions(a.options)}),b("View height",4,12,this.options.viewHeight,function(b){a.options.viewHeight=b;Ba.saveOptions(a.options)})];l.fillHTML(this.html,[l.makeDivContaining([l.makeHeader("Settings",
1),l.makeDivContaining(b),l.makeDivContaining([l.makeButton("Restore defaults",function(){a.options=Ta.defaultOptions();Ba.saveOptions(a.options);a.refresh()})]),l.makeDivContaining([l.makeButton("Back",function(){Ba.saveOptions(a.options);N.show(a.backScreen)})])],["settings"])])};var yc;(function(a){a.safeKeys=function(a){return Object.keys(a)}})(yc||(yc={}));var g=function(a){this.name=a};g.values=function(){return yc.safeKeys(g).map(function(a){return g[a]}).filter(function(a){return a instanceof
g})};g.Energy=new g("\u26a1 Energy");g.Food=new g("\ud83c\udf2f Food");g.Metal=new g("\u26cf Metal Ore");g.BuildingMaterials=new g("\ud83d\udd29 Construction Parts");g.Electronics=new g("\ud83d\udca1 Electronics");g.Cavorite=new g("\ud83d\udc8e Cavorite");g.Orichalcum=new g("\ud83e\uddea Orichalcum");g.Superconductor=new g("\ud83e\uddf5 Superconductor");g.SmartMatter=new g("\ud83d\udca0 SmartMatter");g.EngineeringKnowledge=new g("\u2699\ufe0f Engineering Data");g.PsychKnowledge=new g("\ud83e\udde0 Psychological Data");
g.AlienKnowledge=new g("\ud83d\udef8 Alien Data");g.AlignmentKnowledge=new g("\ud83d\udcce AI Alignment Data");var n=function(a,b){this.resource=a;this.quantity=b};n.prototype.toString=function(){return this.resource.name+" x"+this.quantity};var I=function(a,b,d){this.name=a;this.growthMultiplier=b;this.survivalCost=d};I.values=function(){return yc.safeKeys(I).map(function(a){return I[a]}).filter(function(a){return a instanceof I})};I.Human=new I("\ud83d\udc69\ud83c\udffb\u200d\ud83d\ude80 Human Colonists",
.1,new n(g.Food,1));I.Robot=new I("\ud83e\uddbe Robots",0,new n(g.Energy,.5));var ta=function(a,b){this.requirement=a;this.next=b},ua=function(a,b,d){this.description=a;this.paths=b;this.hint=d};ua.prototype.nextState=function(a){for(var b=$jscomp.makeIterator(this.paths),d=b.next();!d.done;d=b.next())if(d=d.value,d.requirement(a))return d.next;return this};var r=function(a){this.position=a;this.possibleProjects=[];this.resourceConversions=[];this.populationCapacity=void 0};r.prototype.getTexture=
function(a){return this.texture};var Wc=function(a,b){this.species=a;this.capacity=b},y=function(a,b){this.x=a;this.y=b};y.prototype.toString=function(){return"("+this.x+", "+this.y+")"};y.prototype.distanceFrom=function(a){return Math.hypot(Math.abs(this.x-a.x),Math.abs(this.y-a.y))};var Z=function(a,b){var d=this;this.parentScreen=a;this.world=b;this.viewWidth=Ba.currentOptions.viewWidth;this.viewHeight=Ba.currentOptions.viewHeight;this.highlightedCoordinates=null;this.html=l.makeCanvas(this.viewWidth*
Z.pixelsPerTile,this.viewHeight*Z.pixelsPerTile,["map-canvas"]);this.html.addEventListener("click",function(a){return d.handleClick(a)});this.refresh()};Z.prototype.refresh=function(){var a=this.world.getTilesInRectangle(this.world.viewPosition.x,this.world.viewPosition.y,this.viewWidth,this.viewHeight);a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,this.drawSquareAtCoordinates(b.getTexture(this.world),b.position);null!==this.highlightedCoordinates&&this.drawSquareAtCoordinates(Z.highlightImage,
this.highlightedCoordinates)};Z.prototype.drawSquareAtCoordinates=function(a,b){var d=this.html.getContext("2d");d.imageSmoothingEnabled=!1;var c=b.x-this.world.viewPosition.x;b=b.y-this.world.viewPosition.y;if(!(0>c||0>b||c>=this.viewWidth||b>=this.viewHeight)){var e=Z.pixelsPerTile/a.width*a.height;d.drawImage(a,c*Z.pixelsPerTile,b*Z.pixelsPerTile-e+Z.pixelsPerTile,Z.pixelsPerTile,e)}};Z.prototype.selectTile=function(a){this.highlightedCoordinates=a?a.position:null;this.refresh();this.parentScreen.changeSidebarTile(this.highlightedCoordinates)};
Z.prototype.moveViewArea=function(a,b){a=w(0,this.world.viewPosition.x+a,this.world.width-this.viewWidth);b=w(0,this.world.viewPosition.y+b,this.world.height-this.viewHeight);this.world.viewPosition=new y(a,b);this.refresh()};Z.prototype.handleClick=function(a){a=this.world.getTileAtCoordinates(new y(Math.floor(this.viewWidth/this.html.clientWidth*(a.pageX-this.html.offsetLeft))+this.world.viewPosition.x,Math.floor(this.viewHeight/this.html.clientHeight*(a.pageY-this.html.offsetTop))+this.world.viewPosition.y));
this.selectTile(a)};Z.prototype.handleKeyDown=function(a){var b=a.code;if("ArrowUp"===b||"KeyW"===b)a.preventDefault(),this.moveViewArea(0,-1);if("ArrowLeft"===b||"KeyA"===b)a.preventDefault(),this.moveViewArea(-1,0);if("ArrowDown"===b||"KeyS"===b)a.preventDefault(),this.moveViewArea(0,1);if("ArrowRight"===b||"KeyD"===b)a.preventDefault(),this.moveViewArea(1,0)};Z.pixelsPerTile=100;Z.highlightImage=ue;var Fb=function(a,b){this.parentScreen=a;this.run=b;this.position=null;this.html=l.makeDiv(["world-screen-sidebar"]);
this.refresh()};Fb.prototype.changeTile=function(a){this.position=a;this.refresh()};Fb.prototype.refresh=function(){var a=this;if(null===this.position)l.fillHTML(this.html,[l.makePara("No structure or terrain tile selected",["sidebar-tile-name"])]);else{var b=this.run.world.getTileAtCoordinates(this.position),d=l.makeDiv();b.populationCapacity&&d.appendChild(l.makePara("Population capacity for "+b.populationCapacity.capacity+" "+b.populationCapacity.species.name));var c=l.makeDiv(),e=b.possibleProjects.filter(function(b){return b.isVisible(a.position,
a.run)});e=$jscomp.makeIterator(e);for(var p=e.next();!p.done;p=e.next())c.appendChild(this.makeProjectHTML(b,p.value));e=l.makeDiv();if(0<b.resourceConversions.length){e.appendChild(l.makePara("Production:"));p=$jscomp.makeIterator(b.resourceConversions);for(var f=p.next();!f.done;f=p.next())e.appendChild(this.makeConversionHTML(f.value))}l.fillHTML(this.html,[l.makePara(b.getTileName(),["sidebar-tile-name"]),l.makePara(b.getTileDescription()),d,e,c])}};Fb.prototype.makeProjectHTML=function(a,b){var d=
this,c=l.makeDiv(["tile-project"]),e=l.makeButton(b.title,function(){d.doProject(b,a)},[],b.canDo(a.position,this.run)?"enabled":"disabled");c.appendChild(e);c.appendChild(l.makePara(b.projectDescription));if(0===b.costs.length)c.appendChild(l.makePara("Cost: Free"));else{var p=this.run.inventory.clone();e=b.costs.map(function(a){var b=p.canAfford([a]),d=l.makePara(a.toString(),[b?"project-requirement-met":"project-requirement-unmet"]);b&&p.payCost([a]);return d});e=l.makeDivContaining([l.makePara("Costs: ")].concat($jscomp.arrayFromIterable(e)));
c.appendChild(e)}0<b.completionRequirements.length&&c.appendChild(l.makePara("Requirements:"));e=$jscomp.makeIterator(b.completionRequirements);for(var f=e.next();!f.done;f=e.next()){f=f.value;var g=f.evaluate(this.run,this.position)?"project-requirement-met":"project-requirement-unmet";c.appendChild(l.makePara("- "+f.toString(),[g]))}return c};Fb.prototype.makeConversionHTML=function(a){return l.makePara("- "+a.toString())};Fb.prototype.doProject=function(a,b){a.doAction(b.position,this.run);this.run.updateQuestState();
this.parentScreen.refresh()};var Xc=function(a){this.inventory=a.inventory;this.html=l.makeDiv(["world-screen-inventory"]);this.refresh()};Xc.prototype.refresh=function(){for(var a=l.makeDiv(),b=$jscomp.makeIterator(this.inventory.getPopulationStrings()),d=b.next();!d.done;d=b.next())a.appendChild(l.makePara(d.value));b=l.makeDiv();var c=$jscomp.makeIterator(this.inventory.getInventoryStrings());for(d=c.next();!d.done;d=c.next())b.appendChild(l.makePara(d.value));0===this.inventory.getResourceList().length&&
b.appendChild(l.makePara("(none)"));l.fillHTML(this.html,[l.makeDivContaining([l.makeDivContaining([l.makeHeader("Population",1,[])],["world-screen-population-header"]),l.makePara("Available workers: "+this.inventory.getAvailableWorkers()),l.makePara("Total population:"+(0===this.inventory.getTotalPopulation()?" 0":"")),a,l.makeHeader("Inventory",1),b])])};var Yc=function(a){this.ending=a;this.html=l.makeDiv();this.refresh()};Yc.prototype.refresh=function(){var a=l.makeHeader(this.ending.title),b=
l.makePara(this.ending.description),d=l.makeButton("Exit",function(){N.show(new hb)});l.fillHTML(this.html,[l.makeDivContaining([a,b,d],["ending-page"])])};var Zc=function(a){this.html=l.makeDiv(["world-screen-quest-description"]);this.run=a;this.refresh()};Zc.prototype.refresh=function(){var a=this,b=this.run.getCurrentQuestDescription(),d=this.run.getCurrentQuestHint();b=l.makePara("Objective: "+(d?b+"\n(hint: "+d+")":b));d=this.run.getPreviousQuestDescription();this.run.questCompletionShown||(this.run.questCompletionShown=
!0,b=l.makePara("Completed: "+d,["quest-description-emphasis"]),setTimeout(function(){var b=a.run.getQuestEndState();b?N.show(new Yc(b)):a.refresh()},1500));l.fillHTML(this.html,[b])};var kb=function(a){this.mapUI=new Z(this,a.world);this.tileSidebar=new Fb(this,a);this.inventorySidebar=new Xc(a);this.header=new $c(a);this.questIndicator=new Zc(a);this.html=l.makeDivContaining([this.header.html,this.questIndicator.html,l.makeDivContaining([this.inventorySidebar.html,l.makeDivContaining([this.mapUI.html],
["world-screen-map-box"]),this.tileSidebar.html],["world-screen-hbox"])],["flex-vertical","world-screen"])};kb.prototype.refresh=function(){this.mapUI.refresh();this.tileSidebar.refresh();this.inventorySidebar.refresh();this.header.refresh();this.questIndicator.refresh()};kb.prototype.handleKeyDown=function(a){this.mapUI.handleKeyDown(a)};kb.prototype.changeSidebarTile=function(a){this.tileSidebar.changeTile(a)};var Od=function(a){this.run=a;this.html=l.makeDiv(["main-menu"]);this.refresh()};Od.prototype.refresh=
function(){var a=this;l.fillHTML(this.html,[l.makeHeader("Game Paused",2),l.makeDivContaining([l.makeButton("resume_game",function(){N.show(new kb(a.run))}),hb.makeAudioButton(this),l.makeButton("change_settings",function(){N.show(new Vc(a))}),l.makeButton("quit_game",function(){N.show(new hb)})],["main-menu-options"])])};var T=function(a,b){this.text=a;this.attribution=b};T.getRandomQuote=function(){return da.fromArray(this.QuotesList)};T.QuotesList=[new T(B($jscomp$templatelit$0),"Nick Bostrom"),
new T(B($jscomp$templatelit$1),"Nick Bostrom"),new T(B($jscomp$templatelit$2),"Eliezer Yudkowsky"),new T(B($jscomp$templatelit$3),"Claude Shannon"),new T(B($jscomp$templatelit$4),"Greg Egan"),new T(B($jscomp$templatelit$5),"Eliezer Yudkowsky"),new T(B($jscomp$templatelit$6),"Alan Turing"),new T(B($jscomp$templatelit$7),"Blake Crouch"),new T(B($jscomp$templatelit$8),"Dawn Program mission proposal, published 10942214400 SPE"),new T(B($jscomp$templatelit$9),"Sol Unified Newsfeed, article published 10963335600 SPE"),
new T(B($jscomp$templatelit$10),"Aurora Mission Colonist Handbook"),new T(B($jscomp$templatelit$11),"Aurora Mission Colonist Handbook"),new T(B($jscomp$templatelit$12),"A History of the Colonial Alliance by Elizabeth Seldon"),new T(B($jscomp$templatelit$13),"A History of the Colonial Alliance by Elizabeth Seldon"),new T(B($jscomp$templatelit$14),"A History of the Colonial Alliance by Elizabeth Seldon"),new T(B($jscomp$templatelit$15),"Medical Technician Noah Verres, Aurora Expedition, T-minus-5 days to planetfall"),
new T(B($jscomp$templatelit$16),"Quartermaster Allison Li, Aurora Expedition, T-minus-3 days to planetfall")];var hc=function(a){this.run=a;this.doneLoading=!1;this.html=l.makeDiv();this.loadingBar=l.makeDiv(["transition-loading-bar"]);this.loadingArea=l.makeDivContaining([this.loadingBar],["transition-loading-area"]);this.quote=T.getRandomQuote();a=this.quote.text;var b="\u00a0".repeat(4);a=a.replace(/\t/g,b);a=a.replace(/ {4}/g,b);a=a.replace(/^(\s*)/,"$1\u201c")+"\u201d";l.fillHTML(this.html,[l.makeDivContaining([l.makePara(a),
l.makePara("- "+this.quote.attribution,["transition-attribution"])],["transition-quote-panel"]),this.loadingArea])};hc.prototype.refresh=function(){};hc.prototype.startLoading=function(){var a=this;this.run.completeTurn();setTimeout(function(){l.fillHTML(a.loadingArea,[l.makeButton("Continue",function(){a.continueToNextTurn()})]);a.doneLoading=!0},2E3)};hc.prototype.continueToNextTurn=function(){N.show(new kb(this.run))};hc.prototype.handleKeyDown=function(){this.doneLoading&&this.continueToNextTurn()};
var Qa=Pa(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),bc=Pa(/Edge/i),Pd=Pa(/firefox/i),ad=Pa(/safari/i)&&!Pa(/chrome/i)&&!Pa(/android/i),ic=Pa(/iP(ad|od|hone)/i),sf=Pa(/chrome/i)&&Pa(/android/i),rd={capture:!1,passive:!1},sd=/\s+/g,Zb,pa="Sortable"+(new Date).getTime(),jc=[],bd={initializeByDefault:!0},cc={mount:function(a){for(var b in bd)!bd.hasOwnProperty(b)||b in a||(a[b]=bd[b]);jc.push(a)},pluginEvent:function(a,b,d){var c=this;this.eventCanceled=!1;d.cancel=function(){c.eventCanceled=
!0};var e=a+"Global";jc.forEach(function(c){if(b[c.pluginName]){if(b[c.pluginName][e])b[c.pluginName][e](ab({sortable:b},d));if(b.options[c.pluginName]&&b[c.pluginName][a])b[c.pluginName][a](ab({sortable:b},d))}})},initializePlugins:function(a,b,d,c){jc.forEach(function(c){var e=c.pluginName;if(a.options[e]||c.initializeByDefault)c=new c(a,b,a.options),c.sortable=a,c.options=a.options,a[e]=c,Oa(d,c.defaults)});for(var e in a.options)a.options.hasOwnProperty(e)&&(c=this.modifyOption(a,e,a.options[e]),
"undefined"!==typeof c&&(a.options[e]=c))},getEventProperties:function(a,b){var d={};jc.forEach(function(c){"function"===typeof c.eventProperties&&Oa(d,c.eventProperties.call(b[c.pluginName],a))});return d},modifyOption:function(a,b,d){var c;jc.forEach(function(e){a[e.pluginName]&&e.optionListeners&&"function"===typeof e.optionListeners[b]&&(c=e.optionListeners[b].call(a[e.pluginName],d))});return c}},ma=function(a,b){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c=d.evt;d=Hc(d,
["evt"]);cc.pluginEvent.bind(A)(a,b,ab({dragEl:q,parentEl:U,ghostEl:C,rootEl:M,nextEl:Gb,lastDownEl:zc,cloneEl:O,cloneHidden:lb,dragStarted:kc,putSortable:ca,activeSortable:A.active,originalEvent:c,oldIndex:Mb,oldDraggableIndex:$b,newIndex:oa,newDraggableIndex:eb,hideGhostForTarget:Qd,unhideGhostForTarget:Rd,cloneNowHidden:function(){lb=!0},cloneNowShown:function(){lb=!1},dispatchSortableEvent:function(a){ja({sortable:b,name:a,originalEvent:c})}},d))},q,U,C,M,Gb,zc,O,lb,Mb,oa,$b,eb,Ac,ca,Sb=!1,Bc=
!1,qc=[],Hb,Ca,cd,dd,Sd,Td,kc,Tb,ec,dc=!1,Cc=!1,rc,ia,ed=[],Oc=!1,sc=[],Dc="undefined"!==typeof document,Ud=bc||Qa?"cssFloat":"float",ie=Dc&&!sf&&!ic&&"draggable"in document.createElement("div"),Vd=function(){if(Dc){if(Qa)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),zd=function(a,b){var d=x(a),c=parseInt(d.width)-parseInt(d.paddingLeft)-parseInt(d.paddingRight)-parseInt(d.borderLeftWidth)-parseInt(d.borderRightWidth),e=pc(a,
0,b);a=pc(a,1,b);var f=e&&x(e);b=a&&x(a);var g=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+ba(e).width,h=b&&parseInt(b.marginLeft)+parseInt(b.marginRight)+ba(a).width;return"flex"===d.display?"column"===d.flexDirection||"column-reverse"===d.flexDirection?"vertical":"horizontal":"grid"===d.display?1>=d.gridTemplateColumns.split(" ").length?"vertical":"horizontal":e&&f["float"]&&"none"!==f["float"]?(d="left"===f["float"]?"left":"right",!a||"both"!==b.clear&&b.clear!==d?"horizontal":"vertical"):
e&&("block"===f.display||"flex"===f.display||"table"===f.display||"grid"===f.display||g>=c&&"none"===d[Ud]||a&&"none"===d[Ud]&&g+h>c)?"vertical":"horizontal"},tf=function(a,b,d){var c=d?a.left:a.top,e=d?a.right:a.bottom;a=d?a.width:a.height;var f=d?b.left:b.top,g=d?b.right:b.bottom;b=d?b.width:b.height;return c===f||e===g||c+a/2===f+b/2},uf=function(a,b){var d;qc.some(function(c){if(!Ic(c)){var e=ba(c),k=c[pa].options.emptyInsertThreshold,f=a>=e.left-k&&a<=e.right+k;e=b>=e.top-k&&b<=e.bottom+k;if(k&&
f&&e)return d=c}});return d},Ad=function(a){function b(a,d){return function(c,e,k,f){var p=c.options.group.name&&e.options.group.name&&c.options.group.name===e.options.group.name;if(null==a&&(d||p))return!0;if(null==a||!1===a)return!1;if(d&&"clone"===a)return a;if("function"===typeof a)return b(a(c,e,k,f),d)(c,e,k,f);c=(d?c:e).options.group.name;return!0===a||"string"===typeof a&&a===c||a.join&&-1<a.indexOf(c)}}var d={},c=a.group;c&&"object"==Xb(c)||(c={name:c});d.name=c.name;d.checkPull=b(c.pull,
!0);d.checkPut=b(c.put);d.revertClone=c.revertClone;a.group=d},Qd=function(){!Vd&&C&&x(C,"display","none")},Rd=function(){!Vd&&C&&x(C,"display","")};Dc&&document.addEventListener("click",function(a){if(Bc)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),Bc=!1},!0);var Ib=function(a){if(q){a=a.touches?a.touches[0]:a;var b=uf(a.clientX,a.clientY);if(b){var d={},c;for(c in a)a.hasOwnProperty(c)&&(d[c]=a[c]);d.target=d.rootEl=b;
d.preventDefault=void 0;d.stopPropagation=void 0;b[pa]._onDragOver(d)}}},vf=function(a){q&&q.parentNode[pa]._isOutsideThisEl(a.target)};A.prototype={constructor:A,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(Tb=null)},_getDirection:function(a,b){return"function"===typeof this.options.direction?this.options.direction.call(this,a,b,q):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,d=this.el,c=this.options,e=c.preventOnFilter,f=a.type,g=a.touches&&a.touches[0]||
a.pointerType&&"touch"===a.pointerType&&a,h=(g||a).target,l=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||h,n=c.filter;ne(d);if(!(q||/mousedown|pointerdown/.test(f)&&0!==a.button||c.disabled||l.isContentEditable||(h=Fa(h,c.draggable,d,!1),h&&h.animated||zc===h))){Mb=sa(h);$b=sa(h,c.draggable);if("function"===typeof n){if(n.call(this,a,h,this)){ja({sortable:b,rootEl:l,name:"filter",targetEl:h,toEl:d,fromEl:d});ma("filter",b,{evt:a});e&&a.cancelable&&a.preventDefault();
return}}else if(n&&(n=n.split(",").some(function(c){if(c=Fa(l,c.trim(),d,!1))return ja({sortable:b,rootEl:c,name:"filter",targetEl:h,fromEl:d,toEl:d}),ma("filter",b,{evt:a}),!0}))){e&&a.cancelable&&a.preventDefault();return}c.handle&&!Fa(l,c.handle,d,!1)||this._prepareDragStart(a,g,h)}}},_prepareDragStart:function(a,b,d){var c=this,e=c.el,f=c.options,g=e.ownerDocument;if(d&&!q&&d.parentNode===e){var h=ba(d);M=e;q=d;U=q.parentNode;Gb=q.nextSibling;zc=d;Ac=f.group;A.dragged=q;Hb={target:q,clientX:(b||
a).clientX,clientY:(b||a).clientY};Sd=Hb.clientX-h.left;Td=Hb.clientY-h.top;this._lastX=(b||a).clientX;this._lastY=(b||a).clientY;q.style["will-change"]="all";d=function(){ma("delayEnded",c,{evt:a});A.eventCanceled?c._onDrop():(c._disableDelayedDragEvents(),!Pd&&c.nativeDraggable&&(q.draggable=!0),c._triggerDragStart(a,b),ja({sortable:c,name:"choose",originalEvent:a}),na(q,f.chosenClass,!0))};f.ignore.split(",").forEach(function(a){td(q,a.trim(),Nc)});z(g,"dragover",Ib);z(g,"mousemove",Ib);z(g,"touchmove",
Ib);z(g,"mouseup",c._onDrop);z(g,"touchend",c._onDrop);z(g,"touchcancel",c._onDrop);Pd&&this.nativeDraggable&&(this.options.touchStartThreshold=4,q.draggable=!0);ma("delayStart",this,{evt:a});!f.delay||f.delayOnTouchOnly&&!b||this.nativeDraggable&&(bc||Qa)?d():A.eventCanceled?this._onDrop():(z(g,"mouseup",c._disableDelayedDrag),z(g,"touchend",c._disableDelayedDrag),z(g,"touchcancel",c._disableDelayedDrag),z(g,"mousemove",c._delayedDragTouchMoveHandler),z(g,"touchmove",c._delayedDragTouchMoveHandler),
f.supportPointer&&z(g,"pointermove",c._delayedDragTouchMoveHandler),c._dragStartTimer=setTimeout(d,f.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){q&&Nc(q);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=
this.el.ownerDocument;G(a,"mouseup",this._disableDelayedDrag);G(a,"touchend",this._disableDelayedDrag);G(a,"touchcancel",this._disableDelayedDrag);G(a,"mousemove",this._delayedDragTouchMoveHandler);G(a,"touchmove",this._delayedDragTouchMoveHandler);G(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?z(document,"pointermove",this._onTouchMove):b?z(document,"touchmove",this._onTouchMove):
z(document,"mousemove",this._onTouchMove):(z(q,"dragend",this),z(M,"dragstart",this._onDragStart));try{document.selection?tc(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(d){}},_dragStarted:function(a,b){Sb=!1;if(M&&q){ma("dragStarted",this,{evt:b});this.nativeDraggable&&z(document,"dragover",vf);var d=this.options;!a&&na(q,d.dragClass,!1);na(q,d.ghostClass,!0);A.active=this;a&&this._appendGhost();ja({sortable:this,name:"start",originalEvent:b})}else this._nulling()},
_emulateDragOver:function(){if(Ca){this._lastX=Ca.clientX;this._lastY=Ca.clientY;Qd();for(var a=document.elementFromPoint(Ca.clientX,Ca.clientY),b=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(Ca.clientX,Ca.clientY);if(a===b)break;b=a}q.parentNode[pa]._isOutsideThisEl(a);if(b){do{if(b[pa]&&b[pa]._onDragOver({clientX:Ca.clientX,clientY:Ca.clientY,target:a,rootEl:b})&&!this.options.dragoverBubble)break;a=b}while(b=b.parentNode)}Rd()}},_onTouchMove:function(a){if(Hb){var b=this.options,d=b.fallbackTolerance,
c=b.fallbackOffset;b=a.touches?a.touches[0]:a;var e=C&&Lb(C,!0),f=C&&e&&e.a,g=C&&e&&e.d,h=ic&&ia&&vd(ia);f=(b.clientX-Hb.clientX+c.x)/(f||1)+(h?h[0]-ed[0]:0)/(f||1);c=(b.clientY-Hb.clientY+c.y)/(g||1)+(h?h[1]-ed[1]:0)/(g||1);if(!A.active&&!Sb){if(d&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<d)return;this._onDragStart(a,!0)}C&&(e?(e.e+=f-(cd||0),e.f+=c-(dd||0)):e={a:1,b:0,c:0,d:1,e:f,f:c},d="matrix(".concat(e.a,",").concat(e.b,",").concat(e.c,",").concat(e.d,",").concat(e.e,
",").concat(e.f,")"),x(C,"webkitTransform",d),x(C,"mozTransform",d),x(C,"msTransform",d),x(C,"transform",d),cd=f,dd=c,Ca=b);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!C){var a=this.options.fallbackOnBody?document.body:M,b=ba(q,!0,ic,!0,a),d=this.options;if(ic){for(ia=a;"static"===x(ia,"position")&&"none"===x(ia,"transform")&&ia!==document;)ia=ia.parentNode;ia!==document.body&&ia!==document.documentElement?(ia===document&&(ia=Ra()),b.top+=ia.scrollTop,b.left+=ia.scrollLeft):ia=
Ra();ed=vd(ia)}C=q.cloneNode(!0);na(C,d.ghostClass,!1);na(C,d.fallbackClass,!0);na(C,d.dragClass,!0);x(C,"transition","");x(C,"transform","");x(C,"box-sizing","border-box");x(C,"margin",0);x(C,"top",b.top);x(C,"left",b.left);x(C,"width",b.width);x(C,"height",b.height);x(C,"opacity","0.8");x(C,"position",ic?"absolute":"fixed");x(C,"zIndex","100000");x(C,"pointerEvents","none");A.ghost=C;a.appendChild(C);x(C,"transform-origin",Sd/parseInt(C.style.width)*100+"% "+Td/parseInt(C.style.height)*100+"%")}},
_onDragStart:function(a,b){var d=this,c=a.dataTransfer,e=d.options;ma("dragStart",this,{evt:a});A.eventCanceled?this._onDrop():(ma("setupClone",this),A.eventCanceled||(O=yd(q),O.draggable=!1,O.style["will-change"]="",this._hideClone(),na(O,this.options.chosenClass,!1),A.clone=O),d.cloneId=tc(function(){ma("clone",d);A.eventCanceled||(d.options.removeCloneOnHide||M.insertBefore(O,q),d._hideClone(),ja({sortable:d,name:"clone"}))}),!b&&na(q,e.dragClass,!0),b?(Bc=!0,d._loopId=setInterval(d._emulateDragOver,
50)):(G(document,"mouseup",d._onDrop),G(document,"touchend",d._onDrop),G(document,"touchcancel",d._onDrop),c&&(c.effectAllowed="move",e.setData&&e.setData.call(d,c,q)),z(document,"drop",d),x(q,"transform","translateZ(0)")),Sb=!0,d._dragStartId=tc(d._dragStarted.bind(d,b,a)),z(document,"selectstart",d),kc=!0,ad&&x(document.body,"user-select","none"))},_onDragOver:function(a){function b(b,d){ma(b,w,ab({evt:a,isOwner:r,axis:y?"vertical":"horizontal",revert:l,dragRect:F,targetRect:h,canSort:B,fromSortable:v,
target:g,completed:c,onMove:function(b,c){return Mc(M,f,q,F,b,ba(b),a,c)},changed:e},d))}function d(){b("dragOverAnimationCapture");w.captureAnimationState();w!==v&&v.captureAnimationState()}function c(c){b("dragOverCompleted",{insertion:c});c&&(r?t._hideClone():t._showClone(w),w!==v&&(na(q,ca?ca.options.ghostClass:t.options.ghostClass,!1),na(q,n.ghostClass,!0)),ca!==w&&w!==A.active?ca=w:w===A.active&&ca&&(ca=null),v===w&&(w._ignoreWhileAnimating=g),w.animateAll(function(){b("dragOverAnimationComplete");
w._ignoreWhileAnimating=null}),w!==v&&(v.animateAll(),v._ignoreWhileAnimating=null));if(g===q&&!q.animated||g===f&&!g.animated)Tb=null;n.dragoverBubble||a.rootEl||g===document||(q.parentNode[pa]._isOutsideThisEl(a.target),!c&&Ib(a));!n.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return G=!0}function e(){oa=sa(q);eb=sa(q,n.draggable);ja({sortable:w,name:"change",toEl:f,newIndex:oa,newDraggableIndex:eb,originalEvent:a})}var f=this.el,g=a.target,h,l,n=this.options,m=n.group,t=A.active,r=Ac===
m,B=n.sort,v=ca||t,w=this,G=!1;if(!Oc){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();g=Fa(g,n.draggable,f,!0);b("dragOver");if(A.eventCanceled)return G;if(q.contains(a.target)||g.animated&&g.animatingX&&g.animatingY||w._ignoreWhileAnimating===g)return c(!1);Bc=!1;if(t&&!n.disabled&&(r?B||(l=!M.contains(q)):ca===this||(this.lastPutMode=Ac.checkPull(this,t,q,a))&&m.checkPut(this,t,q,a))){var y="vertical"===this._getDirection(a,g);var F=ba(q);b("dragOverValid");if(A.eventCanceled)return G;
if(l)return U=M,d(),this._hideClone(),b("revert"),A.eventCanceled||(Gb?M.insertBefore(q,Gb):M.appendChild(q)),c(!0);m=Ic(f,n.draggable);if(!m||ke(a,y,this)&&!m.animated){if(m===q)return c(!1);m&&f===a.target&&(g=m);g&&(h=ba(g));if(!1!==Mc(M,f,q,F,g,h,a,!!g))return d(),f.appendChild(q),U=f,e(),c(!0)}else if(g.parentNode===f){h=ba(g);var z=0;z=q.parentNode!==f;var D=!tf(q.animated&&q.toRect||F,g.animated&&g.toRect||h,y);m=y?"top":"left";var H=ud(g,"top","top")||ud(q,"top","top"),K=H?H.scrollTop:void 0;
if(Tb!==g){var L=h[m];dc=!1;Cc=!D&&n.invertSwap||z}z=le(a,g,h,y,D?1:n.swapThreshold,null==n.invertedSwapThreshold?n.swapThreshold:n.invertedSwapThreshold,Cc,Tb===g);if(0!==z){D=sa(q);do{D-=z;var I=U.children[D]}while(I&&("none"===x(I,"display")||I===C))}if(0===z||I===g)return c(!1);Tb=g;ec=z;I=g.nextElementSibling;D=!1;D=1===z;z=Mc(M,f,q,F,g,h,a,D);if(!1!==z){if(1===z||-1===z)D=1===z;Oc=!0;setTimeout(je,30);d();D&&!I?f.appendChild(q):g.parentNode.insertBefore(q,D?I:g);H&&xd(H,0,K-H.scrollTop);U=q.parentNode;
void 0===L||Cc||(rc=Math.abs(L-ba(g)[m]));e();return c(!0)}}if(f.contains(q))return c(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){G(document,"mousemove",this._onTouchMove);G(document,"touchmove",this._onTouchMove);G(document,"pointermove",this._onTouchMove);G(document,"dragover",Ib);G(document,"mousemove",Ib);G(document,"touchmove",Ib)},_offUpEvents:function(){var a=this.el.ownerDocument;G(a,"mouseup",this._onDrop);G(a,"touchend",this._onDrop);G(a,"pointerup",this._onDrop);
G(a,"touchcancel",this._onDrop);G(document,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;oa=sa(q);eb=sa(q,c.draggable);ma("drop",this,{evt:a});U=q&&q.parentNode;oa=sa(q);eb=sa(q,c.draggable);if(!A.eventCanceled&&(dc=Cc=Sb=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(G(document,"drop",this),G(b,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ad&&x(document.body,
"user-select",""),x(q,"transform",""),a&&(kc&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),C&&C.parentNode&&C.parentNode.removeChild(C),(M===U||ca&&"clone"!==ca.lastPutMode)&&O&&O.parentNode&&O.parentNode.removeChild(O),q&&(this.nativeDraggable&&G(q,"dragend",this),Nc(q),q.style["will-change"]="",kc&&!Sb&&na(q,ca?ca.options.ghostClass:this.options.ghostClass,!1),na(q,this.options.chosenClass,!1),ja({sortable:this,name:"unchoose",toEl:U,newIndex:null,newDraggableIndex:null,
originalEvent:a}),M!==U?(0<=oa&&(ja({rootEl:U,name:"add",toEl:U,fromEl:M,originalEvent:a}),ja({sortable:this,name:"remove",toEl:U,originalEvent:a}),ja({rootEl:U,name:"sort",toEl:U,fromEl:M,originalEvent:a}),ja({sortable:this,name:"sort",toEl:U,originalEvent:a})),ca&&ca.save()):oa!==Mb&&0<=oa&&(ja({sortable:this,name:"update",toEl:U,originalEvent:a}),ja({sortable:this,name:"sort",toEl:U,originalEvent:a})),A.active)))){if(null==oa||-1===oa)oa=Mb,eb=$b;ja({sortable:this,name:"end",toEl:U,originalEvent:a});
this.save()}this._nulling()},_nulling:function(){ma("nulling",this);M=q=U=C=Gb=O=zc=lb=Hb=Ca=kc=oa=eb=Mb=$b=Tb=ec=ca=Ac=A.dragged=A.ghost=A.clone=A.active=null;sc.forEach(function(a){a.checked=!0});sc.length=cd=dd=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":q&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=
[],b,c=this.el.children,e=0,f=c.length,g=this.options;e<f;e++)b=c[e],Fa(b,g.draggable,this.el,!1)&&a.push(b.getAttribute(g.dataIdAttr)||me(b));return a},sort:function(a){var b={},c=this.el;this.toArray().forEach(function(a,d){d=c.children[d];Fa(d,this.options.draggable,c,!1)&&(b[a]=d)},this);a.forEach(function(a){b[a]&&(c.removeChild(b[a]),c.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return Fa(a,b||this.options.draggable,this.el,!1)},
option:function(a,b){var c=this.options;if(void 0===b)return c[a];var e=cc.modifyOption(this,a,b);c[a]="undefined"!==typeof e?e:b;"group"===a&&Ad(c)},destroy:function(){ma("destroy",this);var a=this.el;a[pa]=null;G(a,"mousedown",this._onTapStart);G(a,"touchstart",this._onTapStart);G(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(G(a,"dragover",this),G(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")});this._onDrop();
this._disableDelayedDragEvents();qc.splice(qc.indexOf(this.el),1);this.el=a=null},_hideClone:function(){lb||(ma("hideClone",this),A.eventCanceled||(x(O,"display","none"),this.options.removeCloneOnHide&&O.parentNode&&O.parentNode.removeChild(O),lb=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():lb&&(ma("showClone",this),A.eventCanceled||(M.contains(q)&&!this.options.group.revertClone?M.insertBefore(O,q):Gb?M.insertBefore(O,Gb):M.appendChild(O),this.options.group.revertClone&&
this.animate(q,O),x(O,"display",""),lb=!1))}};Dc&&z(document,"touchmove",function(a){(A.active||Sb)&&a.cancelable&&a.preventDefault()});A.utils={on:z,off:G,css:x,find:td,is:function(a,b){return!!Fa(a,b,a,!1)},extend:function(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},throttle:wd,closest:Fa,toggleClass:na,clone:yd,index:sa,nextTick:tc,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:zd,getChild:pc};A.get=function(a){return a[pa]};A.mount=function(){for(var a=
arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];b[0].constructor===Array&&(b=b[0]);b.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(A.utils=ab({},A.utils,a.utils));cc.mount(a)})};A.create=function(a,b){return new A(a,b)};A.version="1.10.2";var S=[],lc,fd,gd=!1,hd,id,Ec,Ub,jd=wd(function(a,b,c,e){if(b.scroll){var d=(a.touches?a.touches[0]:a).clientX,f=(a.touches?a.touches[0]:
a).clientY,k=b.scrollSensitivity,g=b.scrollSpeed,h=Ra(),l=!1;if(fd!==c){fd=c;uc();lc=b.scroll;var n=b.scrollFn;!0===lc&&(lc=db(c,!0))}c=0;var m=lc;do{var q=m,r=ba(q),w=r.top,v=r.bottom,z=r.left,B=r.right,C=r.width;r=r.height;var D=void 0,y=void 0,F=q.scrollWidth,G=q.scrollHeight;y=x(q);var H=q.scrollLeft,I=q.scrollTop;q===h?(D=C<F&&("auto"===y.overflowX||"scroll"===y.overflowX||"visible"===y.overflowX),y=r<G&&("auto"===y.overflowY||"scroll"===y.overflowY||"visible"===y.overflowY)):(D=C<F&&("auto"===
y.overflowX||"scroll"===y.overflowX),y=r<G&&("auto"===y.overflowY||"scroll"===y.overflowY));z=D&&(Math.abs(B-d)<=k&&H+C<F)-(Math.abs(z-d)<=k&&!!H);w=y&&(Math.abs(v-f)<=k&&I+r<G)-(Math.abs(w-f)<=k&&!!I);if(!S[c])for(v=0;v<=c;v++)S[v]||(S[v]={});if(S[c].vx!=z||S[c].vy!=w||S[c].el!==q)if(S[c].el=q,S[c].vx=z,S[c].vy=w,clearInterval(S[c].pid),0!=z||0!=w)l=!0,S[c].pid=setInterval(function(){e&&0===this.layer&&A.active._onTouchMove(Ec);var b=S[this.layer].vy?S[this.layer].vy*g:0,c=S[this.layer].vx?S[this.layer].vx*
g:0;"function"===typeof n&&"continue"!==n.call(A.dragged.parentNode[pa],c,b,a,Ec,S[this.layer].el)||xd(S[this.layer].el,c,b)}.bind({layer:c}),24);c++}while(b.bubbleScroll&&m!==h&&(m=db(m,!1)));gd=l}},30),Wd=function(a){var b=a.originalEvent,c=a.putSortable,e=a.dragEl,f=a.activeSortable,g=a.dispatchSortableEvent,h=a.hideGhostForTarget;a=a.unhideGhostForTarget;b&&(f=c||f,h(),b=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b,b=document.elementFromPoint(b.clientX,b.clientY),a(),f&&!f.el.contains(b)&&
(g("spill"),this.onSpill({dragEl:e,putSortable:c})))};Pc.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var c=pc(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(b,c):this.sortable.el.appendChild(b);this.sortable.animateAll();a&&a.animateAll()},drop:Wd};Oa(Pc,{pluginName:"revertOnSpill"});Qc.prototype={onSpill:function(a){var b=
a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:Wd};Oa(Qc,{pluginName:"removeOnSpill"});A.mount(new function(){function a(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var a in this)"_"===a.charAt(0)&&"function"===typeof this[a]&&(this[a]=this[a].bind(this))}a.prototype={dragStarted:function(a){a=a.originalEvent;this.sortable.nativeDraggable?z(document,"dragover",this._handleAutoScroll):
this.options.supportPointer?z(document,"pointermove",this._handleFallbackAutoScroll):a.touches?z(document,"touchmove",this._handleFallbackAutoScroll):z(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){a=a.originalEvent;this.options.dragOverBubble||a.rootEl||this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?G(document,"dragover",this._handleAutoScroll):(G(document,"pointermove",this._handleFallbackAutoScroll),G(document,"touchmove",this._handleFallbackAutoScroll),
G(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(Ub);uc();clearTimeout(Zb);Zb=void 0},nulling:function(){Ec=fd=lc=gd=Ub=hd=id=null;S.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},_handleAutoScroll:function(a,c){var b=this,d=(a.touches?a.touches[0]:a).clientX,e=(a.touches?a.touches[0]:a).clientY,f=document.elementFromPoint(d,e);Ec=a;if(c||bc||Qa||ad){jd(a,this.options,f,c);var g=db(f,!0);!gd||Ub&&d===hd&&e===id||(Ub&&clearInterval(Ub),Ub=setInterval(function(){var f=
db(document.elementFromPoint(d,e),!0);f!==g&&(g=f,uc());jd(a,b.options,f,c)},10),hd=d,id=e)}else this.options.bubbleScroll&&db(f,!0)!==Ra()?jd(a,this.options,db(f,!1),!1):uc()}};return Oa(a,{pluginName:"scroll",initializeByDefault:!0})});A.mount(Qc,Pc);var wf=A,Vb=function(a){this.run=a;this.html=l.makeDiv(["production-screen"]);this.refresh()};Vb.prototype.refresh=function(){var a=this,b=this.run.inventory.clone(),c=this.run.getResourceConversions(),e=[];c=$jscomp.makeIterator(c);for(var f=c.next();!f.done;f=
c.next())f=f.value,b.canAfford(f.inputs)&&b.hasEnoughWorkers(f.requiredWorkers)?(e.push(this.renderConversion(f,!0)),b.applyConversions([f])):e.push(this.renderConversion(f,!1));e=l.makeDivContaining(e);wf.create(e,{onEnd:function(b){var c=b.oldDraggableIndex;b=b.newDraggableIndex;void 0!==c&&void 0!==b&&a.shiftConversion(c,b)}});c=l.makePara("Available workers at start of production cycle: "+this.run.inventory.getAvailableWorkers(),["production-screen-available-workers"]);f=l.makePara("Unused workers at end of production cycle: "+
b.getAvailableWorkers(),["production-screen-worker-consumption-label"]);var g=l.makeDiv();if(0!==this.run.inventory.getSpeciesList().length){var h=b.clone();g.appendChild(l.makePara("Resources required for worker upkeep:",["production-screen-worker-consumption-label"]));for(var n=$jscomp.makeIterator(h.getSpeciesList()),m=n.next();!m.done;m=n.next()){var q=m.value;m=h.getProvidedWorkerConsumption(q).quantity;var r=h.getRequiredWorkerConsumption(q).quantity;g.appendChild(l.makePara(q.name+": "+m+"/"+
r+" "+q.survivalCost.resource.name,[r>m?"population-consumption-unmet":"population-consumption-met","production-screen-worker-consumption"]));h.payCost([h.getProvidedWorkerConsumption(q)])}}h=l.makeDiv();r=b.getSpeciesList();n=new Map;q=$jscomp.makeIterator(r);for(m=q.next();!m.done;m=q.next())m=m.value,n.set(m,b.getPopulation(m));b.doPopulationGrowth();q=new Map;var t=$jscomp.makeIterator(r);for(m=t.next();!m.done;m=t.next())m=m.value,q.set(m,b.getPopulation(m));r=$jscomp.makeIterator(r);for(m=r.next();!m.done;m=
r.next()){m=m.value;t=n.get(m);var v=q.get(m);t-=v;0<t&&h.appendChild(l.makePara(t+" "+m.name+" will die from lack of "+m.survivalCost.resource.name+"!",["population-death-label"]))}l.fillHTML(this.html,[l.makeHeader("Resource Production Management"),l.makeHeader("Inventory at start of production cycle:",2,["production-screen-label"]),this.renderInventory(this.run.inventory),l.makeHeader("Resource production",2,["production-screen-label"]),c,l.makePara("Drag conversions to change the activation order",
["production-screen-drag-hint"]),e,l.makeHeader("Workforce",2,["production-screen-label"]),f,g,h,l.makeHeader("Inventory at end of production cycle:",2,["production-screen-label"]),this.renderInventory(b),l.makeButton("Back",function(){N.show(new kb(a.run))},["production-screen-back-button"])])};Vb.prototype.renderInventory=function(a){a=a.getInventoryStrings().map(function(a){return l.makePara(a)});0===a.length&&a.push(l.makePara("(none)"));return l.makeDivContaining(a,["production-screen-inventory"])};
Vb.prototype.renderConversion=function(a,b){var c=this,e=l.makeDiv(["conversion"]),f=a.toString(),g="conversion-description-normal";a.enabled?b||(f=a.toString()+" (cannot afford)",g="conversion-description-cannot-afford"):(f=a.toString()+" (disabled) ",g="conversion-description-disabled");b=l.makePara(f,[g,"conversion-description"]);b=l.makeDivContaining([b],["conversion-description-box"]);e.appendChild(b);e.appendChild(l.makeButton("Toggle",function(){c.toggle(a)}));return e};Vb.prototype.shiftConversion=
function(a,b){this.run.shiftConversionPriority(a,b);this.refresh()};Vb.prototype.toggle=function(a){a.enabled=!a.enabled;this.refresh()};var kd=function(a){this.run=a;this.html=l.makeDiv(["research-screen"]);this.refresh()};kd.prototype.refresh=function(){var a=this,b=l.makeHeader("Available Research Projects"),c=this.run.getResearchOptions(),e=g.values().filter(function(a){return c.some(function(b){return b.researchCost.resource===a})}),f=l.makeDiv(["research-resources"]);0!==e.length&&(f.appendChild(l.makeHeader("Available Research Data")),
e.forEach(function(b){return f.appendChild(l.makePara(b.name+": "+a.run.inventory.getResourceQuantity(b)))}));e=l.makeDivContaining(c.map(function(b){return a.renderTechOption(b)}));0===c.length&&(b=l.makeDiv());var h=l.makeHeader("Previous Research Projects",1,["previous-research-header"]),m=this.run.getUnlockedTechnologies().filter(function(a){return a.visible}).map(function(a){return l.makePara("\u2022 "+a.name,["previous-research"])});0===m.length&&(h=l.makeDiv());var n=l.makeButton("Back",function(){N.show(new kb(a.run))},
[]);l.fillHTML(this.html,[b,e,f,h].concat($jscomp.arrayFromIterable(m),[n]))};kd.prototype.renderTechOption=function(a){for(var b=this,c=l.makeDivContaining([l.makeHeader(a.name,2),l.makePara(a.description),l.makePara("Development cost: "+a.researchCost)],["tech-option"]),e=0,f=$jscomp.makeIterator(a.requiredTechs),g=f.next();!g.done;g=f.next())g=g.value,this.run.hasUnlockedTechnology(g)||(e++,c.appendChild(l.makePara("Requires "+g.name+" research")));e=0===e&&this.run.inventory.canAfford([a.researchCost]);
c.appendChild(l.makeButton("Conduct Research",function(){b.run.inventory.payCost([a.researchCost]);b.run.unlockTechnology(a);b.run.updateQuestState();b.refresh()},[],e?"enabled":"disabled"));return c};var $c=function(a,b){this.run=a;this.buttonState=void 0===b?"enabled":b;this.html=l.makeDiv(["world-screen-header"]);this.refresh()};$c.prototype.refresh=function(){var a=this,b=l.makeButton("Pause Game",function(){N.show(new Od(a.run))},[],this.buttonState),c=l.makeButton("Next Turn",function(){var b=
new hc(a.run);N.show(b);b.startLoading()},[],this.buttonState),e=l.makeButton("Manage Production",function(){N.show(new Vb(a.run))},[],this.buttonState),f=l.makeButton("Research Projects",function(){N.show(new kd(a.run))},[],this.buttonState);l.fillHTML(this.html,[b,e,f,c])};var mc=function(a,b,c){this.run=a;this.center=b;this.circuitsTile=c;this.mapUI=new Z(this,a.world);this.tileSidebar=new Fb(this,a);this.tileSidebar.changeTile(b);this.inventorySidebar=new Xc(a);this.header=new $c(a,"disabled");
this.questIndicator=new Zc(a);this.html=l.makeDivContaining([this.header.html,this.questIndicator.html,l.makeDivContaining([this.inventorySidebar.html,l.makeDivContaining([this.mapUI.html],["world-screen-map-box"]),this.tileSidebar.html],["world-screen-hbox"])],["flex-vertical","world-screen"])};mc.prototype.expandCircuits=function(a){for(var b=this,c=this.run.world,e=c.getTilesInCircle(this.center,a),f=c.getTileAtCoordinates(this.center),g=$jscomp.makeIterator(e),h=g.next();!h.done;h=g.next())h=
h.value,h!==f&&c.placeTile(new this.circuitsTile(h.position));this.run.updateQuestState();this.run.inventory.applyPopulationCaps();this.refresh();if(e.length<c.width*c.height)setTimeout(function(){b.expandCircuits(1.01*a+.05)},100);else{c=$jscomp.makeIterator(this.run.inventory.getResourceList());for(e=c.next();!e.done;e=c.next())e=e.value,this.run.inventory.removeResource(e,this.run.inventory.getResourceQuantity(e));this.refresh()}};mc.prototype.refresh=function(){this.mapUI.refresh();this.tileSidebar.refresh();
this.inventorySidebar.refresh();this.header.refresh();this.questIndicator.refresh()};mc.prototype.handleKeyDown=function(a){this.mapUI.handleKeyDown(a)};mc.prototype.changeSidebarTile=function(a){this.tileSidebar.changeTile(a)};var H=function(a,b,c,e,f,g){this.title=a;this.projectDescription=b;this.action=c;this.costs=e;this.completionRequirements=f;this.visibilityRequirements=g};H.prototype.canDo=function(a,b){return b.inventory.canAfford(this.costs)&&this.isVisible(a,b)&&this.completionRequirements.every(function(c){return c.evaluate(b,
a)})};H.prototype.isVisible=function(a,b){return this.visibilityRequirements.every(function(c){return c(b,a)})};H.prototype.doAction=function(a,b){if(!this.canDo(a,b))throw"tried to do project "+this.title+" without meeting requirements";b.inventory.payCost(this.costs);this.action(a,b)};var Fc=function(a,b,c,e,f,g,h){var d=H.call(this,a,b,function(a,b){b.world.placeTile(new c(a))},f,g,h)||this;d.title=a;d.projectDescription=b;d.activeMonolithTile=c;d.circuitsTile=e;d.costs=f;d.completionRequirements=
g;d.visibilityRequirements=h;return d};$jscomp.inherits(Fc,H);Fc.prototype.doAction=function(a,b){if(!this.canDo(a,b))throw"tried to do project "+this.title+" without meeting requirements";b.inventory.payCost(this.costs);this.action(a,b);a=new mc(b,a,this.circuitsTile);N.show(a);a.expandCircuits(1)};var F=function(a,b,c,e,f){this.name=a;this.description=b;this.requiredTechs=c;this.researchCost=e;this.visible=void 0===f?!0:f};F.makeUnlockableTechnology=function(a,b,c,e){a=new F(a,b,c,e,!0);Xd.push(a);
return a};F.makeHiddenTechnology=function(a,b,c){c=void 0===c?!1:c;return new F(a,b,[],new n(g.EngineeringKnowledge,0),c)};var Xd=[],Jb=F.makeUnlockableTechnology("Industrial Engineering","Approaches for optimizing production processes",[],new n(g.EngineeringKnowledge,25)),va=F.makeUnlockableTechnology("Structural Engineering","Techniques for fabricating large structures on the planet's surface",[],new n(g.EngineeringKnowledge,10)),Yd=F.makeUnlockableTechnology("Distributed Robotics","Autonomous robotic worker drones capable of performing the same jobs as human workers",
[Jb],new n(g.EngineeringKnowledge,100));F.makeUnlockableTechnology("Swarm Robotics","Algorithms for efficiently managing large numbers of robotic workers",[Yd],new n(g.EngineeringKnowledge,100));var ld=F.makeUnlockableTechnology("Colonist Behavior Modeling","Simulations of human behavior in the isolated conditions of a deep space colony",[],new n(g.PsychKnowledge,30)),xf=F.makeUnlockableTechnology("Habitation Pods","Compact and efficient residence units allow more humans to be packed into a small habitat",
[ld],new n(g.EngineeringKnowledge,15)),Zd=F.makeUnlockableTechnology("Nuclear Engineering","Applying nuclear physics to technology and power generation",[Jb],new n(g.EngineeringKnowledge,70)),md=F.makeUnlockableTechnology("Planetary Surveying","Exploration of the planetary environment, including the structures believed to have been built by an alien civilization",[],new n(g.EngineeringKnowledge,50)),yf=F.makeUnlockableTechnology("Game theory","Mathematical models of strategic interaction among rational decision-makers",
[ld],new n(g.PsychKnowledge,30)),nd=F.makeUnlockableTechnology("Cognitive Biases Research","Study of systematic patterns of deviation from rational thinking and decision-making",[yf],new n(g.PsychKnowledge,50)),$d=F.makeUnlockableTechnology("Human Rationality","Practices to improve humans' ability to form accurate beliefs and make effective decisions",[nd],new n(g.PsychKnowledge,200)),Wb=F.makeHiddenTechnology("AI Safety Research","A proposal for researching techniques for aligning the goals of an artificial intelligence with the goals of its human creators",
!1),ae=F.makeUnlockableTechnology("Control Problem","A description of the problem of creating a superintelligent agent that will behave in a way that benefits its creators",[Wb],new n(g.AlignmentKnowledge,20)),zf=F.makeUnlockableTechnology("Motivation Selection","Techniques for specifying the goals and motives of an artificial intelligence",[ae],new n(g.AlignmentKnowledge,50)),Af=F.makeUnlockableTechnology("Coherent Extrapolated Volition",B($jscomp$templatelit$17),[zf],new n(g.AlignmentKnowledge,
300)),Bf=F.makeUnlockableTechnology("Decision Theory","The study of the reasoning underlying an agent's choices",[ae],new n(g.AlignmentKnowledge,40)),Cf=F.makeUnlockableTechnology("Acausal trade",B($jscomp$templatelit$18),[Bf],new n(g.AlignmentKnowledge,200)),Df=F.makeUnlockableTechnology("Cooperative Reprogramming",B($jscomp$templatelit$19),[Cf,Af],new n(g.AlignmentKnowledge,700)),nc=F.makeUnlockableTechnology("Xenoarchaeology",B($jscomp$templatelit$20),[md],new n(g.AlienKnowledge,75)),Ef=F.makeUnlockableTechnology("Sociology",
"The study of the development, structure, and functioning of societies",[ld],new n(g.PsychKnowledge,50)),od=F.makeUnlockableTechnology("Alien History",B($jscomp$templatelit$21),[Ef,nc],new n(g.AlienKnowledge,200)),Gc=F.makeUnlockableTechnology("Xenomaterials","Techniques for processing and applying exotic resources found in the ruins of the alien civilization",[nc],new n(g.AlienKnowledge,200)),Ff=F.makeUnlockableTechnology("Nanotechnology","Manipulation of matter on an atomic, molecular, and supramolecular scale",
[Gc],new n(g.EngineeringKnowledge,100)),Gf=F.makeUnlockableTechnology("Zero Point Energy","Exploiting exotic, previously-unknown principles of physics to extract tremendous amounts of energy from the quantum vacuum",[Gc,Zd],new n(g.EngineeringKnowledge,250)),Da=F.makeHiddenTechnology("Monolith Surveying",B($jscomp$templatelit$22)),Hf=F.makeUnlockableTechnology("Hypercomputing",B($jscomp$templatelit$23),[Gc],new n(g.EngineeringKnowledge,300)),be=F.makeUnlockableTechnology("Neural Uploading",B($jscomp$templatelit$24),
[Da,Hf],new n(g.AlienKnowledge,200)),ce=F.makeUnlockableTechnology("Singularity Engineering",B($jscomp$templatelit$25),[Da],new n(g.AlienKnowledge,500)),fa=function(a){a=r.call(this,a)||this;a.texture=Gd;return a};$jscomp.inherits(fa,r);fa.prototype.getTileName=function(){return fa.tileName};fa.prototype.getTileDescription=function(){return fa.tileDescription};fa.prototype.getTexture=function(a){var b=this.position.x,c=this.position.y,e=a.getTileAtCoordinates(new y(b,c-1))instanceof fa,f=a.getTileAtCoordinates(new y(b,
c+1))instanceof fa,g=a.getTileAtCoordinates(new y(b+1,c))instanceof fa;return(a=a.getTileAtCoordinates(new y(b-1,c))instanceof fa)&&g&&e&&f?Gd:a&&g&&e?af:a&&e&&f?cf:a&&g&&f?$e:g&&e&&f?bf:a&&g?Hd:e&&f?Id:a&&e?Ye:g&&e?Ze:a&&f?We:g&&f?Xe:a||g?Hd:Id};fa.tileName="Road";fa.tileDescription="Allows transportation of workers and supplies";var If=vc(fa,1),Ua=function(a){a=r.call(this,a)||this;a.texture=Ee;return a};$jscomp.inherits(Ua,r);Ua.prototype.getTileName=function(){return Ua.tileName};Ua.prototype.getTileDescription=
function(){return Ua.tileDescription};Ua.tileName="Seed Core";Ua.tileDescription=B($jscomp$templatelit$26);var Va=function(a){a=r.call(this,a)||this;a.texture=Ge;return a};$jscomp.inherits(Va,r);Va.prototype.getTileName=function(){return Va.tileName};Va.prototype.getTileDescription=function(){return Va.tileDescription};Va.tileName="Hypercomputer Network";Va.tileDescription="A self-replicating computing substrate that hosts a virtual reality for uploaded alien minds";var qa=function(a){a=r.call(this,
a)||this;a.texture=of;return a};$jscomp.inherits(qa,r);qa.prototype.getTileName=function(){return qa.tileName};qa.prototype.getTileDescription=function(){return qa.tileDescription};qa.tileName="Neural Emulation Platform";qa.tileDescription="A machine capable of interfacing with the alien monolith's hypercomputers and accessing the stored alien connectomes";var wa=function(a){a=r.call(this,a)||this;a.texture=nf;return a};$jscomp.inherits(wa,r);wa.prototype.getTileName=function(){return wa.tileName};
wa.prototype.getTileDescription=function(){return wa.tileDescription};wa.tileName="Nanotech Foundry";wa.tileDescription="A nanotechnology manufacturing facility capable of completing the unfinished alien Monolith device";var Wa=function(a){a=r.call(this,a)||this;a.texture=He;return a};$jscomp.inherits(Wa,r);Wa.prototype.getTileName=function(){return Wa.tileName};Wa.prototype.getTileDescription=function(){return Wa.tileDescription};Wa.tileName="Hypercomputer Network";Wa.tileDescription="A self-replicating computing substrate hosting a utopian virtual reality for uploaded human minds";
var Xa=function(a){a=r.call(this,a)||this;a.texture=Fe;return a};$jscomp.inherits(Xa,r);Xa.prototype.getTileName=function(){return Xa.tileName};Xa.prototype.getTileDescription=function(){return Xa.tileDescription};Xa.tileName="Seed Core";Xa.tileDescription=B($jscomp$templatelit$27);var Ga=function(a){a=r.call(this,a)||this;a.texture=De;a.possibleProjects=[new Fc("Activate Seed Core",B($jscomp$templatelit$28),Xa,Wa,[new n(g.Energy,1E5)],[gb(wa,3),gb(qa,2),Q(ce)],[])];return a};$jscomp.inherits(Ga,
r);Ga.prototype.getTileName=function(){return Ga.tileName};Ga.prototype.getTileDescription=function(){return Ga.tileDescription};Ga.tileName="Reprogrammed Monolith";Ga.tileDescription=B($jscomp$templatelit$29);var ka=function(a){a=r.call(this,a)||this;a.texture=Ce;a.possibleProjects=[new H("Upload human neural data",B($jscomp$templatelit$30),function(a,c){c.world.placeTile(new Ga(a))},[new n(g.Energy,1E3),new n(g.SmartMatter,500)],[gb(qa,2),Q(be)],[K(Df),K(Da)]),new Fc("Activate Seed Core",B($jscomp$templatelit$31),
Ua,Va,[new n(g.Energy,1E5)],[gb(wa,3),gb(qa,2),Q(ce)],[K(Da)])];return a};$jscomp.inherits(ka,r);ka.prototype.getTileName=function(){return ka.tileName};ka.prototype.getTileDescription=function(){return ka.tileDescription};ka.tileName="Monolith";ka.tileDescription="A towering alien structure";var P=function(a,b,c){this.inputs=a;this.outputs=b;this.requiredWorkers=void 0===c?0:c;this.enabled=!0;this.priority=P.nextNumber;P.nextNumber++};P.prototype.toString=function(){var a=this.outputs.map(function(a){return a.toString()}).join(", "),
b=this.inputs.map(function(a){return a.toString()});0!==this.requiredWorkers&&b.push(this.requiredWorkers+" workers");var c=b.join(", ");return 0===b.length?"Produce "+a:"Produce "+a+" using "+c};P.nextNumber=0;var za=function(a,b){a=r.call(this,a)||this;a.texture=Jd;a.resourceConversions=[new P([],[new n(g.Cavorite,200),new n(g.Energy,25)],300),new P([],[new n(g.Orichalcum,200),new n(g.Energy,25)],300)];a.textureVariant=b;return a};$jscomp.inherits(za,r);za.prototype.getTileName=function(){return za.tileName};
za.prototype.getTileDescription=function(){return za.tileDescription};za.prototype.getTexture=function(){switch(this.textureVariant){case 1:return Jd;case 2:return mf}};za.tileName="Alien Ruins Recycler Excavation";za.tileDescription="A facility that harvests and recycles exotic materials from the alien structure.";var la=function(a){var b=r.call(this,a)||this;b.textureVariant=da.bool()?1:2;b.texture=Fd;b.possibleProjects=[new H("Excavate","Construct a facility to harvest exotic alien resources from the ruins",
function(a,c){return c.world.placeTile(new za(a,b.textureVariant))},[new n(g.BuildingMaterials,200),new n(g.Energy,100)],[V,Q(nc)],[K(md)])];return b};$jscomp.inherits(la,r);la.prototype.getTileName=function(){return la.tileName};la.prototype.getTileDescription=function(){return la.tileDescription};la.prototype.getTexture=function(){switch(this.textureVariant){case 1:return Fd;case 2:return Be}};la.tileName="Alien Ruins";la.tileDescription="Abandoned structure built by a long-dead alien civilization";
var fb=function(a,b){this.description=a;this.evaluate=b};fb.prototype.toString=function(){return this.description};var V=new fb("adjacent to a road",If),xa=function(a){a=r.call(this,a)||this;a.texture=Me;a.populationCapacity=new Wc(I.Human,200);a.possibleProjects=[new H("AI Safety Research Proposal",B($jscomp$templatelit$32),function(a,c){return c.unlockTechnology(Wb)},[],[Q($d)],[K(nd),function(a){return!a.hasUnlockedTechnology(Wb)},Bd(I.Human,500)])];return a};$jscomp.inherits(xa,r);xa.prototype.getTileName=
function(){return xa.tileName};xa.prototype.getTileDescription=function(){return xa.tileDescription};xa.tileName="Habitat Dome";xa.tileDescription="A pressurized structure that provides housing, services, and life support for humans";var Ja=function(a){a=r.call(this,a)||this;a.texture=Ne;a.resourceConversions=[new P([],[new n(g.Energy,100)])];return a};$jscomp.inherits(Ja,r);Ja.prototype.getTileName=function(){return Ja.tileName};Ja.prototype.getTileDescription=function(){return Ja.tileDescription};
Ja.tileName="Photovoltaic Array";Ja.tileDescription="Converts light from this planet's sun into electrical energy";var Ka=function(a){a=r.call(this,a)||this;a.texture=Oe;a.resourceConversions=[new P([new n(g.Metal,100)],[new n(g.BuildingMaterials,100)],25),new P([new n(g.Metal,100)],[new n(g.Electronics,100)],25)];return a};$jscomp.inherits(Ka,r);Ka.prototype.getTileName=function(){return Ka.tileName};Ka.prototype.getTileDescription=function(){return Ka.tileDescription};Ka.tileName="Ore Processing Center";
Ka.tileDescription="A facility used to process ore into useful materials";var Ya=function(a){a=r.call(this,a)||this;a.texture=Qe;a.resourceConversions=[new P([new n(g.Energy,10)],[new n(g.Food,200)],30)];return a};$jscomp.inherits(Ya,r);Ya.prototype.getTileName=function(){return Ya.tileName};Ya.prototype.getTileDescription=function(){return Ya.tileDescription};Ya.tileName="Greenhouse";Ya.tileDescription="Produces "+g.Food.name+" for "+I.Human.name;var Za=function(a){a=r.call(this,a)||this;a.texture=
Pe;a.possibleProjects=[new H("Unpack Lander","Unload colonists and deploy prefabricated colonial buildings",function(a,c){var b=c.world;b.placeTile(new xa(new y(a.x+1,a.y)));b.placeTile(new Ja(new y(a.x+1,a.y-1)));b.placeTile(new Ya(new y(a.x-1,a.y)));b.placeTile(new Ka(new y(a.x-1,a.y-1)));b.placeTile(new fa(new y(a.x,a.y-1)));b.placeTile(new fa(a));b.placeTile(new fa(new y(a.x,a.y+1)));c.inventory.addResource(g.Food,1E3);c.inventory.addWorkers(I.Human,100);c.inventory.releaseWorkers()},[],[],[])];
return a};$jscomp.inherits(Za,r);Za.prototype.getTileName=function(){return Za.tileName};Za.prototype.getTileDescription=function(){return Za.tileDescription};Za.tileName="Landing Pod";Za.tileDescription=B($jscomp$templatelit$33);var pd=function(a,b){this.title=a;this.description=b},La=function(a){a=r.call(this,a)||this;a.texture=jf;a.resourceConversions=[new P([],[new n(g.EngineeringKnowledge,5)],30)];return a};$jscomp.inherits(La,r);La.prototype.getTileName=function(){return La.tileName};La.prototype.getTileDescription=
function(){return La.tileDescription};La.tileName="Engineering Lab";La.tileDescription="A workshop for developing new technology";var mb=function(a){a=r.call(this,a)||this;a.texture=df;a.populationCapacity=new Wc(I.Human,2E3);a.possibleProjects=[new H("AI Safety Research Proposal",B($jscomp$templatelit$34),function(a,c){return c.unlockTechnology(Wb)},[],[Q($d)],[K(nd),function(a){return!a.hasUnlockedTechnology(Wb)},Bd(I.Human,500)])];return a};$jscomp.inherits(mb,r);mb.prototype.getTileName=function(){return mb.tileName};
mb.prototype.getTileDescription=function(){return mb.tileDescription};mb.tileName="Arcology";mb.tileDescription="A self-contained habitat for efficiently housing a large number of humans";var nb=function(a){a=r.call(this,a)||this;a.texture=Re;a.resourceConversions=[new P([new n(g.Energy,150)],[new n(g.Food,2E3)],50)];return a};$jscomp.inherits(nb,r);nb.prototype.getTileName=function(){return nb.tileName};nb.prototype.getTileDescription=function(){return nb.tileDescription};nb.tileName="Hydroponics Greenhouse";
nb.tileDescription="Produces "+g.Food.name+" for "+I.Human.name+" more efficiently than a standard greenhouse";var ob=function(a){a=r.call(this,a)||this;a.texture=ff;a.populationCapacity=new Wc(I.Robot,5E3);a.possibleProjects=[new H("Construct robot group","Create 100 robotic worker drones",function(a,c){c.inventory.addWorkers(I.Robot,100)},[new n(g.Electronics,50),new n(g.Energy,100)],[Ed(I.Robot,100)],[]),new H("Construct robot swarm","Create 1000 robotic worker drones",function(a,c){c.inventory.addWorkers(I.Robot,
1E3)},[new n(g.Electronics,250),new n(g.Energy,1E3)],[Ed(I.Robot,1E3)],[])];return a};$jscomp.inherits(ob,r);ob.prototype.getTileName=function(){return ob.tileName};ob.prototype.getTileDescription=function(){return ob.tileDescription};ob.tileName="Drone Hive";ob.tileDescription="A facility for manufacturing, storing, and maintaining mobile robotic worker drones";var pb=function(a){a=r.call(this,a)||this;a.texture=Ie;a.possibleProjects=[new H("Break down construction site","Revert this location to wasteland",
function(a,c){c.world.placeTile(new D(a))},[],[],[]),Y(ob,[new n(g.BuildingMaterials,250),new n(g.Electronics,500)],[Q(va),Q(Yd),V],[K(Jb)]),Y(xa,[new n(g.BuildingMaterials,100)],[Q(va),V],[]),Y(mb,[new n(g.BuildingMaterials,250)],[Q(xf),V],[K(va)]),Y(Ya,[new n(g.BuildingMaterials,25)],[V],[K(va)]),Y(nb,[new n(g.BuildingMaterials,25),new n(g.Electronics,30)],[V,Q(Jb)],[K(va)])];return a};$jscomp.inherits(pb,r);pb.prototype.getTileName=function(){return pb.tileName};pb.prototype.getTileDescription=
function(){return pb.tileDescription};pb.tileName="Construction Site - Habitat";pb.tileDescription="An area designated for construction of habitation and life support facilities";var qb=function(a){a=r.call(this,a)||this;a.texture=kf;a.resourceConversions=[new P([],[new n(g.PsychKnowledge,10)],25)];return a};$jscomp.inherits(qb,r);qb.prototype.getTileName=function(){return qb.tileName};qb.prototype.getTileDescription=function(){return qb.tileDescription};qb.tileName="Psychology Lab";qb.tileDescription=
"A laboratory for studying how humans behave in the isolated conditions of a remote colony";var Ma=function(a){a=r.call(this,a)||this;a.texture=lf;a.resourceConversions=[new P([],[new n(g.AlienKnowledge,10)],50)];a.possibleProjects=[new H("Survey Alien Monolith",B($jscomp$templatelit$35,Da.name),function(a,c){c.unlockTechnology(Da)},[new n(g.AlienKnowledge,50)],[gb(ka,5)],[K(od),function(a){return!a.hasUnlockedTechnology(Da)}])];return a};$jscomp.inherits(Ma,r);Ma.prototype.getTileName=function(){return Ma.tileName};
Ma.prototype.getTileDescription=function(){return Ma.tileDescription};Ma.tileName="Xenoarchaeology Lab";Ma.tileDescription="A laboratory for studying artifacts and technology left by the now-dead alien civilization";var rb=function(a){a=r.call(this,a)||this;a.texture=hf;a.resourceConversions=[new P([],[new n(g.AlignmentKnowledge,10)],100)];return a};$jscomp.inherits(rb,r);rb.prototype.getTileName=function(){return rb.tileName};rb.prototype.getTileDescription=function(){return rb.tileDescription};
rb.tileName="AI Alignment Lab";rb.tileDescription=B($jscomp$templatelit$36);var sb=function(a){a=r.call(this,a)||this;a.texture=Je;a.possibleProjects=[new H("Break down construction site","Revert this location to wasteland",function(a,c){c.world.placeTile(new D(a))},[],[],[]),Y(La,[new n(g.BuildingMaterials,20),new n(g.Electronics,20)],[V],[]),Y(qb,[new n(g.BuildingMaterials,30)],[V],[]),Y(Ma,[new n(g.BuildingMaterials,40)],[pe(3),V,Q(md)],[]),Y(rb,[new n(g.BuildingMaterials,20),new n(g.Electronics,
40)],[qe(I.Human,200),V],[K(Wb)])];return a};$jscomp.inherits(sb,r);sb.prototype.getTileName=function(){return sb.tileName};sb.prototype.getTileDescription=function(){return sb.tileDescription};sb.tileName="Construction Site - Laboratories";sb.tileDescription="An area designated for construction of research laboratories";var tb=function(a){a=r.call(this,a)||this;a.texture=ef;a.resourceConversions=[new P([],[new n(g.Energy,1E3)],15)];return a};$jscomp.inherits(tb,r);tb.prototype.getTileName=function(){return tb.tileName};
tb.prototype.getTileDescription=function(){return tb.tileDescription};tb.tileName="Nuclear Power Plant";tb.tileDescription="A high-efficiency fission power plant";var ub=function(a){a=r.call(this,a)||this;a.texture=Ue;a.resourceConversions=[new P([new n(g.Metal,1E3)],[new n(g.BuildingMaterials,1E3)],250)];return a};$jscomp.inherits(ub,r);ub.prototype.getTileName=function(){return ub.tileName};ub.prototype.getTileDescription=function(){return ub.tileDescription};ub.tileName="Construction Materials Factory";
ub.tileDescription="A facility for producing "+g.BuildingMaterials.name;var vb=function(a){a=r.call(this,a)||this;a.texture=Te;a.resourceConversions=[new P([new n(g.Metal,500)],[new n(g.Electronics,500)],100)];return a};$jscomp.inherits(vb,r);vb.prototype.getTileName=function(){return vb.tileName};vb.prototype.getTileDescription=function(){return vb.tileDescription};vb.tileName="Electronics Factory";vb.tileDescription="A facility for producing "+g.Electronics.name;var wb=function(a){a=r.call(this,
a)||this;a.texture=Ve;a.resourceConversions=[new P([new n(g.Cavorite,500),new n(g.Energy,200)],[new n(g.Superconductor,500)],100),new P([new n(g.Orichalcum,500),new n(g.Energy,200)],[new n(g.SmartMatter,500)],100)];return a};$jscomp.inherits(wb,r);wb.prototype.getTileName=function(){return wb.tileName};wb.prototype.getTileDescription=function(){return wb.tileDescription};wb.tileName="Xeno-Materials Factory";wb.tileDescription="A facility for processing alien resources";var xb=function(a){a=r.call(this,
a)||this;a.texture=gf;a.resourceConversions=[new P([],[new n(g.Energy,1E4)],40)];return a};$jscomp.inherits(xb,r);xb.prototype.getTileName=function(){return xb.tileName};xb.prototype.getTileDescription=function(){return xb.tileDescription};xb.tileName="Zero Point Energy Plant";xb.tileDescription="A power plant that exploits exotic physics and alien science to produce vast amounts of "+g.Energy.name+".";var yb=function(a){a=r.call(this,a)||this;a.texture=Ke;a.possibleProjects=[new H("Break down construction site",
"Revert this location to wasteland",function(a,c){c.world.placeTile(new D(a))},[],[],[]),Y(Ja,[new n(g.Electronics,200)],[],[]),Y(Ka,[new n(g.Energy,100),new n(g.BuildingMaterials,100)],[V,Q(Jb)],[K(va)]),Y(ub,[new n(g.BuildingMaterials,350)],[V,Q(Jb)],[K(va)]),Y(vb,[new n(g.BuildingMaterials,300),new n(g.Electronics,150)],[V,Q(Jb)],[K(va)]),Y(wb,[new n(g.BuildingMaterials,200),new n(g.Electronics,200),new n(g.Energy,1E3)],[V,Q(Gc)],[K(nc)]),Y(tb,[new n(g.BuildingMaterials,150),new n(g.Electronics,
300)],[Q(Zd),V],[K(va)]),Y(xb,[new n(g.BuildingMaterials,200),new n(g.Electronics,100),new n(g.Superconductor,1E3)],[Q(Gf)],[K(nc)])];return a};$jscomp.inherits(yb,r);yb.prototype.getTileName=function(){return yb.tileName};yb.prototype.getTileDescription=function(){return yb.tileDescription};yb.tileName="Construction Site - Industry";yb.tileDescription="An area designated for construction of industrial facilities and infrastructure";var zb=function(a){a=r.call(this,a)||this;a.texture=Le;a.possibleProjects=
[new H("Break down construction site","Revert this location to wasteland",function(a,c){c.world.placeTile(new D(a))},[],[],[]),Y(wa,[new n(g.SmartMatter,1E3),new n(g.BuildingMaterials,500),new n(g.Electronics,200)],[V,oe(3),Q(Ff)],[K(Da),function(a){return!Bb(wa)(a)}]),Y(qa,[new n(g.BuildingMaterials,300),new n(g.Electronics,1E3),new n(g.Superconductor,1E3),new n(g.SmartMatter,500)],[V,gb(ka,2),Q(be)],[K(Da),function(a){return!Bb(qa)(a)}])];return a};$jscomp.inherits(zb,r);zb.prototype.getTileName=
function(){return zb.tileName};zb.prototype.getTileDescription=function(){return zb.tileDescription};zb.tileName="Construction Site - Hyperengineering";zb.tileDescription="An area designated for construction of advanced technologies necessary for completing the mission";var D=function(a){a=r.call(this,a)||this;a.texture=da.fromWeightedArray([[1/8,ve],[1/8,we],[1/8,xe],[1/8,ye],[.5,ze]]);a.possibleProjects=[new H("Create habitat construction site","Designate this location for construction of habitation and life support facilities",
function(a,c){c.world.placeTile(new pb(a))},[],[],[]),new H("Create industry construction site","Designate this location for construction of industrial facilities and infrastructure",function(a,c){c.world.placeTile(new yb(a))},[],[],[]),new H("Create laboratory construction site","Designate this location for construction of research laboratories",function(a,c){c.world.placeTile(new sb(a))},[],[],[]),new H("Create xenoengineering construction site","Designate this location for construction of advanced technologies",
function(a,c){c.world.placeTile(new zb(a))},[],[],[K(Da),function(a){return!Bb(qa)(a)||!Bb(wa)(a)}]),new H("Construct Road","Construct roads to extend the reach of the colony's logistics",function(a,c){c.world.placeTile(new fa(a))},[new n(g.BuildingMaterials,10)],[V],[])];return a};$jscomp.inherits(D,r);D.prototype.getTileName=function(){return D.tileName};D.prototype.getTileDescription=function(){return D.tileDescription};D.prototype.getTexture=function(a){var b=a.getPastTexture(D,this.position);
if(b)return b;a.storePastTexture(D,this.position,this.texture);return this.texture};D.tileName="Wasteland";D.tileDescription="Nothing of note here";var de=new pd("Final Mission Report",B($jscomp$templatelit$37)),ee=new pd("A Transmission to Earth",B($jscomp$templatelit$38)),Jf=new ua("Unlock the secrets of the monolith",[new ta(Cd([Ua,Va]),de),new ta(Cd([Xa,Wa]),ee)]),Kf=new ua("Study the Monolith",[new ta(K(Da),Jf)]),Lf=new ua("Research "+od.name,[new ta(K(od),Kf)]),Mf=new ua("Excavate the "+la.tileName+
" to extract resources",[new ta(function(a){return a.world.getTiles().some(function(a){return a instanceof za})},Lf)]),Nf=new ua("Construct "+Ma.tileName+" to study the "+la.tileName,[new ta(Bb(Ma),Mf)],'Use the "WASD" or arrow keys to move around the map'),Of=new ua("Grow total worker population to 250",[new ta(function(a){return 250<=a.inventory.getTotalPopulation()},Nf)],"A "+xa.tileName+" has capacity for "+(new xa(new y(0,0))).populationCapacity.capacity+" colonists"),Pf=new ua("Develop the "+
va.name+" technology",[new ta(K(va),Of)],"Access available technologies through the research screen"),Qf=new ua("Construct "+La.tileName,[new ta(Bb(La),Pf)],"Designate an empty "+D.tileName+" tile as a laboratory construction site"),Rf=new ua("Acquire "+g.Metal.name,[new ta(Dd(g.Metal,1),Qf)]),Sf=new ua("Build up at least 100 units of "+g.Energy.name,[new ta(Dd(g.Energy,100),Rf)],"The "+Ja.tileName+" produces "+g.Energy.name+" each turn"),Tf=new ua("Deploy shelter for the colonists",[new ta(Bb(xa),
Sf)],"Select the "+Za.tileName),Cb=function(a){this.currentGame=a};Cb.prototype.refresh=function(){this.currentGame.updateQuestState();N.refreshCurrentPage()};Cb.prototype.addResource=function(a,b){this.currentGame.inventory.addResource(a,b);this.refresh()};Cb.prototype.removeResource=function(a,b){this.currentGame.inventory.payCost([new n(a,b)]);this.refresh()};Cb.prototype.addPopulation=function(a,b){this.currentGame.inventory.addWorkers(a,b);this.refresh()};Cb.prototype.showEnding=function(a){N.show(new Yc((void 0===
a?0:a)?ee:de))};Cb.prototype.freeResources=function(){for(var a=$jscomp.makeIterator(g.values()),b=a.next();!b.done;b=a.next())this.addResource(b.value,1E6)};var Ab=function(a){a=r.call(this,a)||this;a.texture=Se;a.resourceConversions=[new P([new n(g.Energy,50)],[new n(g.Metal,100)],50)];return a};$jscomp.inherits(Ab,r);Ab.prototype.getTileName=function(){return Ab.tileName};Ab.prototype.getTileDescription=function(){return Ab.tileDescription};Ab.tileName="Mineshaft";Ab.tileDescription="A mineshaft built into a mountain to allow long-term ore extraction";
var Ea=function(a){a=r.call(this,a)||this;a.texture=Ae;a.possibleProjects=[new H("Construct Mineshaft","Create a mineshaft to allow long-term ore extraction",function(a,c){c.world.placeTile(new Ab(a))},[new n(g.Energy,100),new n(g.BuildingMaterials,25)],[Q(va),V],[]),new H("Strip Mining","Destroy the mountain to produce "+g.Metal.name,function(a,c){c.inventory.addResource(g.Metal,500);c.world.placeTile(new D(a))},[new n(g.Energy,25)],[gb(Ka,5)],[])];return a};$jscomp.inherits(Ea,r);Ea.prototype.getTileName=
function(){return Ea.tileName};Ea.prototype.getTileDescription=function(){return Ea.tileDescription};Ea.tileName="Mountain";Ea.tileDescription="A large geological formation containing useful mineral resources";var Kb;(function(a){a.nonrandomTiles=function(){return[new D(new y(0,0)),new D(new y(1,0)),new D(new y(2,0)),new Ea(new y(0,1)),new Ea(new y(1,1)),new Ea(new y(2,1)),new D(new y(0,2)),new D(new y(1,2)),new D(new y(2,2)),new D(new y(0,3)),new Za(new y(1,3)),new D(new y(2,3)),new D(new y(0,4)),
new D(new y(1,4)),new D(new y(2,4)),new ka(new y(13,15))]};a.width=20;a.height=20;a.mountainRange=[20,25];a.ruinRange=[5,7]})(Kb||(Kb={}));var $a=function(){this.viewPosition=new y(0,0);this.pastTextureMap=new Map;this.width=Kb.width;this.height=Kb.height;this.grid=Array(this.height);for(var a=0;a<this.height;a++){this.grid[a]=Array(this.width);for(var b=0;b<this.width;b++)this.grid[a][b]=new D(new y(b,a))}a=da.intBetween.apply(da,$jscomp.arrayFromIterable(Kb.mountainRange));for(b=0;b<a;b++){var c=
this.getTiles().filter(function(a){return a instanceof D});Ha.isNonEmpty(c)&&(c=da.fromArray(c).position,this.placeTile(new Ea(c)))}a=da.intBetween.apply(da,$jscomp.arrayFromIterable(Kb.ruinRange));for(b=0;b<a;b++)c=this.getTiles().filter(function(a){return a instanceof D}),Ha.isNonEmpty(c)&&(c=da.fromArray(c).position,this.placeTile(new la(c)));a=$jscomp.makeIterator(Kb.nonrandomTiles());for(b=a.next();!b.done;b=a.next())this.placeTile(b.value)};$a.prototype.placeTile=function(a){this.grid[a.position.y][a.position.x]=
a};$a.prototype.getTiles=function(){return Ha.flatten(this.grid)};$a.prototype.getTilesInRectangle=function(a,b,c,e){0>b&&(b=0);0>a&&(a=0);var d=[];b=this.grid.slice(b,b+e);b=$jscomp.makeIterator(b);for(e=b.next();!e.done;e=b.next()){e=e.value.slice(a,a+c);e=$jscomp.makeIterator(e);for(var f=e.next();!f.done;f=e.next())d.push(f.value)}return d};$a.prototype.getTileAtCoordinates=function(a){if(!(0>a.x||a.x>=this.width||0>a.y||a.y>=this.height))return this.grid[a.y][a.x]};$a.prototype.getTilesInCircle=
function(a,b){return this.getTiles().filter(function(c){return a.distanceFrom(c.position)<=b})};$a.prototype.getPopulationCapacity=function(a){for(var b=0,c=$jscomp.makeIterator(this.getTiles()),e=c.next();!e.done;e=c.next())e=e.value,e.populationCapacity&&e.populationCapacity.species===a&&(b+=e.populationCapacity.capacity);return b};$a.prototype.getPastTexture=function(a,b){return this.pastTextureMap.get(""+[a.name,b])};$a.prototype.storePastTexture=function(a,b,c){this.pastTextureMap.set(""+[a.name,
b],c)};var Na=function(){this.map=new Map([])};Na.prototype.add=function(a,b){this.set(a,this.get(a)+b)};Na.prototype.remove=function(a,b){this.add(a,-1*b)};Na.prototype.get=function(a){return this.map.get(a)||0};Na.prototype.set=function(a,b){if(0>b)throw"tried to set quantity to negative value";0===b?this.map.delete(a):this.map.set(a,b)};Na.prototype.getSum=function(){return Array.from(this.map.values()).reduce(function(a,b){return a+b},0)};Na.prototype.positiveQuantityKeys=function(){return Array.from(this.map.keys())};
Na.prototype.clone=function(){for(var a=new Na,b=$jscomp.makeIterator(this.positiveQuantityKeys()),c=b.next();!c.done;c=b.next())c=c.value,a.add(c,this.get(c));return a};var L=function(a){this.world=a;this.resourceQuantities=new Na;this.populationQuantities=new Na;this.availableWorkers=0};L.prototype.addResource=function(a,b){this.resourceQuantities.add(a,b)};L.prototype.removeResource=function(a,b){this.resourceQuantities.remove(a,b)};L.prototype.getResourceQuantity=function(a){return this.resourceQuantities.get(a)||
0};L.prototype.addWorkers=function(a,b){this.populationQuantities.add(a,b);this.populationQuantities.set(a,w(0,this.populationQuantities.get(a),this.world.getPopulationCapacity(a)))};L.prototype.releaseWorkers=function(){this.availableWorkers=this.populationQuantities.getSum()};L.prototype.occupyWorkers=function(a){if(this.availableWorkers<a)throw"insufficient workers";if(0>a)throw"tried to occupy a negative number of workers";this.availableWorkers-=a};L.prototype.getSpeciesList=function(){return this.populationQuantities.positiveQuantityKeys()};
L.prototype.getPopulation=function(a){return this.populationQuantities.get(a)};L.prototype.getRequiredWorkerConsumption=function(a){var b=a.survivalCost.quantity*this.populationQuantities.get(a);return new n(a.survivalCost.resource,b)};L.prototype.getProvidedWorkerConsumption=function(a){var b=this.getRequiredWorkerConsumption(a).quantity,c=this.getResourceQuantity(a.survivalCost.resource);return new n(a.survivalCost.resource,Math.min(b,c))};L.prototype.doPopulationGrowth=function(){for(var a=$jscomp.makeIterator(this.getSpeciesList()),
b=a.next();!b.done;b=a.next()){b=b.value;var c=this.getProvidedWorkerConsumption(b);this.payCost([c]);this.populationQuantities.set(b,Math.floor(c.quantity/b.survivalCost.quantity));c=Math.floor(b.growthMultiplier*this.populationQuantities.get(b));this.addWorkers(b,c)}};L.prototype.applyPopulationCaps=function(){for(var a=$jscomp.makeIterator(this.getSpeciesList()),b=a.next();!b.done;b=a.next())b=b.value,this.populationQuantities.set(b,w(0,this.populationQuantities.get(b),this.world.getPopulationCapacity(b)));
this.availableWorkers=w(0,this.availableWorkers,this.getTotalPopulation())};L.prototype.getTotalPopulation=function(){return this.populationQuantities.getSum()};L.prototype.getAvailableWorkers=function(){return this.availableWorkers};L.prototype.canAfford=function(a){var b=this,c=new Map;a=$jscomp.makeIterator(a);for(var e=a.next();!e.done;e=a.next())e=e.value,c.set(e.resource,e.quantity+(c.get(e.resource)||0));return Array.from(c.keys()).every(function(a){var d=c.get(a);a=b.getResourceQuantity(a);
return d<=a})};L.prototype.hasEnoughWorkers=function(a){return this.availableWorkers>=a};L.prototype.payCost=function(a){if(this.canAfford(a)){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,this.removeResource(b.resource,b.quantity)}else throw"Cannot afford to pay cost";};L.prototype.getResourceList=function(){var a=this;return g.values().filter(function(b){return 0!==a.resourceQuantities.get(b)})};L.prototype.getInventoryStrings=function(){var a=this;return this.getResourceList().map(function(b){return b.name+
": "+a.getResourceQuantity(b)})};L.prototype.getPopulationStrings=function(){var a=this;return this.populationQuantities.positiveQuantityKeys().map(function(b){return a.populationQuantities.get(b)+" "+b.name})};L.prototype.applyConversions=function(a){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,this.canAfford(b.inputs)&&this.hasEnoughWorkers(b.requiredWorkers)&&b.enabled){this.payCost(b.inputs);this.occupyWorkers(b.requiredWorkers);b=$jscomp.makeIterator(b.outputs);
for(var c=b.next();!c.done;c=b.next())c=c.value,this.addResource(c.resource,c.quantity)}};L.prototype.clone=function(){var a=new L(this.world);a.resourceQuantities=this.resourceQuantities.clone();a.populationQuantities=this.populationQuantities.clone();a.availableWorkers=this.availableWorkers;return a};var ra=function(){this.endState=void 0;this.prevQuestDescription="";this.questCompletionShown=!0;this.completedTechs=[];this.world=new $a;this.inventory=new L(this.world);this.questStage=Tf};ra.prototype.getCurrentQuestDescription=
function(){return this.questStage.description};ra.prototype.getCurrentQuestHint=function(){return this.questStage.hint};ra.prototype.getQuestEndState=function(){return this.endState};ra.prototype.updateQuestState=function(){var a=this.questStage.nextState(this);if(a instanceof pd)this.endState=a,this.questCompletionShown=!1;else if(a!==this.questStage){var b=this.questStage.description;this.questStage=a;this.updateQuestState();this.questCompletionShown=!1;this.prevQuestDescription=b}};ra.prototype.getPreviousQuestDescription=
function(){return this.prevQuestDescription};ra.prototype.getResourceConversions=function(){var a=Ha.flatten(this.world.getTiles().map(function(a){return a.resourceConversions}));a.sort(function(a,c){return a.priority-c.priority});return a};ra.prototype.hasUnlockedTechnology=function(a){return this.completedTechs.includes(a)};ra.prototype.unlockTechnology=function(a){this.hasUnlockedTechnology(a)||this.completedTechs.push(a)};ra.prototype.getUnlockedTechnologies=function(){return this.completedTechs};
ra.prototype.getResearchOptions=function(){var a=this;return Xd.filter(function(a){return a.visible}).filter(function(b){return b.requiredTechs.every(function(b){return a.completedTechs.includes(b)})}).filter(function(b){return!a.hasUnlockedTechnology(b)})};ra.prototype.completeTurn=function(){this.inventory.applyConversions(this.getResourceConversions());this.inventory.releaseWorkers();this.inventory.doPopulationGrowth();this.updateQuestState()};ra.prototype.shiftConversionPriority=function(a,b){if(!(a===
b||0>a)){var c=this.getResourceConversions();if(!(b>=c.length)){var e=c[b].priority;if(a<b)for(;b>a;b--)c[b].priority=c[b-1].priority;else for(;b<a;b++)c[b].priority=c[b+1].priority;c[a].priority=e}}};var Uf=function(a,b,c,e){function d(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,f){function g(a){try{k(e.next(a))}catch(t){f(t)}}function h(a){try{k(e["throw"](a))}catch(t){f(t)}}function k(a){a.done?c(a.value):d(a.value).then(g,h)}k((e=e.apply(a,b||[])).next())})},
hb=function(){this.html=l.makeDiv(["main-menu"]);this.refresh()};hb.makeAudioButton=function(a){var b=this;return Rb.isPlaying()?l.makeButton("disable_audio",function(c){return Uf(b,void 0,void 0,function u(){return $jscomp.generator.createGenerator(u,function(b){if(1==b.nextAddress)return c.disabled=!0,c.innerText="please_wait",b.yield(Rb.stop(),2);a.refresh();b.jumpToEnd()})})}):l.makeButton("enable_audio",function(){Rb.initialize();a.refresh()})};hb.prototype.refresh=function(){var a=this;l.fillHTML(this.html,
[l.makeHeader("Aurora",1),l.makeDivContaining([l.makeButton("start_game",function(){var a=new ra;re(a);N.show(new kb(a))}),hb.makeAudioButton(this),l.makeButton("change_settings",function(){return N.show(new Vc(a))}),l.makeButton("view_credits",function(){return N.show(new Rc)})],["main-menu-options"])])};var Vf=function(a,b,c,e){function d(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,f){function g(a){try{k(e.next(a))}catch(t){f(t)}}function h(a){try{k(e["throw"](a))}catch(t){f(t)}}
function k(a){a.done?c(a.value):d(a.value).then(g,h)}k((e=e.apply(a,b||[])).next())})};window.onload=function(){return Vf(this,void 0,void 0,function b(){return $jscomp.generator.createGenerator(b,function(b){if(1==b.nextAddress)return console.log("Script Loaded"),b.yield(m(),2);N.show(new hb);b.jumpToEnd()})})}}]);}).call(this || window)
</script><script type="text/javascript">(function(){'use strict';}).call(this || window)
</script></body> </html> 