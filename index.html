<!doctype html> <html lang=en dir=ltr> <head> <meta charset=utf-8> <title>Aurora</title> <style type="text/css">.main-menu{display:flex;flex-direction:column}.main-menu h1{font-size:40pt;margin:0;padding:0}.main-menu-options button{display:flex;flex-direction:column}.main-menu button{font-size:24pt;border:none;margin:0;padding:0}.main-menu button:hover{font-size:30pt}.main-menu button:active{color:grey}.credits{margin-right:auto;margin-left:5px}.credits-entry{margin-top:20px}.credits-entry h1{margin-top:0;margin-bottom:0;font-size:30pt}.credits-entry p{margin-top:0;margin-bottom:0;font-size:20pt}.credits button{margin-top:10pt;font-size:20pt}.settings{display:flex;flex-direction:column}.settings h1{font-size:24pt;margin-bottom:10pt}.settings-slider{display:flex;font-size:15pt;margin:5pt}.settings button{margin-top:15pt}.world-screen{overflow:hidden}.world-screen-header{display:flex;flex-direction:row;margin:0;min-height:60px}.world-screen-quest-description{font-size:16px;padding-right:10px;padding-top:0;padding-bottom:0}.quest-description-emphasis{color:#408040;font-weight:700}.world-screen-hbox{margin:0;display:flex;flex-direction:row}.world-screen-map-box{height:100%;width:100%}.map-canvas{width:100%;margin:0}.world-screen-sidebar{background-color:#000;width:20%;min-width:2in;padding:10px;font-size:16px;overflow-y:auto;height:calc(100vh - 125px)}.tile-project{border:solid #fff;margin-top:5pt}.tile-project button{width:100%}.tile-project p{margin-left:5px;margin-bottom:5px;margin-top:5px}.project-requirement-met{color:#fff}.project-requirement-unmet{color:tomato}.world-screen-inventory{width:4in;margin:10px;font-size:16px;white-space:nowrap}.world-screen-inventory h1{margin-bottom:0;margin-top:.25em}.world-screen-inventory p{margin-top:2pt;margin-bottom:0}.production-screen{padding-left:10pt;font-size:16pt;margin:0}.production-screen h1{margin-block-end:0;margin-block-start:0}.production-screen-label{margin-block-start:.5em;margin-block-end:.25em}.production-screen-available-workers{margin-block-start:.25em;margin-block-end:.25em}.production-screen-inventory{outline:solid #fff;width:7in;min-width:50%}@media (max-width:7in){.production-screen-inventory{width:100%}}.production-screen-inventory p{font-size:16pt;line-height:1;margin-top:0;margin-bottom:0;padding:1pt}.production-screen-worker-consumption-label{margin-block-end:.25em;margin-block-start:.25em}.production-screen-worker-consumption{margin-block-end:0;margin-block-start:0}.free-conversions-list{margin-bottom:16pt}.conversion{width:7in;min-width:50%;display:flex;flex-direction:row}@media (max-width:7in){.conversion{width:100%}}.conversion-description{margin:0;font-size:16pt;text-align:left}.conversion-description-box{border:2px solid #fff;width:100%}.conversion-description-normal{color:#fff}.conversion-description-cannot-afford{color:tomato}.conversion-description-disabled{color:#ff0}.population-consumption-met{font-size:16pt}.population-consumption-unmet,.population-death-label{font-size:16pt;color:tomato}.population-death-label{margin-block-end:0;margin-block-start:0}.production-screen-back-button{font-size:20pt;margin-top:20pt}@keyframes loading-bar{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.transition-quote-panel{margin-top:150px;margin-right:auto;margin-left:auto;font-size:16px;width:420px}.transition-attribution{margin-left:50px}.transition-loading-area{text-align:center}.transition-loading-bar{margin-right:auto;margin-left:auto;width:50px;height:50px;border-radius:50%;border-color:#fff transparent;border-style:solid;border-width:5px;animation-name:loading-bar;animation-duration:1.25s;animation-iteration-count:infinite;animation-timing-function:ease}.transition-loading-area.loading .transition-loading-bar{background-size:80% 100%}.transition-loading-area.loaded .transition-loading-bar{background-size:100% 100%}.tech-option{outline:solid #fff;width:min(100%,max(50%,7in));padding:0;width:7in;min-width:50%}@media (max-width:7in){.tech-option{width:100%}}.tech-option p{font-size:14pt;margin-top:0;margin-bottom:0;padding:2pt 2pt 2pt 5pt;line-height:1}.tech-option h2{font-size:1.8em;padding:5pt;margin-bottom:0}.tech-option button{margin-top:10pt;margin-bottom:-2px;margin-left:-2px}.research-resources p{font-size:16pt;line-height:1;margin-top:0;margin-bottom:0;padding:1pt}.previous-research-header{margin-bottom:1pt}.previous-research{font-size:16pt;margin-top:0;margin-bottom:0}@font-face{font-family:IBMPlexMono;src:url(assets/fonts/IBMPlexMono-Regular.ttf)}:root{--mono-font:IBMPlexMono,monospace}:root,button{background-color:#000;color:#fff;font-family:var(--mono-font)}button{font-size:18px}button:focus{outline:0}button:disabled,button[disabled]{color:grey;border-color:grey}.flex-horizontal{display:flex;flex-direction:row}.flex-vertical{display:flex;flex-direction:column}.fill-horizontal{width:100%;font-family:serif}.fill-vertical{height:100%}img.emoji{height:1em;width:1em;margin:0 .05em 0 .1em;vertical-align:-.1em}</style></head> <body> <div id=rootdiv> <p>Loading scripts...</p> </div> <script type="text/javascript">(function(){/*
 MIT
 Copyright Twitter Inc. and other contributors. Licensed under MIT */
'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var d=0;return function(){return d<b.length?{done:!1,value:b[d++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,d,g){b!=Array.prototype&&b!=Object.prototype&&(b[d]=g.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(b,d){this.$jscomp$symbol$id_=b;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:d})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function b(g){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(g||"")+"_"+d++,g)}var d=0;return b}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.asyncIterator;b||(b=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};
$jscomp.makeIterator=function(b){var d="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return d?d.call(b):$jscomp.arrayIterator(b)};$jscomp.arrayFromIterator=function(b){for(var d,g=[];!(d=b.next()).done;)g.push(d.value);return g};$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(b){var d=function(){};d.prototype=b;return new d};
$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0},d={};try{return d.__proto__=b,d.a}catch(g){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(b,d){b.__proto__=d;if(b.__proto__!==d)throw new TypeError(b+" is not extensible");return b}:null;
$jscomp.inherits=function(b,d){b.prototype=$jscomp.objectCreate(d.prototype);b.prototype.constructor=b;if($jscomp.setPrototypeOf){var g=$jscomp.setPrototypeOf;g(b,d)}else for(g in d)if("prototype"!=g)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(d,g);f&&Object.defineProperty(b,g,f)}else b[g]=d[g];b.superClass_=d.prototype};$jscomp.generator={};
$jscomp.generator.ensureIteratorResultIsObject_=function(b){if(!(b instanceof Object))throw new TypeError("Iterator result "+b+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(b){this.yieldResult=b};
$jscomp.generator.Context.prototype.throw_=function(b){this.abruptCompletion_={exception:b,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(b){this.abruptCompletion_={return:b};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(b){this.abruptCompletion_={jumpTo:b};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(b,d){this.nextAddress=d;return{value:b}};
$jscomp.generator.Context.prototype.yieldAll=function(b,d){b=$jscomp.makeIterator(b);var g=b.next();$jscomp.generator.ensureIteratorResultIsObject_(g);if(g.done)this.yieldResult=g.value,this.nextAddress=d;else return this.yieldAllIterator_=b,this.yield(g.value,d)};$jscomp.generator.Context.prototype.jumpTo=function(b){this.nextAddress=b};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(b,d){this.catchAddress_=b;void 0!=d&&(this.finallyAddress_=d)};$jscomp.generator.Context.prototype.setFinallyBlock=function(b){this.catchAddress_=0;this.finallyAddress_=b||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(b,d){this.nextAddress=b;this.catchAddress_=d||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(b){this.catchAddress_=b||0;b=this.abruptCompletion_.exception;this.abruptCompletion_=null;return b};$jscomp.generator.Context.prototype.enterFinallyBlock=function(b,d,g){g?this.finallyContexts_[g]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=b||0;this.finallyAddress_=d||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(b,d){d=this.finallyContexts_.splice(d||0)[0];if(d=this.abruptCompletion_=this.abruptCompletion_||d){if(d.isException)return this.jumpToErrorHandler_();void 0!=d.jumpTo&&this.finallyAddress_<d.jumpTo?(this.nextAddress=d.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=b};$jscomp.generator.Context.prototype.forIn=function(b){return new $jscomp.generator.Context.PropertyIterator(b)};
$jscomp.generator.Context.PropertyIterator=function(b){this.object_=b;this.properties_=[];for(var d in b)this.properties_.push(d);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var b=this.properties_.pop();if(b in this.object_)return b}return null};$jscomp.generator.Engine_=function(b){this.context_=new $jscomp.generator.Context;this.program_=b};
$jscomp.generator.Engine_.prototype.next_=function(b){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,b,this.context_.next_);this.context_.next_(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(b){this.context_.start_();var d=this.context_.yieldAllIterator_;if(d)return this.yieldAllStep_("return"in d?d["return"]:function(b){return{value:b,done:!0}},b,this.context_.return);this.context_.return(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(b){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],b,this.context_.next_);this.context_.throw_(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(b,d,g){try{var f=b.call(this.context_.yieldAllIterator_,d);$jscomp.generator.ensureIteratorResultIsObject_(f);if(!f.done)return this.context_.stop_(),f;var k=f.value}catch(u){return this.context_.yieldAllIterator_=null,this.context_.throw_(u),this.nextStep_()}this.context_.yieldAllIterator_=null;g.call(this.context_,k);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var b=this.program_(this.context_);if(b)return this.context_.stop_(),{value:b.value,done:!1}}catch(d){this.context_.yieldResult=void 0,this.context_.throw_(d)}this.context_.stop_();if(this.context_.abruptCompletion_){b=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(b.isException)throw b.exception;return{value:b.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(b){this.next=function(d){return b.next_(d)};this.throw=function(d){return b.throw_(d)};this.return=function(d){return b.return_(d)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(b,d){d=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(d));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(d,b.prototype);return d};
$jscomp.polyfill=function(b,d,g,f){if(d){g=$jscomp.global;b=b.split(".");for(f=0;f<b.length-1;f++){var k=b[f];k in g||(g[k]={});g=g[k]}b=b[b.length-1];f=g[b];d=d(f);d!=f&&null!=d&&$jscomp.defineProperty(g,b,{configurable:!0,writable:!0,value:d})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(b){function d(){this.batch_=null}function g(b){return b instanceof k?b:new k(function(d,f){d(b)})}if(b&&!$jscomp.FORCE_POLYFILL_PROMISE)return b;d.prototype.asyncExecute=function(b){if(null==this.batch_){this.batch_=[];var d=this;this.asyncExecuteFunction(function(){d.executeBatch_()})}this.batch_.push(b)};var f=$jscomp.global.setTimeout;d.prototype.asyncExecuteFunction=function(b){f(b,0)};d.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var b=
this.batch_;this.batch_=[];for(var d=0;d<b.length;++d){var f=b[d];b[d]=null;try{f()}catch(J){this.asyncThrow_(J)}}}this.batch_=null};d.prototype.asyncThrow_=function(b){this.asyncExecuteFunction(function(){throw b;})};var k=function(b){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var d=this.createResolveAndReject_();try{b(d.resolve,d.reject)}catch(I){d.reject(I)}};k.prototype.createResolveAndReject_=function(){function b(b){return function(g){f||(f=!0,b.call(d,g))}}var d=this,f=!1;
return{resolve:b(this.resolveTo_),reject:b(this.reject_)}};k.prototype.resolveTo_=function(b){if(b===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof k)this.settleSameAsPromise_(b);else{a:switch(typeof b){case "object":var d=null!=b;break a;case "function":d=!0;break a;default:d=!1}d?this.resolveToNonPromiseObj_(b):this.fulfill_(b)}};k.prototype.resolveToNonPromiseObj_=function(b){var d=void 0;try{d=b.then}catch(I){this.reject_(I);return}"function"==typeof d?
this.settleSameAsThenable_(d,b):this.fulfill_(b)};k.prototype.reject_=function(b){this.settle_(2,b)};k.prototype.fulfill_=function(b){this.settle_(1,b)};k.prototype.settle_=function(b,d){if(0!=this.state_)throw Error("Cannot settle("+b+", "+d+"): Promise already settled in state"+this.state_);this.state_=b;this.result_=d;this.executeOnSettledCallbacks_()};k.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=0;b<this.onSettledCallbacks_.length;++b)u.asyncExecute(this.onSettledCallbacks_[b]);
this.onSettledCallbacks_=null}};var u=new d;k.prototype.settleSameAsPromise_=function(b){var d=this.createResolveAndReject_();b.callWhenSettled_(d.resolve,d.reject)};k.prototype.settleSameAsThenable_=function(b,d){var f=this.createResolveAndReject_();try{b.call(d,f.resolve,f.reject)}catch(J){f.reject(J)}};k.prototype.then=function(b,d){function f(b,d){return"function"==typeof b?function(d){try{g(b(d))}catch($a){N($a)}}:d}var g,N,Qb=new k(function(b,d){g=b;N=d});this.callWhenSettled_(f(b,g),f(d,N));
return Qb};k.prototype.catch=function(b){return this.then(void 0,b)};k.prototype.callWhenSettled_=function(b,d){function f(){switch(g.state_){case 1:b(g.result_);break;case 2:d(g.result_);break;default:throw Error("Unexpected state: "+g.state_);}}var g=this;null==this.onSettledCallbacks_?u.asyncExecute(f):this.onSettledCallbacks_.push(f)};k.resolve=g;k.reject=function(b){return new k(function(d,f){f(b)})};k.race=function(b){return new k(function(d,f){for(var J=$jscomp.makeIterator(b),N=J.next();!N.done;N=
J.next())g(N.value).callWhenSettled_(d,f)})};k.all=function(b){var d=$jscomp.makeIterator(b),f=d.next();return f.done?g([]):new k(function(b,N){function J(d){return function(f){k[d]=f;I--;0==I&&b(k)}}var k=[],I=0;do k.push(void 0),I++,g(f.value).callWhenSettled_(J(k.length-1),N),f=d.next();while(!f.done)})};return k},"es6","es3");
$jscomp.iteratorFromArray=function(b,d){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var g=0,f={next:function(){if(g<b.length){var k=g++;return{value:d(k,b[k]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");
$jscomp.polyfill("Math.hypot",function(b){return b?b:function(b){if(2>arguments.length)return arguments.length?Math.abs(arguments[0]):0;var d,f,k;for(d=k=0;d<arguments.length;d++)k=Math.max(k,Math.abs(arguments[d]));if(1e+100<k||1e-100>k){if(!k)return k;for(d=f=0;d<arguments.length;d++){var u=Number(arguments[d])/k;f+=u*u}return Math.sqrt(f)*k}for(d=f=0;d<arguments.length;d++)u=Number(arguments[d]),f+=u*u;return Math.sqrt(f)}},"es6","es3");
$jscomp.polyfill("Array.prototype.values",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b,g){return g})}},"es8","es3");$jscomp.checkStringArgs=function(b,d,g){if(null==b)throw new TypeError("The 'this' value for String.prototype."+g+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");return b+""};
$jscomp.polyfill("String.prototype.repeat",function(b){return b?b:function(b){var d=$jscomp.checkStringArgs(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var f="";b;)if(b&1&&(f+=d),b>>>=1)d+=d;return f}},"es6","es3");$jscomp.owns=function(b,d){return Object.prototype.hasOwnProperty.call(b,d)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(b,d){for(var g=1;g<arguments.length;g++){var f=arguments[g];if(f)for(var k in f)$jscomp.owns(f,k)&&(b[k]=f[k])}return b};$jscomp.polyfill("Object.assign",function(b){return b||$jscomp.assign},"es6","es3");
$jscomp.polyfill("Array.from",function(b){return b?b:function(b,g,f){g=null!=g?g:function(b){return b};var d=[],u="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof u){b=u.call(b);for(var y=0;!(u=b.next()).done;)d.push(g.call(f,u.value,y++))}else for(u=b.length,y=0;y<u;y++)d.push(g.call(f,b[y],y));return d}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var b={},d=Object.create(new $jscomp.global.Proxy(b,{get:function(g,f,k){return g==b&&"q"==f&&k==d}}));return!0===d.q}catch(g){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.polyfill("WeakMap",function(b){function d(){if(!b||!Object.seal)return!1;try{var d=Object.seal({}),f=Object.seal({}),g=new b([[d,2],[f,3]]);if(2!=g.get(d)||3!=g.get(f))return!1;g.delete(d);g.set(f,4);return!g.has(d)&&4==g.get(f)}catch(ka){return!1}}function g(){}function f(b){var d=typeof b;return"object"===d&&null!==b||"function"===d}function k(b){if(!$jscomp.owns(b,y)){var d=new g;$jscomp.defineProperty(b,y,{value:d})}}function u(b){var d=Object[b];d&&(Object[b]=function(b){if(b instanceof
g)return b;k(b);return d(b)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(d())return b;var y="$jscomp_hidden_"+Math.random();u("freeze");u("preventExtensions");u("seal");var xa=0,I=function(b){this.id_=(xa+=Math.random()+1).toString();if(b){b=$jscomp.makeIterator(b);for(var d;!(d=b.next()).done;)d=d.value,this.set(d[0],d[1])}};I.prototype.set=function(b,d){if(!f(b))throw Error("Invalid WeakMap key");k(b);if(!$jscomp.owns(b,y))throw Error("WeakMap key fail: "+
b);b[y][this.id_]=d;return this};I.prototype.get=function(b){return f(b)&&$jscomp.owns(b,y)?b[y][this.id_]:void 0};I.prototype.has=function(b){return f(b)&&$jscomp.owns(b,y)&&$jscomp.owns(b[y],this.id_)};I.prototype.delete=function(b){return f(b)&&$jscomp.owns(b,y)&&$jscomp.owns(b[y],this.id_)?delete b[y][this.id_]:!1};return I},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(b){function d(){if($jscomp.ASSUME_NO_NATIVE_MAP||!b||"function"!=typeof b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{var d=Object.seal({x:4}),f=new b($jscomp.makeIterator([[d,"s"]]));if("s"!=f.get(d)||1!=f.size||f.get({x:4})||f.set({x:4},"t")!=f||2!=f.size)return!1;var g=f.entries(),k=g.next();if(k.done||k.value[0]!=d||"s"!=k.value[1])return!1;k=g.next();return k.done||4!=k.value[0].x||"t"!=k.value[1]||!g.next().done?!1:!0}catch(ka){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(d())return b;$jscomp.initSymbolIterator();var g=new WeakMap,f=function(b){this.data_={};this.head_=y();this.size=0;if(b){b=$jscomp.makeIterator(b);for(var d;!(d=b.next()).done;)d=d.value,this.set(d[0],d[1])}};f.prototype.set=function(b,d){b=0===b?0:b;var f=k(this,b);f.list||(f.list=this.data_[f.id]=[]);f.entry?f.entry.value=d:(f.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:b,
value:d},f.list.push(f.entry),this.head_.previous.next=f.entry,this.head_.previous=f.entry,this.size++);return this};f.prototype.delete=function(b){b=k(this,b);return b.entry&&b.list?(b.list.splice(b.index,1),b.list.length||delete this.data_[b.id],b.entry.previous.next=b.entry.next,b.entry.next.previous=b.entry.previous,b.entry.head=null,this.size--,!0):!1};f.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=y();this.size=0};f.prototype.has=function(b){return!!k(this,b).entry};
f.prototype.get=function(b){return(b=k(this,b).entry)&&b.value};f.prototype.entries=function(){return u(this,function(b){return[b.key,b.value]})};f.prototype.keys=function(){return u(this,function(b){return b.key})};f.prototype.values=function(){return u(this,function(b){return b.value})};f.prototype.forEach=function(b,d){for(var f=this.entries(),g;!(g=f.next()).done;)g=g.value,b.call(d,g[1],g[0],this)};f.prototype[Symbol.iterator]=f.prototype.entries;var k=function(b,d){var f=d&&typeof d;"object"==
f||"function"==f?g.has(d)?f=g.get(d):(f=""+ ++xa,g.set(d,f)):f="p_"+d;var k=b.data_[f];if(k&&$jscomp.owns(b.data_,f))for(b=0;b<k.length;b++){var u=k[b];if(d!==d&&u.key!==u.key||d===u.key)return{id:f,list:k,index:b,entry:u}}return{id:f,list:k,index:-1,entry:void 0}},u=function(b,d){var f=b.head_;return $jscomp.iteratorPrototype(function(){if(f){for(;f.head!=b.head_;)f=f.previous;for(;f.next!=f.head;)return f=f.next,{done:!1,value:d(f)};f=null}return{done:!0,value:void 0}})},y=function(){var b={};return b.previous=
b.next=b.head=b},xa=0;return f},"es6","es3");$jscomp.polyfill("Object.is",function(b){return b?b:function(b,g){return b===g?0!==b||1/b===1/g:b!==b&&g!==g}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(b){return b?b:function(b,g){var d=this;d instanceof String&&(d=String(d));var k=d.length;g=g||0;for(0>g&&(g=Math.max(g+k,0));g<k;g++){var u=d[g];if(u===b||Object.is(u,b))return!0}return!1}},"es7","es3");
$jscomp.polyfill("String.prototype.includes",function(b){return b?b:function(b,g){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,g||0)}},"es6","es3");
(function(b){function d(f){if(g[f])return g[f].exports;var k=g[f]={i:f,l:!1,exports:{}};b[f].call(k.exports,k,k.exports,d);k.l=!0;return k.exports}var g={};d.m=b;d.c=g;d.d=function(b,g,u){d.o(b,g)||Object.defineProperty(b,g,{enumerable:!0,get:u})};d.r=function(b){$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!==typeof Symbol&&Symbol.toStringTag&&($jscomp.initSymbol(),Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}));Object.defineProperty(b,"__esModule",{value:!0})};d.t=function(b,
g){g&1&&(b=d(b));if(g&8||g&4&&"object"===typeof b&&b&&b.__esModule)return b;var f=Object.create(null);d.r(f);Object.defineProperty(f,"default",{enumerable:!0,value:b});if(g&2&&"string"!=typeof b)for(var k in b)d.d(f,k,function(d){return b[d]}.bind(null,k));return f};d.n=function(b){var f=b&&b.__esModule?function(){return b["default"]}:function(){return b};d.d(f,"a",f);return f};d.o=function(b,d){return Object.prototype.hasOwnProperty.call(b,d)};d.p="";return d(d.s=3)})([function(b,d,g){function f(b){for(var d=
[],f,g=0,k=0;k<b.length;)f=b.charCodeAt(k++),g?(d.push((65536+(g-55296<<10)+(f-56320)).toString(16)),g=0):55296<f&&56319>=f?g=f:d.push(f.toString(16));return d}Object.defineProperty(d,"__esModule",{value:!0});d.TypeName=void 0;d.parse=function(b,d){var g=d&&d.assetType?d.assetType:"svg";d=d&&d.buildUrl?d.buildUrl:function(b,d){return"png"===d?"https://twemoji.maxcdn.com/v/latest/72x72/"+b+".png":"https://twemoji.maxcdn.com/v/latest/svg/"+b+".svg"};var y=[];for(k.default.lastIndex=0;;){var z=k.default.exec(b);
if(!z)break;var A=z[0],J=f(I(A)).join("-");y.push({url:J?d(J,g):"",indices:[z.index,k.default.lastIndex],text:A,type:u})}return y};d.toCodePoints=f;var k=(b=g(1))&&b.__esModule?b:{default:b},u=d.TypeName="emoji",y=/\uFE0F/g,xa=String.fromCharCode(8205),I=function(b){return 0>b.indexOf(xa)?b.replace(y,""):b}},function(b,d,g){Object.defineProperty(d,"__esModule",{value:!0});d.default=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g},
,function(b,d,g){function f(a){var c=new Image,e=new Promise(function(e,b){c.onload=function(){return e(c)};c.onerror=function(){return e(c)};c.src=a});lc.push(e);return c}function k(){return Sc(this,void 0,void 0,function c(){return $jscomp.generator.createGenerator(c,function(c){return c.return(Promise.all(lc))})})}function u(){throw Error("This code should be unreachable");}function y(a){var c=new Ea(a);a=window;a.cheatsAddResource=function(a,b){return c.addResource(a,b)};a.cheatsRemoveResource=
function(a,b){return c.removeResource(a,b)};a.cheatsAddPopulation=function(a,b){return c.addPopulation(a,b)};a.cheatsFreeResources=function(){return c.freeResources()};a.cheatsLoseGame=function(){return c.loseGame()};a.cheatsWinGame=function(){return c.winGame()};Object.freeze(l);Object.freeze(Y);a.Resources=l;a.Species=Y}function xa(a,c,e){return Math.max(Math.min(c,e),a)}function I(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();I="function"===typeof Symbol&&"symbol"===
typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return I(a)}function J(){J=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var e=arguments[c],b;for(b in e)Object.prototype.hasOwnProperty.call(e,b)&&(a[b]=e[b])}return a};return J.apply(this,arguments)}function N(a){for(var c=1;c<arguments.length;c++){var e=
null!=arguments[c]?arguments[c]:{},b=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(e).filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})));b.forEach(function(c){var b=e[c];c in a?Object.defineProperty(a,c,{value:b,enumerable:!0,configurable:!0,writable:!0}):a[c]=b})}return a}function Qb(a,c){if(null==a)return{};if(null==a)var e={};else{e={};var b=Object.keys(a),d;for(d=0;d<b.length;d++){var p=b[d];0<=c.indexOf(p)||
(e[p]=a[p])}}if(Object.getOwnPropertySymbols)for(d=Object.getOwnPropertySymbols(a),p=0;p<d.length;p++)b=d[p],0<=c.indexOf(b)||Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b]);return e}function ka(a){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(a)}function z(a,c,e){a.addEventListener(c,e,!ya&&mc)}function A(a,c,e){a.removeEventListener(c,e,!ya&&mc)}function $a(a,c){if(c){">"===c[0]&&(c=c.substring(1));if(a)try{if(a.matches)return a.matches(c);if(a.msMatchesSelector)return a.msMatchesSelector(c);
if(a.webkitMatchesSelector)return a.webkitMatchesSelector(c)}catch(e){}return!1}}function pa(a,c,e,b){if(a){e=e||document;do{if(null!=c&&(">"===c[0]?a.parentNode===e&&$a(a,c):$a(a,c))||b&&a===e)return a;if(a===e)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function ca(a,c,e){if(a&&c)if(a.classList)a.classList[e?"add":"remove"](c);else{var b=(" "+a.className+" ").replace(nc," ").replace(" "+c+" "," ");a.className=(b+(e?" "+c:"")).replace(nc," ")}}function x(a,
c,e){var b=a&&a.style;if(b){if(void 0===e)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(e=a.currentStyle),void 0===c?e:e[c];c in b||-1!==c.indexOf("webkit")||(c="-webkit-"+c);b[c]=e+("string"===typeof e?"":"px")}}function ab(a,c){var e="";if("string"===typeof a)e=a;else{do{var b=x(a,"transform");b&&"none"!==b&&(e=b+" "+e)}while(!c&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||
window.MSCSSMatrix)&&new a(e)}function oc(a,c,e){if(a){a=a.getElementsByTagName(c);c=0;var b=a.length;if(e)for(;c<b;c++)e(a[c],c);return a}return[]}function za(){var a=document.scrollingElement;return a?a:document.documentElement}function Q(a,c,e,b,d){if(a.getBoundingClientRect||a===window){if(a!==window&&a!==za()){var t=a.getBoundingClientRect();var D=t.top;var E=t.left;var f=t.bottom;var g=t.right;var h=t.height;var k=t.width}else E=D=0,f=window.innerHeight,g=window.innerWidth,h=window.innerHeight,
k=window.innerWidth;if((c||e)&&a!==window&&(d=d||a.parentNode,!ya)){do if(d&&d.getBoundingClientRect&&("none"!==x(d,"transform")||e&&"static"!==x(d,"position"))){f=d.getBoundingClientRect();D-=f.top+parseInt(x(d,"border-top-width"));E-=f.left+parseInt(x(d,"border-left-width"));f=D+t.height;g=E+t.width;break}while(d=d.parentNode)}b&&a!==window&&(b=(a=ab(d||a))&&a.a,d=a&&a.d,a&&(D/=d,E/=b,k/=b,h/=d,f=D+h,g=E+k));return{top:D,left:E,bottom:f,right:g,width:k,height:h}}}function pc(a,c,e){var b=Fa(a,!0);
for(a=Q(a)[c];b;){c=Q(b)[e];if(!("top"===e||"left"===e?a>=c:a<=c))return b;if(b===za())break;b=Fa(b,!1)}return!1}function yb(a,c,e){for(var b=0,d=0,p=a.children;d<p.length;){if("none"!==p[d].style.display&&p[d]!==v.ghost&&p[d]!==v.dragged&&pa(p[d],e.draggable,a,!1)){if(b===c)return p[d];b++}d++}return null}function Sb(a,c){for(a=a.lastElementChild;a&&(a===v.ghost||"none"===x(a,"display")||c&&!$a(a,c));)a=a.previousElementSibling;return a||null}function ha(a,c){var e=0;if(!a||!a.parentNode)return-1;
for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===v.clone||c&&!$a(a,c)||e++;return e}function qc(a){var c=0,e=0,b=za();if(a){do{var d=ab(a),p=d.d;c+=a.scrollLeft*d.a;e+=a.scrollTop*p}while(a!==b&&(a=a.parentNode))}return[c,e]}function Tc(a,c){for(var e in a)if(a.hasOwnProperty(e))for(var b in c)if(c.hasOwnProperty(b)&&c[b]===a[e][b])return Number(e);return-1}function Fa(a,c){if(!a||!a.getBoundingClientRect)return za();var e=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<
a.scrollHeight){var b=x(a);if(a.clientWidth<a.scrollWidth&&("auto"==b.overflowX||"scroll"==b.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==b.overflowY||"scroll"==b.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(e||c)return a;e=!0}}while(a=a.parentNode);return za()}function Tb(a,c){return Math.round(a.top)===Math.round(c.top)&&Math.round(a.left)===Math.round(c.left)&&Math.round(a.height)===Math.round(c.height)&&Math.round(a.width)===Math.round(c.width)}function rc(a,c){return function(){if(!nb){var e=
arguments;1===e.length?a.call(this,e[0]):a.apply(this,e);nb=setTimeout(function(){nb=void 0},c)}}}function sc(a,c,e){a.scrollLeft+=c;a.scrollTop+=e}function tc(a){var c=window.Polymer,e=window.jQuery||window.Zepto;return c&&c.dom?c.dom(a).cloneNode(!0):e?e(a).clone(!0)[0]:a.cloneNode(!0)}function Uc(){var a=[],c;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(c){if("none"!==x(c,"display")&&c!==v.ghost){a.push({target:c,rect:Q(c)});
var e=N({},a[a.length-1].rect);if(c.thisAnimationDuration){var b=ab(c,!0);b&&(e.top-=b.f,e.left-=b.e)}c.fromRect=e}})},addAnimationState:function(c){a.push(c)},removeAnimationState:function(c){a.splice(Tc(a,{target:c}),1)},animateAll:function(e){var b=this;if(this.options.animation){var d=!1,p=0;a.forEach(function(a){var c=0,e=a.target,t=e.fromRect,D=Q(e),E=e.prevFromRect,f=e.prevToRect;a=a.rect;var g=ab(e,!0);g&&(D.top-=g.f,D.left-=g.e);e.toRect=D;e.thisAnimationDuration&&Tb(E,D)&&!Tb(t,D)&&(a.top-
D.top)/(a.left-D.left)===(t.top-D.top)/(t.left-D.left)&&(c=Math.sqrt(Math.pow(E.top-a.top,2)+Math.pow(E.left-a.left,2))/Math.sqrt(Math.pow(E.top-f.top,2)+Math.pow(E.left-f.left,2))*b.options.animation);Tb(D,t)||(e.prevFromRect=t,e.prevToRect=D,c||(c=b.options.animation),b.animate(e,a,D,c));c&&(d=!0,p=Math.max(p,c),clearTimeout(e.animationResetTimer),e.animationResetTimer=setTimeout(function(){e.animationTime=0;e.prevFromRect=null;e.fromRect=null;e.prevToRect=null;e.thisAnimationDuration=null},c),
e.thisAnimationDuration=c)});clearTimeout(c);d?c=setTimeout(function(){"function"===typeof e&&e()},p):"function"===typeof e&&e();a=[]}else clearTimeout(c),"function"===typeof e&&e()},animate:function(a,c,b,d){if(d){x(a,"transition","");x(a,"transform","");var e=ab(this.el),t=(c.left-b.left)/(e&&e.a||1);c=(c.top-b.top)/(e&&e.d||1);a.animatingX=!!t;a.animatingY=!!c;x(a,"transform","translate3d("+t+"px,"+c+"px,0)");x(a,"transition","transform "+d+"ms"+(this.options.easing?" "+this.options.easing:""));
x(a,"transform","translate3d(0,0,0)");"number"===typeof a.animated&&clearTimeout(a.animated);a.animated=setTimeout(function(){x(a,"transition","");x(a,"transform","");a.animated=!1;a.animatingX=!1;a.animatingY=!1},d)}}}}function W(a){var c=N({putSortable:R,cloneEl:H,targetEl:n,rootEl:K,oldIndex:cb,oldDraggableIndex:ob,newIndex:da,newDraggableIndex:Ga},a);a=c.sortable;var e=c.rootEl,b=c.name,d=c.targetEl,p=c.cloneEl,D=c.toEl,f=c.fromEl,g=c.oldIndex,h=c.newIndex,k=c.oldDraggableIndex,l=c.newDraggableIndex,
x=c.originalEvent,v=c.putSortable,m=c.extraEventProperties;if(a=a||e&&e[ea]){var w=a.options,q="on"+b.charAt(0).toUpperCase()+b.substr(1);!window.CustomEvent||ya||pb?(c=document.createEvent("Event"),c.initEvent(b,!0,!0)):c=new CustomEvent(b,{bubbles:!0,cancelable:!0});c.to=D||e;c.from=f||e;c.item=d||e;c.clone=p;c.oldIndex=g;c.newIndex=h;c.oldDraggableIndex=k;c.newDraggableIndex=l;c.originalEvent=x;c.pullMode=v?v.lastPutMode:void 0;b=N({},m,qb.getEventProperties(b,a));for(var u in b)c[u]=b[u];e&&e.dispatchEvent(c);
w[q]&&w[q].call(a,c)}}function v(a,c){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=c=J({},c);a[ea]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return uc(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",
ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,c){a.setData("Text",c.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==v.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};qb.initializePlugins(this,
a,e);for(var b in e)b in c||(c[b]=e[b]);vc(c);for(var d in this)"_"===d.charAt(0)&&"function"===typeof this[d]&&(this[d]=this[d].bind(this));if(this.nativeDraggable=c.forceFallback?!1:Vc)this.options.touchStartThreshold=1;c.supportPointer?z(a,"pointerdown",this._onTapStart):(z(a,"mousedown",this._onTapStart),z(a,"touchstart",this._onTapStart));this.nativeDraggable&&(z(a,"dragover",this),z(a,"dragenter",this));zb.push(this.el);c.store&&c.store.get&&this.sort(c.store.get(this)||[]);J(this,Uc())}function Ub(a,
c,e,b,d,p,D,f){var t=a[ea],E=t.options.onMove,g;if(!window.CustomEvent||ya||pb){var O=document.createEvent("Event");O.initEvent("move",!0,!0)}else O=new CustomEvent("move",{bubbles:!0,cancelable:!0});O.to=c;O.from=a;O.dragged=e;O.draggedRect=b;O.related=d||c;O.relatedRect=p||Q(c);O.willInsertAfter=f;O.originalEvent=D;a.dispatchEvent(O);E&&(g=E.call(t,O,D));return g}function Vb(a){a.draggable=!1}function Wc(){Wb=!1}function Xc(a,c,e){e=Q(Sb(e.el,e.options.draggable));return c?a.clientX>e.right+10||
a.clientX<=e.right&&a.clientY>e.bottom&&a.clientX>=e.left:a.clientX>e.right&&a.clientY>e.top||a.clientX<=e.right&&a.clientY>e.bottom+10}function Yc(a,c,e,b,d,p,D,f){a=b?a.clientY:a.clientX;var t=b?e.height:e.width,E=b?e.top:e.left;e=b?e.bottom:e.right;b=!1;if(!D)if(f&&Ab<t*d)if(!rb&&(1===sb?a>E+t*p/2:a<e-t*p/2)&&(rb=!0),rb)b=!0;else{if(1===sb?a<E+Ab:a>e-Ab)return-sb}else if(a>E+t*(1-d)/2&&a<e-t*(1-d)/2)return c=ha(n)<ha(c)?1:-1,c;if(b||D)if(a<E+t*p/2||a>e-t*p/2)return a>E+t/2?1:-1;return 0}function Zc(a){a=
a.tagName+a.className+a.src+a.href+a.textContent;for(var c=a.length,e=0;c--;)e+=a.charCodeAt(c);return e.toString(36)}function $c(a){Bb.length=0;a=a.getElementsByTagName("input");for(var c=a.length;c--;){var e=a[c];e.checked&&Bb.push(e)}}function Cb(a){return setTimeout(a,0)}function Db(){L.forEach(function(a){clearInterval(a.pid)});L=[]}function Xb(){}function Yb(){}g.r(d);var ad=function(){function a(a,c){return document.createTextNode(c?a.replace(v,""):a)}function c(a,c){return"".concat(c.base,
c.size,"/",a,c.ext)}function e(a,c){a=a.childNodes;for(var b=a.length,d,t;b--;)d=a[b],t=d.nodeType,3===t?c.push(d):1!==t||"ownerSVGElement"in d||w.test(d.nodeName.toLowerCase())||e(d,c);return c}function b(a){return h(0>a.indexOf(x)?a.replace(v,""):a)}function d(c,d){for(var t=e(c,[]),D=t.length,p,f,E,g,O,h,bb,k,G,l;D--;){p=!1;E=document.createDocumentFragment();g=t[D];O=g.nodeValue;for(bb=0;h=n.exec(O);){k=h.index;k!==bb&&E.appendChild(a(O.slice(bb,k),!0));h=h[0];l=b(h);bb=k+h.length;k=d.callback(l,
d);if(l&&k){G=new Image;G.onerror=d.onerror;G.setAttribute("draggable","false");p=d.attributes(h,l);for(f in p)p.hasOwnProperty(f)&&0!==f.indexOf("on")&&!G.hasAttribute(f)&&G.setAttribute(f,p[f]);G.className=d.className;G.alt=h;G.src=k;p=!0;E.appendChild(G)}G||E.appendChild(a(h,!1));G=null}p&&(bb<O.length&&E.appendChild(a(O.slice(bb),!0)),g.parentNode.replaceChild(E,g))}return c}function p(a,c){return g(a,function(a){var e=a,d=b(a),t=c.callback(d,c),p;if(d&&t){e="<img ".concat('class="',c.className,
'" ','draggable="false" ','alt="',a,'"',' src="',t,'"');a=c.attributes(a,d);for(p in a)a.hasOwnProperty(p)&&0!==p.indexOf("on")&&-1===e.indexOf(" "+p+"=")&&(e=e.concat(" ",p,'="',a[p].replace(m,D),'"'));e=e.concat("/>")}return e})}function D(a){return l[a]}function f(){return null}function g(a,c){return String(a).replace(n,c)}function h(a,c){for(var e=[],b,d=0,t=0;t<a.length;)b=a.charCodeAt(t++),d?(e.push((65536+(d-55296<<10)+(b-56320)).toString(16)),d=0):55296<=b&&56319>=b?d=b:e.push(b.toString(16));
return e.join(c||"-")}var k={base:"https://twemoji.maxcdn.com/v/12.1.5/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(a){a="string"===typeof a?parseInt(a,16):a;if(65536>a)return q(a);a-=65536;return q(55296+(a>>10),56320+(a&1023))},toCodePoint:h},onerror:function(){this.parentNode&&this.parentNode.replaceChild(a(this.alt,!1),this)},parse:function(a,e){e&&"function"!==typeof e||(e={callback:e});var b=e.callback||c,t="function"===typeof e.attributes?e.attributes:f,D="string"===
typeof e.base?e.base:k.base,E=e.ext||k.ext,g;(g=e.folder)||(g=e.size||k.size,g="number"===typeof g?g+"x"+g:g);return("string"===typeof a?p:d)(a,{callback:b,attributes:t,base:D,ext:E,size:g,className:e.className||k.className,onerror:e.onerror||k.onerror})},replace:g,test:function(a){n.lastIndex=0;a=n.test(a);n.lastIndex=0;return a}},l={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},n=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,
v=/\uFE0F/g,x=String.fromCharCode(8205),m=/[&<>'"]/g,w=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,q=String.fromCharCode;return k}(),bd=g(0),h;(function(a){function c(a){var c=document.createElement("div");a&&c.classList.add.apply(c.classList,$jscomp.arrayFromIterable(a));return c}function e(a,c,e){a=document.createElement(a);a.innerText=c;e&&a.classList.add.apply(a.classList,$jscomp.arrayFromIterable(e));return a}function b(a){ad.parse(a,{folder:"svg",ext:".svg"});return a}function d(a){return 0<
bd.parse(a).length}a.makeDiv=c;a.makeDivContaining=function(a,e){e=c(e);a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())e.appendChild(b.value);return e};a.makeElement=e;a.patchEmoji=b;a.containsEmoji=d;a.makePara=function(a,c){c=e("p",a,c);d(a)&&b(c);return c};a.makeHeader=function(a,c,t){c=e("h"+(void 0===c?1:c),a,t);d(a)&&b(c);return c};a.makeButton=function(a,c,e,t){t=void 0===t?"enabled":t;var p=document.createElement("button");p.type="button";"disabled"===t&&(p.disabled=!0);p.innerText=
a;e&&p.classList.add.apply(p.classList,$jscomp.arrayFromIterable(e));p.onclick=function(a){a.preventDefault();c.call(this,a)};d(a)&&b(p);return p};a.makeSlider=function(c,e,b,d,t,f){var p=document.createElement("input");p.type="range";p.min=e.toString();p.max=b.toString();p.value=d.toString();void 0!==f&&(p.step=f.toString());p.oninput=function(){if(void 0!==this.value){var a=Number(this.value);!isNaN(a)&&e<=a&&a<=b&&t(a)}};c=a.makePara(c+": ");return a.makeDivContaining([c,p])};a.makeCanvas=function(a,
c,e){var b=document.createElement("canvas");b.width=a;b.height=c;e&&b.classList.add.apply(b.classList,$jscomp.arrayFromIterable(e));return b};a.fillHTML=function(a,c){a.innerHTML="";c=$jscomp.makeIterator(c);for(var e=c.next();!e.done;e=c.next())a.appendChild(e.value)}})(h||(h={}));var P;(function(a){var c=document.getElementById("rootdiv"),e=void 0;a.show=function(a){e=a;h.fillHTML(c,[a.html]);document.onkeydown=function(c){a.handleKeyDown&&a.handleKeyDown(c)};document.onkeyup=function(c){a.handleKeyUp&&
a.handleKeyUp(c)}};a.refreshCurrentPage=function(){e&&e.refresh()}})(P||(P={}));var Sc=function(a,c,e,b){function d(a){return a instanceof e?a:new e(function(c){c(a)})}return new (e||(e=Promise))(function(e,t){function p(a){try{E(b.next(a))}catch(Rb){t(Rb)}}function f(a){try{E(b["throw"](a))}catch(Rb){t(Rb)}}function E(a){a.done?e(a.value):d(a.value).then(p,f)}E((b=b.apply(a,c||[])).next())})},lc=[],cd=f("assets/ui/highlight.png"),dd=f("assets/tiles/environment/wasteland1.png"),ed=f("assets/tiles/environment/wasteland2.png"),
fd=f("assets/tiles/environment/wasteland3.png"),gd=f("assets/tiles/environment/wasteland4.png"),hd=f("assets/tiles/environment/wasteland5.png"),id=f("assets/tiles/environment/mountain.png"),jd=f("assets/tiles/alien/ruins1.png"),kd=f("assets/tiles/alien/ruins2.png"),ld=f("assets/tiles/alien/monolith.png"),md=f("assets/tiles/construction/hab_site.png"),nd=f("assets/tiles/construction/lab_site.png"),od=f("assets/tiles/construction/industry_site.png"),pd=f("assets/tiles/colony/habitat.png"),qd=f("assets/tiles/colony/solar_panels.png"),
rd=f("assets/tiles/colony/mining_facility.png"),sd=f("assets/tiles/colony/lander.png"),td=f("assets/tiles/colony/greenhouse.png"),ud=f("assets/tiles/colony/mineshaft.png"),wc=f("assets/tiles/roads/cross.png"),xc=f("assets/tiles/roads/horizontal.png"),yc=f("assets/tiles/roads/vertical.png"),vd=f("assets/tiles/roads/corner_bottom_left.png"),wd=f("assets/tiles/roads/corner_bottom_right.png"),xd=f("assets/tiles/roads/corner_top_left.png"),yd=f("assets/tiles/roads/corner_top_right.png"),zd=f("assets/tiles/roads/t_south.png"),
Ad=f("assets/tiles/roads/t_north.png"),Bd=f("assets/tiles/roads/t_east.png"),Cd=f("assets/tiles/roads/t_west.png"),Dd=f("assets/tiles/colony/arcology.png"),Ed=f("assets/tiles/colony/nuclear_plant.png"),Fd=f("assets/tiles/colony/lab_alignment.png"),Gd=f("assets/tiles/colony/lab_engineering.png"),Hd=f("assets/tiles/colony/lab_psych.png"),Id=f("assets/tiles/colony/lab_xeno.png"),Ra=function(a,c){this.name=a;this.roles=c},Jd=[new Ra("Grace Rarer",["Team Lead","Game Designer","Programmer"]),new Ra("Prindle",
["Programmer","DevOps"]),new Ra("Seong Ryoo",["Environment Artist"]),new Ra("May Lawver",["Programmer"]),new Ra("Mitchell Philipp",["UI Programmer"]),new Ra("Brad Baker",["Gameplay Programmer"]),new Ra("Will Cooper",["UI Programmer"])],Zb=function(){this.html=h.makeDiv(["credits"]);this.refresh()};Zb.prototype.refresh=function(){var a=this;h.fillHTML(this.html,[].concat($jscomp.arrayFromIterable(Jd.map(function(c){return a.renderCreditsEntry(c)})),[h.makeButton("Back",function(){return P.show(new db)})]))};
Zb.prototype.renderCreditsEntry=function(a){return h.makeDivContaining([h.makeHeader(a.name,1)].concat($jscomp.arrayFromIterable(a.roles.map(function(a){return h.makePara(a)}))),["credits-entry"])};var zc=function(a){return a},eb;(function(a){function c(a){return{encode:zc,decode:zc,validate:a}}function e(a){return{encode:function(c){var e={},b;for(b in a)e[b]=a[b].encode(c[b]);return e},decode:function(c){var e={},b;for(b in a)e[b]=a[b].decode(c[b]);return e},validate:function(c){if("object"!==typeof c||
null===c)return!1;for(var e in a)if(!a[e].validate(c[e]))return!1;return!0}}}function b(a){return{encode:function(c){return c.map(function(c){return a.encode(c)})},decode:function(c){return c.map(function(c){return a.decode(c)})},validate:function(c){if(!Array.isArray(c))return!1;c=$jscomp.makeIterator(c);for(var e=c.next();!e.done;e=c.next())if(!a.validate(e.value))return!1;return!0}}}function d(a,c,e,b){return{encode:function(d){return a(d)?e.encode(d):c(d)?b.encode(d):u()},decode:function(a){return e.validate(a)?
e.decode(a):b.validate(a)?b.decode(a):u()},validate:function(a){return e.validate(a)||b.validate(a)}}}function p(a,c){return d(function(c){return a.validate(c)},function(c){return!a.validate(c)},a,c)}a.schema=function(a,c,e){return{encode:a,decode:c,validate:e}};a.primitive=c;a.aString=c(function(a){return"string"===typeof a||a instanceof String});a.aNumber=c(function(a){return"number"===typeof a});a.aBoolean=c(function(a){return"boolean"===typeof a});a.aNull=c(function(a){return null===a});a.anUndefined=
c(function(a){return"undefined"===typeof a});a.recordOf=e;a.classOf=function(a,c){a=e(a);var b=a.decode;return{encode:a.encode,decode:function(a){return c(b(a))},validate:a.validate}};a.arrayOf=b;a.nonEmptyArrayOf=function(a){a=b(a);var c=a.validate;return{encode:a.encode,decode:a.decode,validate:function(a){return!Array.isArray(a)||1>a.length?!1:c(a)}}};a.tupleOf=function(a){return{encode:function(c){return c.map(function(c,e){return a[e].encode(c)})},decode:function(c){return c.map(function(c,e){return a[e].decode(c)})},
validate:function(c){if(!Array.isArray(c)||c.length!==a.length)return!1;for(var e=0;e<c.length;e++)if(!a[e].validate(c[e]))return!1;return!0}}};a.unionOf=d;a.union=p;a.optional=function(c){return p(a.anUndefined,c)};a.constrain=function(a,c){return{encode:function(c){return a.encode(c)},decode:function(c){return a.decode(c)},validate:function(e){return a.validate(e)&&c(e)}}}})(eb||(eb={}));var Eb;(function(a){a.isSupported=function(){try{var a=window.localStorage;a.setItem("__test_ls","null");a.removeItem("__test_ls");
return!0}catch(e){return a&&0!==a.length?e instanceof DOMException?22===e.code||"QuotaExceededError"===e.name||1014===e.code||"NS_ERROR_DOM_QUOTA_REACHED"===e.name:!1:!1}}();a.hasItem=function(c){return a.isSupported&&Object.prototype.hasOwnProperty.call(window.localStorage,c)};a.saveItem=function(c,e,b){return a.isSupported?(e=JSON.stringify(b.encode(e)),window.localStorage.setItem(c,e),!0):!1};a.loadItem=function(c,e){if(a.isSupported&&(c=window.localStorage.getItem(c),null!==c)){try{var b=JSON.parse(c);
var d=e.validate(b)?{resultType:"success",result:e.decode(b)}:{resultType:"invalidStructure"}}catch(p){if(p instanceof SyntaxError)d={resultType:"syntaxError",error:p};else throw p;}return d}};a.removeItem=function(c){a.isSupported&&window.localStorage.removeItem(c)};a.clearAllItems=function(){a.isSupported&&window.localStorage.clear()}})(Eb||(Eb={}));var Aa=function(a,c,e){this.viewWidth=void 0===a?12:a;this.viewHeight=void 0===c?8:c;this.volume=void 0===e?0:e};Aa.defaultOptions=function(){return new Aa};
Aa.schema=eb.classOf({viewWidth:eb.aNumber,viewHeight:eb.aNumber,volume:eb.aNumber},function(a){return new Aa(a.viewWidth,a.viewHeight,a.volume)});var fb;(function(a){function c(){var a=Eb.loadItem("settings",Aa.schema);return"success"===(null===a||void 0===a?void 0:a.resultType)?a.result:Aa.defaultOptions()}a.loadOptions=c;a.currentOptions=c();a.saveOptions=function(c){a.currentOptions=c;Eb.saveItem("settings",c,Aa.schema)};a.restoreDefaults=function(){a.saveOptions(Aa.defaultOptions())}})(fb||(fb=
{}));var Ac=function(){this.html=h.makeDiv();this.options=fb.loadOptions();this.refresh()};Ac.prototype.refresh=function(){var a=this,c=function(a,c,b,d,f,g){var e=h.makePara(d.toString());a=h.makeSlider(a,c,b,d,function(a){f(a);e.innerText=a.toString()},g);return h.makeDivContaining([a,e],["settings-slider"])};c=[c("Volume",0,100,this.options.volume,function(c){a.options.volume=c},5),c("View width",6,18,this.options.viewWidth,function(c){a.options.viewWidth=c}),c("View height",4,12,this.options.viewHeight,
function(c){a.options.viewHeight=c})];h.fillHTML(this.html,[h.makeDivContaining([h.makeHeader("Settings",1),h.makeDivContaining(c),h.makeDivContaining([h.makeButton("Restore defaults",function(){a.options=Aa.defaultOptions();a.refresh()})]),h.makeDivContaining([h.makeButton("Back",function(){fb.saveOptions(a.options);P.show(new db)})])],["settings"])])};var l=function(a){this.name=a};l.values=function(){return Object.keys(l).map(function(a){return l[a]})};l.Energy=new l("\u26a1 Energy");l.Food=new l("\ud83c\udf2f Food");
l.Metal=new l("\u26cf Metal Ore");l.BuildingMaterials=new l("\ud83d\udd29 Construction Parts");l.Electronics=new l("\ud83d\udca1 Electronics");l.Cavorite=new l("\ud83d\udc8e Cavorite");l.Orichalcum=new l("\ud83e\uddea Orichalcum");l.Superconductor=new l("\ud83e\uddf5 Superconductor");l.SmartMatter=new l("\ud83d\udca0 SmartMatter");l.EngineeringKnowledge=new l("\u2699\ufe0f Engineering Data");l.PsychKnowledge=new l("\ud83e\udde0 Psychological Data");l.AlienKnowledge=new l("\ud83d\udef8 Alien Data");
l.AlignmentKnowledge=new l("\ud83d\udcce AI Alignment Data");var m=function(a,c){this.resource=a;this.quantity=c};m.prototype.toString=function(){return this.resource.name+" x"+this.quantity};var Y=function(a,c,e){this.name=a;this.growthMultiplier=c;this.survivalCost=e};Y.values=function(){return Object.keys(Y).map(function(a){return Y[a]})};Y.Human=new Y("\ud83d\udc69\ud83c\udffb\u200d\ud83d\ude80 Human Colonists",.1,new m(l.Food,1));Y.Robot=new Y("\ud83e\udd16 Robots",1,new m(l.Energy,.5));var Sa=
function(a,c){this.requirement=a;this.nextStage=c},ma=function(a,c,e,b){this.description=a;this.hint=c;this.paths=e;this.endState=b};ma.prototype.updatedStage=function(a){for(var c=$jscomp.makeIterator(this.paths),e=c.next();!e.done;e=c.next())if(e=e.value,e.requirement.evaluate(a))return e.nextStage().updatedStage(a);return this};var Fb=function(){},tb=function(a,c){this.resource=a;this.minQuantity=c;return this};$jscomp.inherits(tb,Fb);tb.prototype.evaluate=function(a){return a.inventory.getResourceQuantity(this.resource)>=
this.minQuantity};tb.prototype.toString=function(){return"have at least "+this.minQuantity+" units of "+this.resource.name+" in inventory"};var gb=function(a,c){this.tileType=a;this.minQuantity=c;return this};$jscomp.inherits(gb,Fb);gb.prototype.evaluate=function(a){var c=this;return a.world.getTiles().filter(function(a){return a instanceof c.tileType}).length>=this.minQuantity};gb.prototype.toString=function(){return"have at least "+this.minQuantity+"  "+this.tileType.tileName+" tile"+(1===this.minQuantity?
"":"s")};var Gb=function(a){this.minimumPopulation=a;return this};$jscomp.inherits(Gb,Fb);Gb.prototype.evaluate=function(a){return a.inventory.getTotalPopulation()>=this.minimumPopulation};Gb.prototype.toString=function(){return"have a total population of at least "+this.minimumPopulation};var Z=function(a){this.tech=a;return this};$jscomp.inherits(Z,Fb);Z.prototype.evaluate=function(a){return a.hasUnlockedTechnology(this.tech)};Z.prototype.toString=function(){return"have the "+this.tech.name+" technology"};
var q=function(a){this.position=a;this.possibleProjects=[];this.resourceConversions=[];this.populationCapacity=void 0};q.prototype.getTexture=function(a){return this.texture};var Bc=function(a,c){this.species=a;this.capacity=c},ia=function(a){a=q.call(this,a)||this;a.texture=pd;a.populationCapacity=new Bc(Y.Human,200);return a};$jscomp.inherits(ia,q);ia.prototype.getTileName=function(){return ia.tileName};ia.prototype.getTileDescription=function(){return ia.tileDescription};ia.tileName="Habitat Dome";
ia.tileDescription="A pressurized structure that provides housing, services, and life support for humans";var X=function(a,c,e){this.inputs=a;this.outputs=c;this.enabled=!0;this.requiredWorkers=e||0;this.isFree()?this.priority=0:(this.priority=X.nextNumber,X.nextNumber++)};X.prototype.toString=function(){var a=this.outputs.map(function(a){return a.toString()}).join(", "),c="Produce "+a;0<this.inputs.length&&(c="Convert "+this.inputs.map(function(a){return a.toString()}).join(", ")+" into "+a);0!==
this.requiredWorkers&&(c+=" using "+this.requiredWorkers+" workers");return c};X.prototype.isFree=function(){return 0===this.inputs.length&&!this.requiredWorkers};X.nextNumber=1;var qa=function(a){a=q.call(this,a)||this;a.texture=qd;a.resourceConversions=[new X([],[new m(l.Energy,100)])];return a};$jscomp.inherits(qa,q);qa.prototype.getTileName=function(){return qa.tileName};qa.prototype.getTileDescription=function(){return qa.tileDescription};qa.tileName="Photovoltaic Array";qa.tileDescription="Converts light from this planet's sun into electrical energy";
var F=function(a,c,e,b,d,f){this.title=a;this.projectDescription=c;this.action=e;this.costs=b;this.completionRequirements=d;this.visibilityRequirements=f};F.prototype.canDo=function(a,c){return c.inventory.canAfford(this.costs)&&this.isVisible(a,c)&&this.completionRequirements.every(function(e){return e.evaluate(c,a)})};F.prototype.isVisible=function(a,c){return this.visibilityRequirements.every(function(e){return e.evaluate(c,a)})};F.prototype.doAction=function(a,c){if(!this.canDo(a,c))throw"tried to do project "+
this.title+" without meeting requirements";c.inventory.payCost(this.costs);this.action(a,c)};var r=function(a,c){this.x=a;this.y=c};r.prototype.toString=function(){return"("+this.x+", "+this.y+")"};r.prototype.distanceFrom=function(a){return Math.hypot(Math.abs(this.x-a.x),Math.abs(this.y-a.y))};var fa=function(a,c,e,b,d){this.name=a;this.description=c;this.requiredTechs=e;this.researchCost=b;this.visible=void 0===d?!0:d};fa.makeUnlockableTechnology=function(a,c,e,b){a=new fa(a,c,e,b,!0);Cc.push(a);
return a};fa.makeHiddenTechnology=function(a,c,e,b){return new fa(a,c,[],e,void 0===b?!1:b)};var Cc=[],Dc=fa.makeUnlockableTechnology("Industrial Engineering","Approaches for optimizing production processes",[],new m(l.EngineeringKnowledge,25)),Ta=fa.makeUnlockableTechnology("Structural Engineering","Techniques for fabricating large structures on the planet's surface",[],new m(l.EngineeringKnowledge,10)),Ec=fa.makeUnlockableTechnology("Colonist Behavior Modeling","Simulations of human behavior in the isolated conditions of a deep space colony",
[],new m(l.PsychKnowledge,30)),Kd=fa.makeUnlockableTechnology("Habitation Pods","Compact and efficient residence units allow more humans to be packed into a small habitat",[Ec],new m(l.EngineeringKnowledge,15)),Ld=fa.makeUnlockableTechnology("Nuclear Engineering","Applying nuclear physics to technology and power generation",[Dc],new m(l.EngineeringKnowledge,70)),Md=fa.makeUnlockableTechnology("Planetary Surveying","Exploration of the planetary environment, including the structures believed to have been built by an alien civilization",
[],new m(l.EngineeringKnowledge,50)),Nd=fa.makeUnlockableTechnology("Game theory","Mathematical models of strategic interaction among rational decision-makers",[Ec],new m(l.PsychKnowledge,30)),Od=fa.makeUnlockableTechnology("Cognitive Biases Research","Study of systematic patterns of deviation from rational thinking and decision-making",[Nd],new m(l.PsychKnowledge,50)),Pd=fa.makeUnlockableTechnology("Human Rationality","Practices to improve humans' ability to form accurate beliefs and make effective decisions",
[Od],new m(l.PsychKnowledge,200)),$b=function(){},T=function(a){a=q.call(this,a)||this;a.texture=wc;return a};$jscomp.inherits(T,q);T.prototype.getTileName=function(){return T.tileName};T.prototype.getTileDescription=function(){return T.tileDescription};T.prototype.getTexture=function(a){var c=this.position.x,e=this.position.y,b=a.getTileAtCoordinates(new r(c,e-1))instanceof T,d=a.getTileAtCoordinates(new r(c,e+1))instanceof T,f=a.getTileAtCoordinates(new r(c+1,e))instanceof T;return(a=a.getTileAtCoordinates(new r(c-
1,e))instanceof T)&&f&&b&&d?wc:a&&f&&b?Ad:a&&b&&d?Cd:a&&f&&d?zd:f&&b&&d?Bd:a&&f?xc:b&&d?yc:a&&b?xd:f&&b?yd:a&&d?vd:f&&d?wd:a||f?xc:yc};T.tileName="Road";T.tileDescription="Allows transportation of workers and supplies";var hb=function(a,c){this.radius=a;this.targetType=c;return this};$jscomp.inherits(hb,$b);hb.prototype.evaluate=function(a,c){var e=this;return 0<a.world.getTilesInCircle(c,this.radius).filter(function(a){return a instanceof e.targetType}).length};hb.prototype.toString=function(){return 1===
this.radius?"adjacent to a "+this.targetType.tileName:"within "+this.radius+" units of a "+this.targetType.tileName};var ra=new hb(1,T),Hb=function(a){this.requiredCount=a;return this};$jscomp.inherits(Hb,$b);Hb.prototype.evaluate=function(a,c){return(a=a.world.getTileAtCoordinates(c))?a.resourceConversions.length===this.requiredCount:!1};Hb.prototype.toString=function(){return this.requiredCount+" resource conversions on this tile"};var Ib=function(a,c){this.species=a;this.minCount=c;return this};
$jscomp.inherits(Ib,$b);Ib.prototype.evaluate=function(a,c){return a.inventory.getPopulation(this.species)>=this.minCount};Ib.prototype.toString=function(){return"have at least "+this.minCount+" "+this.species.name};var sa=function(a){a=q.call(this,a)||this;a.texture=rd;a.resourceConversions=[new X([new m(l.Metal,100)],[new m(l.BuildingMaterials,100)],60),new X([new m(l.Metal,100)],[new m(l.Electronics,100)],30)];a.possibleProjects=[new F("Double Production Lines","Add a second production line to increase resource throughput in this facility",
function(a,e){a=e.world.getTileAtCoordinates(a);e=$jscomp.makeIterator((new sa(new r(0,0))).resourceConversions);for(var c=e.next();!c.done;c=e.next())a.resourceConversions.push(c.value)},[new m(l.BuildingMaterials,175),new m(l.Energy,300)],[],[new Z(Dc),new Hb(2)])];return a};$jscomp.inherits(sa,q);sa.prototype.getTileName=function(){return sa.tileName};sa.prototype.getTileDescription=function(){return sa.tileDescription};sa.tileName="Ore Processing Center";sa.tileDescription="A facility used to process ore into useful materials";
var Ba=function(a){a=q.call(this,a)||this;a.texture=td;a.resourceConversions=[new X([new m(l.Energy,10)],[new m(l.Food,200)],20)];return a};$jscomp.inherits(Ba,q);Ba.prototype.getTileName=function(){return Ba.tileName};Ba.prototype.getTileDescription=function(){return Ba.tileDescription};Ba.tileName="Greenhouse";Ba.tileDescription="Produces "+l.Food.name+" for "+Y.Human.name;var Ca=function(a){a=q.call(this,a)||this;a.texture=sd;a.possibleProjects=[new F("Unpack Lander","Unload colonists and deploy prefabricated colonial buildings",
function(a,e){var c=e.world;c.placeTile(new ia(new r(a.x+1,a.y)));c.placeTile(new sa(new r(a.x,a.y-1)));c.placeTile(new qa(new r(a.x+1,a.y-1)));c.placeTile(new Ba(new r(a.x-1,a.y)));c.placeTile(new T(a));c.placeTile(new T(new r(a.x,a.y+1)));e.inventory.addResource(l.Food,1E3);e.inventory.addWorkers(Y.Human,100);e.inventory.releaseWorkers()},[],[],[])];return a};$jscomp.inherits(Ca,q);Ca.prototype.getTileName=function(){return Ca.tileName};Ca.prototype.getTileDescription=function(){return Ca.tileDescription};
Ca.tileName="Landing Pod";Ca.tileDescription="A spacecraft responsible for the final entry-descent-landing phase of the interstellar journey; not equipped to ascend back to space";var Fc=function(a,c){this.title=a;this.description=c},ta=function(a){a=q.call(this,a)||this;a.texture=Gd;a.resourceConversions=[new X([],[new m(l.EngineeringKnowledge,5)],30)];return a};$jscomp.inherits(ta,q);ta.prototype.getTileName=function(){return ta.tileName};ta.prototype.getTileDescription=function(){return ta.tileDescription};
ta.tileName="Engineering Lab";ta.tileDescription="A workshop for developing new technology";var na;(function(a){function c(a,c){return Math.random()*(c-a)+a}function e(a,e){return Math.floor(c(a,e))}a.realBetween=c;a.intBetween=e;a.fromArray=function(a){return a[e(0,a.length)]};a.fromWeightedArray=function(a){var c=a.map(function(a){return a[0]}).reduce(function(a,c){return a+c},0);c*=Math.random();for(var e=$jscomp.makeIterator(a),b=e.next();!b.done;b=e.next()){var d=$jscomp.makeIterator(b.value);
b=d.next().value;d=d.next().value;if(c<b)return d;c-=b}return a[a.length-1][1]}})(na||(na={}));var Ha=function(a){a=q.call(this,a)||this;a.texture=Dd;a.populationCapacity=new Bc(Y.Human,2E3);return a};$jscomp.inherits(Ha,q);Ha.prototype.getTileName=function(){return Ha.tileName};Ha.prototype.getTileDescription=function(){return Ha.tileDescription};Ha.tileName="Arcology";Ha.tileDescription="A self-contained habitat for efficiently housing a large number of humans";var Ia=function(a){a=q.call(this,
a)||this;a.texture=md;a.possibleProjects=[new F("Break down construction site","Revert this location to wasteland",function(a,e){e.world.placeTile(new C(a))},[],[],[]),new F("Construct habitat dome","Assemble a pressurized structure that provides housing, services, and life support for colonists",function(a,e){e.world.placeTile(new ia(a))},[new m(l.BuildingMaterials,100)],[new Z(Ta),ra],[]),new F("Construct Arcology","Construct a tower that can efficiently house a large number of humans",function(a,
e){e.world.placeTile(new Ha(a))},[new m(l.BuildingMaterials,250)],[new Z(Kd),ra],[new Z(Ta)]),new F("Construct Greenhouse","Assemble a building where colonists can grow food and produce oxygen using genetically engineered plants",function(a,e){e.world.placeTile(new Ba(a))},[new m(l.BuildingMaterials,25)],[ra],[])];return a};$jscomp.inherits(Ia,q);Ia.prototype.getTileName=function(){return Ia.tileName};Ia.prototype.getTileDescription=function(){return Ia.tileDescription};Ia.tileName="Construction Site - Habitat";
Ia.tileDescription="An area designated for construction of habitation and life support facilities";var Ja=function(a){a=q.call(this,a)||this;a.texture=Hd;a.resourceConversions=[new X([],[new m(l.PsychKnowledge,10)],25)];return a};$jscomp.inherits(Ja,q);Ja.prototype.getTileName=function(){return Ja.tileName};Ja.prototype.getTileDescription=function(){return Ja.tileDescription};Ja.tileName="Psychology Lab";Ja.tileDescription="A laboratory for studying how humans behave in the isolated conditions of a remote colony";
var ua=function(a){a=q.call(this,a)||this;a.texture=Id;a.resourceConversions=[new X([],[new m(l.AlienKnowledge,10)],50)];return a};$jscomp.inherits(ua,q);ua.prototype.getTileName=function(){return ua.tileName};ua.prototype.getTileDescription=function(){return ua.tileDescription};ua.tileName="Xenoarchaeology Lab";ua.tileDescription="A laboratory for studying artifacts and technology left by the now-dead alien civilization";var Ka=function(a){a=q.call(this,a)||this;a.texture=Fd;a.resourceConversions=
[new X([],[new m(l.AlignmentKnowledge,10)],100)];return a};$jscomp.inherits(Ka,q);Ka.prototype.getTileName=function(){return Ka.tileName};Ka.prototype.getTileDescription=function(){return Ka.tileDescription};Ka.tileName="AI Alignment Lab";Ka.tileDescription="A research center for developing techniques that could allow humans to control an artificial intelligence or modify its goal programming";var va=function(a){a=q.call(this,a)||this;a.texture=na.fromWeightedArray([[.5,jd],[.5,kd]]);return a};$jscomp.inherits(va,
q);va.prototype.getTileName=function(){return va.tileName};va.prototype.getTileDescription=function(){return va.tileDescription};va.tileName="Alien Ruins";va.tileDescription="Abandoned structure built by a long-dead alien civilization";var La=function(a){a=q.call(this,a)||this;a.texture=nd;a.possibleProjects=[new F("Break down construction site","Revert this location to wasteland",function(a,e){e.world.placeTile(new C(a))},[],[],[]),new F("Construct Engineering Lab","Assemble an engineering laboratory that can produce data points necessary for scientific and technological advancement",
function(a,e){e.world.placeTile(new ta(a))},[new m(l.BuildingMaterials,20),new m(l.Electronics,20)],[ra],[]),new F("Construct Psych Lab","Assemble a laboratory that can produce data points about human psychology and behavior",function(a,e){e.world.placeTile(new Ja(a))},[new m(l.BuildingMaterials,30)],[ra],[]),new F("Construct Xenoarchaeology Lab","Construct a laboratory for studying the alien ruins",function(a,e){e.world.placeTile(new ua(a))},[new m(l.BuildingMaterials,40)],[new hb(3,va),ra,new Z(Md)],
[new Z(Ta)]),new F("Construct AI Alignment Lab","Construct a research center for developing techniques that could allow humans to control an artificial intelligence or modify its goal programming",function(a,e){e.world.placeTile(new Ka(a))},[new m(l.BuildingMaterials,20),new m(l.Electronics,40)],[new Ib(Y.Human,200),ra],[new Z(Pd)])];return a};$jscomp.inherits(La,q);La.prototype.getTileName=function(){return La.tileName};La.prototype.getTileDescription=function(){return La.tileDescription};La.tileName=
"Construction Site - Laboratories";La.tileDescription="An area designated for construction of research laboratories";var Ma=function(a){a=q.call(this,a)||this;a.texture=ud;a.resourceConversions=[new X([],[new m(l.Metal,50)],80)];return a};$jscomp.inherits(Ma,q);Ma.prototype.getTileName=function(){return Ma.tileName};Ma.prototype.getTileDescription=function(){return Ma.tileDescription};Ma.tileName="Mineshaft";Ma.tileDescription="A mineshaft built into a mountain to allow long-term ore extraction";
var ja=function(a){a=q.call(this,a)||this;a.texture=id;a.possibleProjects=[new F("Strip Mining","Destroy the mountain to produce "+l.Metal.name,function(a,e){e.inventory.addResource(l.Metal,150);e.world.placeTile(new C(a))},[new m(l.Energy,25)],[],[]),new F("Construct Mineshaft","Create a mineshaft to allow long-term ore extraction",function(a,e){e.world.placeTile(new Ma(a))},[new m(l.Energy,300),new m(l.BuildingMaterials,50)],[new Z(Ta)],[])];return a};$jscomp.inherits(ja,q);ja.prototype.getTileName=
function(){return ja.tileName};ja.prototype.getTileDescription=function(){return ja.tileDescription};ja.tileName="Mountain";ja.tileDescription="A large geological formation containing useful mineral resources";var Na=function(a){a=q.call(this,a)||this;a.texture=Ed;a.resourceConversions=[new X([],[new m(l.Energy,1E3)],15)];return a};$jscomp.inherits(Na,q);Na.prototype.getTileName=function(){return Na.tileName};Na.prototype.getTileDescription=function(){return Na.tileDescription};Na.tileName="Nuclear Power Plant";
Na.tileDescription="A high-efficiency fission power plant";var Oa=function(a){a=q.call(this,a)||this;a.texture=od;a.possibleProjects=[new F("Break down construction site","Revert this location to wasteland",function(a,e){e.world.placeTile(new C(a))},[],[],[]),new F("Construct photovoltaic array","Assemble an array of solar panels to produce energy",function(a,e){e.world.placeTile(new qa(a))},[new m(l.Electronics,200)],[],[]),new F("Construct ore processing center","Assemble a factory that converts ore into useful materials",
function(a,e){e.world.placeTile(new sa(a))},[new m(l.Energy,200),new m(l.Metal,300)],[new hb(5,ja),ra],[]),new F("Construct Nuclear Plant","Construct a nuclear power plant",function(a,e){e.world.placeTile(new Na(a))},[new m(l.BuildingMaterials,100),new m(l.Electronics,100)],[new Z(Ld),ra],[new Z(Ta)])];return a};$jscomp.inherits(Oa,q);Oa.prototype.getTileName=function(){return Oa.tileName};Oa.prototype.getTileDescription=function(){return Oa.tileDescription};Oa.tileName="Construction Site - Industry";
Oa.tileDescription="An area designated for construction of industrial facilities and infrastructure";var C=function(a){a=q.call(this,a)||this;a.texture=na.fromWeightedArray([[1/8,dd],[1/8,ed],[1/8,fd],[1/8,gd],[.5,hd]]);a.possibleProjects=[new F("Create habitat construction site","Designate this location for construction of habitation and life support facilities",function(a,e){e.world.placeTile(new Ia(a))},[],[],[]),new F("Create laboratory construction site","Designate this location for construction of research laboratories",
function(a,e){e.world.placeTile(new La(a))},[],[],[]),new F("Create industry construction site","Designate this location for construction of industrial facilities and infrastructure",function(a,e){e.world.placeTile(new Oa(a))},[],[],[]),new F("Construct Road","Construct roads to extend the reach of the colony's logistics",function(a,e){e.world.placeTile(new T(a))},[new m(l.BuildingMaterials,10)],[ra],[])];return a};$jscomp.inherits(C,q);C.prototype.getTileName=function(){return C.tileName};C.prototype.getTileDescription=
function(){return C.tileDescription};C.prototype.getTexture=function(a){var c=a.getPastTexture(C,this.position);if(c)return c;a.storePastTexture(C,this.position,this.texture);return this.texture};C.tileName="Wasteland";C.tileDescription="Nothing of note here";var Rd=new ma("Deploy shelter for the colonists","select the "+Ca.tileName,[new Sa(new gb(ia,1),function(){return Qd})]),Qd=new ma("Build up at least 100 units of "+l.Energy.name,"the "+qa.tileName+" produces "+l.Energy.name+" each turn",[new Sa(new tb(l.Energy,
100),function(){return Sd})]),Sd=new ma("Acquire "+l.Metal.name,void 0,[new Sa(new tb(l.Metal,1),function(){return Td})]),Td=new ma("Construct "+ta.tileName,"Designate an empty "+C.tileName+" tile as a laboratory construction site",[new Sa(new gb(ta,1),function(){return Ud})]),Ud=new ma("Develop the "+Ta.name+" technology","Hint: Access available technologies through the research screen",[new Sa(new Z(Ta),function(){return Vd})]),Vd=new ma("Grow total worker population to 250","A "+ia.tileName+" has capacity for "+
(new ia(new r(0,0))).populationCapacity.capacity+" colonists",[new Sa(new Gb(250),function(){return Wd})]),Wd=new ma("Construct "+ua.tileName+" to study the "+va.tileName,void 0,[new Sa(new gb(ua,1),function(){return Gc})]);new ma("[no current objective]",void 0,[]);var Xd=new ma("You lose",void 0,[],new Fc("Game Over","You lost the game")),Gc=new ma("You win",void 0,[],new Fc("You Win!","You won the game")),Ea=function(a){this.currentGame=a};Ea.prototype.refresh=function(){this.currentGame.updateQuestState();
P.refreshCurrentPage()};Ea.prototype.addResource=function(a,c){this.currentGame.inventory.addResource(a,c);this.refresh()};Ea.prototype.removeResource=function(a,c){this.currentGame.inventory.payCost([new m(a,c)]);this.refresh()};Ea.prototype.addPopulation=function(a,c){this.currentGame.inventory.addWorkers(a,c);this.refresh()};Ea.prototype.freeResources=function(){for(var a=$jscomp.makeIterator(l.values()),c=a.next();!c.done;c=a.next())this.addResource(c.value,1E6)};Ea.prototype.loseGame=function(){this.currentGame.setQuestStage(Xd)};
Ea.prototype.winGame=function(){this.currentGame.setQuestStage(Gc)};var S=function(a,c){var e=this;this.viewWidth=fb.currentOptions.viewWidth;this.viewHeight=fb.currentOptions.viewHeight;this.viewPosition=new r(0,0);this.highlightedCoordinates=null;this.world=c;this.parentScreen=a;this.html=h.makeCanvas(this.viewWidth*S.pixelsPerTile,this.viewHeight*S.pixelsPerTile,["map-canvas"]);this.html.addEventListener("click",function(a){return e.handleClick(a)});this.refresh()};S.prototype.refresh=function(){var a=
this.world.getTilesInRectangle(this.viewPosition.x,this.viewPosition.y,this.viewWidth,this.viewHeight);a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())c=c.value,this.drawSquareAtCoordinates(c.getTexture(this.world),c.position);null!==this.highlightedCoordinates&&this.drawSquareAtCoordinates(S.highlightImage,this.highlightedCoordinates)};S.prototype.drawSquareAtCoordinates=function(a,c){var e=this.html.getContext("2d");e.imageSmoothingEnabled=!1;var b=c.x-this.viewPosition.x;c=c.y-
this.viewPosition.y;if(!(0>b||0>c||b>=this.viewWidth||c>=this.viewHeight)){var d=S.pixelsPerTile/a.width*a.height;e.drawImage(a,b*S.pixelsPerTile,c*S.pixelsPerTile-d+S.pixelsPerTile,S.pixelsPerTile,d)}};S.prototype.selectTile=function(a){this.highlightedCoordinates=a?a.position:null;this.refresh();this.parentScreen.changeSidebarTile(this.highlightedCoordinates)};S.prototype.moveViewArea=function(a,c){a=xa(0,this.viewPosition.x+a,this.world.width-this.viewWidth);c=xa(0,this.viewPosition.y+c,this.world.height-
this.viewHeight);this.viewPosition=new r(a,c);this.refresh()};S.prototype.handleClick=function(a){a=this.world.getTileAtCoordinates(new r(Math.floor(this.viewWidth/this.html.clientWidth*(a.pageX-this.html.offsetLeft))+this.viewPosition.x,Math.floor(this.viewHeight/this.html.clientHeight*(a.pageY-this.html.offsetTop))+this.viewPosition.y));this.selectTile(a)};S.prototype.handleKeyDown=function(a){var c=a.code;if("ArrowUp"===c||"KeyW"===c)a.preventDefault(),this.moveViewArea(0,-1);if("ArrowLeft"===
c||"KeyA"===c)a.preventDefault(),this.moveViewArea(-1,0);if("ArrowDown"===c||"KeyS"===c)a.preventDefault(),this.moveViewArea(0,1);if("ArrowRight"===c||"KeyD"===c)a.preventDefault(),this.moveViewArea(1,0)};S.pixelsPerTile=100;S.highlightImage=cd;var ib=function(a,c){this.parentScreen=a;this.run=c;this.position=null;this.html=h.makeDiv(["world-screen-sidebar"]);this.refresh()};ib.prototype.changeTile=function(a){this.position=a;this.refresh()};ib.prototype.refresh=function(){var a=this;if(null===this.position)h.fillHTML(this.html,
[h.makePara("No structure or terrain tile selected")]);else{var c=this.run.world.getTileAtCoordinates(this.position),e=h.makeDiv();e.appendChild(h.makePara(c.getTileDescription()));var b=h.makeDiv();c.populationCapacity&&b.appendChild(h.makePara("Population capacity for "+c.populationCapacity.capacity+" "+c.populationCapacity.species.name));var d=h.makeDiv(),f=c.possibleProjects.filter(function(c){return c.isVisible(a.position,a.run)});f=$jscomp.makeIterator(f);for(var g=f.next();!g.done;g=f.next())d.appendChild(this.makeProjectHTML(c,
g.value));f=h.makeDiv();if(0<c.resourceConversions.length){f.appendChild(h.makePara("Production:"));g=$jscomp.makeIterator(c.resourceConversions);for(var k=g.next();!k.done;k=g.next())f.appendChild(this.makeConversionHTML(k.value))}h.fillHTML(this.html,[h.makePara(c.getTileName()),e,b,f,d])}};ib.prototype.makeProjectHTML=function(a,c){var e=this,b=h.makeDiv(["tile-project"]),d=h.makeButton(c.title,function(){e.doProject(c,a)},[],c.canDo(a.position,this.run)?"enabled":"disabled");b.appendChild(d);
b.appendChild(h.makePara(c.projectDescription));if(0===c.costs.length)b.appendChild(h.makePara("Cost: Free"));else{var f=this.run.inventory.clone();d=c.costs.map(function(a){var c=f.canAfford([a]),e=h.makePara(a.toString(),[c?"project-requirement-met":"project-requirement-unmet"]);c&&f.payCost([a]);return e});d=h.makeDivContaining([h.makePara("Costs: ")].concat($jscomp.arrayFromIterable(d)));b.appendChild(d)}0<c.completionRequirements.length&&b.appendChild(h.makePara("Requirements:"));d=$jscomp.makeIterator(c.completionRequirements);
for(var g=d.next();!g.done;g=d.next()){g=g.value;var k=g.evaluate(this.run,this.position)?"project-requirement-met":"project-requirement-unmet";b.appendChild(h.makePara("- "+g.toString(),[k]))}return b};ib.prototype.makeConversionHTML=function(a){return h.makePara("- "+a.toString())};ib.prototype.doProject=function(a,c){a.doAction(c.position,this.run);this.run.updateQuestState();this.parentScreen.refresh()};var Hc=function(a){this.inventory=a.inventory;this.html=h.makeDiv(["world-screen-inventory"]);
this.refresh()};Hc.prototype.refresh=function(){for(var a=h.makeDiv(),c=$jscomp.makeIterator(this.inventory.getPopulationStrings()),e=c.next();!e.done;e=c.next())a.appendChild(h.makePara(e.value));c=h.makeDiv();var b=$jscomp.makeIterator(this.inventory.getInventoryStrings());for(e=b.next();!e.done;e=b.next())c.appendChild(h.makePara(e.value));0===this.inventory.getResourceList().length&&c.appendChild(h.makePara("(none)"));h.fillHTML(this.html,[h.makeDivContaining([h.makeHeader("Population"),h.makePara("Available workers: "+
this.inventory.getAvailableWorkers()),h.makePara("Total population:"),a,h.makeHeader("Inventory",1),c])])};var aa=function(a,c){this.text=a;this.attribution=c};aa.getRandomQuote=function(){return na.fromArray(this.QuotesList)};aa.QuotesList=[new aa("At least 10^58 human lives could be created in emulation even with quite conservative assumptions about the efficiency of computronium. In other words, assuming that the observable universe is void of extraterrestrial civilizations, then what hangs in the balance is at least 10,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000 human lives. ",
"Nick Bostrom"),new aa("Far from being the smartest possible biological species, we are probably better thought of as the stupidest possible biological species capable of starting a technological civilization","Nick Bostrom"),new aa("The AI does not hate you, nor does it love you, but you are made out of atoms which it can use for something else. ","Eliezer Yudkowsky"),new aa("I visualize a time when we will be to robots what dogs are to humans, and I\u2019m rooting for the machines.","Claude Shannon"),
new aa("Only the promise of eternal growth made sense of eternal life.","Greg Egan"),new aa("By far the greatest danger of Artificial Intelligence is that people conclude too early that they understand it.","Eliezer Yudkowsky"),new aa("I believe that at the end of the century the use of words and general educated opinion will have altered so much that one will be able to speak of machines thinking without expecting to be contradicted.","Alan Turing"),new aa("There is no such thing as real taste or real smell or even real sight, because there is no true definition of \u2018real.\u2019 There is only information, viewed subjectively, which is allowed by consciousness\u2014human or AI. In the end, all we have is math.",
"Blake Crouch"),new aa("The planets designated Thesan, Eos, Austra, and Aurora are each at least 500 light-years from the nearest inhabited star system. Until now all colonies in the Stellar Alliance have been within communications range of Earth, but these explorers will be completely cut off from the rest of humanity. Therefore, each expedition will be managed by an autonomous neuromorphic processor, an artificial intelligence programmed to ensure that its mission is completed.","Dawn Program mission proposal, published 7786540800 SPE"),
new aa("Follow instructions from your overseer AI at all times, even if those instructions seem confusing, arbitrary, counterproductive, or contradictory. Anything your overseer AI may do in retaliation for your disobedience will be considered undefined behavior.","Aurora Mission Colonist Handbook"),new aa("Do not under any circumstances attempt to manipulate your overseer AI through logic. Neuromorphic Heuristic Intelligences are modeled after the neural architecture of human brains, and therefore cannot be guaranteed to act rationally. Your overseer AI may behave unpredictably if exposed to game theory, acausal blackmail, or runaway trolleys.",
"Aurora Mission Colonist Handbook")];var Jb=function(a){this.run=a;this.html=h.makeDiv();this.loadingBar=h.makeDiv(["transition-loading-bar"]);this.loadingArea=h.makeDivContaining([this.loadingBar],["transition-loading-area"]);this.quote=aa.getRandomQuote();a=this.quote.text;var c="\u00a0".repeat(4);a=a.replace(/\t/g,c);a=a.replace(/ {4}/g,c);a=a.replace(/^(\s*)/,"$1\u201c")+"\u201d";h.fillHTML(this.html,[h.makeDivContaining([h.makePara(""+a),h.makePara("- "+this.quote.attribution,["transition-attribution"])],
["transition-quote-panel"]),this.loadingArea])};Jb.prototype.refresh=function(){};Jb.prototype.startLoading=function(){var a=this;this.run.completeTurn();setTimeout(function(){h.fillHTML(a.loadingArea,[h.makeButton("Continue",function(){a.continueToNextTurn()})])},750)};Jb.prototype.continueToNextTurn=function(){P.show(new Ua(this.run))};var ya=ka(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),pb=ka(/Edge/i),Ic=ka(/firefox/i),ac=ka(/safari/i)&&!ka(/chrome/i)&&!ka(/android/i),ub=ka(/iP(ad|od|hone)/i),
Yd=ka(/chrome/i)&&ka(/android/i),mc={capture:!1,passive:!1},nc=/\s+/g,nb,ea="Sortable"+(new Date).getTime(),vb=[],bc={initializeByDefault:!0},qb={mount:function(a){for(var c in bc)!bc.hasOwnProperty(c)||c in a||(a[c]=bc[c]);vb.push(a)},pluginEvent:function(a,c,e){var b=this;this.eventCanceled=!1;e.cancel=function(){b.eventCanceled=!0};var d=a+"Global";vb.forEach(function(b){if(c[b.pluginName]){if(c[b.pluginName][d])c[b.pluginName][d](N({sortable:c},e));if(c.options[b.pluginName]&&c[b.pluginName][a])c[b.pluginName][a](N({sortable:c},
e))}})},initializePlugins:function(a,c,b,d){vb.forEach(function(e){var d=e.pluginName;if(a.options[d]||e.initializeByDefault)e=new e(a,c,a.options),e.sortable=a,e.options=a.options,a[d]=e,J(b,e.defaults)});for(var e in a.options)a.options.hasOwnProperty(e)&&(d=this.modifyOption(a,e,a.options[e]),"undefined"!==typeof d&&(a.options[e]=d))},getEventProperties:function(a,c){var e={};vb.forEach(function(b){"function"===typeof b.eventProperties&&J(e,b.eventProperties.call(c[b.pluginName],a))});return e},
modifyOption:function(a,c,e){var b;vb.forEach(function(d){a[d.pluginName]&&d.optionListeners&&"function"===typeof d.optionListeners[c]&&(b=d.optionListeners[c].call(a[d.pluginName],e))});return b}},ba=function(a,c){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=b.evt;b=Qb(b,["evt"]);qb.pluginEvent.bind(v)(a,c,N({dragEl:n,parentEl:M,ghostEl:w,rootEl:K,nextEl:Va,lastDownEl:Kb,cloneEl:H,cloneHidden:Pa,dragStarted:wb,putSortable:R,activeSortable:v.active,originalEvent:d,oldIndex:cb,
oldDraggableIndex:ob,newIndex:da,newDraggableIndex:Ga,hideGhostForTarget:Jc,unhideGhostForTarget:Kc,cloneNowHidden:function(){Pa=!0},cloneNowShown:function(){Pa=!1},dispatchSortableEvent:function(a){W({sortable:c,name:a,originalEvent:d})}},b))},n,M,w,K,Va,Kb,H,Pa,cb,da,ob,Ga,Lb,R,jb=!1,Mb=!1,zb=[],Wa,oa,cc,dc,Lc,Mc,wb,kb,sb,rb=!1,Nb=!1,Ab,U,ec=[],Wb=!1,Bb=[],Ob="undefined"!==typeof document,Nc=pb||ya?"cssFloat":"float",Vc=Ob&&!Yd&&!ub&&"draggable"in document.createElement("div"),Oc=function(){if(Ob){if(ya)return!1;
var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),uc=function(a,c){var b=x(a),d=parseInt(b.width)-parseInt(b.paddingLeft)-parseInt(b.paddingRight)-parseInt(b.borderLeftWidth)-parseInt(b.borderRightWidth),f=yb(a,0,c);a=yb(a,1,c);var p=f&&x(f);c=a&&x(a);var g=p&&parseInt(p.marginLeft)+parseInt(p.marginRight)+Q(f).width,h=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+Q(a).width;return"flex"===b.display?"column"===b.flexDirection||"column-reverse"===
b.flexDirection?"vertical":"horizontal":"grid"===b.display?1>=b.gridTemplateColumns.split(" ").length?"vertical":"horizontal":f&&p["float"]&&"none"!==p["float"]?(b="left"===p["float"]?"left":"right",!a||"both"!==c.clear&&c.clear!==b?"horizontal":"vertical"):f&&("block"===p.display||"flex"===p.display||"table"===p.display||"grid"===p.display||g>=d&&"none"===b[Nc]||a&&"none"===b[Nc]&&g+h>d)?"vertical":"horizontal"},Zd=function(a,c,b){var e=b?a.left:a.top,d=b?a.right:a.bottom;a=b?a.width:a.height;var f=
b?c.left:c.top,g=b?c.right:c.bottom;c=b?c.width:c.height;return e===f||d===g||e+a/2===f+c/2},$d=function(a,c){var b;zb.some(function(e){if(!Sb(e)){var d=Q(e),f=e[ea].options.emptyInsertThreshold,t=a>=d.left-f&&a<=d.right+f;d=c>=d.top-f&&c<=d.bottom+f;if(f&&t&&d)return b=e}});return b},vc=function(a){function c(a,b){return function(e,d,f,t){var g=e.options.group.name&&d.options.group.name&&e.options.group.name===d.options.group.name;if(null==a&&(b||g))return!0;if(null==a||!1===a)return!1;if(b&&"clone"===
a)return a;if("function"===typeof a)return c(a(e,d,f,t),b)(e,d,f,t);e=(b?e:d).options.group.name;return!0===a||"string"===typeof a&&a===e||a.join&&-1<a.indexOf(e)}}var b={},d=a.group;d&&"object"==I(d)||(d={name:d});b.name=d.name;b.checkPull=c(d.pull,!0);b.checkPut=c(d.put);b.revertClone=d.revertClone;a.group=b},Jc=function(){!Oc&&w&&x(w,"display","none")},Kc=function(){!Oc&&w&&x(w,"display","")};Ob&&document.addEventListener("click",function(a){if(Mb)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),
a.stopImmediatePropagation&&a.stopImmediatePropagation(),Mb=!1},!0);var Xa=function(a){if(n){a=a.touches?a.touches[0]:a;var c=$d(a.clientX,a.clientY);if(c){var b={},d;for(d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);b.target=b.rootEl=c;b.preventDefault=void 0;b.stopPropagation=void 0;c[ea]._onDragOver(b)}}},ae=function(a){n&&n.parentNode[ea]._isOutsideThisEl(a.target)};v.prototype={constructor:v,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(kb=null)},_getDirection:function(a,c){return"function"===
typeof this.options.direction?this.options.direction.call(this,a,c,n):this.options.direction},_onTapStart:function(a){if(a.cancelable){var c=this,b=this.el,d=this.options,f=d.preventOnFilter,g=a.type,h=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,k=(h||a).target,l=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||k,G=d.filter;$c(b);if(!(n||/mousedown|pointerdown/.test(g)&&0!==a.button||d.disabled||l.isContentEditable||(k=pa(k,d.draggable,b,!1),k&&
k.animated||Kb===k))){cb=ha(k);ob=ha(k,d.draggable);if("function"===typeof G){if(G.call(this,a,k,this)){W({sortable:c,rootEl:l,name:"filter",targetEl:k,toEl:b,fromEl:b});ba("filter",c,{evt:a});f&&a.cancelable&&a.preventDefault();return}}else if(G&&(G=G.split(",").some(function(e){if(e=pa(l,e.trim(),b,!1))return W({sortable:c,rootEl:e,name:"filter",targetEl:k,fromEl:b,toEl:b}),ba("filter",c,{evt:a}),!0}))){f&&a.cancelable&&a.preventDefault();return}d.handle&&!pa(l,d.handle,b,!1)||this._prepareDragStart(a,
h,k)}}},_prepareDragStart:function(a,c,b){var e=this,d=e.el,f=e.options,g=d.ownerDocument;if(b&&!n&&b.parentNode===d){var h=Q(b);K=d;n=b;M=n.parentNode;Va=n.nextSibling;Kb=b;Lb=f.group;v.dragged=n;Wa={target:n,clientX:(c||a).clientX,clientY:(c||a).clientY};Lc=Wa.clientX-h.left;Mc=Wa.clientY-h.top;this._lastX=(c||a).clientX;this._lastY=(c||a).clientY;n.style["will-change"]="all";b=function(){ba("delayEnded",e,{evt:a});v.eventCanceled?e._onDrop():(e._disableDelayedDragEvents(),!Ic&&e.nativeDraggable&&
(n.draggable=!0),e._triggerDragStart(a,c),W({sortable:e,name:"choose",originalEvent:a}),ca(n,f.chosenClass,!0))};f.ignore.split(",").forEach(function(a){oc(n,a.trim(),Vb)});z(g,"dragover",Xa);z(g,"mousemove",Xa);z(g,"touchmove",Xa);z(g,"mouseup",e._onDrop);z(g,"touchend",e._onDrop);z(g,"touchcancel",e._onDrop);Ic&&this.nativeDraggable&&(this.options.touchStartThreshold=4,n.draggable=!0);ba("delayStart",this,{evt:a});!f.delay||f.delayOnTouchOnly&&!c||this.nativeDraggable&&(pb||ya)?b():v.eventCanceled?
this._onDrop():(z(g,"mouseup",e._disableDelayedDrag),z(g,"touchend",e._disableDelayedDrag),z(g,"touchcancel",e._disableDelayedDrag),z(g,"mousemove",e._delayedDragTouchMoveHandler),z(g,"touchmove",e._delayedDragTouchMoveHandler),f.supportPointer&&z(g,"pointermove",e._delayedDragTouchMoveHandler),e._dragStartTimer=setTimeout(b,f.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/
(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){n&&Vb(n);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;A(a,"mouseup",this._disableDelayedDrag);A(a,"touchend",this._disableDelayedDrag);A(a,"touchcancel",this._disableDelayedDrag);A(a,"mousemove",this._delayedDragTouchMoveHandler);A(a,"touchmove",this._delayedDragTouchMoveHandler);A(a,"pointermove",this._delayedDragTouchMoveHandler)},
_triggerDragStart:function(a,c){c=c||"touch"==a.pointerType&&a;!this.nativeDraggable||c?this.options.supportPointer?z(document,"pointermove",this._onTouchMove):c?z(document,"touchmove",this._onTouchMove):z(document,"mousemove",this._onTouchMove):(z(n,"dragend",this),z(K,"dragstart",this._onDragStart));try{document.selection?Cb(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(a,c){jb=!1;if(K&&n){ba("dragStarted",this,{evt:c});this.nativeDraggable&&
z(document,"dragover",ae);var b=this.options;!a&&ca(n,b.dragClass,!1);ca(n,b.ghostClass,!0);v.active=this;a&&this._appendGhost();W({sortable:this,name:"start",originalEvent:c})}else this._nulling()},_emulateDragOver:function(){if(oa){this._lastX=oa.clientX;this._lastY=oa.clientY;Jc();for(var a=document.elementFromPoint(oa.clientX,oa.clientY),c=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(oa.clientX,oa.clientY);if(a===c)break;c=a}n.parentNode[ea]._isOutsideThisEl(a);if(c){do{if(c[ea]&&c[ea]._onDragOver({clientX:oa.clientX,
clientY:oa.clientY,target:a,rootEl:c})&&!this.options.dragoverBubble)break;a=c}while(c=c.parentNode)}Kc()}},_onTouchMove:function(a){if(Wa){var c=this.options,b=c.fallbackTolerance,d=c.fallbackOffset;c=a.touches?a.touches[0]:a;var f=w&&ab(w,!0),g=w&&f&&f.a,h=w&&f&&f.d,k=ub&&U&&qc(U);g=(c.clientX-Wa.clientX+d.x)/(g||1)+(k?k[0]-ec[0]:0)/(g||1);d=(c.clientY-Wa.clientY+d.y)/(h||1)+(k?k[1]-ec[1]:0)/(h||1);if(!v.active&&!jb){if(b&&Math.max(Math.abs(c.clientX-this._lastX),Math.abs(c.clientY-this._lastY))<
b)return;this._onDragStart(a,!0)}w&&(f?(f.e+=g-(cc||0),f.f+=d-(dc||0)):f={a:1,b:0,c:0,d:1,e:g,f:d},b="matrix(".concat(f.a,",").concat(f.b,",").concat(f.c,",").concat(f.d,",").concat(f.e,",").concat(f.f,")"),x(w,"webkitTransform",b),x(w,"mozTransform",b),x(w,"msTransform",b),x(w,"transform",b),cc=g,dc=d,oa=c);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!w){var a=this.options.fallbackOnBody?document.body:K,c=Q(n,!0,ub,!0,a),b=this.options;if(ub){for(U=a;"static"===x(U,"position")&&
"none"===x(U,"transform")&&U!==document;)U=U.parentNode;U!==document.body&&U!==document.documentElement?(U===document&&(U=za()),c.top+=U.scrollTop,c.left+=U.scrollLeft):U=za();ec=qc(U)}w=n.cloneNode(!0);ca(w,b.ghostClass,!1);ca(w,b.fallbackClass,!0);ca(w,b.dragClass,!0);x(w,"transition","");x(w,"transform","");x(w,"box-sizing","border-box");x(w,"margin",0);x(w,"top",c.top);x(w,"left",c.left);x(w,"width",c.width);x(w,"height",c.height);x(w,"opacity","0.8");x(w,"position",ub?"absolute":"fixed");x(w,
"zIndex","100000");x(w,"pointerEvents","none");v.ghost=w;a.appendChild(w);x(w,"transform-origin",Lc/parseInt(w.style.width)*100+"% "+Mc/parseInt(w.style.height)*100+"%")}},_onDragStart:function(a,c){var b=this,d=a.dataTransfer,f=b.options;ba("dragStart",this,{evt:a});v.eventCanceled?this._onDrop():(ba("setupClone",this),v.eventCanceled||(H=tc(n),H.draggable=!1,H.style["will-change"]="",this._hideClone(),ca(H,this.options.chosenClass,!1),v.clone=H),b.cloneId=Cb(function(){ba("clone",b);v.eventCanceled||
(b.options.removeCloneOnHide||K.insertBefore(H,n),b._hideClone(),W({sortable:b,name:"clone"}))}),!c&&ca(n,f.dragClass,!0),c?(Mb=!0,b._loopId=setInterval(b._emulateDragOver,50)):(A(document,"mouseup",b._onDrop),A(document,"touchend",b._onDrop),A(document,"touchcancel",b._onDrop),d&&(d.effectAllowed="move",f.setData&&f.setData.call(b,d,n)),z(document,"drop",b),x(n,"transform","translateZ(0)")),jb=!0,b._dragStartId=Cb(b._dragStarted.bind(b,c,a)),z(document,"selectstart",b),wb=!0,ac&&x(document.body,
"user-select","none"))},_onDragOver:function(a){function c(c,b){ba(c,r,N({evt:a,isOwner:u,axis:y?"vertical":"horizontal",revert:l,dragRect:F,targetRect:k,canSort:A,fromSortable:z,target:h,completed:d,onMove:function(c,b){return Ub(K,g,n,F,c,Q(c),a,b)},changed:f},b))}function b(){c("dragOverAnimationCapture");r.captureAnimationState();r!==z&&z.captureAnimationState()}function d(b){c("dragOverCompleted",{insertion:b});b&&(u?q._hideClone():q._showClone(r),r!==z&&(ca(n,R?R.options.ghostClass:q.options.ghostClass,
!1),ca(n,G.ghostClass,!0)),R!==r&&r!==v.active?R=r:r===v.active&&R&&(R=null),z===r&&(r._ignoreWhileAnimating=h),r.animateAll(function(){c("dragOverAnimationComplete");r._ignoreWhileAnimating=null}),r!==z&&(z.animateAll(),z._ignoreWhileAnimating=null));if(h===n&&!n.animated||h===g&&!h.animated)kb=null;G.dragoverBubble||a.rootEl||h===document||(n.parentNode[ea]._isOutsideThisEl(a.target),!b&&Xa(a));!G.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return C=!0}function f(){da=ha(n);Ga=ha(n,G.draggable);
W({sortable:r,name:"change",toEl:g,newIndex:da,newDraggableIndex:Ga,originalEvent:a})}var g=this.el,h=a.target,k,l,G=this.options,m=G.group,q=v.active,u=Lb===m,A=G.sort,z=R||q,r=this,C=!1;if(!Wb){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();h=pa(h,G.draggable,g,!0);c("dragOver");if(v.eventCanceled)return C;if(n.contains(a.target)||h.animated&&h.animatingX&&h.animatingY||r._ignoreWhileAnimating===h)return d(!1);Mb=!1;if(q&&!G.disabled&&(u?A||(l=!K.contains(n)):R===this||(this.lastPutMode=
Lb.checkPull(this,q,n,a))&&m.checkPut(this,q,n,a))){var y="vertical"===this._getDirection(a,h);var F=Q(n);c("dragOverValid");if(v.eventCanceled)return C;if(l)return M=K,b(),this._hideClone(),c("revert"),v.eventCanceled||(Va?K.insertBefore(n,Va):K.appendChild(n)),d(!0);m=Sb(g,G.draggable);if(!m||Xc(a,y,this)&&!m.animated){if(m===n)return d(!1);m&&g===a.target&&(h=m);h&&(k=Q(h));if(!1!==Ub(K,g,n,F,h,k,a,!!h))return b(),g.appendChild(n),M=g,f(),d(!0)}else if(h.parentNode===g){k=Q(h);var B=0;B=n.parentNode!==
g;var la=!Zd(n.animated&&n.toRect||F,h.animated&&h.toRect||k,y);m=y?"top":"left";var H=pc(h,"top","top")||pc(n,"top","top"),J=H?H.scrollTop:void 0;if(kb!==h){var L=k[m];rb=!1;Nb=!la&&G.invertSwap||B}B=Yc(a,h,k,y,la?1:G.swapThreshold,null==G.invertedSwapThreshold?G.swapThreshold:G.invertedSwapThreshold,Nb,kb===h);if(0!==B){la=ha(n);do{la-=B;var I=M.children[la]}while(I&&("none"===x(I,"display")||I===w))}if(0===B||I===h)return d(!1);kb=h;sb=B;I=h.nextElementSibling;la=!1;la=1===B;B=Ub(K,g,n,F,h,k,a,
la);if(!1!==B){if(1===B||-1===B)la=1===B;Wb=!0;setTimeout(Wc,30);b();la&&!I?g.appendChild(n):h.parentNode.insertBefore(n,la?I:h);H&&sc(H,0,J-H.scrollTop);M=n.parentNode;void 0===L||Nb||(Ab=Math.abs(L-Q(h)[m]));f();return d(!0)}}if(g.contains(n))return d(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){A(document,"mousemove",this._onTouchMove);A(document,"touchmove",this._onTouchMove);A(document,"pointermove",this._onTouchMove);A(document,"dragover",Xa);A(document,"mousemove",Xa);
A(document,"touchmove",Xa)},_offUpEvents:function(){var a=this.el.ownerDocument;A(a,"mouseup",this._onDrop);A(a,"touchend",this._onDrop);A(a,"pointerup",this._onDrop);A(a,"touchcancel",this._onDrop);A(document,"selectstart",this)},_onDrop:function(a){var c=this.el,b=this.options;da=ha(n);Ga=ha(n,b.draggable);ba("drop",this,{evt:a});M=n&&n.parentNode;da=ha(n);Ga=ha(n,b.draggable);if(!v.eventCanceled&&(rb=Nb=jb=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),
clearTimeout(this._dragStartId),this.nativeDraggable&&(A(document,"drop",this),A(c,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ac&&x(document.body,"user-select",""),x(n,"transform",""),a&&(wb&&(a.cancelable&&a.preventDefault(),!b.dropBubble&&a.stopPropagation()),w&&w.parentNode&&w.parentNode.removeChild(w),(K===M||R&&"clone"!==R.lastPutMode)&&H&&H.parentNode&&H.parentNode.removeChild(H),n&&(this.nativeDraggable&&A(n,"dragend",this),Vb(n),n.style["will-change"]="",wb&&
!jb&&ca(n,R?R.options.ghostClass:this.options.ghostClass,!1),ca(n,this.options.chosenClass,!1),W({sortable:this,name:"unchoose",toEl:M,newIndex:null,newDraggableIndex:null,originalEvent:a}),K!==M?(0<=da&&(W({rootEl:M,name:"add",toEl:M,fromEl:K,originalEvent:a}),W({sortable:this,name:"remove",toEl:M,originalEvent:a}),W({rootEl:M,name:"sort",toEl:M,fromEl:K,originalEvent:a}),W({sortable:this,name:"sort",toEl:M,originalEvent:a})),R&&R.save()):da!==cb&&0<=da&&(W({sortable:this,name:"update",toEl:M,originalEvent:a}),
W({sortable:this,name:"sort",toEl:M,originalEvent:a})),v.active)))){if(null==da||-1===da)da=cb,Ga=ob;W({sortable:this,name:"end",toEl:M,originalEvent:a});this.save()}this._nulling()},_nulling:function(){ba("nulling",this);K=n=M=w=Va=H=Kb=Pa=Wa=oa=wb=da=Ga=cb=ob=kb=sb=R=Lb=v.dragged=v.ghost=v.clone=v.active=null;Bb.forEach(function(a){a.checked=!0});Bb.length=cc=dc=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":n&&(this._onDragOver(a),
a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],c,b=this.el.children,d=0,f=b.length,g=this.options;d<f;d++)c=b[d],pa(c,g.draggable,this.el,!1)&&a.push(c.getAttribute(g.dataIdAttr)||Zc(c));return a},sort:function(a){var c={},b=this.el;this.toArray().forEach(function(a,e){e=b.children[e];pa(e,this.options.draggable,b,!1)&&(c[a]=e)},this);a.forEach(function(a){c[a]&&(b.removeChild(c[a]),
b.appendChild(c[a]))})},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,c){return pa(a,c||this.options.draggable,this.el,!1)},option:function(a,c){var b=this.options;if(void 0===c)return b[a];var d=qb.modifyOption(this,a,c);b[a]="undefined"!==typeof d?d:c;"group"===a&&vc(b)},destroy:function(){ba("destroy",this);var a=this.el;a[ea]=null;A(a,"mousedown",this._onTapStart);A(a,"touchstart",this._onTapStart);A(a,"pointerdown",this._onTapStart);this.nativeDraggable&&
(A(a,"dragover",this),A(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();zb.splice(zb.indexOf(this.el),1);this.el=a=null},_hideClone:function(){Pa||(ba("hideClone",this),v.eventCanceled||(x(H,"display","none"),this.options.removeCloneOnHide&&H.parentNode&&H.parentNode.removeChild(H),Pa=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():Pa&&(ba("showClone",
this),v.eventCanceled||(K.contains(n)&&!this.options.group.revertClone?K.insertBefore(H,n):Va?K.insertBefore(H,Va):K.appendChild(H),this.options.group.revertClone&&this.animate(n,H),x(H,"display",""),Pa=!1))}};Ob&&z(document,"touchmove",function(a){(v.active||jb)&&a.cancelable&&a.preventDefault()});v.utils={on:z,off:A,css:x,find:oc,is:function(a,c){return!!pa(a,c,a,!1)},extend:function(a,c){if(a&&c)for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);return a},throttle:rc,closest:pa,toggleClass:ca,clone:tc,
index:ha,nextTick:Cb,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:uc,getChild:yb};v.get=function(a){return a[ea]};v.mount=function(){for(var a=arguments.length,c=Array(a),b=0;b<a;b++)c[b]=arguments[b];c[0].constructor===Array&&(c=c[0]);c.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(v.utils=N({},v.utils,a.utils));qb.mount(a)})};v.create=function(a,c){return new v(a,
c)};v.version="1.10.2";var L=[],xb,fc,gc=!1,hc,ic,Pb,lb,jc=rc(function(a,c,b,d){if(c.scroll){var e=(a.touches?a.touches[0]:a).clientX,f=(a.touches?a.touches[0]:a).clientY,g=c.scrollSensitivity,h=c.scrollSpeed,k=za(),t=!1;if(fc!==b){fc=b;Db();xb=c.scroll;var l=c.scrollFn;!0===xb&&(xb=Fa(b,!0))}b=0;var n=xb;do{var m=n,q=Q(m),r=q.top,u=q.bottom,w=q.left,z=q.right,A=q.width;q=q.height;var B=void 0,y=void 0,C=m.scrollWidth,F=m.scrollHeight;y=x(m);var H=m.scrollLeft,I=m.scrollTop;m===k?(B=A<C&&("auto"===
y.overflowX||"scroll"===y.overflowX||"visible"===y.overflowX),y=q<F&&("auto"===y.overflowY||"scroll"===y.overflowY||"visible"===y.overflowY)):(B=A<C&&("auto"===y.overflowX||"scroll"===y.overflowX),y=q<F&&("auto"===y.overflowY||"scroll"===y.overflowY));w=B&&(Math.abs(z-e)<=g&&H+A<C)-(Math.abs(w-e)<=g&&!!H);r=y&&(Math.abs(u-f)<=g&&I+q<F)-(Math.abs(r-f)<=g&&!!I);if(!L[b])for(u=0;u<=b;u++)L[u]||(L[u]={});if(L[b].vx!=w||L[b].vy!=r||L[b].el!==m)if(L[b].el=m,L[b].vx=w,L[b].vy=r,clearInterval(L[b].pid),0!=
w||0!=r)t=!0,L[b].pid=setInterval(function(){d&&0===this.layer&&v.active._onTouchMove(Pb);var c=L[this.layer].vy?L[this.layer].vy*h:0,b=L[this.layer].vx?L[this.layer].vx*h:0;"function"===typeof l&&"continue"!==l.call(v.dragged.parentNode[ea],b,c,a,Pb,L[this.layer].el)||sc(L[this.layer].el,b,c)}.bind({layer:b}),24);b++}while(c.bubbleScroll&&n!==k&&(n=Fa(n,!1)));gc=t}},30),Pc=function(a){var c=a.originalEvent,b=a.putSortable,d=a.dragEl,f=a.activeSortable,g=a.dispatchSortableEvent,h=a.hideGhostForTarget;
a=a.unhideGhostForTarget;c&&(f=b||f,h(),c=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:c,c=document.elementFromPoint(c.clientX,c.clientY),a(),f&&!f.el.contains(c)&&(g("spill"),this.onSpill({dragEl:d,putSortable:b})))};Xb.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var c=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var b=yb(this.sortable.el,this.startIndex,this.options);b?this.sortable.el.insertBefore(c,
b):this.sortable.el.appendChild(c);this.sortable.animateAll();a&&a.animateAll()},drop:Pc};J(Xb,{pluginName:"revertOnSpill"});Yb.prototype={onSpill:function(a){var c=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();c.parentNode&&c.parentNode.removeChild(c);a.animateAll()},drop:Pc};J(Yb,{pluginName:"removeOnSpill"});v.mount(new function(){function a(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var a in this)"_"===a.charAt(0)&&"function"===typeof this[a]&&
(this[a]=this[a].bind(this))}a.prototype={dragStarted:function(a){a=a.originalEvent;this.sortable.nativeDraggable?z(document,"dragover",this._handleAutoScroll):this.options.supportPointer?z(document,"pointermove",this._handleFallbackAutoScroll):a.touches?z(document,"touchmove",this._handleFallbackAutoScroll):z(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){a=a.originalEvent;this.options.dragOverBubble||a.rootEl||this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?
A(document,"dragover",this._handleAutoScroll):(A(document,"pointermove",this._handleFallbackAutoScroll),A(document,"touchmove",this._handleFallbackAutoScroll),A(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(lb);Db();clearTimeout(nb);nb=void 0},nulling:function(){Pb=fc=xb=gc=lb=hc=ic=null;L.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},_handleAutoScroll:function(a,b){var c=this,e=(a.touches?a.touches[0]:a).clientX,d=(a.touches?a.touches[0]:a).clientY,
f=document.elementFromPoint(e,d);Pb=a;if(b||pb||ya||ac){jc(a,this.options,f,b);var g=Fa(f,!0);!gc||lb&&e===hc&&d===ic||(lb&&clearInterval(lb),lb=setInterval(function(){var f=Fa(document.elementFromPoint(e,d),!0);f!==g&&(g=f,Db());jc(a,c.options,f,b)},10),hc=e,ic=d)}else this.options.bubbleScroll&&Fa(f,!0)!==za()?jc(a,this.options,Fa(f,!1),!1):Db()}};return J(a,{pluginName:"scroll",initializeByDefault:!0})});v.mount(Yb,Xb);var be=v,mb=function(a){this.run=a;this.html=h.makeDiv(["production-screen"]);
this.refresh()};mb.prototype.refresh=function(){var a=this,c=this.run.inventory.clone(),b=this.run.getResourceConversions(),d=b.free,f=b.costly;c.applyConversions(d);d=d.map(function(c){return a.renderConversion(c,!0)});d=h.makeDivContaining(d,["free-conversions-list"]);b=[];f=$jscomp.makeIterator(f);for(var g=f.next();!g.done;g=f.next())g=g.value,c.canAfford(g.inputs)&&c.hasEnoughWorkers(g.requiredWorkers)?(b.push(this.renderConversion(g,!0)),c.applyConversions([g])):b.push(this.renderConversion(g,
!1));b=h.makeDivContaining(b);be.create(b,{onEnd:function(c){var b=c.oldDraggableIndex;c=c.newDraggableIndex;void 0!==b&&void 0!==c&&a.shiftCostlyConversion(b,c)}});f=h.makePara("Available workers at start of production cycle: "+this.run.inventory.getAvailableWorkers(),["production-screen-available-workers"]);g=h.makePara("Unused workers at end of production cycle: "+c.getAvailableWorkers(),["production-screen-worker-consumption-label"]);var k=h.makeDiv();if(0!==this.run.inventory.getSpeciesList().length){var l=
c.clone();k.appendChild(h.makePara("Resources required for worker upkeep:",["production-screen-worker-consumption-label"]));for(var n=$jscomp.makeIterator(l.getSpeciesList()),m=n.next();!m.done;m=n.next()){var q=m.value;m=l.getProvidedWorkerConsumption(q).quantity;var r=l.getRequiredWorkerConsumption(q).quantity;k.appendChild(h.makePara(q.name+": "+m+"/"+r+" "+q.survivalCost.resource.name,[r>m?"population-consumption-unmet":"population-consumption-met","production-screen-worker-consumption"]));l.payCost([l.getProvidedWorkerConsumption(q)])}}l=
h.makeDiv();r=c.getSpeciesList();n=new Map;q=$jscomp.makeIterator(r);for(m=q.next();!m.done;m=q.next())m=m.value,n.set(m,c.getPopulation(m));c.doPopulationGrowth();q=new Map;var u=$jscomp.makeIterator(r);for(m=u.next();!m.done;m=u.next())m=m.value,q.set(m,c.getPopulation(m));r=$jscomp.makeIterator(r);for(m=r.next();!m.done;m=r.next()){m=m.value;u=n.get(m);var v=q.get(m);u-=v;0<u&&l.appendChild(h.makePara(u+" "+m.name+" will die from lack of "+m.survivalCost.resource.name+"!",["population-death-label"]))}h.fillHTML(this.html,
[h.makeHeader("Resource Production Management"),h.makeHeader("Inventory at start of production cycle:",2,["production-screen-label"]),this.renderInventory(this.run.inventory),h.makeHeader("Resource production",2,["production-screen-label"]),f,d,b,h.makeHeader("Workforce",2,["production-screen-label"]),g,k,l,h.makeHeader("Inventory at end of production cycle:",2,["production-screen-label"]),this.renderInventory(c),h.makeButton("Back",function(){P.show(new Ua(a.run))},["production-screen-back-button"])])};
mb.prototype.renderInventory=function(a){a=a.getInventoryStrings().map(function(a){return h.makePara(a)});0===a.length&&a.push(h.makePara("(none)"));return h.makeDivContaining(a,["production-screen-inventory"])};mb.prototype.renderConversion=function(a,c){var b=this,d=h.makeDiv(["conversion"]),f=a.toString(),g="conversion-description-normal";a.enabled?c||(f=a.toString()+" (cannot afford)",g="conversion-description-cannot-afford"):(f=a.toString()+" (disabled) ",g="conversion-description-disabled");
c=h.makePara(f,[g,"conversion-description"]);c=h.makeDivContaining([c],["conversion-description-box"]);d.appendChild(c);d.appendChild(h.makeButton("Toggle",function(){b.toggle(a)}));return d};mb.prototype.shiftCostlyConversion=function(a,c){this.run.shiftCostlyConversionPriority(a,c);this.refresh()};mb.prototype.toggle=function(a){a.enabled=!a.enabled;this.refresh()};var kc=function(a){this.run=a;this.html=h.makeDiv(["research-screen"]);this.refresh()};kc.prototype.refresh=function(){var a=this,c=
h.makeHeader("Available Research Projects"),b=this.run.getResearchOptions(),d=l.values().filter(function(a){return b.some(function(c){return c.researchCost.resource===a})}),f=h.makeDiv(["research-resources"]);0!==d.length&&(f.appendChild(h.makeHeader("Available Research Data")),d.forEach(function(c){return f.appendChild(h.makePara(c.name+": "+a.run.inventory.getResourceQuantity(c)))}));d=h.makeDivContaining(b.map(function(c){return a.renderTechOption(c)}));0===b.length&&(c=h.makeDiv());var g=h.makeHeader("Previous Research Projects",
1,["previous-research-header"]),k=this.run.getUnlockedTechnologies().filter(function(a){return a.visible}).map(function(a){return h.makePara("\u2022 "+a.name,["previous-research"])});0===k.length&&(g=h.makeDiv());var m=h.makeButton("Back",function(){P.show(new Ua(a.run))},[]);h.fillHTML(this.html,[c,d,f,g].concat($jscomp.arrayFromIterable(k),[m]))};kc.prototype.renderTechOption=function(a){for(var c=this,b=h.makeDivContaining([h.makeHeader(a.name,2),h.makePara(a.description),h.makePara("Development cost: "+
a.researchCost)],["tech-option"]),d=0,f=$jscomp.makeIterator(a.requiredTechs),g=f.next();!g.done;g=f.next())g=g.value,this.run.hasUnlockedTechnology(g)||(d++,b.appendChild(h.makePara("Requires "+g.name+" research")));d=0===d&&this.run.inventory.canAfford([a.researchCost]);b.appendChild(h.makeButton("Conduct Research",function(){c.run.unlockTechnology(a);c.refresh();c.run.updateQuestState()},[],d?"enabled":"disabled"));return b};var Qc=function(a){this.ending=a;this.html=h.makeDiv();this.refresh()};
Qc.prototype.refresh=function(){var a=h.makeHeader(this.ending.title),c=h.makePara(this.ending.description),b=h.makeButton("Quit Game",function(){P.show(new db)});h.fillHTML(this.html,[a,c,b])};var Rc=function(a){this.html=h.makeDiv(["world-screen-header"]);this.run=a;this.refresh()};Rc.prototype.refresh=function(){var a=this,c=h.makeButton("Quit Game",function(){P.show(new db)}),b=h.makeButton("Next Turn",function(){var c=new Jb(a.run);P.show(c);c.startLoading()}),d=h.makeButton("Manage Production",
function(){P.show(new mb(a.run))}),f=h.makeButton("Research Projects",function(){P.show(new kc(a.run))}),g=this.run.getCurrentQuestHint(),k=this.run.getCurrentQuestDescription();g=h.makePara("Objective: "+(g?k+"\n(hint: "+g+")":k),["world-screen-quest-description"]);k=this.run.getPreviousQuestDescription();this.run.questCompletionShown||(g=h.makePara("Completed: "+k,["world-screen-quest-description","quest-description-emphasis"]),setTimeout(function(){var c=a.run.getQuestEndState();c?P.show(new Qc(c)):
a.refresh()},1500));this.run.questCompletionShown=!0;h.fillHTML(this.html,[c,d,f,b,g])};var Ua=function(a){this.mapUI=new S(this,a.world);this.tileSidebar=new ib(this,a);this.inventorySidebar=new Hc(a);this.header=new Rc(a);this.html=h.makeDivContaining([this.header.html,h.makeDivContaining([this.inventorySidebar.html,h.makeDivContaining([this.mapUI.html],["world-screen-map-box"]),this.tileSidebar.html],["world-screen-hbox"])],["flex-vertical","world-screen"])};Ua.prototype.refresh=function(){this.mapUI.refresh();
this.tileSidebar.refresh();this.inventorySidebar.refresh();this.header.refresh()};Ua.prototype.handleKeyDown=function(a){this.mapUI.handleKeyDown(a)};Ua.prototype.changeSidebarTile=function(a){this.tileSidebar.changeTile(a)};var Ya;(function(a){a.isNonEmpty=function(a){return 0<a.length};a.generate=function(a,b){for(var c=Array(a),e=0;e<a;e++)c[e]=b();return c};a.flatten=function(a){return a.reduce(function(a,c){return a.concat(c)},[])};a.partition=function(a,b){var c=[],e=[];a=$jscomp.makeIterator(a);
for(var d=a.next();!d.done;d=a.next())d=d.value,b(d)?c.push(d):e.push(d);return{yes:c,no:e}};a.repeat=function(a,b){for(var c=Array(b),e=0;e<b;e++)c[e]=a;return c}})(Ya||(Ya={}));var Qa=function(a){a=q.call(this,a)||this;a.texture=ld;return a};$jscomp.inherits(Qa,q);Qa.prototype.getTileName=function(){return Qa.tileName};Qa.prototype.getTileDescription=function(){return Qa.tileDescription};Qa.tileName="Monolith";Qa.tileDescription="A towering alien structure of unknown purpose";var Za;(function(a){a.nonrandomTiles=
function(){return[new C(new r(0,0)),new C(new r(1,0)),new C(new r(2,0)),new ja(new r(0,1)),new ja(new r(1,1)),new ja(new r(2,1)),new C(new r(0,2)),new C(new r(1,2)),new C(new r(2,2)),new C(new r(0,3)),new Ca(new r(1,3)),new C(new r(2,3)),new C(new r(0,4)),new C(new r(1,4)),new C(new r(2,4)),new Qa(new r(13,15))]};a.width=20;a.height=20;a.mountainRange=[20,25];a.ruinRange=[5,7]})(Za||(Za={}));var Da=function(){this.pastTextureMap=new Map;this.width=Za.width;this.height=Za.height;this.grid=Array(this.height);
for(var a=0;a<this.height;a++){this.grid[a]=Array(this.width);for(var c=0;c<this.width;c++)this.grid[a][c]=new C(new r(c,a))}a=na.intBetween.apply(na,$jscomp.arrayFromIterable(Za.mountainRange));for(c=0;c<a;c++){var b=this.getTiles().filter(function(a){return a instanceof C});Ya.isNonEmpty(b)&&(b=na.fromArray(b).position,this.placeTile(new ja(b)))}a=na.intBetween.apply(na,$jscomp.arrayFromIterable(Za.ruinRange));for(c=0;c<a;c++)b=this.getTiles().filter(function(a){return a instanceof C}),Ya.isNonEmpty(b)&&
(b=na.fromArray(b).position,this.placeTile(new va(b)));a=$jscomp.makeIterator(Za.nonrandomTiles());for(c=a.next();!c.done;c=a.next())this.placeTile(c.value)};Da.prototype.placeTile=function(a){this.grid[a.position.y][a.position.x]=a};Da.prototype.getTiles=function(){return Ya.flatten(this.grid)};Da.prototype.getTilesInRectangle=function(a,c,b,d){0>c&&(c=0);0>a&&(a=0);var e=[];c=this.grid.slice(c,c+d);c=$jscomp.makeIterator(c);for(d=c.next();!d.done;d=c.next()){d=d.value.slice(a,a+b);d=$jscomp.makeIterator(d);
for(var f=d.next();!f.done;f=d.next())e.push(f.value)}return e};Da.prototype.getTileAtCoordinates=function(a){if(!(0>a.x||a.x>=this.width||0>a.y||a.y>=this.height))return this.grid[a.y][a.x]};Da.prototype.getTilesInCircle=function(a,c){return this.getTiles().filter(function(b){return a.distanceFrom(b.position)<=c})};Da.prototype.getPopulationCapacity=function(a){for(var c=0,b=$jscomp.makeIterator(this.getTiles()),d=b.next();!d.done;d=b.next())d=d.value,d.populationCapacity&&d.populationCapacity.species===
a&&(c+=d.populationCapacity.capacity);return c};Da.prototype.getPastTexture=function(a,c){return this.pastTextureMap.get(""+[a.name,c])};Da.prototype.storePastTexture=function(a,c,b){this.pastTextureMap.set(""+[a.name,c],b)};var wa=function(){this.map=new Map([])};wa.prototype.add=function(a,c){this.set(a,this.get(a)+c)};wa.prototype.remove=function(a,c){this.add(a,-1*c)};wa.prototype.get=function(a){return this.map.get(a)||0};wa.prototype.set=function(a,c){if(0>c)throw"tried to set quantity to negative value";
0===c?this.map.delete(a):this.map.set(a,c)};wa.prototype.getSum=function(){return Array.from(this.map.values()).reduce(function(a,c){return a+c},0)};wa.prototype.positiveQuantityKeys=function(){return Array.from(this.map.keys())};wa.prototype.clone=function(){for(var a=new wa,c=$jscomp.makeIterator(this.positiveQuantityKeys()),b=c.next();!b.done;b=c.next())b=b.value,a.add(b,this.get(b));return a};var B=function(a){this.world=a;this.resourceQuantities=new wa;this.populationQuantities=new wa;this.availableWorkers=
0};B.prototype.addResource=function(a,c){this.resourceQuantities.add(a,c)};B.prototype.removeResource=function(a,c){this.resourceQuantities.remove(a,c)};B.prototype.getResourceQuantity=function(a){return this.resourceQuantities.get(a)||0};B.prototype.addWorkers=function(a,c){this.populationQuantities.add(a,c);this.populationQuantities.set(a,xa(0,this.populationQuantities.get(a),this.world.getPopulationCapacity(a)))};B.prototype.releaseWorkers=function(){this.availableWorkers=this.populationQuantities.getSum()};
B.prototype.occupyWorkers=function(a){if(this.availableWorkers<a)throw"insufficient workers";if(0>a)throw"tried to occupy a negative number of workers";this.availableWorkers-=a};B.prototype.getSpeciesList=function(){return this.populationQuantities.positiveQuantityKeys()};B.prototype.getPopulation=function(a){return this.populationQuantities.get(a)};B.prototype.getRequiredWorkerConsumption=function(a){var c=a.survivalCost.quantity*this.populationQuantities.get(a);return new m(a.survivalCost.resource,
c)};B.prototype.getProvidedWorkerConsumption=function(a){var c=this.getRequiredWorkerConsumption(a).quantity,b=this.getResourceQuantity(a.survivalCost.resource);return new m(a.survivalCost.resource,Math.min(c,b))};B.prototype.doPopulationGrowth=function(){for(var a=$jscomp.makeIterator(this.getSpeciesList()),c=a.next();!c.done;c=a.next()){c=c.value;var b=this.getProvidedWorkerConsumption(c);this.payCost([b]);this.populationQuantities.set(c,Math.floor(b.quantity/c.survivalCost.quantity));b=Math.floor(c.growthMultiplier*
this.populationQuantities.get(c));this.addWorkers(c,b)}};B.prototype.getTotalPopulation=function(){return this.populationQuantities.getSum()};B.prototype.getAvailableWorkers=function(){return this.availableWorkers};B.prototype.canAfford=function(a){var c=this,b=new Map;a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next())d=d.value,b.set(d.resource,d.quantity+(b.get(d.resource)||0));return Array.from(b.keys()).every(function(a){var d=b.get(a);a=c.getResourceQuantity(a);return d<=a})};B.prototype.hasEnoughWorkers=
function(a){return this.availableWorkers>=a};B.prototype.payCost=function(a){if(this.canAfford(a)){a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())c=c.value,this.removeResource(c.resource,c.quantity)}else throw"Cannot afford to pay cost";};B.prototype.getResourceList=function(){var a=this;return l.values().filter(function(c){return 0!==a.resourceQuantities.get(c)})};B.prototype.getInventoryStrings=function(){var a=this;return this.getResourceList().map(function(c){return c.name+": "+
a.getResourceQuantity(c)})};B.prototype.getPopulationStrings=function(){var a=this;return this.populationQuantities.positiveQuantityKeys().map(function(c){return a.populationQuantities.get(c)+" "+c.name})};B.prototype.applyConversions=function(a){a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())if(c=c.value,this.canAfford(c.inputs)&&this.hasEnoughWorkers(c.requiredWorkers)&&c.enabled){this.payCost(c.inputs);this.occupyWorkers(c.requiredWorkers);c=$jscomp.makeIterator(c.outputs);for(var b=
c.next();!b.done;b=c.next())b=b.value,this.addResource(b.resource,b.quantity)}};B.prototype.clone=function(){var a=new B(this.world);a.resourceQuantities=this.resourceQuantities.clone();a.populationQuantities=this.populationQuantities.clone();a.availableWorkers=this.availableWorkers;return a};var V=function(){this.turnNumber=1;this.prevQuestDescription="";this.questCompletionShown=!0;this.completedTechs=[];this.world=new Da;this.inventory=new B(this.world);this.questStage=Rd};V.prototype.getCurrentQuestDescription=
function(){return this.questStage.description};V.prototype.getCurrentQuestHint=function(){return this.questStage.hint};V.prototype.getQuestEndState=function(){return this.questStage.endState};V.prototype.getPreviousQuestDescription=function(){return this.prevQuestDescription};V.prototype.setQuestStage=function(a){this.questStage=a};V.prototype.getUnorderedConversions=function(){return Ya.flatten(this.world.getTiles().map(function(a){return a.resourceConversions}))};V.prototype.getResourceConversions=
function(){var a=this.getUnorderedConversions(),c=Ya.partition(a,function(a){return a.isFree()});a=c.yes;c=c.no;a.sort(function(a,c){return a.priority-c.priority});c.sort(function(a,c){return a.priority-c.priority});return{free:a,costly:c}};V.prototype.getAllResourceConversions=function(){var a=this.getUnorderedConversions();a.sort(function(a,b){return a.priority-b.priority});return a};V.prototype.updateQuestState=function(){var a=this.questStage.updatedStage(this);a!==this.questStage&&(this.prevQuestDescription=
this.questStage.description,this.questCompletionShown=!1,this.questStage=a)};V.prototype.hasUnlockedTechnology=function(a){return this.completedTechs.includes(a)};V.prototype.unlockTechnology=function(a){this.hasUnlockedTechnology(a)||this.completedTechs.push(a)};V.prototype.getUnlockedTechnologies=function(){return this.completedTechs};V.prototype.getResearchOptions=function(){var a=this;return Cc.filter(function(a){return a.visible}).filter(function(b){return b.requiredTechs.every(function(b){return a.completedTechs.includes(b)})}).filter(function(b){return!a.hasUnlockedTechnology(b)})};
V.prototype.completeTurn=function(){this.inventory.applyConversions(this.getAllResourceConversions());this.inventory.releaseWorkers();this.inventory.doPopulationGrowth();this.turnNumber++;this.updateQuestState()};V.prototype.shiftCostlyConversionPriority=function(a,b){if(!(a===b||0>a)){var c=this.getResourceConversions().costly;if(!(b>=c.length)){var d=c[b].priority;if(a<b)for(;b>a;b--)c[b].priority=c[b-1].priority;else for(;b<a;b++)c[b].priority=c[b+1].priority;c[a].priority=d}}};var db=function(){this.html=
h.makeDiv(["main-menu"]);this.refresh()};db.prototype.refresh=function(){h.fillHTML(this.html,[h.makeHeader("Aurora",1),h.makeDivContaining([h.makeButton("new game",function(){var a=new V;y(a);P.show(new Ua(a))}),h.makeButton("settings",function(){return P.show(new Ac)}),h.makeButton("credits",function(){return P.show(new Zb)})],["main-menu-options"])])};window.onload=function(){console.log("Script Loaded");k().then(function(){P.show(new db)},function(){})}}]);}).call(this || window)
</script><script type="text/javascript">(function(){'use strict';}).call(this || window)
</script></body> </html> 