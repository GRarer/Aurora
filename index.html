<!doctype html> <html lang=en dir=ltr> <head> <meta charset=utf-8> <title>Aurora</title> <style type="text/css">.main-menu{display:flex;flex-direction:column}.main-menu h1{font-size:40pt;margin:0;padding:0}.main-menu-options button{display:flex;flex-direction:column}.main-menu button{font-size:24pt;border:none;margin:0;padding:0}.main-menu button:hover{font-size:30pt}.main-menu button:active{color:grey}.credits h1{font-size:24pt;margin-bottom:10pt}.credits-container{display:flex;flex-direction:row}.credits-names-column{margin-right:24pt}.credits-name,.credits-roles{font-size:20pt;margin-top:0;margin-bottom:5pt}.credits button{margin-top:10pt;font-size:20pt}.world-screen-header{display:flex;flex-direction:row;margin:0;min-height:60px}.world-screen-quest-description{font-size:16px;padding-right:10px;padding-top:0;padding-bottom:0}.quest-description-emphasis{color:#408040;font-weight:700}.world-screen-hbox{margin:0;display:flex;flex-direction:row}.world-screen-map-box{height:100%;width:100%}.map-canvas{width:100%;margin:0}.world-screen-sidebar{background-color:#000;width:20%;padding:20px;font-size:16px;overflow-y:auto;height:calc(100vh - 125px)}.project-requirement-met{color:#fff}.project-requirement-unmet{color:tomato}.world-screen-inventory{width:20%;margin:10px;font-size:16px}.production-screen{padding-left:10pt}.production-screen-label{font-size:20pt}.production-screen-inventory{font-size:16pt;line-height:0;padding:1pt;outline:solid #fff;width:50%}.conversion-description{margin:0;font-size:16pt;text-align:left}.conversion-description-box{width:50%;border:2px solid #fff}.conversion-description-normal{color:#fff}.conversion-description-cannot-afford{color:tomato}.conversion-description-disabled{color:#ff0}.population-consumption-met{font-size:16pt}.population-consumption-unmet,.population-death-label{font-size:16pt;color:tomato}.production-screen-back-button{font-size:20pt;margin-top:20pt}@keyframes loading-bar{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.transition-quote-panel{margin-top:150px;margin-right:auto;margin-left:auto;font-size:16px;width:420px}.transition-attribution{margin-left:50px}.transition-loading-area{text-align:center}.transition-loading-bar{margin-right:auto;margin-left:auto;width:50px;height:50px;border-radius:50%;border-color:#fff transparent;border-style:solid;border-width:5px;animation-name:loading-bar;animation-duration:1.25s;animation-iteration-count:infinite;animation-timing-function:ease}.transition-loading-area.loading .transition-loading-bar{background-size:80% 100%}.transition-loading-area.loaded .transition-loading-bar{background-size:100% 100%}:root,button{background-color:#000;color:#fff;font-family:monospace}button{font-size:18px}button:focus{outline:0}button:disabled,button[disabled]{color:grey;border-color:grey}.flex-horizontal{display:flex;flex-direction:row}.flex-vertical{display:flex;flex-direction:column}.fill-horizontal{width:100%;font-family:serif}.fill-vertical{height:100%}img.emoji{height:1em;width:1em;margin:0 .05em 0 .1em;vertical-align:-.1em}</style></head> <body> <div id=rootdiv> <p>Loading scripts...</p> </div> <script type="text/javascript">(function(){/*
 MIT
 Copyright Twitter Inc. and other contributors. Licensed under MIT */
'use strict';var $jscomp$templatelit$1=["\n                This is a multiline that does not\n                start with indentation"];$jscomp$templatelit$1.raw=$jscomp$templatelit$1.slice();var $jscomp$templatelit$0=["\n                    Multiline versions are also possible,\n                and they can use indentation.\n\n                    Line breaks are also supported."];$jscomp$templatelit$0.raw=$jscomp$templatelit$0.slice();var $jscomp=$jscomp||{};$jscomp.scope={};
$jscomp.arrayIteratorImpl=function(b){var c=0;return function(){return c<b.length?{done:!1,value:b[c++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,f){b!=Array.prototype&&b!=Object.prototype&&(b[c]=f.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(b,c){this.$jscomp$symbol$id_=b;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:c})};
$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(f||"")+"_"+c++,f)}var c=0;return b}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.asyncIterator;b||(b=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};
$jscomp.makeIterator=function(b){var c="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return c?c.call(b):$jscomp.arrayIterator(b)};$jscomp.arrayFromIterator=function(b){for(var c,f=[];!(c=b.next()).done;)f.push(c.value);return f};$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(b){var c=function(){};c.prototype=b;return new c};
$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0},c={};try{return c.__proto__=b,c.a}catch(f){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(b,c){b.__proto__=c;if(b.__proto__!==c)throw new TypeError(b+" is not extensible");return b}:null;
$jscomp.inherits=function(b,c){b.prototype=$jscomp.objectCreate(c.prototype);b.prototype.constructor=b;if($jscomp.setPrototypeOf){var f=$jscomp.setPrototypeOf;f(b,c)}else for(f in c)if("prototype"!=f)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(c,f);e&&Object.defineProperty(b,f,e)}else b[f]=c[f];b.superClass_=c.prototype};$jscomp.generator={};
$jscomp.generator.ensureIteratorResultIsObject_=function(b){if(!(b instanceof Object))throw new TypeError("Iterator result "+b+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(b){this.yieldResult=b};
$jscomp.generator.Context.prototype.throw_=function(b){this.abruptCompletion_={exception:b,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(b){this.abruptCompletion_={return:b};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(b){this.abruptCompletion_={jumpTo:b};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(b,c){this.nextAddress=c;return{value:b}};
$jscomp.generator.Context.prototype.yieldAll=function(b,c){b=$jscomp.makeIterator(b);var f=b.next();$jscomp.generator.ensureIteratorResultIsObject_(f);if(f.done)this.yieldResult=f.value,this.nextAddress=c;else return this.yieldAllIterator_=b,this.yield(f.value,c)};$jscomp.generator.Context.prototype.jumpTo=function(b){this.nextAddress=b};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(b,c){this.catchAddress_=b;void 0!=c&&(this.finallyAddress_=c)};$jscomp.generator.Context.prototype.setFinallyBlock=function(b){this.catchAddress_=0;this.finallyAddress_=b||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(b,c){this.nextAddress=b;this.catchAddress_=c||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(b){this.catchAddress_=b||0;b=this.abruptCompletion_.exception;this.abruptCompletion_=null;return b};$jscomp.generator.Context.prototype.enterFinallyBlock=function(b,c,f){f?this.finallyContexts_[f]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=b||0;this.finallyAddress_=c||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(b,c){c=this.finallyContexts_.splice(c||0)[0];if(c=this.abruptCompletion_=this.abruptCompletion_||c){if(c.isException)return this.jumpToErrorHandler_();void 0!=c.jumpTo&&this.finallyAddress_<c.jumpTo?(this.nextAddress=c.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=b};$jscomp.generator.Context.prototype.forIn=function(b){return new $jscomp.generator.Context.PropertyIterator(b)};
$jscomp.generator.Context.PropertyIterator=function(b){this.object_=b;this.properties_=[];for(var c in b)this.properties_.push(c);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var b=this.properties_.pop();if(b in this.object_)return b}return null};$jscomp.generator.Engine_=function(b){this.context_=new $jscomp.generator.Context;this.program_=b};
$jscomp.generator.Engine_.prototype.next_=function(b){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,b,this.context_.next_);this.context_.next_(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(b){this.context_.start_();var c=this.context_.yieldAllIterator_;if(c)return this.yieldAllStep_("return"in c?c["return"]:function(b){return{value:b,done:!0}},b,this.context_.return);this.context_.return(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(b){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],b,this.context_.next_);this.context_.throw_(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(b,c,f){try{var e=b.call(this.context_.yieldAllIterator_,c);$jscomp.generator.ensureIteratorResultIsObject_(e);if(!e.done)return this.context_.stop_(),e;var g=e.value}catch(p){return this.context_.yieldAllIterator_=null,this.context_.throw_(p),this.nextStep_()}this.context_.yieldAllIterator_=null;f.call(this.context_,g);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var b=this.program_(this.context_);if(b)return this.context_.stop_(),{value:b.value,done:!1}}catch(c){this.context_.yieldResult=void 0,this.context_.throw_(c)}this.context_.stop_();if(this.context_.abruptCompletion_){b=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(b.isException)throw b.exception;return{value:b.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(b){this.next=function(c){return b.next_(c)};this.throw=function(c){return b.throw_(c)};this.return=function(c){return b.return_(c)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(b,c){c=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(c));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(c,b.prototype);return c};
$jscomp.polyfill=function(b,c,f,e){if(c){f=$jscomp.global;b=b.split(".");for(e=0;e<b.length-1;e++){var g=b[e];g in f||(f[g]={});f=f[g]}b=b[b.length-1];e=f[b];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(f,b,{configurable:!0,writable:!0,value:c})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(b){function c(){this.batch_=null}function f(b){return b instanceof g?b:new g(function(c,e){c(b)})}if(b&&!$jscomp.FORCE_POLYFILL_PROMISE)return b;c.prototype.asyncExecute=function(b){if(null==this.batch_){this.batch_=[];var c=this;this.asyncExecuteFunction(function(){c.executeBatch_()})}this.batch_.push(b)};var e=$jscomp.global.setTimeout;c.prototype.asyncExecuteFunction=function(b){e(b,0)};c.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var b=
this.batch_;this.batch_=[];for(var c=0;c<b.length;++c){var e=b[c];b[c]=null;try{e()}catch(E){this.asyncThrow_(E)}}}this.batch_=null};c.prototype.asyncThrow_=function(b){this.asyncExecuteFunction(function(){throw b;})};var g=function(b){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{b(c.resolve,c.reject)}catch(G){c.reject(G)}};g.prototype.createResolveAndReject_=function(){function b(b){return function(f){e||(e=!0,b.call(c,f))}}var c=this,e=!1;
return{resolve:b(this.resolveTo_),reject:b(this.reject_)}};g.prototype.resolveTo_=function(b){if(b===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof g)this.settleSameAsPromise_(b);else{a:switch(typeof b){case "object":var c=null!=b;break a;case "function":c=!0;break a;default:c=!1}c?this.resolveToNonPromiseObj_(b):this.fulfill_(b)}};g.prototype.resolveToNonPromiseObj_=function(b){var c=void 0;try{c=b.then}catch(G){this.reject_(G);return}"function"==typeof c?
this.settleSameAsThenable_(c,b):this.fulfill_(b)};g.prototype.reject_=function(b){this.settle_(2,b)};g.prototype.fulfill_=function(b){this.settle_(1,b)};g.prototype.settle_=function(b,c){if(0!=this.state_)throw Error("Cannot settle("+b+", "+c+"): Promise already settled in state"+this.state_);this.state_=b;this.result_=c;this.executeOnSettledCallbacks_()};g.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=0;b<this.onSettledCallbacks_.length;++b)p.asyncExecute(this.onSettledCallbacks_[b]);
this.onSettledCallbacks_=null}};var p=new c;g.prototype.settleSameAsPromise_=function(b){var c=this.createResolveAndReject_();b.callWhenSettled_(c.resolve,c.reject)};g.prototype.settleSameAsThenable_=function(b,c){var e=this.createResolveAndReject_();try{b.call(c,e.resolve,e.reject)}catch(E){e.reject(E)}};g.prototype.then=function(b,c){function e(b,c){return"function"==typeof b?function(c){try{f(b(c))}catch(Da){N(Da)}}:c}var f,N,tb=new g(function(b,c){f=b;N=c});this.callWhenSettled_(e(b,f),e(c,N));
return tb};g.prototype.catch=function(b){return this.then(void 0,b)};g.prototype.callWhenSettled_=function(b,c){function e(){switch(f.state_){case 1:b(f.result_);break;case 2:c(f.result_);break;default:throw Error("Unexpected state: "+f.state_);}}var f=this;null==this.onSettledCallbacks_?p.asyncExecute(e):this.onSettledCallbacks_.push(e)};g.resolve=f;g.reject=function(b){return new g(function(c,e){e(b)})};g.race=function(b){return new g(function(c,e){for(var E=$jscomp.makeIterator(b),N=E.next();!N.done;N=
E.next())f(N.value).callWhenSettled_(c,e)})};g.all=function(b){var c=$jscomp.makeIterator(b),e=c.next();return e.done?f([]):new g(function(b,N){function E(c){return function(e){g[c]=e;G--;0==G&&b(g)}}var g=[],G=0;do g.push(void 0),G++,f(e.value).callWhenSettled_(E(g.length-1),N),e=c.next();while(!e.done)})};return g},"es6","es3");
$jscomp.iteratorFromArray=function(b,c){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var f=0,e={next:function(){if(f<b.length){var g=f++;return{value:c(g,b[g]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");
$jscomp.polyfill("Math.hypot",function(b){return b?b:function(b){if(2>arguments.length)return arguments.length?Math.abs(arguments[0]):0;var c,e,g;for(c=g=0;c<arguments.length;c++)g=Math.max(g,Math.abs(arguments[c]));if(1e+100<g||1e-100>g){if(!g)return g;for(c=e=0;c<arguments.length;c++){var p=Number(arguments[c])/g;e+=p*p}return Math.sqrt(e)*g}for(c=e=0;c<arguments.length;c++)p=Number(arguments[c]),e+=p*p;return Math.sqrt(e)}},"es6","es3");
$jscomp.checkStringArgs=function(b,c,f){if(null==b)throw new TypeError("The 'this' value for String.prototype."+f+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+f+" must not be a regular expression");return b+""};
$jscomp.polyfill("String.prototype.repeat",function(b){return b?b:function(b){var c=$jscomp.checkStringArgs(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var e="";b;)if(b&1&&(e+=c),b>>>=1)c+=c;return e}},"es6","es3");$jscomp.owns=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(b,c){for(var f=1;f<arguments.length;f++){var e=arguments[f];if(e)for(var g in e)$jscomp.owns(e,g)&&(b[g]=e[g])}return b};$jscomp.polyfill("Object.assign",function(b){return b||$jscomp.assign},"es6","es3");
$jscomp.polyfill("Array.from",function(b){return b?b:function(b,f,e){f=null!=f?f:function(b){return b};var c=[],p="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof p){b=p.call(b);for(var A=0;!(p=b.next()).done;)c.push(f.call(e,p.value,A++))}else for(p=b.length,A=0;A<p;A++)c.push(f.call(e,b[A],A));return c}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var b={},c=Object.create(new $jscomp.global.Proxy(b,{get:function(f,e,g){return f==b&&"q"==e&&g==c}}));return!0===c.q}catch(f){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.polyfill("WeakMap",function(b){function c(){if(!b||!Object.seal)return!1;try{var c=Object.seal({}),e=Object.seal({}),f=new b([[c,2],[e,3]]);if(2!=f.get(c)||3!=f.get(e))return!1;f.delete(c);f.set(e,4);return!f.has(c)&&4==f.get(e)}catch(ca){return!1}}function f(){}function e(b){var c=typeof b;return"object"===c&&null!==b||"function"===c}function g(b){if(!$jscomp.owns(b,A)){var c=new f;$jscomp.defineProperty(b,A,{value:c})}}function p(b){var c=Object[b];c&&(Object[b]=function(b){if(b instanceof
f)return b;g(b);return c(b)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(c())return b;var A="$jscomp_hidden_"+Math.random();p("freeze");p("preventExtensions");p("seal");var ra=0,G=function(b){this.id_=(ra+=Math.random()+1).toString();if(b){b=$jscomp.makeIterator(b);for(var c;!(c=b.next()).done;)c=c.value,this.set(c[0],c[1])}};G.prototype.set=function(b,c){if(!e(b))throw Error("Invalid WeakMap key");g(b);if(!$jscomp.owns(b,A))throw Error("WeakMap key fail: "+
b);b[A][this.id_]=c;return this};G.prototype.get=function(b){return e(b)&&$jscomp.owns(b,A)?b[A][this.id_]:void 0};G.prototype.has=function(b){return e(b)&&$jscomp.owns(b,A)&&$jscomp.owns(b[A],this.id_)};G.prototype.delete=function(b){return e(b)&&$jscomp.owns(b,A)&&$jscomp.owns(b[A],this.id_)?delete b[A][this.id_]:!1};return G},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(b){function c(){if($jscomp.ASSUME_NO_NATIVE_MAP||!b||"function"!=typeof b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{var c=Object.seal({x:4}),e=new b($jscomp.makeIterator([[c,"s"]]));if("s"!=e.get(c)||1!=e.size||e.get({x:4})||e.set({x:4},"t")!=e||2!=e.size)return!1;var f=e.entries(),g=f.next();if(g.done||g.value[0]!=c||"s"!=g.value[1])return!1;g=f.next();return g.done||4!=g.value[0].x||"t"!=g.value[1]||!f.next().done?!1:!0}catch(ca){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(c())return b;$jscomp.initSymbolIterator();var f=new WeakMap,e=function(b){this.data_={};this.head_=A();this.size=0;if(b){b=$jscomp.makeIterator(b);for(var c;!(c=b.next()).done;)c=c.value,this.set(c[0],c[1])}};e.prototype.set=function(b,c){b=0===b?0:b;var e=g(this,b);e.list||(e.list=this.data_[e.id]=[]);e.entry?e.entry.value=c:(e.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:b,
value:c},e.list.push(e.entry),this.head_.previous.next=e.entry,this.head_.previous=e.entry,this.size++);return this};e.prototype.delete=function(b){b=g(this,b);return b.entry&&b.list?(b.list.splice(b.index,1),b.list.length||delete this.data_[b.id],b.entry.previous.next=b.entry.next,b.entry.next.previous=b.entry.previous,b.entry.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=A();this.size=0};e.prototype.has=function(b){return!!g(this,b).entry};
e.prototype.get=function(b){return(b=g(this,b).entry)&&b.value};e.prototype.entries=function(){return p(this,function(b){return[b.key,b.value]})};e.prototype.keys=function(){return p(this,function(b){return b.key})};e.prototype.values=function(){return p(this,function(b){return b.value})};e.prototype.forEach=function(b,c){for(var e=this.entries(),f;!(f=e.next()).done;)f=f.value,b.call(c,f[1],f[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var g=function(b,c){var e=c&&typeof c;"object"==
e||"function"==e?f.has(c)?e=f.get(c):(e=""+ ++ra,f.set(c,e)):e="p_"+c;var g=b.data_[e];if(g&&$jscomp.owns(b.data_,e))for(b=0;b<g.length;b++){var p=g[b];if(c!==c&&p.key!==p.key||c===p.key)return{id:e,list:g,index:b,entry:p}}return{id:e,list:g,index:-1,entry:void 0}},p=function(b,c){var e=b.head_;return $jscomp.iteratorPrototype(function(){if(e){for(;e.head!=b.head_;)e=e.previous;for(;e.next!=e.head;)return e=e.next,{done:!1,value:c(e)};e=null}return{done:!0,value:void 0}})},A=function(){var b={};return b.previous=
b.next=b.head=b},ra=0;return e},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b,f){return f})}},"es8","es3");$jscomp.polyfill("Object.is",function(b){return b?b:function(b,f){return b===f?0!==b||1/b===1/f:b!==b&&f!==f}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(b){return b?b:function(b,f){var c=this;c instanceof String&&(c=String(c));var g=c.length;f=f||0;for(0>f&&(f=Math.max(f+g,0));f<g;f++){var p=c[f];if(p===b||Object.is(p,b))return!0}return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(b){return b?b:function(b,f){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,f||0)}},"es6","es3");
(function(b){function c(e){if(f[e])return f[e].exports;var g=f[e]={i:e,l:!1,exports:{}};b[e].call(g.exports,g,g.exports,c);g.l=!0;return g.exports}var f={};c.m=b;c.c=f;c.d=function(b,f,p){c.o(b,f)||Object.defineProperty(b,f,{enumerable:!0,get:p})};c.r=function(b){$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!==typeof Symbol&&Symbol.toStringTag&&($jscomp.initSymbol(),Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}));Object.defineProperty(b,"__esModule",{value:!0})};c.t=function(b,
f){f&1&&(b=c(b));if(f&8||f&4&&"object"===typeof b&&b&&b.__esModule)return b;var e=Object.create(null);c.r(e);Object.defineProperty(e,"default",{enumerable:!0,value:b});if(f&2&&"string"!=typeof b)for(var g in b)c.d(e,g,function(c){return b[c]}.bind(null,g));return e};c.n=function(b){var e=b&&b.__esModule?function(){return b["default"]}:function(){return b};c.d(e,"a",e);return e};c.o=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)};c.p="";return c(c.s=3)})([function(b,c,f){function e(b){for(var c=
[],e,f=0,g=0;g<b.length;)e=b.charCodeAt(g++),f?(c.push((65536+(f-55296<<10)+(e-56320)).toString(16)),f=0):55296<e&&56319>=e?f=e:c.push(e.toString(16));return c}Object.defineProperty(c,"__esModule",{value:!0});c.TypeName=void 0;c.parse=function(b,c){var f=c&&c.assetType?c.assetType:"svg";c=c&&c.buildUrl?c.buildUrl:function(b,c){return"png"===c?"https://twemoji.maxcdn.com/v/latest/72x72/"+b+".png":"https://twemoji.maxcdn.com/v/latest/svg/"+b+".svg"};var A=[];for(g.default.lastIndex=0;;){var q=g.default.exec(b);
if(!q)break;var u=q[0],E=e(G(u)).join("-");A.push({url:E?c(E,f):"",indices:[q.index,g.default.lastIndex],text:u,type:p})}return A};c.toCodePoints=e;var g=(b=f(1))&&b.__esModule?b:{default:b},p=c.TypeName="emoji",A=/\uFE0F/g,ra=String.fromCharCode(8205),G=function(b){return 0>b.indexOf(ra)?b.replace(A,""):b}},function(b,c,f){Object.defineProperty(c,"__esModule",{value:!0});c.default=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g},
,function(b,c,f){function e(a){var d=new Image,h=new Promise(function(h,b){d.onload=function(){return h(d)};d.onerror=function(){return h(d)};d.src=a});Pb.push(h);return d}function g(){return pc(this,void 0,void 0,function d(){return $jscomp.generator.createGenerator(d,function(d){return d.return(Promise.all(Pb))})})}function p(a){var d=new Ea(a);a=window;a.cheatsAddResource=function(a,b){return d.addResource(a,b)};a.cheatsAddPopulation=function(a,b){return d.addPopulation(a,b)};a.cheatsLoseGame=
function(){return d.loseGame()};a.cheatsWinGame=function(){return d.winGame()};Object.freeze(m);Object.freeze(Z);a.Resources=m;a.Species=Z}function A(a,d,h){return Math.max(Math.min(d,h),a)}function ra(a,d){for(var h=[],b=1;b<arguments.length;++b)h[b-1]=arguments[b];b=a.reduce(function(a,d,b){return a+d+(h[b]||"")}).replace(/\t/,"    ").replace(/^(?:\r?\n)+|(?:\r?\n)+$/g,"").split(/\r?\n/);var c=b.filter(function(a){return""!==a}).map(function(a){return a.match(/^\s*/)[0].length}),n=0;0<b.length&&
(n=c.reduce(function(a,d){return Math.min(a,d)}));return 0<n?b.map(function(a){return a.substring(n)}).join("\n"):b.join("\n")}function G(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();G="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return G(a)}function E(){E=
Object.assign||function(a){for(var d=1;d<arguments.length;d++){var h=arguments[d],b;for(b in h)Object.prototype.hasOwnProperty.call(h,b)&&(a[b]=h[b])}return a};return E.apply(this,arguments)}function N(a){for(var d=1;d<arguments.length;d++){var h=null!=arguments[d]?arguments[d]:{},b=Object.keys(h);"function"===typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(h).filter(function(a){return Object.getOwnPropertyDescriptor(h,a).enumerable})));b.forEach(function(d){var b=h[d];
d in a?Object.defineProperty(a,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):a[d]=b})}return a}function tb(a,d){if(null==a)return{};if(null==a)var h={};else{h={};var b=Object.keys(a),c;for(c=0;c<b.length;c++){var n=b[c];0<=d.indexOf(n)||(h[n]=a[n])}}if(Object.getOwnPropertySymbols)for(c=Object.getOwnPropertySymbols(a),n=0;n<c.length;n++)b=c[n],0<=d.indexOf(b)||Object.prototype.propertyIsEnumerable.call(a,b)&&(h[b]=a[b]);return h}function ca(a){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(a)}
function q(a,d,h){a.addEventListener(d,h,!ma&&Qb)}function u(a,d,h){a.removeEventListener(d,h,!ma&&Qb)}function Da(a,d){if(d){">"===d[0]&&(d=d.substring(1));if(a)try{if(a.matches)return a.matches(d);if(a.msMatchesSelector)return a.msMatchesSelector(d);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(d)}catch(h){}return!1}}function fa(a,d,h,b){if(a){h=h||document;do{if(null!=d&&(">"===d[0]?a.parentNode===h&&Da(a,d):Da(a,d))||b&&a===h)return a;if(a===h)break}while(a=a.host&&a!==document&&a.host.nodeType?
a.host:a.parentNode)}return null}function V(a,d,h){if(a&&d)if(a.classList)a.classList[h?"add":"remove"](d);else{var b=(" "+a.className+" ").replace(Rb," ").replace(" "+d+" "," ");a.className=(b+(h?" "+d:"")).replace(Rb," ")}}function r(a,d,h){var b=a&&a.style;if(b){if(void 0===h)return document.defaultView&&document.defaultView.getComputedStyle?h=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(h=a.currentStyle),void 0===d?h:h[d];d in b||-1!==d.indexOf("webkit")||(d="-webkit-"+d);b[d]=
h+("string"===typeof h?"":"px")}}function Fa(a,d){var h="";if("string"===typeof a)h=a;else{do{var b=r(a,"transform");b&&"none"!==b&&(h=b+" "+h)}while(!d&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(h)}function Sb(a,d,h){if(a){a=a.getElementsByTagName(d);d=0;var b=a.length;if(h)for(;d<b;d++)h(a[d],d);return a}return[]}function na(){var a=document.scrollingElement;return a?a:document.documentElement}function O(a,d,h,b,c){if(a.getBoundingClientRect||
a===window){if(a!==window&&a!==na()){var t=a.getBoundingClientRect();var v=t.top;var e=t.left;var f=t.bottom;var k=t.right;var g=t.height;var l=t.width}else e=v=0,f=window.innerHeight,k=window.innerWidth,g=window.innerHeight,l=window.innerWidth;if((d||h)&&a!==window&&(c=c||a.parentNode,!ma)){do if(c&&c.getBoundingClientRect&&("none"!==r(c,"transform")||h&&"static"!==r(c,"position"))){f=c.getBoundingClientRect();v-=f.top+parseInt(r(c,"border-top-width"));e-=f.left+parseInt(r(c,"border-left-width"));
f=v+t.height;k=e+t.width;break}while(c=c.parentNode)}b&&a!==window&&(b=(a=Fa(c||a))&&a.a,c=a&&a.d,a&&(v/=c,e/=b,l/=b,g/=c,f=v+g,k=e+l));return{top:v,left:e,bottom:f,right:k,width:l,height:g}}}function Tb(a,d,h){var b=sa(a,!0);for(a=O(a)[d];b;){d=O(b)[h];if(!("top"===h||"left"===h?a>=d:a<=d))return b;if(b===na())break;b=sa(b,!1)}return!1}function bb(a,d,h){for(var b=0,c=0,n=a.children;c<n.length;){if("none"!==n[c].style.display&&n[c]!==x.ghost&&n[c]!==x.dragged&&fa(n[c],h.draggable,a,!1)){if(b===d)return n[c];
b++}c++}return null}function vb(a,d){for(a=a.lastElementChild;a&&(a===x.ghost||"none"===r(a,"display")||d&&!Da(a,d));)a=a.previousElementSibling;return a||null}function aa(a,d){var h=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===x.clone||d&&!Da(a,d)||h++;return h}function Ub(a){var d=0,h=0,b=na();if(a){do{var c=Fa(a),n=c.d;d+=a.scrollLeft*c.a;h+=a.scrollTop*n}while(a!==b&&(a=a.parentNode))}return[d,h]}function qc(a,d){for(var h in a)if(a.hasOwnProperty(h))for(var b in d)if(d.hasOwnProperty(b)&&
d[b]===a[h][b])return Number(h);return-1}function sa(a,d){if(!a||!a.getBoundingClientRect)return na();var h=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var b=r(a);if(a.clientWidth<a.scrollWidth&&("auto"==b.overflowX||"scroll"==b.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==b.overflowY||"scroll"==b.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(h||d)return a;h=!0}}while(a=a.parentNode);return na()}function wb(a,d){return Math.round(a.top)===Math.round(d.top)&&
Math.round(a.left)===Math.round(d.left)&&Math.round(a.height)===Math.round(d.height)&&Math.round(a.width)===Math.round(d.width)}function Vb(a,d){return function(){if(!Oa){var b=arguments;1===b.length?a.call(this,b[0]):a.apply(this,b);Oa=setTimeout(function(){Oa=void 0},d)}}}function Wb(a,d,b){a.scrollLeft+=d;a.scrollTop+=b}function Xb(a){var d=window.Polymer,b=window.jQuery||window.Zepto;return d&&d.dom?d.dom(a).cloneNode(!0):b?b(a).clone(!0)[0]:a.cloneNode(!0)}function rc(){var a=[],d;return{captureAnimationState:function(){a=
[];this.options.animation&&[].slice.call(this.el.children).forEach(function(d){if("none"!==r(d,"display")&&d!==x.ghost){a.push({target:d,rect:O(d)});var b=N({},a[a.length-1].rect);if(d.thisAnimationDuration){var h=Fa(d,!0);h&&(b.top-=h.f,b.left-=h.e)}d.fromRect=b}})},addAnimationState:function(d){a.push(d)},removeAnimationState:function(d){a.splice(qc(a,{target:d}),1)},animateAll:function(b){var h=this;if(this.options.animation){var c=!1,n=0;a.forEach(function(a){var d=0,b=a.target,t=b.fromRect,v=
O(b),e=b.prevFromRect,J=b.prevToRect;a=a.rect;var f=Fa(b,!0);f&&(v.top-=f.f,v.left-=f.e);b.toRect=v;b.thisAnimationDuration&&wb(e,v)&&!wb(t,v)&&(a.top-v.top)/(a.left-v.left)===(t.top-v.top)/(t.left-v.left)&&(d=Math.sqrt(Math.pow(e.top-a.top,2)+Math.pow(e.left-a.left,2))/Math.sqrt(Math.pow(e.top-J.top,2)+Math.pow(e.left-J.left,2))*h.options.animation);wb(v,t)||(b.prevFromRect=t,b.prevToRect=v,d||(d=h.options.animation),h.animate(b,a,v,d));d&&(c=!0,n=Math.max(n,d),clearTimeout(b.animationResetTimer),
b.animationResetTimer=setTimeout(function(){b.animationTime=0;b.prevFromRect=null;b.fromRect=null;b.prevToRect=null;b.thisAnimationDuration=null},d),b.thisAnimationDuration=d)});clearTimeout(d);c?d=setTimeout(function(){"function"===typeof b&&b()},n):"function"===typeof b&&b();a=[]}else clearTimeout(d),"function"===typeof b&&b()},animate:function(a,d,b,c){if(c){r(a,"transition","");r(a,"transform","");var h=Fa(this.el),t=(d.left-b.left)/(h&&h.a||1);d=(d.top-b.top)/(h&&h.d||1);a.animatingX=!!t;a.animatingY=
!!d;r(a,"transform","translate3d("+t+"px,"+d+"px,0)");r(a,"transition","transform "+c+"ms"+(this.options.easing?" "+this.options.easing:""));r(a,"transform","translate3d(0,0,0)");"number"===typeof a.animated&&clearTimeout(a.animated);a.animated=setTimeout(function(){r(a,"transition","");r(a,"transform","");a.animated=!1;a.animatingX=!1;a.animatingY=!1},c)}}}}function R(a){var d=N({putSortable:P,cloneEl:F,targetEl:l,rootEl:I,oldIndex:Ga,oldDraggableIndex:Pa,newIndex:W,newDraggableIndex:ta},a);a=d.sortable;
var b=d.rootEl,c=d.name,v=d.targetEl,n=d.cloneEl,e=d.toEl,f=d.fromEl,k=d.oldIndex,g=d.newIndex,m=d.oldDraggableIndex,r=d.newDraggableIndex,x=d.originalEvent,w=d.putSortable,p=d.extraEventProperties;if(a=a||b&&b[X]){var u=a.options,q="on"+c.charAt(0).toUpperCase()+c.substr(1);!window.CustomEvent||ma||Qa?(d=document.createEvent("Event"),d.initEvent(c,!0,!0)):d=new CustomEvent(c,{bubbles:!0,cancelable:!0});d.to=e||b;d.from=f||b;d.item=v||b;d.clone=n;d.oldIndex=k;d.newIndex=g;d.oldDraggableIndex=m;d.newDraggableIndex=
r;d.originalEvent=x;d.pullMode=w?w.lastPutMode:void 0;c=N({},p,Ra.getEventProperties(c,a));for(var A in c)d[A]=c[A];b&&b.dispatchEvent(d);u[q]&&u[q].call(a,d)}}function x(a,d){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=d=E({},d);a[X]=this;var b={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,
direction:function(){return Yb(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,d){a.setData("Text",d.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,
fallbackOffset:{x:0,y:0},supportPointer:!1!==x.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};Ra.initializePlugins(this,a,b);for(var c in b)c in d||(d[c]=b[c]);Zb(d);for(var v in this)"_"===v.charAt(0)&&"function"===typeof this[v]&&(this[v]=this[v].bind(this));if(this.nativeDraggable=d.forceFallback?!1:sc)this.options.touchStartThreshold=1;d.supportPointer?q(a,"pointerdown",this._onTapStart):(q(a,"mousedown",this._onTapStart),q(a,"touchstart",this._onTapStart));this.nativeDraggable&&
(q(a,"dragover",this),q(a,"dragenter",this));cb.push(this.el);d.store&&d.store.get&&this.sort(d.store.get(this)||[]);E(this,rc())}function xb(a,d,b,c,v,n,e,f){var h=a[X],t=h.options.onMove,J;if(!window.CustomEvent||ma||Qa){var k=document.createEvent("Event");k.initEvent("move",!0,!0)}else k=new CustomEvent("move",{bubbles:!0,cancelable:!0});k.to=d;k.from=a;k.dragged=b;k.draggedRect=c;k.related=v||d;k.relatedRect=n||O(d);k.willInsertAfter=f;k.originalEvent=e;a.dispatchEvent(k);t&&(J=t.call(h,k,e));
return J}function yb(a){a.draggable=!1}function tc(){zb=!1}function uc(a,d,b){b=O(vb(b.el,b.options.draggable));return d?a.clientX>b.right+10||a.clientX<=b.right&&a.clientY>b.bottom&&a.clientX>=b.left:a.clientX>b.right&&a.clientY>b.top||a.clientX<=b.right&&a.clientY>b.bottom+10}function vc(a,d,b,c,v,n,e,f){a=c?a.clientY:a.clientX;var h=c?b.height:b.width,t=c?b.top:b.left;b=c?b.bottom:b.right;c=!1;if(!e)if(f&&db<h*v)if(!Sa&&(1===Ta?a>t+h*n/2:a<b-h*n/2)&&(Sa=!0),Sa)c=!0;else{if(1===Ta?a<t+db:a>b-db)return-Ta}else if(a>
t+h*(1-v)/2&&a<b-h*(1-v)/2)return d=aa(l)<aa(d)?1:-1,d;if(c||e)if(a<t+h*n/2||a>b-h*n/2)return a>t+h/2?1:-1;return 0}function wc(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var d=a.length,b=0;d--;)b+=a.charCodeAt(d);return b.toString(36)}function xc(a){eb.length=0;a=a.getElementsByTagName("input");for(var d=a.length;d--;){var b=a[d];b.checked&&eb.push(b)}}function fb(a){return setTimeout(a,0)}function gb(){C.forEach(function(a){clearInterval(a.pid)});C=[]}function Ab(){}function Bb(){}
f.r(c);var yc=function(){function a(a,d){return document.createTextNode(d?a.replace(x,""):a)}function d(a,d){return"".concat(d.base,d.size,"/",a,d.ext)}function b(a,d){a=a.childNodes;for(var h=a.length,c,t;h--;)c=a[h],t=c.nodeType,3===t?d.push(c):1!==t||"ownerSVGElement"in c||u.test(c.nodeName.toLowerCase())||b(c,d);return d}function c(a){return g(0>a.indexOf(w)?a.replace(x,""):a)}function v(d,h){for(var t=b(d,[]),n=t.length,v,e,J,f,k,la,g,l,Q,m;n--;){v=!1;J=document.createDocumentFragment();f=t[n];
k=f.nodeValue;for(g=0;la=r.exec(k);){l=la.index;l!==g&&J.appendChild(a(k.slice(g,l),!0));la=la[0];m=c(la);g=l+la.length;l=h.callback(m,h);if(m&&l){Q=new Image;Q.onerror=h.onerror;Q.setAttribute("draggable","false");v=h.attributes(la,m);for(e in v)v.hasOwnProperty(e)&&0!==e.indexOf("on")&&!Q.hasAttribute(e)&&Q.setAttribute(e,v[e]);Q.className=h.className;Q.alt=la;Q.src=l;v=!0;J.appendChild(Q)}Q||J.appendChild(a(la,!1));Q=null}v&&(g<k.length&&J.appendChild(a(k.slice(g),!0)),f.parentNode.replaceChild(J,
f))}return d}function n(a,d){return k(a,function(a){var b=a,h=c(a),t=d.callback(h,d),n;if(h&&t){b="<img ".concat('class="',d.className,'" ','draggable="false" ','alt="',a,'"',' src="',t,'"');a=d.attributes(a,h);for(n in a)a.hasOwnProperty(n)&&0!==n.indexOf("on")&&-1===b.indexOf(" "+n+"=")&&(b=b.concat(" ",n,'="',a[n].replace(p,e),'"'));b=b.concat("/>")}return b})}function e(a){return m[a]}function f(){return null}function k(a,d){return String(a).replace(r,d)}function g(a,d){for(var b=[],h,c=0,t=0;t<
a.length;)h=a.charCodeAt(t++),c?(b.push((65536+(c-55296<<10)+(h-56320)).toString(16)),c=0):55296<=h&&56319>=h?c=h:b.push(h.toString(16));return b.join(d||"-")}var l={base:"https://twemoji.maxcdn.com/v/12.1.5/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(a){a="string"===typeof a?parseInt(a,16):a;if(65536>a)return q(a);a-=65536;return q(55296+(a>>10),56320+(a&1023))},toCodePoint:g},onerror:function(){this.parentNode&&this.parentNode.replaceChild(a(this.alt,!1),this)},parse:function(a,
b){b&&"function"!==typeof b||(b={callback:b});var h=b.callback||d,c="function"===typeof b.attributes?b.attributes:f,t="string"===typeof b.base?b.base:l.base,e=b.ext||l.ext,J;(J=b.folder)||(J=b.size||l.size,J="number"===typeof J?J+"x"+J:J);return("string"===typeof a?n:v)(a,{callback:h,attributes:c,base:t,ext:e,size:J,className:b.className||l.className,onerror:b.onerror||l.onerror})},replace:k,test:function(a){r.lastIndex=0;a=r.test(a);r.lastIndex=0;return a}},m={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",
'"':"&quot;"},r=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,
x=/\uFE0F/g,w=String.fromCharCode(8205),p=/[&<>'"]/g,u=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,q=String.fromCharCode;return l}(),zc=f(0),k;(function(a){function d(a){var d=document.createElement("div");a&&d.classList.add.apply(d.classList,$jscomp.arrayFromIterable(a));return d}function b(a,d,b){a=document.createElement(a);a.innerText=d;b&&a.classList.add.apply(a.classList,$jscomp.arrayFromIterable(b));return a}function c(a){yc.parse(a,{folder:"svg",ext:".svg"});return a}function v(a){return 0<
zc.parse(a).length}a.makeDiv=d;a.makeDivContaining=function(a,b){b=d(b);a=$jscomp.makeIterator(a);for(var h=a.next();!h.done;h=a.next())b.appendChild(h.value);return b};a.makeElement=b;a.patchEmoji=c;a.containsEmoji=v;a.makePara=function(a,d){d=b("p",a,d);v(a)&&c(d);return d};a.makeHeader=function(a,d,h){d=b("h"+(void 0===d?1:d),a,h);v(a)&&c(d);return d};a.makeButton=function(a,d,b,h){h=void 0===h?"enabled":h;var t=document.createElement("button");t.type="button";"disabled"===h&&(t.disabled=!0);t.innerText=
a;b&&t.classList.add.apply(t.classList,$jscomp.arrayFromIterable(b));t.onclick=function(a){a.preventDefault();d.call(this,a)};v(a)&&c(t);return t};a.makeCanvas=function(a,d,b){var h=document.createElement("canvas");h.width=a;h.height=d;b&&h.classList.add.apply(h.classList,$jscomp.arrayFromIterable(b));return h};a.fillHTML=function(a,d){a.innerHTML="";d=$jscomp.makeIterator(d);for(var b=d.next();!b.done;b=d.next())a.appendChild(b.value)}})(k||(k={}));var L;(function(a){var d=document.getElementById("rootdiv"),
b=void 0;a.show=function(a){b=a;k.fillHTML(d,[a.html]);document.onkeydown=function(d){a.handleKeyDown&&a.handleKeyDown(d)};document.onkeyup=function(d){a.handleKeyUp&&a.handleKeyUp(d)}};a.refreshCurrentPage=function(){b&&b.refresh()}})(L||(L={}));var pc=function(a,d,b,c){function h(a){return a instanceof b?a:new b(function(d){d(a)})}return new (b||(b=Promise))(function(b,t){function v(a){try{n(c.next(a))}catch(ub){t(ub)}}function e(a){try{n(c["throw"](a))}catch(ub){t(ub)}}function n(a){a.done?b(a.value):
h(a.value).then(v,e)}n((c=c.apply(a,d||[])).next())})},Pb=[],Ac=e("assets/ui/highlight.png"),Bc=e("assets/tiles/habitat.png"),Cc=e("assets/tiles/wasteland1.png"),Dc=e("assets/tiles/wasteland2.png"),Ec=e("assets/tiles/wasteland3.png"),Fc=e("assets/tiles/wasteland4.png"),Gc=e("assets/tiles/wasteland5.png"),Hc=e("assets/tiles/solar_panels.png"),Ic=e("assets/tiles/mountain.png"),Jc=e("assets/tiles/mining_facility.png"),Kc=e("assets/tiles/lander.png"),Lc=e("assets/tiles/greenhouse.png"),Cb=function(a,
d){this.name=a;this.roles=d},$b=[new Cb("Grace Rarer",["Team Lead","Gameplay Programmer"]),new Cb("Prindle",["DevOps"]),new Cb("May Lawver",["Programmer (HTML Composition Code)"])],ac=function(){this.html=k.makeDiv(["credits"]);this.refresh()};ac.prototype.refresh=function(){var a=$b.map(function(a){return k.makePara(a.name,["credits-name"])}),d=$b.map(function(a){return k.makePara(a.roles.join(", "),["credits-roles"])});k.fillHTML(this.html,[k.makeHeader("Credits",1),k.makeDivContaining([k.makeDivContaining(a,
["credits-names-column"]),k.makeDivContaining(d)],["credits-container"]),k.makeButton("Back",function(){return L.show(new Ua)})])};var m=function(a){this.name=a};m.values=function(){return Object.keys(m).map(function(a){return m[a]})};m.Energy=new m("\u26a1 Energy");m.Food=new m("\ud83c\udf2f Food");m.Metal=new m("\u26cf Metal Ore");m.BuildingMaterials=new m("\ud83d\udd29 Construction Parts");m.Electronics=new m("\ud83d\udca1 Electronics");m.EngineeringKnowledge=new m("\u2699\ufe0f Engineering Data");
m.SocialKnowledge=new m("\ud83e\udde0 Psychological Data");var B=function(a,d){this.resource=a;this.quantity=d};B.prototype.toString=function(){return this.resource.name+" x"+this.quantity};var Z=function(a,d,b){this.name=a;this.growthMultiplier=d;this.survivalCost=b};Z.values=function(){return Object.keys(Z).map(function(a){return Z[a]})};Z.Human=new Z("\ud83d\udc69\ud83c\udffb\u200d\ud83d\ude80 Human Colonists",.1,new B(m.Food,1));Z.Robot=new Z("\ud83e\udd16 Robots",1,new B(m.Energy,.5));var hb=
function(a,d){this.requirement=a;this.nextStage=d},ua=function(a,d,b,c){this.description=a;this.hint=d;this.paths=b;this.endState=c};ua.prototype.updatedStage=function(a){for(var d=$jscomp.makeIterator(this.paths),b=d.next();!b.done;b=d.next())if(b=b.value,b.requirement.evaluate(a))return b.nextStage().updatedStage(a);return this};var ib=function(){},Va=function(a,d){this.resource=a;this.minQuantity=d;return this};$jscomp.inherits(Va,ib);Va.prototype.evaluate=function(a){return a.inventory.getResourceQuantity(this.resource)>=
this.minQuantity};Va.prototype.toString=function(){return"have at least "+this.minQuantity+" units of "+this.resource.name+" in inventory"};var jb=function(a,d){this.tileType=a;this.minQuantity=d;return this};$jscomp.inherits(jb,ib);jb.prototype.evaluate=function(a){var d=this;return a.world.getTiles().filter(function(a){return a instanceof d.tileType}).length>=this.minQuantity};jb.prototype.toString=function(){return"have at least "+this.minQuantity+"  "+this.tileType.tileName+" tile"+(1===this.minQuantity?
"":"s")};var kb=function(a){this.minimumPopulation=a;return this};$jscomp.inherits(kb,ib);kb.prototype.evaluate=function(a){return a.inventory.getTotalPopulation()>=this.minimumPopulation};kb.prototype.toString=function(){return"have a total population of at least "+this.minimumPopulation};var Wa=function(a){this.tech=a;return this};$jscomp.inherits(Wa,ib);Wa.prototype.evaluate=function(a){return a.hasUnlockedTechnology(this.tech)};Wa.prototype.toString=function(){return"have the "+this.tech.name+
" technology"};var T=function(a){this.position=a;this.possibleProjects=[];this.resourceConversions=[];this.populationCapacity=void 0},Mc=function(a,d){this.species=a;this.capacity=d},Y=function(a){a=T.call(this,a)||this;a.texture=Bc;a.populationCapacity=new Mc(Z.Human,200);return a};$jscomp.inherits(Y,T);Y.prototype.getTileName=function(){return Y.tileName};Y.prototype.getTileDescription=function(){return Y.tileDescription};Y.tileName="Habitat Dome";Y.tileDescription="A pressurized structure that provides housing, services, and life support for humans";
var oa=function(a,d,b){this.inputs=a;this.outputs=d;this.enabled=!0;this.requiredWorkers=b||0;this.isFree()?this.priority=0:(this.priority=oa.nextNumber,oa.nextNumber++)};oa.prototype.toString=function(){var a=this.outputs.map(function(a){return a.toString()}).join(", "),d="Produce "+a;0<this.inputs.length&&(d="Convert "+this.inputs.map(function(a){return a.toString()}).join(", ")+" into "+a);0!==this.requiredWorkers&&(d+=" using "+this.requiredWorkers+" workers");return d};oa.prototype.isFree=function(){return 0===
this.inputs.length&&!this.requiredWorkers};oa.nextNumber=1;var ha=function(a){a=T.call(this,a)||this;a.texture=Hc;a.resourceConversions=[new oa([],[new B(m.Energy,100)])];return a};$jscomp.inherits(ha,T);ha.prototype.getTileName=function(){return ha.tileName};ha.prototype.getTileDescription=function(){return ha.tileDescription};ha.tileName="Photovoltaic Array";ha.tileDescription="Converts light from this planet's sun into electrical energy";var ia=function(a,d,b,c,v,e){this.title=a;this.projectDescription=
d;this.action=b;this.costs=c;this.completionRequirements=v;this.visibilityRequirements=e};ia.prototype.canDo=function(a,d){return d.inventory.canAfford(this.costs)&&this.isVisible(a,d)&&this.completionRequirements.every(function(b){return b.evaluate(d,a)})};ia.prototype.isVisible=function(a,d){return this.visibilityRequirements.every(function(b){return b.evaluate(d,a)})};ia.prototype.doAction=function(a,d){if(!this.canDo(a,d))throw"tried to do project "+this.title+" without meeting requirements";
d.inventory.payCost(this.costs);this.action(a,d)};var D=function(a,d){this.x=a;this.y=d};D.prototype.toString=function(){return"("+this.x+", "+this.y+")"};D.prototype.distanceFrom=function(a){return Math.hypot(Math.abs(this.x-a.x),Math.abs(this.y-a.y))};var bc=function(){},Xa=function(a,d){this.radius=a;this.targetType=d;return this};$jscomp.inherits(Xa,bc);Xa.prototype.evaluate=function(a,d){var b=this;return 0<a.world.getTilesInCircle(d,this.radius).filter(function(a){return a instanceof b.targetType}).length};
Xa.prototype.toString=function(){return 1===this.radius?"adjacent to a "+this.targetType.tileName:"within "+this.radius+" units of a "+this.targetType.tileName};var lb=function(a){this.requiredCount=a;return this};$jscomp.inherits(lb,bc);lb.prototype.evaluate=function(a,d){return a.world.getTileAtCoordinates(d).resourceConversions.length===this.requiredCount};lb.prototype.toString=function(){return this.requiredCount+" resource conversions on this tile"};var va=function(a,d,b,c,v){this.name=a;this.description=
d;this.requiredTechs=b;this.researchCost=c;this.visible=void 0===v?!0:v};va.makeUnlockableTechnology=function(a,d,b,c){a=new va(a,d,b,c,!0);cc.push(a);return a};va.makeHiddenTechnology=function(a,d,b,c){return new va(a,d,[],b,void 0===c?!1:c)};var cc=[],Nc=va.makeUnlockableTechnology("Industrial Engineering","Approaches for optimizing production processes",[],new B(m.EngineeringKnowledge,25)),Oc=va.makeUnlockableTechnology("Structural Engineering","Techniques for fabricating large structures on the planet's surface",
[],new B(m.EngineeringKnowledge,10)),Pc=va.makeUnlockableTechnology("Colonist Behavior Modeling","Simulations of human behavior in the isolated conditions of a deep space colony",[],new B(m.SocialKnowledge,30));va.makeUnlockableTechnology("Habitation Pods","Compact and efficient residence units allow more humans to be packed into a small habitat",[Pc],new B(m.EngineeringKnowledge,15));var ja=function(a){a=T.call(this,a)||this;a.texture=Jc;a.resourceConversions=[new oa([new B(m.Metal,100)],[new B(m.BuildingMaterials,
100)],60),new oa([new B(m.Metal,100)],[new B(m.Electronics,100)],30)];a.possibleProjects=[new ia("Double Production Lines","Add a second production line to increase resource throughput in this facility",function(a,b){a=b.world.getTileAtCoordinates(a);b=$jscomp.makeIterator((new ja(new D(0,0))).resourceConversions);for(var d=b.next();!d.done;d=b.next())a.resourceConversions.push(d.value)},[new B(m.BuildingMaterials,175),new B(m.Energy,300)],[],[new Wa(Nc),new lb(2)])];return a};$jscomp.inherits(ja,
T);ja.prototype.getTileName=function(){return ja.tileName};ja.prototype.getTileDescription=function(){return ja.tileDescription};ja.tileName="Ore Processing Center";ja.tileDescription="A facility used to process ore into useful materials";var ba=function(a){a=T.call(this,a)||this;a.texture=Ic;a.possibleProjects=[new ia("Strip Mining","Destroy the mountain to produce "+m.Metal.name,function(a,b){b.inventory.addResource(m.Metal,150);b.world.placeTile(new z(a))},[new B(m.Energy,25)],[],[])];return a};
$jscomp.inherits(ba,T);ba.prototype.getTileName=function(){return ba.tileName};ba.prototype.getTileDescription=function(){return ba.tileDescription};ba.tileName="Mountain";ba.tileDescription="A large geological formation containing useful mineral resources";var pa=function(a){a=T.call(this,a)||this;a.texture=Lc;a.resourceConversions=[new oa([new B(m.Energy,10)],[new B(m.Food,200)],20)];return a};$jscomp.inherits(pa,T);pa.prototype.getTileName=function(){return pa.tileName};pa.prototype.getTileDescription=
function(){return pa.tileDescription};pa.tileName="Greenhouse";pa.tileDescription="Produces "+m.Food.name+" for "+Z.Human.name;var Ha;(function(a){function d(a,d){return Math.random()*(d-a)+a}function b(a,b){return Math.floor(d(a,b))}a.realBetween=d;a.intBetween=b;a.fromArray=function(a){return a[b(0,a.length)]}})(Ha||(Ha={}));var Ia;(function(a){a.generate=function(a,b){for(var d=Array(a),h=0;h<a;h++)d[h]=b();return d};a.flatten=function(a){return a.reduce(function(a,d){return a.concat(d)},[])};
a.partition=function(a,b){var d=[],h=[];a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b(c)?d.push(c):h.push(c);return{yes:d,no:h}};a.repeat=function(a,b){for(var d=Array(b),h=0;h<b;h++)d[h]=a;return d}})(Ia||(Ia={}));var z=function(a){a=T.call(this,a)||this;a.texture=Ha.fromArray([Cc,Dc,Ec,Fc].concat($jscomp.arrayFromIterable(Ia.repeat(Gc,4))));a.possibleProjects=[new ia("Construct habitat dome","Assemble a pressurized structure that provides housing, services, and life support for colonists",
function(a,b){b.world.placeTile(new Y(a))},[new B(m.BuildingMaterials,100)],[new Xa(1,Y),new Wa(Oc)],[]),new ia("Construct ore processing center","Assemble a factory that converts ore into useful materials",function(a,b){b.world.placeTile(new ja(a))},[new B(m.Energy,200),new B(m.Metal,300)],[new Xa(5,ba)],[]),new ia("Construct photovoltaic array","Assemble an array of solar panels to produce energy",function(a,b){b.world.placeTile(new ha(a))},[new B(m.Electronics,200)],[],[]),new ia("Construct Greenhouse",
"Assemble a building where colonists can grow food and produce oxygen using genetically engineered plants",function(a,b){b.world.placeTile(new pa(a))},[new B(m.BuildingMaterials,25)],[],[])];return a};$jscomp.inherits(z,T);z.prototype.getTileName=function(){return z.tileName};z.prototype.getTileDescription=function(){return z.tileDescription};z.tileName="Wasteland";z.tileDescription="Nothing of note here";var qa=function(a){a=T.call(this,a)||this;a.texture=Kc;a.possibleProjects=[new ia("Unpack Lander",
"Unload colonists and deploy prefabricated colonial buildings",function(a,b){var d=b.world;d.placeTile(new Y(new D(a.x+1,a.y)));d.placeTile(new ja(new D(a.x,a.y-1)));d.placeTile(new ha(new D(a.x+1,a.y-1)));d.placeTile(new pa(new D(a.x-1,a.y)));d.placeTile(new z(a));b.inventory.addResource(m.Food,1E3);b.inventory.addWorkers(Z.Human,100);b.inventory.releaseWorkers()},[],[],[])];return a};$jscomp.inherits(qa,T);qa.prototype.getTileName=function(){return qa.tileName};qa.prototype.getTileDescription=function(){return qa.tileDescription};
qa.tileName="Landing Pod";qa.tileDescription="A spacecraft responsible for the final entry-descent-landing phase of the interstellar journey; not equipped to ascend back to space";var dc=function(a,d){this.title=a;this.description=d},Rc=new ua("Deploy shelter for the colonists","select the "+qa.tileName,[new hb(new jb(Y,1),function(){return Qc})]),Qc=new ua("Build up at least 100 units of "+m.Energy.name,"the "+ha.tileName+" produces "+m.Energy.name+" each turn",[new hb(new Va(m.Energy,100),function(){return Sc})]),
Sc=new ua("Acquire "+m.Metal.name,void 0,[new hb(new Va(m.Metal,1),function(){return Tc})]),Tc=new ua("Grow total worker population to 250","A "+Y.tileName+" has capacity for "+(new Y(new D(0,0))).populationCapacity.capacity+" colonists",[new hb(new kb(250),function(){return Uc})]),Uc=new ua("[no current objective]",void 0,[]),Vc=new ua("You lose",void 0,[],new dc("Game Over","You lost the game")),Wc=new ua("You win",void 0,[],new dc("You Win!","You won the game")),Ea=function(a){this.currentGame=
a};Ea.prototype.refresh=function(){this.currentGame.updateQuestState();L.refreshCurrentPage()};Ea.prototype.addResource=function(a,d){this.currentGame.inventory.addResource(a,d);this.refresh()};Ea.prototype.addPopulation=function(a,d){this.currentGame.inventory.addWorkers(a,d);this.refresh()};Ea.prototype.loseGame=function(){this.currentGame.setQuestStage(Vc)};Ea.prototype.winGame=function(){this.currentGame.setQuestStage(Wc)};var M=function(a,d){var b=this;this.viewWidth=12;this.viewHeight=8;this.viewPosition=
new D(0,0);this.highlightedCoordinates=null;this.world=d;this.parentScreen=a;this.html=k.makeCanvas(this.viewWidth*M.pixelsPerTile,this.viewHeight*M.pixelsPerTile,["map-canvas"]);this.html.addEventListener("click",function(a){return b.handleClick(a)});this.refresh()};M.prototype.refresh=function(){var a=this.world.getTilesInRectangle(this.viewPosition.x,this.viewPosition.y,this.viewWidth,this.viewHeight);a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next())d=d.value,this.drawSquareAtCoordinates(d.texture,
d.position);null!==this.highlightedCoordinates&&this.drawSquareAtCoordinates(M.highlightImage,this.highlightedCoordinates)};M.prototype.drawSquareAtCoordinates=function(a,d){var b=this.html.getContext("2d");b.imageSmoothingEnabled=!1;var c=d.x-this.viewPosition.x;d=d.y-this.viewPosition.y;if(!(0>c||0>d||c>=this.viewWidth||d>=this.viewHeight)){var e=M.pixelsPerTile/a.width*a.height;b.drawImage(a,c*M.pixelsPerTile,d*M.pixelsPerTile-e+M.pixelsPerTile,M.pixelsPerTile,e)}};M.prototype.selectTile=function(a){this.highlightedCoordinates=
a?a.position:null;this.refresh();this.parentScreen.changeSidebarTile(this.highlightedCoordinates)};M.prototype.moveViewArea=function(a,d){a=A(0,this.viewPosition.x+a,this.world.width-this.viewWidth);d=A(0,this.viewPosition.y+d,this.world.height-this.viewHeight);this.viewPosition=new D(a,d);this.refresh()};M.prototype.handleClick=function(a){a=this.world.getTileAtCoordinates(new D(Math.floor(this.viewWidth/this.html.clientWidth*(a.pageX-this.html.offsetLeft))+this.viewPosition.x,Math.floor(this.viewHeight/
this.html.clientHeight*(a.pageY-this.html.offsetTop))+this.viewPosition.y));this.selectTile(a)};M.prototype.handleKeyDown=function(a){var d=a.code;if("ArrowUp"===d||"KeyW"===d)a.preventDefault(),this.moveViewArea(0,-1);if("ArrowLeft"===d||"KeyA"===d)a.preventDefault(),this.moveViewArea(-1,0);if("ArrowDown"===d||"KeyS"===d)a.preventDefault(),this.moveViewArea(0,1);if("ArrowRight"===d||"KeyD"===d)a.preventDefault(),this.moveViewArea(1,0)};M.pixelsPerTile=100;M.highlightImage=Ac;var Ja=function(a,d){this.parentScreen=
a;this.run=d;this.position=null;this.html=k.makeDiv(["world-screen-sidebar"]);this.refresh()};Ja.prototype.changeTile=function(a){this.position=a;this.refresh()};Ja.prototype.refresh=function(){var a=this;if(null===this.position)k.fillHTML(this.html,[k.makePara("No structure or terrain tile selected")]);else{var d=this.run.world.getTileAtCoordinates(this.position),b=k.makeDiv();b.appendChild(k.makePara(d.getTileDescription()));var c=k.makeDiv();d.populationCapacity&&c.appendChild(k.makePara("Population capacity for "+
d.populationCapacity.capacity+" "+d.populationCapacity.species.name));var e=k.makeDiv(),n=d.possibleProjects.filter(function(d){return d.isVisible(a.position,a.run)});if(0<n.length){e.appendChild(k.makePara("Projects:"));n=$jscomp.makeIterator(n);for(var f=n.next();!f.done;f=n.next())e.appendChild(this.makeProjectHTML(d,f.value))}n=k.makeDiv();if(0<d.resourceConversions.length){n.appendChild(k.makePara("Production:"));f=$jscomp.makeIterator(d.resourceConversions);for(var g=f.next();!g.done;g=f.next())n.appendChild(this.makeConversionHTML(g.value))}k.fillHTML(this.html,
[k.makePara(d.getTileName()),k.makePara("Coordinates: "+this.position.x+", "+this.position.y),b,c,e,n])}};Ja.prototype.makeProjectHTML=function(a,d){var b=this,c=k.makeDiv(),e=k.makeButton(d.title,function(){b.doProject(d,a)},[],d.canDo(a.position,this.run)?"enabled":"disabled");c.appendChild(e);c.appendChild(k.makePara(d.projectDescription));if(0===d.costs.length)c.appendChild(k.makePara("Cost: Free"));else{var n=this.run.inventory.clone();e=d.costs.map(function(a){var d=n.canAfford([a]),b=k.makePara(a.toString(),
[d?"project-requirement-met":"project-requirement-unmet"]);d&&n.payCost([a]);return b});e=k.makeDivContaining([k.makePara("Costs: ")].concat($jscomp.arrayFromIterable(e)));c.appendChild(e)}0<d.completionRequirements.length&&c.appendChild(k.makePara("Requirements:"));e=$jscomp.makeIterator(d.completionRequirements);for(var f=e.next();!f.done;f=e.next()){f=f.value;var g=f.evaluate(this.run,this.position)?"project-requirement-met":"project-requirement-unmet";c.appendChild(k.makePara("- "+f.toString(),
[g]))}return c};Ja.prototype.makeConversionHTML=function(a){return k.makePara("- "+a.toString())};Ja.prototype.doProject=function(a,d){a.doAction(d.position,this.run);this.run.updateQuestState();this.parentScreen.refresh()};var ec=function(a){this.inventory=a.inventory;this.html=k.makeDiv(["world-screen-inventory"]);this.refresh()};ec.prototype.refresh=function(){for(var a=k.makeHeader("Population: "+this.inventory.getTotalPopulation(),1),d=k.makePara("Available workers: "+this.inventory.getAvailableWorkers()),
b=k.makeDiv(),c=$jscomp.makeIterator(this.inventory.getPopulationStrings()),e=c.next();!e.done;e=c.next())b.appendChild(k.makePara(e.value));c=k.makeDiv();var n=$jscomp.makeIterator(this.inventory.getInventoryStrings());for(e=n.next();!e.done;e=n.next())c.appendChild(k.makePara(e.value));k.fillHTML(this.html,[k.makeDivContaining([a,d,b,k.makeHeader("Inventory:",1),c])])};var xa=function(a,d){this.text=a;this.attribution=d};xa.getRandomQuote=function(){return Ha.fromArray(this.QuotesList)};xa.QuotesList=
[new xa("I am an example quote","Person McQuoteFace"),new xa("Lorem ipsum dolor sit amet","Mx. Example"),new xa(ra($jscomp$templatelit$0),"Author Goes Here"),new xa(ra($jscomp$templatelit$1),"Name McNameFace")];var mb=function(a){this.run=a;this.html=k.makeDiv();this.loadingBar=k.makeDiv(["transition-loading-bar"]);this.loadingArea=k.makeDivContaining([this.loadingBar],["transition-loading-area"]);this.quote=xa.getRandomQuote();a=this.quote.text;var d="\u00a0".repeat(4);a=a.replace(/\t/g,d);a=a.replace(/ {4}/g,
d);a=a.replace(/^(\s*)/,"$1\u201c")+"\u201d";k.fillHTML(this.html,[k.makeDivContaining([k.makePara(""+a),k.makePara("-"+this.quote.attribution,["transition-attribution"])],["transition-quote-panel"]),this.loadingArea])};mb.prototype.refresh=function(){};mb.prototype.startLoading=function(){var a=this;this.run.completeTurn();setTimeout(function(){k.fillHTML(a.loadingArea,[k.makeButton("Continue",function(){a.continueToNextTurn()})])},750)};mb.prototype.continueToNextTurn=function(){L.show(new ya(this.run))};
var ma=ca(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Qa=ca(/Edge/i),fc=ca(/firefox/i),Db=ca(/safari/i)&&!ca(/chrome/i)&&!ca(/android/i),Ya=ca(/iP(ad|od|hone)/i),Xc=ca(/chrome/i)&&ca(/android/i),Qb={capture:!1,passive:!1},Rb=/\s+/g,Oa,X="Sortable"+(new Date).getTime(),Za=[],Eb={initializeByDefault:!0},Ra={mount:function(a){for(var d in Eb)!Eb.hasOwnProperty(d)||d in a||(a[d]=Eb[d]);Za.push(a)},pluginEvent:function(a,d,b){var c=this;this.eventCanceled=!1;b.cancel=function(){c.eventCanceled=
!0};var h=a+"Global";Za.forEach(function(c){if(d[c.pluginName]){if(d[c.pluginName][h])d[c.pluginName][h](N({sortable:d},b));if(d.options[c.pluginName]&&d[c.pluginName][a])d[c.pluginName][a](N({sortable:d},b))}})},initializePlugins:function(a,d,b,c){Za.forEach(function(c){var h=c.pluginName;if(a.options[h]||c.initializeByDefault)c=new c(a,d,a.options),c.sortable=a,c.options=a.options,a[h]=c,E(b,c.defaults)});for(var h in a.options)a.options.hasOwnProperty(h)&&(c=this.modifyOption(a,h,a.options[h]),
"undefined"!==typeof c&&(a.options[h]=c))},getEventProperties:function(a,d){var b={};Za.forEach(function(c){"function"===typeof c.eventProperties&&E(b,c.eventProperties.call(d[c.pluginName],a))});return b},modifyOption:function(a,d,b){var c;Za.forEach(function(h){a[h.pluginName]&&h.optionListeners&&"function"===typeof h.optionListeners[d]&&(c=h.optionListeners[d].call(a[h.pluginName],b))});return c}},U=function(a,d){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c=b.evt;b=tb(b,["evt"]);
Ra.pluginEvent.bind(x)(a,d,N({dragEl:l,parentEl:K,ghostEl:w,rootEl:I,nextEl:za,lastDownEl:nb,cloneEl:F,cloneHidden:wa,dragStarted:$a,putSortable:P,activeSortable:x.active,originalEvent:c,oldIndex:Ga,oldDraggableIndex:Pa,newIndex:W,newDraggableIndex:ta,hideGhostForTarget:gc,unhideGhostForTarget:hc,cloneNowHidden:function(){wa=!0},cloneNowShown:function(){wa=!1},dispatchSortableEvent:function(a){R({sortable:d,name:a,originalEvent:c})}},b))},l,K,w,I,za,nb,F,wa,Ga,W,Pa,ta,ob,P,Ka=!1,pb=!1,cb=[],Aa,ea,
Fb,Gb,ic,jc,$a,La,Ta,Sa=!1,qb=!1,db,H,Hb=[],zb=!1,eb=[],rb="undefined"!==typeof document,kc=Qa||ma?"cssFloat":"float",sc=rb&&!Xc&&!Ya&&"draggable"in document.createElement("div"),lc=function(){if(rb){if(ma)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),Yb=function(a,d){var b=r(a),c=parseInt(b.width)-parseInt(b.paddingLeft)-parseInt(b.paddingRight)-parseInt(b.borderLeftWidth)-parseInt(b.borderRightWidth),e=bb(a,0,d);a=bb(a,
1,d);var n=e&&r(e);d=a&&r(a);var f=n&&parseInt(n.marginLeft)+parseInt(n.marginRight)+O(e).width,k=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+O(a).width;return"flex"===b.display?"column"===b.flexDirection||"column-reverse"===b.flexDirection?"vertical":"horizontal":"grid"===b.display?1>=b.gridTemplateColumns.split(" ").length?"vertical":"horizontal":e&&n["float"]&&"none"!==n["float"]?(b="left"===n["float"]?"left":"right",!a||"both"!==d.clear&&d.clear!==b?"horizontal":"vertical"):e&&("block"===
n.display||"flex"===n.display||"table"===n.display||"grid"===n.display||f>=c&&"none"===b[kc]||a&&"none"===b[kc]&&f+k>c)?"vertical":"horizontal"},Yc=function(a,d,b){var c=b?a.left:a.top,h=b?a.right:a.bottom;a=b?a.width:a.height;var e=b?d.left:d.top,f=b?d.right:d.bottom;d=b?d.width:d.height;return c===e||h===f||c+a/2===e+d/2},Zc=function(a,b){var d;cb.some(function(c){if(!vb(c)){var h=O(c),e=c[X].options.emptyInsertThreshold,t=a>=h.left-e&&a<=h.right+e;h=b>=h.top-e&&b<=h.bottom+e;if(e&&t&&h)return d=
c}});return d},Zb=function(a){function b(a,d){return function(c,h,e,t){var f=c.options.group.name&&h.options.group.name&&c.options.group.name===h.options.group.name;if(null==a&&(d||f))return!0;if(null==a||!1===a)return!1;if(d&&"clone"===a)return a;if("function"===typeof a)return b(a(c,h,e,t),d)(c,h,e,t);c=(d?c:h).options.group.name;return!0===a||"string"===typeof a&&a===c||a.join&&-1<a.indexOf(c)}}var c={},e=a.group;e&&"object"==G(e)||(e={name:e});c.name=e.name;c.checkPull=b(e.pull,!0);c.checkPut=
b(e.put);c.revertClone=e.revertClone;a.group=c},gc=function(){!lc&&w&&r(w,"display","none")},hc=function(){!lc&&w&&r(w,"display","")};rb&&document.addEventListener("click",function(a){if(pb)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),pb=!1},!0);var Ba=function(a){if(l){a=a.touches?a.touches[0]:a;var b=Zc(a.clientX,a.clientY);if(b){var c={},e;for(e in a)a.hasOwnProperty(e)&&(c[e]=a[e]);c.target=c.rootEl=b;c.preventDefault=
void 0;c.stopPropagation=void 0;b[X]._onDragOver(c)}}},$c=function(a){l&&l.parentNode[X]._isOutsideThisEl(a.target)};x.prototype={constructor:x,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(La=null)},_getDirection:function(a,b){return"function"===typeof this.options.direction?this.options.direction.call(this,a,b,l):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,c=this.el,e=this.options,f=e.preventOnFilter,n=a.type,k=a.touches&&a.touches[0]||a.pointerType&&
"touch"===a.pointerType&&a,g=(k||a).target,m=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||g,r=e.filter;xc(c);if(!(l||/mousedown|pointerdown/.test(n)&&0!==a.button||e.disabled||m.isContentEditable||(g=fa(g,e.draggable,c,!1),g&&g.animated||nb===g))){Ga=aa(g);Pa=aa(g,e.draggable);if("function"===typeof r){if(r.call(this,a,g,this)){R({sortable:b,rootEl:m,name:"filter",targetEl:g,toEl:c,fromEl:c});U("filter",b,{evt:a});f&&a.cancelable&&a.preventDefault();return}}else if(r&&
(r=r.split(",").some(function(d){if(d=fa(m,d.trim(),c,!1))return R({sortable:b,rootEl:d,name:"filter",targetEl:g,fromEl:c,toEl:c}),U("filter",b,{evt:a}),!0}))){f&&a.cancelable&&a.preventDefault();return}e.handle&&!fa(m,e.handle,c,!1)||this._prepareDragStart(a,k,g)}}},_prepareDragStart:function(a,b,c){var d=this,h=d.el,e=d.options,f=h.ownerDocument;if(c&&!l&&c.parentNode===h){var k=O(c);I=h;l=c;K=l.parentNode;za=l.nextSibling;nb=c;ob=e.group;x.dragged=l;Aa={target:l,clientX:(b||a).clientX,clientY:(b||
a).clientY};ic=Aa.clientX-k.left;jc=Aa.clientY-k.top;this._lastX=(b||a).clientX;this._lastY=(b||a).clientY;l.style["will-change"]="all";c=function(){U("delayEnded",d,{evt:a});x.eventCanceled?d._onDrop():(d._disableDelayedDragEvents(),!fc&&d.nativeDraggable&&(l.draggable=!0),d._triggerDragStart(a,b),R({sortable:d,name:"choose",originalEvent:a}),V(l,e.chosenClass,!0))};e.ignore.split(",").forEach(function(a){Sb(l,a.trim(),yb)});q(f,"dragover",Ba);q(f,"mousemove",Ba);q(f,"touchmove",Ba);q(f,"mouseup",
d._onDrop);q(f,"touchend",d._onDrop);q(f,"touchcancel",d._onDrop);fc&&this.nativeDraggable&&(this.options.touchStartThreshold=4,l.draggable=!0);U("delayStart",this,{evt:a});!e.delay||e.delayOnTouchOnly&&!b||this.nativeDraggable&&(Qa||ma)?c():x.eventCanceled?this._onDrop():(q(f,"mouseup",d._disableDelayedDrag),q(f,"touchend",d._disableDelayedDrag),q(f,"touchcancel",d._disableDelayedDrag),q(f,"mousemove",d._delayedDragTouchMoveHandler),q(f,"touchmove",d._delayedDragTouchMoveHandler),e.supportPointer&&
q(f,"pointermove",d._delayedDragTouchMoveHandler),d._dragStartTimer=setTimeout(c,e.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){l&&yb(l);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=
this.el.ownerDocument;u(a,"mouseup",this._disableDelayedDrag);u(a,"touchend",this._disableDelayedDrag);u(a,"touchcancel",this._disableDelayedDrag);u(a,"mousemove",this._delayedDragTouchMoveHandler);u(a,"touchmove",this._delayedDragTouchMoveHandler);u(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?q(document,"pointermove",this._onTouchMove):b?q(document,"touchmove",this._onTouchMove):
q(document,"mousemove",this._onTouchMove):(q(l,"dragend",this),q(I,"dragstart",this._onDragStart));try{document.selection?fb(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(h){}},_dragStarted:function(a,b){Ka=!1;if(I&&l){U("dragStarted",this,{evt:b});this.nativeDraggable&&q(document,"dragover",$c);var d=this.options;!a&&V(l,d.dragClass,!1);V(l,d.ghostClass,!0);x.active=this;a&&this._appendGhost();R({sortable:this,name:"start",originalEvent:b})}else this._nulling()},
_emulateDragOver:function(){if(ea){this._lastX=ea.clientX;this._lastY=ea.clientY;gc();for(var a=document.elementFromPoint(ea.clientX,ea.clientY),b=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(ea.clientX,ea.clientY);if(a===b)break;b=a}l.parentNode[X]._isOutsideThisEl(a);if(b){do{if(b[X]&&b[X]._onDragOver({clientX:ea.clientX,clientY:ea.clientY,target:a,rootEl:b})&&!this.options.dragoverBubble)break;a=b}while(b=b.parentNode)}hc()}},_onTouchMove:function(a){if(Aa){var b=this.options,c=b.fallbackTolerance,
e=b.fallbackOffset;b=a.touches?a.touches[0]:a;var f=w&&Fa(w,!0),n=w&&f&&f.a,k=w&&f&&f.d,g=Ya&&H&&Ub(H);n=(b.clientX-Aa.clientX+e.x)/(n||1)+(g?g[0]-Hb[0]:0)/(n||1);e=(b.clientY-Aa.clientY+e.y)/(k||1)+(g?g[1]-Hb[1]:0)/(k||1);if(!x.active&&!Ka){if(c&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<c)return;this._onDragStart(a,!0)}w&&(f?(f.e+=n-(Fb||0),f.f+=e-(Gb||0)):f={a:1,b:0,c:0,d:1,e:n,f:e},c="matrix(".concat(f.a,",").concat(f.b,",").concat(f.c,",").concat(f.d,",").concat(f.e,
",").concat(f.f,")"),r(w,"webkitTransform",c),r(w,"mozTransform",c),r(w,"msTransform",c),r(w,"transform",c),Fb=n,Gb=e,ea=b);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!w){var a=this.options.fallbackOnBody?document.body:I,b=O(l,!0,Ya,!0,a),c=this.options;if(Ya){for(H=a;"static"===r(H,"position")&&"none"===r(H,"transform")&&H!==document;)H=H.parentNode;H!==document.body&&H!==document.documentElement?(H===document&&(H=na()),b.top+=H.scrollTop,b.left+=H.scrollLeft):H=na();Hb=Ub(H)}w=
l.cloneNode(!0);V(w,c.ghostClass,!1);V(w,c.fallbackClass,!0);V(w,c.dragClass,!0);r(w,"transition","");r(w,"transform","");r(w,"box-sizing","border-box");r(w,"margin",0);r(w,"top",b.top);r(w,"left",b.left);r(w,"width",b.width);r(w,"height",b.height);r(w,"opacity","0.8");r(w,"position",Ya?"absolute":"fixed");r(w,"zIndex","100000");r(w,"pointerEvents","none");x.ghost=w;a.appendChild(w);r(w,"transform-origin",ic/parseInt(w.style.width)*100+"% "+jc/parseInt(w.style.height)*100+"%")}},_onDragStart:function(a,
b){var d=this,c=a.dataTransfer,e=d.options;U("dragStart",this,{evt:a});x.eventCanceled?this._onDrop():(U("setupClone",this),x.eventCanceled||(F=Xb(l),F.draggable=!1,F.style["will-change"]="",this._hideClone(),V(F,this.options.chosenClass,!1),x.clone=F),d.cloneId=fb(function(){U("clone",d);x.eventCanceled||(d.options.removeCloneOnHide||I.insertBefore(F,l),d._hideClone(),R({sortable:d,name:"clone"}))}),!b&&V(l,e.dragClass,!0),b?(pb=!0,d._loopId=setInterval(d._emulateDragOver,50)):(u(document,"mouseup",
d._onDrop),u(document,"touchend",d._onDrop),u(document,"touchcancel",d._onDrop),c&&(c.effectAllowed="move",e.setData&&e.setData.call(d,c,l)),q(document,"drop",d),r(l,"transform","translateZ(0)")),Ka=!0,d._dragStartId=fb(d._dragStarted.bind(d,b,a)),q(document,"selectstart",d),$a=!0,Db&&r(document.body,"user-select","none"))},_onDragOver:function(a){function b(b,d){U(b,y,N({evt:a,isOwner:A,axis:z?"vertical":"horizontal",revert:Q,dragRect:E,targetRect:m,canSort:D,fromSortable:B,target:g,completed:e,
onMove:function(b,d){return xb(I,k,l,E,b,O(b),a,d)},changed:f},d))}function c(){b("dragOverAnimationCapture");y.captureAnimationState();y!==B&&B.captureAnimationState()}function e(d){b("dragOverCompleted",{insertion:d});d&&(A?u._hideClone():u._showClone(y),y!==B&&(V(l,P?P.options.ghostClass:u.options.ghostClass,!1),V(l,p.ghostClass,!0)),P!==y&&y!==x.active?P=y:y===x.active&&P&&(P=null),B===y&&(y._ignoreWhileAnimating=g),y.animateAll(function(){b("dragOverAnimationComplete");y._ignoreWhileAnimating=
null}),y!==B&&(B.animateAll(),B._ignoreWhileAnimating=null));if(g===l&&!l.animated||g===k&&!g.animated)La=null;p.dragoverBubble||a.rootEl||g===document||(l.parentNode[X]._isOutsideThisEl(a.target),!d&&Ba(a));!p.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return F=!0}function f(){W=aa(l);ta=aa(l,p.draggable);R({sortable:y,name:"change",toEl:k,newIndex:W,newDraggableIndex:ta,originalEvent:a})}var k=this.el,g=a.target,m,Q,p=this.options,q=p.group,u=x.active,A=ob===q,D=p.sort,B=P||u,y=this,
F=!1;if(!zb){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();g=fa(g,p.draggable,k,!0);b("dragOver");if(x.eventCanceled)return F;if(l.contains(a.target)||g.animated&&g.animatingX&&g.animatingY||y._ignoreWhileAnimating===g)return e(!1);pb=!1;if(u&&!p.disabled&&(A?D||(Q=!I.contains(l)):P===this||(this.lastPutMode=ob.checkPull(this,u,l,a))&&q.checkPut(this,u,l,a))){var z="vertical"===this._getDirection(a,g);var E=O(l);b("dragOverValid");if(x.eventCanceled)return F;if(Q)return K=I,c(),this._hideClone(),
b("revert"),x.eventCanceled||(za?I.insertBefore(l,za):I.appendChild(l)),e(!0);q=vb(k,p.draggable);if(!q||uc(a,z,this)&&!q.animated){if(q===l)return e(!1);q&&k===a.target&&(g=q);g&&(m=O(g));if(!1!==xb(I,k,l,E,g,m,a,!!g))return c(),k.appendChild(l),K=k,f(),e(!0)}else if(g.parentNode===k){m=O(g);var C=0;C=l.parentNode!==k;var da=!Yc(l.animated&&l.toRect||E,g.animated&&g.toRect||m,z);q=z?"top":"left";var G=Tb(g,"top","top")||Tb(l,"top","top"),M=G?G.scrollTop:void 0;if(La!==g){var L=m[q];Sa=!1;qb=!da&&
p.invertSwap||C}C=vc(a,g,m,z,da?1:p.swapThreshold,null==p.invertedSwapThreshold?p.swapThreshold:p.invertedSwapThreshold,qb,La===g);if(0!==C){da=aa(l);do{da-=C;var H=K.children[da]}while(H&&("none"===r(H,"display")||H===w))}if(0===C||H===g)return e(!1);La=g;Ta=C;H=g.nextElementSibling;da=!1;da=1===C;C=xb(I,k,l,E,g,m,a,da);if(!1!==C){if(1===C||-1===C)da=1===C;zb=!0;setTimeout(tc,30);c();da&&!H?k.appendChild(l):g.parentNode.insertBefore(l,da?H:g);G&&Wb(G,0,M-G.scrollTop);K=l.parentNode;void 0===L||qb||
(db=Math.abs(L-O(g)[q]));f();return e(!0)}}if(k.contains(l))return e(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){u(document,"mousemove",this._onTouchMove);u(document,"touchmove",this._onTouchMove);u(document,"pointermove",this._onTouchMove);u(document,"dragover",Ba);u(document,"mousemove",Ba);u(document,"touchmove",Ba)},_offUpEvents:function(){var a=this.el.ownerDocument;u(a,"mouseup",this._onDrop);u(a,"touchend",this._onDrop);u(a,"pointerup",this._onDrop);u(a,"touchcancel",
this._onDrop);u(document,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;W=aa(l);ta=aa(l,c.draggable);U("drop",this,{evt:a});K=l&&l.parentNode;W=aa(l);ta=aa(l,c.draggable);if(!x.eventCanceled&&(Sa=qb=Ka=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(u(document,"drop",this),u(b,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Db&&r(document.body,"user-select",
""),r(l,"transform",""),a&&($a&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),w&&w.parentNode&&w.parentNode.removeChild(w),(I===K||P&&"clone"!==P.lastPutMode)&&F&&F.parentNode&&F.parentNode.removeChild(F),l&&(this.nativeDraggable&&u(l,"dragend",this),yb(l),l.style["will-change"]="",$a&&!Ka&&V(l,P?P.options.ghostClass:this.options.ghostClass,!1),V(l,this.options.chosenClass,!1),R({sortable:this,name:"unchoose",toEl:K,newIndex:null,newDraggableIndex:null,originalEvent:a}),I!==
K?(0<=W&&(R({rootEl:K,name:"add",toEl:K,fromEl:I,originalEvent:a}),R({sortable:this,name:"remove",toEl:K,originalEvent:a}),R({rootEl:K,name:"sort",toEl:K,fromEl:I,originalEvent:a}),R({sortable:this,name:"sort",toEl:K,originalEvent:a})),P&&P.save()):W!==Ga&&0<=W&&(R({sortable:this,name:"update",toEl:K,originalEvent:a}),R({sortable:this,name:"sort",toEl:K,originalEvent:a})),x.active)))){if(null==W||-1===W)W=Ga,ta=Pa;R({sortable:this,name:"end",toEl:K,originalEvent:a});this.save()}this._nulling()},_nulling:function(){U("nulling",
this);I=l=K=w=za=F=nb=wa=Aa=ea=$a=W=ta=Ga=Pa=La=Ta=P=ob=x.dragged=x.ghost=x.clone=x.active=null;eb.forEach(function(a){a.checked=!0});eb.length=Fb=Gb=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":l&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,c=this.el.children,e=0,f=c.length,k=this.options;e<
f;e++)b=c[e],fa(b,k.draggable,this.el,!1)&&a.push(b.getAttribute(k.dataIdAttr)||wc(b));return a},sort:function(a){var b={},c=this.el;this.toArray().forEach(function(a,d){d=c.children[d];fa(d,this.options.draggable,c,!1)&&(b[a]=d)},this);a.forEach(function(a){b[a]&&(c.removeChild(b[a]),c.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return fa(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var d=this.options;if(void 0===b)return d[a];
var c=Ra.modifyOption(this,a,b);d[a]="undefined"!==typeof c?c:b;"group"===a&&Zb(d)},destroy:function(){U("destroy",this);var a=this.el;a[X]=null;u(a,"mousedown",this._onTapStart);u(a,"touchstart",this._onTapStart);u(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(u(a,"dragover",this),u(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();cb.splice(cb.indexOf(this.el),
1);this.el=a=null},_hideClone:function(){wa||(U("hideClone",this),x.eventCanceled||(r(F,"display","none"),this.options.removeCloneOnHide&&F.parentNode&&F.parentNode.removeChild(F),wa=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():wa&&(U("showClone",this),x.eventCanceled||(I.contains(l)&&!this.options.group.revertClone?I.insertBefore(F,l):za?I.insertBefore(F,za):I.appendChild(F),this.options.group.revertClone&&this.animate(l,F),r(F,"display",""),wa=!1))}};rb&&q(document,"touchmove",
function(a){(x.active||Ka)&&a.cancelable&&a.preventDefault()});x.utils={on:q,off:u,css:r,find:Sb,is:function(a,b){return!!fa(a,b,a,!1)},extend:function(a,b){if(a&&b)for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return a},throttle:Vb,closest:fa,toggleClass:V,clone:Xb,index:aa,nextTick:fb,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:Yb,getChild:bb};x.get=function(a){return a[X]};x.mount=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];b[0].constructor===
Array&&(b=b[0]);b.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(x.utils=N({},x.utils,a.utils));Ra.mount(a)})};x.create=function(a,b){return new x(a,b)};x.version="1.10.2";var C=[],ab,Ib,Jb=!1,Kb,Lb,sb,Ma,Mb=Vb(function(a,b,c,e){if(b.scroll){var d=(a.touches?a.touches[0]:a).clientX,h=(a.touches?a.touches[0]:a).clientY,f=b.scrollSensitivity,k=b.scrollSpeed,g=na(),t=!1;if(Ib!==c){Ib=
c;gb();ab=b.scroll;var l=b.scrollFn;!0===ab&&(ab=sa(c,!0))}c=0;var m=ab;do{var p=m,q=O(p),u=q.top,w=q.bottom,y=q.left,A=q.right,B=q.width;q=q.height;var D=void 0,z=void 0,E=p.scrollWidth,F=p.scrollHeight;z=r(p);var G=p.scrollLeft,H=p.scrollTop;p===g?(D=B<E&&("auto"===z.overflowX||"scroll"===z.overflowX||"visible"===z.overflowX),z=q<F&&("auto"===z.overflowY||"scroll"===z.overflowY||"visible"===z.overflowY)):(D=B<E&&("auto"===z.overflowX||"scroll"===z.overflowX),z=q<F&&("auto"===z.overflowY||"scroll"===
z.overflowY));y=D&&(Math.abs(A-d)<=f&&G+B<E)-(Math.abs(y-d)<=f&&!!G);u=z&&(Math.abs(w-h)<=f&&H+q<F)-(Math.abs(u-h)<=f&&!!H);if(!C[c])for(w=0;w<=c;w++)C[w]||(C[w]={});if(C[c].vx!=y||C[c].vy!=u||C[c].el!==p)if(C[c].el=p,C[c].vx=y,C[c].vy=u,clearInterval(C[c].pid),0!=y||0!=u)t=!0,C[c].pid=setInterval(function(){e&&0===this.layer&&x.active._onTouchMove(sb);var b=C[this.layer].vy?C[this.layer].vy*k:0,d=C[this.layer].vx?C[this.layer].vx*k:0;"function"===typeof l&&"continue"!==l.call(x.dragged.parentNode[X],
d,b,a,sb,C[this.layer].el)||Wb(C[this.layer].el,d,b)}.bind({layer:c}),24);c++}while(b.bubbleScroll&&m!==g&&(m=sa(m,!1)));Jb=t}},30),mc=function(a){var b=a.originalEvent,c=a.putSortable,e=a.dragEl,f=a.activeSortable,k=a.dispatchSortableEvent,g=a.hideGhostForTarget;a=a.unhideGhostForTarget;b&&(f=c||f,g(),b=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b,b=document.elementFromPoint(b.clientX,b.clientY),a(),f&&!f.el.contains(b)&&(k("spill"),this.onSpill({dragEl:e,putSortable:c})))};Ab.prototype=
{startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var c=bb(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(b,c):this.sortable.el.appendChild(b);this.sortable.animateAll();a&&a.animateAll()},drop:mc};E(Ab,{pluginName:"revertOnSpill"});Bb.prototype={onSpill:function(a){var b=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();
b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:mc};E(Bb,{pluginName:"removeOnSpill"});x.mount(new function(){function a(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var a in this)"_"===a.charAt(0)&&"function"===typeof this[a]&&(this[a]=this[a].bind(this))}a.prototype={dragStarted:function(a){a=a.originalEvent;this.sortable.nativeDraggable?q(document,"dragover",this._handleAutoScroll):this.options.supportPointer?q(document,"pointermove",this._handleFallbackAutoScroll):
a.touches?q(document,"touchmove",this._handleFallbackAutoScroll):q(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){a=a.originalEvent;this.options.dragOverBubble||a.rootEl||this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?u(document,"dragover",this._handleAutoScroll):(u(document,"pointermove",this._handleFallbackAutoScroll),u(document,"touchmove",this._handleFallbackAutoScroll),u(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(Ma);
gb();clearTimeout(Oa);Oa=void 0},nulling:function(){sb=Ib=ab=Jb=Ma=Kb=Lb=null;C.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},_handleAutoScroll:function(a,b){var d=this,c=(a.touches?a.touches[0]:a).clientX,e=(a.touches?a.touches[0]:a).clientY,h=document.elementFromPoint(c,e);sb=a;if(b||Qa||ma||Db){Mb(a,this.options,h,b);var f=sa(h,!0);!Jb||Ma&&c===Kb&&e===Lb||(Ma&&clearInterval(Ma),Ma=setInterval(function(){var h=sa(document.elementFromPoint(c,e),!0);h!==f&&(f=h,gb());
Mb(a,d.options,h,b)},10),Kb=c,Lb=e)}else this.options.bubbleScroll&&sa(h,!0)!==na()?Mb(a,this.options,sa(h,!1),!1):gb()}};return E(a,{pluginName:"scroll",initializeByDefault:!0})});x.mount(Bb,Ab);var ad=x,Na=function(a){this.run=a;this.html=k.makeDiv(["production-screen"]);this.refresh()};Na.prototype.refresh=function(){var a=this,b=this.run.inventory.clone(),c=this.run.getResourceConversions(),e=c.free,f=c.costly;b.applyConversions(e);e=e.map(function(b){return a.renderConversion(b,!0)});e=k.makeDivContaining(e);
c=[];f=$jscomp.makeIterator(f);for(var g=f.next();!g.done;g=f.next())g=g.value,b.canAfford(g.inputs)&&b.hasEnoughWorkers(g.requiredWorkers)?(c.push(this.renderConversion(g,!0)),b.applyConversions([g])):c.push(this.renderConversion(g,!1));c=k.makeDivContaining(c);ad.create(c,{onEnd:function(b){var d=b.oldDraggableIndex;b=b.newDraggableIndex;void 0!==d&&void 0!==b&&a.shiftCostlyConversion(d,b)}});f=k.makeDiv();if(0!==this.run.inventory.getSpeciesList().length){g=b.clone();f.appendChild(k.makeHeader("Resources required for worker upkeep:"));
for(var l=$jscomp.makeIterator(g.getSpeciesList()),m=l.next();!m.done;m=l.next()){m=m.value;var p=g.getProvidedWorkerConsumption(m).quantity,q=g.getProvidedWorkerConsumption(m).quantity;f.appendChild(k.makePara(m.name+": "+p+"/"+q+" "+m.survivalCost.resource.name,[q>p?"population-consumption-unmet":"population-consumption-met"]));g.payCost([g.getProvidedWorkerConsumption(m)])}}g=k.makeDiv();l=b.getSpeciesList();var r=new Map;p=$jscomp.makeIterator(l);for(m=p.next();!m.done;m=p.next())m=m.value,r.set(m,
b.getPopulation(m));b.doPopulationGrowth();var u=new Map;p=$jscomp.makeIterator(l);for(m=p.next();!m.done;m=p.next())m=m.value,u.set(m,b.getPopulation(m));l.some(function(a){return r.get(a)>u.get(a)})&&g.appendChild(k.makeHeader("Predicted Population Decline:"));l=$jscomp.makeIterator(l);for(m=l.next();!m.done;m=l.next())m=m.value,p=r.get(m),q=u.get(m),p-=q,0<p&&g.appendChild(k.makePara(p+" "+m.name+" will die from lack of "+m.survivalCost.resource.name+"!",["population-death-label"]));k.fillHTML(this.html,
[k.makePara("Resource Production Report",["production-screen-label"]),k.makePara("Available workers at start of next production cycle: "+this.run.inventory.getAvailableWorkers(),["production-screen-label"]),k.makePara("Resources available at start of next production cycle:",["production-screen-label"]),this.renderInventory(this.run.inventory),k.makePara("Resource generation in next production cycle:",["production-screen-label"]),e,k.makePara("Resource conversion in next production cycle:",["production-screen-label"]),
c,k.makePara("Unused workers at end of next production cycle: "+b.getAvailableWorkers(),["production-screen-label"]),f,g,k.makePara("Resources available at end of next production cycle:",["production-screen-label"]),this.renderInventory(b),k.makeButton("Back",function(){L.show(new ya(a.run))},["production-screen-back-button"])])};Na.prototype.renderInventory=function(a){a=a.getInventoryStrings().map(function(a){return k.makePara(a)});0===a.length&&a.push(k.makePara("(none)"));return k.makeDivContaining(a,
["production-screen-inventory"])};Na.prototype.renderConversion=function(a,b){var d=this,c=k.makeDiv(["flex-horizontal"]),e=a.toString(),f="conversion-description-normal";a.enabled?b||(e="(cannot afford) "+a.toString(),f="conversion-description-cannot-afford"):(e="(disabled) "+a.toString(),f="conversion-description-disabled");b=k.makePara(e,[f,"conversion-description"]);b=k.makeDivContaining([b],["conversion-description-box"]);c.appendChild(b);c.appendChild(k.makeButton("Toggle",function(){d.toggle(a)}));
return c};Na.prototype.shiftCostlyConversion=function(a,b){this.run.shiftCostlyConversionPriority(a,b);this.refresh()};Na.prototype.toggle=function(a){a.enabled=!a.enabled;this.refresh()};var Nb=function(a){this.run=a;this.html=k.makeDiv();this.refresh()};Nb.prototype.refresh=function(){var a=this,b=k.makeHeader("Available Research Projects"),c=this.run.getResearchOptions(),e=m.values().filter(function(a){return c.some(function(b){return b.researchCost.resource===a})}),f=k.makeDiv();0!==e.length&&
(f.appendChild(k.makeHeader("Available Research Resources")),e.forEach(function(b){return f.appendChild(k.makePara(b.name+": "+a.run.inventory.getResourceQuantity(b)))}));e=k.makeDivContaining(c.map(function(b){return a.renderTechOption(b)}));0===c.length&&(b=k.makeDiv());var g=k.makeHeader("Previous Research Projects"),l=this.run.getUnlockedTechnologies().filter(function(a){return a.visible}).map(function(a){return k.makePara(a.name)});0===l.length&&(g=k.makeDiv());var p=k.makeButton("Back",function(){L.show(new ya(a.run))},
[]);k.fillHTML(this.html,[f,b,e,g].concat($jscomp.arrayFromIterable(l),[p]))};Nb.prototype.renderTechOption=function(a){for(var b=this,c=k.makeDivContaining([k.makePara(a.name),k.makePara(a.description),k.makePara("Development cost: "+a.researchCost)]),e=0,f=$jscomp.makeIterator(a.requiredTechs),g=f.next();!g.done;g=f.next())g=g.value,this.run.hasUnlockedTechnology(g)||(e++,c.appendChild(k.makePara("Requires "+g.name+" research")));e=0===e&&this.run.inventory.canAfford([a.researchCost]);c.appendChild(k.makeButton("Conduct Research",
function(){b.run.unlockTechnology(a);b.refresh()},[],e?"enabled":"disabled"));return c};var nc=function(a){this.html=k.makeDiv(["world-screen-header"]);this.run=a;this.refresh()};nc.prototype.refresh=function(){var a=this,b=k.makeButton("Quit Game",function(){L.show(new Ua)}),c=k.makeButton("Next Turn",function(){var b=new mb(a.run);L.show(b);b.startLoading()}),e=k.makeButton("Manage Production",function(){L.show(new Na(a.run))}),f=k.makeButton("Research Projects",function(){L.show(new Nb(a.run))}),
g=this.run.getCurrentQuestHint(),l=this.run.getCurrentQuestDescription();g=k.makePara("Objective: "+(g?l+"\n(hint: "+g+")":l),["world-screen-quest-description"]);l=this.run.getPreviousQuestDescription();this.run.questCompletionShown||(g=k.makePara("Completed: "+l,["world-screen-quest-description","quest-description-emphasis"]),setTimeout(function(){a.refresh()},1500));this.run.questCompletionShown=!0;k.fillHTML(this.html,[b,e,f,c,g])};var ya=function(a){this.mapUI=new M(this,a.world);this.tileSidebar=
new Ja(this,a);this.inventorySidebar=new ec(a);this.header=new nc(a);this.html=k.makeDivContaining([this.header.html,k.makeDivContaining([this.inventorySidebar.html,k.makeDivContaining([this.mapUI.html],["world-screen-map-box"]),this.tileSidebar.html],["world-screen-hbox"])],["flex-vertical"])};ya.prototype.refresh=function(){this.mapUI.refresh();this.tileSidebar.refresh();this.inventorySidebar.refresh();this.header.refresh()};ya.prototype.handleKeyDown=function(a){this.mapUI.handleKeyDown(a)};ya.prototype.changeSidebarTile=
function(a){this.tileSidebar.changeTile(a)};var Ca=function(a){this.width=a.worldWidth;this.height=a.worldHeight;this.grid=Array(this.height);for(var b=0;b<this.height;b++){this.grid[b]=Array(this.width);for(var c=0;c<this.width;c++)this.grid[b][c]=new z(new D(c,b))}b=Ha.intBetween(a.minMountains,a.maxMountains);for(c=0;c<b;c++){var e=this.getTiles().filter(function(a){return a instanceof z});e=Ha.fromArray(e).position;this.placeTile(new ba(e))}a=$jscomp.makeIterator(a.nonrandomTiles);for(b=a.next();!b.done;b=
a.next())this.placeTile(b.value)};Ca.prototype.placeTile=function(a){this.grid[a.position.y][a.position.x]=a};Ca.prototype.getTiles=function(){return Ia.flatten(this.grid)};Ca.prototype.getTilesInRectangle=function(a,b,c,e){0>b&&(b=0);0>a&&(a=0);var d=[];b=this.grid.slice(b,b+e);b=$jscomp.makeIterator(b);for(e=b.next();!e.done;e=b.next()){e=e.value.slice(a,a+c);e=$jscomp.makeIterator(e);for(var f=e.next();!f.done;f=e.next())d.push(f.value)}return d};Ca.prototype.getTileAtCoordinates=function(a){return this.grid[a.y][a.x]};
Ca.prototype.getTilesInCircle=function(a,b){return this.getTiles().filter(function(d){return a.distanceFrom(d.position)<=b})};Ca.prototype.getPopulationCapacity=function(a){for(var b=0,c=$jscomp.makeIterator(this.getTiles()),e=c.next();!e.done;e=c.next())e=e.value,e.populationCapacity&&e.populationCapacity.species===a&&(b+=e.populationCapacity.capacity);return b};var ka=function(){this.map=new Map([])};ka.prototype.add=function(a,b){this.set(a,this.get(a)+b)};ka.prototype.remove=function(a,b){this.add(a,
-1*b)};ka.prototype.get=function(a){return this.map.get(a)||0};ka.prototype.set=function(a,b){if(0>b)throw"tried to set quantity to negative value";0===b?this.map.delete(a):this.map.set(a,b)};ka.prototype.getSum=function(){return Array.from(this.map.values()).reduce(function(a,b){return a+b},0)};ka.prototype.positiveQuantityKeys=function(){return Array.from(this.map.keys())};ka.prototype.clone=function(){for(var a=new ka,b=$jscomp.makeIterator(this.positiveQuantityKeys()),c=b.next();!c.done;c=b.next())c=
c.value,a.add(c,this.get(c));return a};var y=function(a){this.world=a;this.resourceQuantities=new ka;this.populationQuantities=new ka;this.availableWorkers=0};y.prototype.addResource=function(a,b){this.resourceQuantities.add(a,b)};y.prototype.removeResource=function(a,b){this.resourceQuantities.remove(a,b)};y.prototype.getResourceQuantity=function(a){return this.resourceQuantities.get(a)||0};y.prototype.addWorkers=function(a,b){this.populationQuantities.add(a,b);this.populationQuantities.set(a,A(0,
this.populationQuantities.get(a),this.world.getPopulationCapacity(a)))};y.prototype.releaseWorkers=function(){this.availableWorkers=this.populationQuantities.getSum()};y.prototype.occupyWorkers=function(a){if(this.availableWorkers<a)throw"insufficient workers";if(0>a)throw"tried to occupy a negative number of workers";this.availableWorkers-=a};y.prototype.getSpeciesList=function(){return this.populationQuantities.positiveQuantityKeys()};y.prototype.getPopulation=function(a){return this.populationQuantities.get(a)};
y.prototype.getRequiredWorkerConsumption=function(a){var b=a.survivalCost.quantity*this.populationQuantities.get(a);return new B(a.survivalCost.resource,b)};y.prototype.getProvidedWorkerConsumption=function(a){var b=this.getRequiredWorkerConsumption(a).quantity,c=this.getResourceQuantity(a.survivalCost.resource);return new B(a.survivalCost.resource,Math.min(b,c))};y.prototype.doPopulationGrowth=function(){for(var a=$jscomp.makeIterator(this.getSpeciesList()),b=a.next();!b.done;b=a.next()){b=b.value;
var c=this.getProvidedWorkerConsumption(b);this.payCost([c]);this.populationQuantities.set(b,Math.floor(c.quantity/b.survivalCost.quantity));c=Math.floor(b.growthMultiplier*this.populationQuantities.get(b));this.addWorkers(b,c)}};y.prototype.getTotalPopulation=function(){return this.populationQuantities.getSum()};y.prototype.getAvailableWorkers=function(){return this.availableWorkers};y.prototype.canAfford=function(a){var b=this,c=new Map;a=$jscomp.makeIterator(a);for(var e=a.next();!e.done;e=a.next())e=
e.value,c.set(e.resource,e.quantity+(c.get(e.resource)||0));return Array.from(c.keys()).every(function(a){var d=c.get(a);a=b.getResourceQuantity(a);return d<=a})};y.prototype.hasEnoughWorkers=function(a){return this.availableWorkers>=a};y.prototype.payCost=function(a){if(this.canAfford(a)){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,this.removeResource(b.resource,b.quantity)}else throw"Cannot afford to pay cost";};y.prototype.getResourceList=function(){var a=this;return m.values().filter(function(b){return 0!==
a.resourceQuantities.get(b)})};y.prototype.getInventoryStrings=function(){var a=this;return this.getResourceList().map(function(b){return b.name+": "+a.getResourceQuantity(b)})};y.prototype.getPopulationStrings=function(){var a=this;return this.populationQuantities.positiveQuantityKeys().map(function(b){return a.populationQuantities.get(b)+" "+b.name})};y.prototype.applyConversions=function(a){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,this.canAfford(b.inputs)&&this.hasEnoughWorkers(b.requiredWorkers)&&
b.enabled){this.payCost(b.inputs);this.occupyWorkers(b.requiredWorkers);b=$jscomp.makeIterator(b.outputs);for(var c=b.next();!c.done;c=b.next())c=c.value,this.addResource(c.resource,c.quantity)}};y.prototype.clone=function(){var a=new y(this.world);a.resourceQuantities=this.resourceQuantities.clone();a.populationQuantities=this.populationQuantities.clone();a.availableWorkers=this.availableWorkers;return a};var Ob=function(a,b,c,e,f){this.nonrandomTiles=a;this.worldWidth=b;this.worldHeight=c;this.minMountains=
e;this.maxMountains=f};Ob.standardWorldParameters=function(){var a=[new z(new D(0,0)),new z(new D(1,0)),new z(new D(2,0)),new ba(new D(0,1)),new ba(new D(1,1)),new ba(new D(2,1)),new z(new D(0,2)),new z(new D(1,2)),new z(new D(2,2)),new z(new D(0,3)),new qa(new D(1,3)),new z(new D(2,3)),new z(new D(0,4)),new z(new D(1,4)),new z(new D(2,4))];return new Ob(a,20,20,20,25)};var oc=function(a){this.ending=a;this.html=k.makeDiv();this.refresh()};oc.prototype.refresh=function(){var a=k.makeHeader(this.ending.title),
b=k.makePara(this.ending.description),c=k.makeButton("Quit Game",function(){L.show(new Ua)});k.fillHTML(this.html,[a,b,c])};var S=function(){this.turnNumber=1;this.prevQuestDescription="";this.questCompletionShown=!0;this.completedTechs=[];this.world=new Ca(Ob.standardWorldParameters());this.inventory=new y(this.world);this.questStage=Rc};S.prototype.getCurrentQuestDescription=function(){return this.questStage.description};S.prototype.getCurrentQuestHint=function(){return this.questStage.hint};S.prototype.getPreviousQuestDescription=
function(){return this.prevQuestDescription};S.prototype.setQuestStage=function(a){this.questStage=a};S.prototype.getUnorderedConversions=function(){return Ia.flatten(this.world.getTiles().map(function(a){return a.resourceConversions}))};S.prototype.getResourceConversions=function(){var a=this.getUnorderedConversions(),b=Ia.partition(a,function(a){return a.isFree()});a=b.yes;b=b.no;a.sort(function(a,b){return a.priority-b.priority});b.sort(function(a,b){return a.priority-b.priority});return{free:a,
costly:b}};S.prototype.getAllResourceConversions=function(){var a=this.getUnorderedConversions();a.sort(function(a,b){return a.priority-b.priority});return a};S.prototype.updateQuestState=function(){var a=this.questStage.updatedStage(this);a!==this.questStage&&(this.prevQuestDescription=this.questStage.description,this.questCompletionShown=!1,this.questStage=a);this.questStage.endState&&L.show(new oc(this.questStage.endState))};S.prototype.hasUnlockedTechnology=function(a){return this.completedTechs.includes(a)};
S.prototype.unlockTechnology=function(a){this.hasUnlockedTechnology(a)||this.completedTechs.push(a)};S.prototype.getUnlockedTechnologies=function(){return this.completedTechs};S.prototype.getResearchOptions=function(){var a=this;return cc.filter(function(a){return a.visible}).filter(function(b){return b.requiredTechs.every(function(b){return a.completedTechs.includes(b)})}).filter(function(b){return!a.hasUnlockedTechnology(b)})};S.prototype.completeTurn=function(){this.inventory.applyConversions(this.getAllResourceConversions());
this.inventory.releaseWorkers();this.inventory.doPopulationGrowth();this.turnNumber++;this.updateQuestState()};S.prototype.shiftCostlyConversionPriority=function(a,b){if(!(a===b||0>a)){var c=this.getResourceConversions().costly;if(!(b>=c.length)){var d=c[b].priority;if(a<b)for(;b>a;b--)c[b].priority=c[b-1].priority;else for(;b<a;b++)c[b].priority=c[b+1].priority;c[a].priority=d}}};var Ua=function(){this.html=k.makeDiv(["main-menu"]);this.refresh()};Ua.prototype.refresh=function(){k.fillHTML(this.html,
[k.makeHeader("Aurora",1),k.makeDivContaining([k.makeButton("start_game",function(){var a=new S;p(a);L.show(new ya(a))}),k.makeButton("display_credits",function(){return L.show(new ac)})],["main-menu-options"])])};window.onload=function(){console.log("Script Loaded");g().then(function(){L.show(new Ua)},function(){})}}]);}).call(this || window)
</script><script type="text/javascript">(function(){'use strict';}).call(this || window)
</script></body> </html> 