<!doctype html> <html lang=en dir=ltr> <head> <meta charset=utf-8> <title>Aurora</title> <style type="text/css">.main-menu{display:flex;flex-direction:column}.main-menu h1{font-size:40pt;margin:0;padding:0}.main-menu-options button{display:flex;flex-direction:column}.main-menu button{font-size:24pt;border:none;margin:0;padding:0}.main-menu button:hover{font-size:30pt}.main-menu button:active{color:grey}.credits h1{font-size:24pt;margin-bottom:10pt}.credits-container{display:flex;flex-direction:row}.credits-names-column{margin-right:24pt}.credits-name,.credits-roles{font-size:20pt;margin-top:0;margin-bottom:5pt}.credits button{margin-top:10pt;font-size:20pt}.world-screen-header{display:flex;flex-direction:row;margin:0;min-height:60px}.world-screen-quest-description{font-size:16px;padding-right:10px;padding-top:0;padding-bottom:0}.quest-description-emphasis{color:#408040;font-weight:700}.world-screen-hbox{margin:0;display:flex;flex-direction:row}.world-screen-map-box{height:100%;width:100%}.map-canvas{width:100%;margin:0}.world-screen-sidebar{background-color:#000;width:20%;padding:20px;font-size:16px;overflow-y:auto;height:calc(100vh - 125px)}.project-requirement-met{color:#fff}.project-requirement-unmet{color:tomato}.world-screen-inventory{width:20%;margin:10px;font-size:16px}.production-screen{padding-left:10pt}.production-screen-label{font-size:20pt}.production-screen-inventory{font-size:16pt;line-height:0;padding:1pt;outline:solid #fff;width:50%}.conversion-description{margin:0;font-size:16pt;text-align:left}.conversion-description-box{width:50%;border:2px solid #fff}.conversion-description-normal{color:#fff}.conversion-description-cannot-afford{color:tomato}.conversion-description-disabled{color:#ff0}.population-consumption-met{font-size:16pt}.population-consumption-unmet,.population-death-label{font-size:16pt;color:tomato}.production-screen-back-button{font-size:20pt;margin-top:20pt}@keyframes loading-bar{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.transition-quote-panel{margin-top:150px;margin-right:auto;margin-left:auto;font-size:16px;width:420px}.transition-attribution{margin-left:50px}.transition-loading-area{text-align:center}.transition-loading-bar{margin-right:auto;margin-left:auto;width:50px;height:50px;border-radius:50%;border-color:#fff transparent;border-style:solid;border-width:5px;animation-name:loading-bar;animation-duration:1.25s;animation-iteration-count:infinite;animation-timing-function:ease}.transition-loading-area.loading .transition-loading-bar{background-size:80% 100%}.transition-loading-area.loaded .transition-loading-bar{background-size:100% 100%}:root,button{background-color:#000;color:#fff;font-family:monospace}button{font-size:18px}button:focus{outline:0}button:disabled,button[disabled]{color:grey;border-color:grey}.flex-horizontal{display:flex;flex-direction:row}.flex-vertical{display:flex;flex-direction:column}.fill-horizontal{width:100%;font-family:serif}.fill-vertical{height:100%}img.emoji{height:1em;width:1em;margin:0 .05em 0 .1em;vertical-align:-.1em}</style></head> <body> <div id=rootdiv> <p>Loading scripts...</p> </div> <script type="text/javascript">(function(){/*
 MIT
 Copyright Twitter Inc. and other contributors. Licensed under MIT */
'use strict';var $jscomp$templatelit$1=["\n                This is a multiline that does not\n                start with indentation"];$jscomp$templatelit$1.raw=$jscomp$templatelit$1.slice();var $jscomp$templatelit$0=["\n                    Multiline versions are also possible,\n                and they can use indentation.\n\n                    Line breaks are also supported."];$jscomp$templatelit$0.raw=$jscomp$templatelit$0.slice();var $jscomp=$jscomp||{};$jscomp.scope={};
$jscomp.arrayIteratorImpl=function(b){var d=0;return function(){return d<b.length?{done:!1,value:b[d++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,d,g){b!=Array.prototype&&b!=Object.prototype&&(b[d]=g.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(b,d){this.$jscomp$symbol$id_=b;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:d})};
$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function b(g){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(g||"")+"_"+d++,g)}var d=0;return b}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.asyncIterator;b||(b=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};
$jscomp.makeIterator=function(b){var d="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return d?d.call(b):$jscomp.arrayIterator(b)};$jscomp.arrayFromIterator=function(b){for(var d,g=[];!(d=b.next()).done;)g.push(d.value);return g};$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(b){var d=function(){};d.prototype=b;return new d};
$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0},d={};try{return d.__proto__=b,d.a}catch(g){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(b,d){b.__proto__=d;if(b.__proto__!==d)throw new TypeError(b+" is not extensible");return b}:null;
$jscomp.inherits=function(b,d){b.prototype=$jscomp.objectCreate(d.prototype);b.prototype.constructor=b;if($jscomp.setPrototypeOf){var g=$jscomp.setPrototypeOf;g(b,d)}else for(g in d)if("prototype"!=g)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(d,g);e&&Object.defineProperty(b,g,e)}else b[g]=d[g];b.superClass_=d.prototype};$jscomp.generator={};
$jscomp.generator.ensureIteratorResultIsObject_=function(b){if(!(b instanceof Object))throw new TypeError("Iterator result "+b+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(b){this.yieldResult=b};
$jscomp.generator.Context.prototype.throw_=function(b){this.abruptCompletion_={exception:b,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(b){this.abruptCompletion_={return:b};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(b){this.abruptCompletion_={jumpTo:b};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(b,d){this.nextAddress=d;return{value:b}};
$jscomp.generator.Context.prototype.yieldAll=function(b,d){b=$jscomp.makeIterator(b);var g=b.next();$jscomp.generator.ensureIteratorResultIsObject_(g);if(g.done)this.yieldResult=g.value,this.nextAddress=d;else return this.yieldAllIterator_=b,this.yield(g.value,d)};$jscomp.generator.Context.prototype.jumpTo=function(b){this.nextAddress=b};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(b,d){this.catchAddress_=b;void 0!=d&&(this.finallyAddress_=d)};$jscomp.generator.Context.prototype.setFinallyBlock=function(b){this.catchAddress_=0;this.finallyAddress_=b||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(b,d){this.nextAddress=b;this.catchAddress_=d||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(b){this.catchAddress_=b||0;b=this.abruptCompletion_.exception;this.abruptCompletion_=null;return b};$jscomp.generator.Context.prototype.enterFinallyBlock=function(b,d,g){g?this.finallyContexts_[g]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=b||0;this.finallyAddress_=d||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(b,d){d=this.finallyContexts_.splice(d||0)[0];if(d=this.abruptCompletion_=this.abruptCompletion_||d){if(d.isException)return this.jumpToErrorHandler_();void 0!=d.jumpTo&&this.finallyAddress_<d.jumpTo?(this.nextAddress=d.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=b};$jscomp.generator.Context.prototype.forIn=function(b){return new $jscomp.generator.Context.PropertyIterator(b)};
$jscomp.generator.Context.PropertyIterator=function(b){this.object_=b;this.properties_=[];for(var d in b)this.properties_.push(d);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var b=this.properties_.pop();if(b in this.object_)return b}return null};$jscomp.generator.Engine_=function(b){this.context_=new $jscomp.generator.Context;this.program_=b};
$jscomp.generator.Engine_.prototype.next_=function(b){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,b,this.context_.next_);this.context_.next_(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(b){this.context_.start_();var d=this.context_.yieldAllIterator_;if(d)return this.yieldAllStep_("return"in d?d["return"]:function(b){return{value:b,done:!0}},b,this.context_.return);this.context_.return(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(b){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],b,this.context_.next_);this.context_.throw_(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(b,d,g){try{var e=b.call(this.context_.yieldAllIterator_,d);$jscomp.generator.ensureIteratorResultIsObject_(e);if(!e.done)return this.context_.stop_(),e;var k=e.value}catch(t){return this.context_.yieldAllIterator_=null,this.context_.throw_(t),this.nextStep_()}this.context_.yieldAllIterator_=null;g.call(this.context_,k);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var b=this.program_(this.context_);if(b)return this.context_.stop_(),{value:b.value,done:!1}}catch(d){this.context_.yieldResult=void 0,this.context_.throw_(d)}this.context_.stop_();if(this.context_.abruptCompletion_){b=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(b.isException)throw b.exception;return{value:b.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(b){this.next=function(d){return b.next_(d)};this.throw=function(d){return b.throw_(d)};this.return=function(d){return b.return_(d)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(b,d){d=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(d));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(d,b.prototype);return d};
$jscomp.polyfill=function(b,d,g,e){if(d){g=$jscomp.global;b=b.split(".");for(e=0;e<b.length-1;e++){var k=b[e];k in g||(g[k]={});g=g[k]}b=b[b.length-1];e=g[b];d=d(e);d!=e&&null!=d&&$jscomp.defineProperty(g,b,{configurable:!0,writable:!0,value:d})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(b){function d(){this.batch_=null}function g(b){return b instanceof k?b:new k(function(d,e){d(b)})}if(b&&!$jscomp.FORCE_POLYFILL_PROMISE)return b;d.prototype.asyncExecute=function(b){if(null==this.batch_){this.batch_=[];var d=this;this.asyncExecuteFunction(function(){d.executeBatch_()})}this.batch_.push(b)};var e=$jscomp.global.setTimeout;d.prototype.asyncExecuteFunction=function(b){e(b,0)};d.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var b=
this.batch_;this.batch_=[];for(var d=0;d<b.length;++d){var e=b[d];b[d]=null;try{e()}catch(G){this.asyncThrow_(G)}}}this.batch_=null};d.prototype.asyncThrow_=function(b){this.asyncExecuteFunction(function(){throw b;})};var k=function(b){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var d=this.createResolveAndReject_();try{b(d.resolve,d.reject)}catch(J){d.reject(J)}};k.prototype.createResolveAndReject_=function(){function b(b){return function(g){e||(e=!0,b.call(d,g))}}var d=this,e=!1;
return{resolve:b(this.resolveTo_),reject:b(this.reject_)}};k.prototype.resolveTo_=function(b){if(b===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof k)this.settleSameAsPromise_(b);else{a:switch(typeof b){case "object":var d=null!=b;break a;case "function":d=!0;break a;default:d=!1}d?this.resolveToNonPromiseObj_(b):this.fulfill_(b)}};k.prototype.resolveToNonPromiseObj_=function(b){var d=void 0;try{d=b.then}catch(J){this.reject_(J);return}"function"==typeof d?
this.settleSameAsThenable_(d,b):this.fulfill_(b)};k.prototype.reject_=function(b){this.settle_(2,b)};k.prototype.fulfill_=function(b){this.settle_(1,b)};k.prototype.settle_=function(b,d){if(0!=this.state_)throw Error("Cannot settle("+b+", "+d+"): Promise already settled in state"+this.state_);this.state_=b;this.result_=d;this.executeOnSettledCallbacks_()};k.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=0;b<this.onSettledCallbacks_.length;++b)t.asyncExecute(this.onSettledCallbacks_[b]);
this.onSettledCallbacks_=null}};var t=new d;k.prototype.settleSameAsPromise_=function(b){var d=this.createResolveAndReject_();b.callWhenSettled_(d.resolve,d.reject)};k.prototype.settleSameAsThenable_=function(b,d){var e=this.createResolveAndReject_();try{b.call(d,e.resolve,e.reject)}catch(G){e.reject(G)}};k.prototype.then=function(b,d){function e(b,d){return"function"==typeof b?function(d){try{g(b(d))}catch(Va){N(Va)}}:d}var g,N,Kb=new k(function(b,d){g=b;N=d});this.callWhenSettled_(e(b,g),e(d,N));
return Kb};k.prototype.catch=function(b){return this.then(void 0,b)};k.prototype.callWhenSettled_=function(b,d){function e(){switch(g.state_){case 1:b(g.result_);break;case 2:d(g.result_);break;default:throw Error("Unexpected state: "+g.state_);}}var g=this;null==this.onSettledCallbacks_?t.asyncExecute(e):this.onSettledCallbacks_.push(e)};k.resolve=g;k.reject=function(b){return new k(function(d,e){e(b)})};k.race=function(b){return new k(function(d,e){for(var G=$jscomp.makeIterator(b),N=G.next();!N.done;N=
G.next())g(N.value).callWhenSettled_(d,e)})};k.all=function(b){var d=$jscomp.makeIterator(b),e=d.next();return e.done?g([]):new k(function(b,N){function G(d){return function(e){k[d]=e;J--;0==J&&b(k)}}var k=[],J=0;do k.push(void 0),J++,g(e.value).callWhenSettled_(G(k.length-1),N),e=d.next();while(!e.done)})};return k},"es6","es3");
$jscomp.iteratorFromArray=function(b,d){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var g=0,e={next:function(){if(g<b.length){var k=g++;return{value:d(k,b[k]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");
$jscomp.polyfill("Math.hypot",function(b){return b?b:function(b){if(2>arguments.length)return arguments.length?Math.abs(arguments[0]):0;var d,e,k;for(d=k=0;d<arguments.length;d++)k=Math.max(k,Math.abs(arguments[d]));if(1e+100<k||1e-100>k){if(!k)return k;for(d=e=0;d<arguments.length;d++){var t=Number(arguments[d])/k;e+=t*t}return Math.sqrt(e)*k}for(d=e=0;d<arguments.length;d++)t=Number(arguments[d]),e+=t*t;return Math.sqrt(e)}},"es6","es3");
$jscomp.polyfill("Array.prototype.values",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b,g){return g})}},"es8","es3");$jscomp.checkStringArgs=function(b,d,g){if(null==b)throw new TypeError("The 'this' value for String.prototype."+g+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");return b+""};
$jscomp.polyfill("String.prototype.repeat",function(b){return b?b:function(b){var d=$jscomp.checkStringArgs(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var e="";b;)if(b&1&&(e+=d),b>>>=1)d+=d;return e}},"es6","es3");$jscomp.owns=function(b,d){return Object.prototype.hasOwnProperty.call(b,d)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(b,d){for(var g=1;g<arguments.length;g++){var e=arguments[g];if(e)for(var k in e)$jscomp.owns(e,k)&&(b[k]=e[k])}return b};$jscomp.polyfill("Object.assign",function(b){return b||$jscomp.assign},"es6","es3");
$jscomp.polyfill("Array.from",function(b){return b?b:function(b,g,e){g=null!=g?g:function(b){return b};var d=[],t="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof t){b=t.call(b);for(var v=0;!(t=b.next()).done;)d.push(g.call(e,t.value,v++))}else for(t=b.length,v=0;v<t;v++)d.push(g.call(e,b[v],v));return d}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var b={},d=Object.create(new $jscomp.global.Proxy(b,{get:function(g,e,k){return g==b&&"q"==e&&k==d}}));return!0===d.q}catch(g){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.polyfill("WeakMap",function(b){function d(){if(!b||!Object.seal)return!1;try{var d=Object.seal({}),e=Object.seal({}),g=new b([[d,2],[e,3]]);if(2!=g.get(d)||3!=g.get(e))return!1;g.delete(d);g.set(e,4);return!g.has(d)&&4==g.get(e)}catch(ha){return!1}}function g(){}function e(b){var d=typeof b;return"object"===d&&null!==b||"function"===d}function k(b){if(!$jscomp.owns(b,v)){var d=new g;$jscomp.defineProperty(b,v,{value:d})}}function t(b){var d=Object[b];d&&(Object[b]=function(b){if(b instanceof
g)return b;k(b);return d(b)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(d())return b;var v="$jscomp_hidden_"+Math.random();t("freeze");t("preventExtensions");t("seal");var xa=0,J=function(b){this.id_=(xa+=Math.random()+1).toString();if(b){b=$jscomp.makeIterator(b);for(var d;!(d=b.next()).done;)d=d.value,this.set(d[0],d[1])}};J.prototype.set=function(b,d){if(!e(b))throw Error("Invalid WeakMap key");k(b);if(!$jscomp.owns(b,v))throw Error("WeakMap key fail: "+
b);b[v][this.id_]=d;return this};J.prototype.get=function(b){return e(b)&&$jscomp.owns(b,v)?b[v][this.id_]:void 0};J.prototype.has=function(b){return e(b)&&$jscomp.owns(b,v)&&$jscomp.owns(b[v],this.id_)};J.prototype.delete=function(b){return e(b)&&$jscomp.owns(b,v)&&$jscomp.owns(b[v],this.id_)?delete b[v][this.id_]:!1};return J},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(b){function d(){if($jscomp.ASSUME_NO_NATIVE_MAP||!b||"function"!=typeof b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{var d=Object.seal({x:4}),e=new b($jscomp.makeIterator([[d,"s"]]));if("s"!=e.get(d)||1!=e.size||e.get({x:4})||e.set({x:4},"t")!=e||2!=e.size)return!1;var g=e.entries(),k=g.next();if(k.done||k.value[0]!=d||"s"!=k.value[1])return!1;k=g.next();return k.done||4!=k.value[0].x||"t"!=k.value[1]||!g.next().done?!1:!0}catch(ha){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(d())return b;$jscomp.initSymbolIterator();var g=new WeakMap,e=function(b){this.data_={};this.head_=v();this.size=0;if(b){b=$jscomp.makeIterator(b);for(var d;!(d=b.next()).done;)d=d.value,this.set(d[0],d[1])}};e.prototype.set=function(b,d){b=0===b?0:b;var e=k(this,b);e.list||(e.list=this.data_[e.id]=[]);e.entry?e.entry.value=d:(e.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:b,
value:d},e.list.push(e.entry),this.head_.previous.next=e.entry,this.head_.previous=e.entry,this.size++);return this};e.prototype.delete=function(b){b=k(this,b);return b.entry&&b.list?(b.list.splice(b.index,1),b.list.length||delete this.data_[b.id],b.entry.previous.next=b.entry.next,b.entry.next.previous=b.entry.previous,b.entry.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=v();this.size=0};e.prototype.has=function(b){return!!k(this,b).entry};
e.prototype.get=function(b){return(b=k(this,b).entry)&&b.value};e.prototype.entries=function(){return t(this,function(b){return[b.key,b.value]})};e.prototype.keys=function(){return t(this,function(b){return b.key})};e.prototype.values=function(){return t(this,function(b){return b.value})};e.prototype.forEach=function(b,d){for(var e=this.entries(),g;!(g=e.next()).done;)g=g.value,b.call(d,g[1],g[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var k=function(b,d){var e=d&&typeof d;"object"==
e||"function"==e?g.has(d)?e=g.get(d):(e=""+ ++xa,g.set(d,e)):e="p_"+d;var k=b.data_[e];if(k&&$jscomp.owns(b.data_,e))for(b=0;b<k.length;b++){var t=k[b];if(d!==d&&t.key!==t.key||d===t.key)return{id:e,list:k,index:b,entry:t}}return{id:e,list:k,index:-1,entry:void 0}},t=function(b,d){var e=b.head_;return $jscomp.iteratorPrototype(function(){if(e){for(;e.head!=b.head_;)e=e.previous;for(;e.next!=e.head;)return e=e.next,{done:!1,value:d(e)};e=null}return{done:!0,value:void 0}})},v=function(){var b={};return b.previous=
b.next=b.head=b},xa=0;return e},"es6","es3");$jscomp.polyfill("Object.is",function(b){return b?b:function(b,g){return b===g?0!==b||1/b===1/g:b!==b&&g!==g}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(b){return b?b:function(b,g){var d=this;d instanceof String&&(d=String(d));var k=d.length;g=g||0;for(0>g&&(g=Math.max(g+k,0));g<k;g++){var t=d[g];if(t===b||Object.is(t,b))return!0}return!1}},"es7","es3");
$jscomp.polyfill("String.prototype.includes",function(b){return b?b:function(b,g){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,g||0)}},"es6","es3");
(function(b){function d(e){if(g[e])return g[e].exports;var k=g[e]={i:e,l:!1,exports:{}};b[e].call(k.exports,k,k.exports,d);k.l=!0;return k.exports}var g={};d.m=b;d.c=g;d.d=function(b,g,t){d.o(b,g)||Object.defineProperty(b,g,{enumerable:!0,get:t})};d.r=function(b){$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!==typeof Symbol&&Symbol.toStringTag&&($jscomp.initSymbol(),Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}));Object.defineProperty(b,"__esModule",{value:!0})};d.t=function(b,
g){g&1&&(b=d(b));if(g&8||g&4&&"object"===typeof b&&b&&b.__esModule)return b;var e=Object.create(null);d.r(e);Object.defineProperty(e,"default",{enumerable:!0,value:b});if(g&2&&"string"!=typeof b)for(var k in b)d.d(e,k,function(d){return b[d]}.bind(null,k));return e};d.n=function(b){var e=b&&b.__esModule?function(){return b["default"]}:function(){return b};d.d(e,"a",e);return e};d.o=function(b,d){return Object.prototype.hasOwnProperty.call(b,d)};d.p="";return d(d.s=3)})([function(b,d,g){function e(b){for(var d=
[],e,g=0,k=0;k<b.length;)e=b.charCodeAt(k++),g?(d.push((65536+(g-55296<<10)+(e-56320)).toString(16)),g=0):55296<e&&56319>=e?g=e:d.push(e.toString(16));return d}Object.defineProperty(d,"__esModule",{value:!0});d.TypeName=void 0;d.parse=function(b,d){var g=d&&d.assetType?d.assetType:"svg";d=d&&d.buildUrl?d.buildUrl:function(b,d){return"png"===d?"https://twemoji.maxcdn.com/v/latest/72x72/"+b+".png":"https://twemoji.maxcdn.com/v/latest/svg/"+b+".svg"};var v=[];for(k.default.lastIndex=0;;){var C=k.default.exec(b);
if(!C)break;var B=C[0],G=e(J(B)).join("-");v.push({url:G?d(G,g):"",indices:[C.index,k.default.lastIndex],text:B,type:t})}return v};d.toCodePoints=e;var k=(b=g(1))&&b.__esModule?b:{default:b},t=d.TypeName="emoji",v=/\uFE0F/g,xa=String.fromCharCode(8205),J=function(b){return 0>b.indexOf(xa)?b.replace(v,""):b}},function(b,d,g){Object.defineProperty(d,"__esModule",{value:!0});d.default=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g},
,function(b,d,g){function e(a){var c=new Image,f=new Promise(function(f,b){c.onload=function(){return f(c)};c.onerror=function(){return f(c)};c.src=a});fc.push(f);return c}function k(){return Lc(this,void 0,void 0,function c(){return $jscomp.generator.createGenerator(c,function(c){return c.return(Promise.all(fc))})})}function t(a){var c=new Na(a);a=window;a.cheatsAddResource=function(a,b){return c.addResource(a,b)};a.cheatsAddPopulation=function(a,b){return c.addPopulation(a,b)};a.cheatsFreeResources=
function(){return c.freeResources()};a.cheatsLoseGame=function(){return c.loseGame()};a.cheatsWinGame=function(){return c.winGame()};Object.freeze(l);Object.freeze(W);a.Resources=l;a.Species=W}function v(a,c,f){return Math.max(Math.min(c,f),a)}function xa(a,c){for(var f=[],b=1;b<arguments.length;++b)f[b-1]=arguments[b];b=a.reduce(function(a,c,b){return a+c+(f[b]||"")}).replace(/\t/,"    ").replace(/^(?:\r?\n)+|(?:\r?\n)+$/g,"").split(/\r?\n/);var d=b.filter(function(a){return""!==a}).map(function(a){return a.match(/^\s*/)[0].length}),
n=0;0<b.length&&(n=d.reduce(function(a,c){return Math.min(a,c)}));return 0<n?b.map(function(a){return a.substring(n)}).join("\n"):b.join("\n")}function J(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();J="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return J(a)}
function G(){G=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var f=arguments[c],b;for(b in f)Object.prototype.hasOwnProperty.call(f,b)&&(a[b]=f[b])}return a};return G.apply(this,arguments)}function N(a){for(var c=1;c<arguments.length;c++){var f=null!=arguments[c]?arguments[c]:{},b=Object.keys(f);"function"===typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(f).filter(function(a){return Object.getOwnPropertyDescriptor(f,a).enumerable})));b.forEach(function(c){var b=
f[c];c in a?Object.defineProperty(a,c,{value:b,enumerable:!0,configurable:!0,writable:!0}):a[c]=b})}return a}function Kb(a,c){if(null==a)return{};if(null==a)var f={};else{f={};var b=Object.keys(a),d;for(d=0;d<b.length;d++){var n=b[d];0<=c.indexOf(n)||(f[n]=a[n])}}if(Object.getOwnPropertySymbols)for(d=Object.getOwnPropertySymbols(a),n=0;n<d.length;n++)b=d[n],0<=c.indexOf(b)||Object.prototype.propertyIsEnumerable.call(a,b)&&(f[b]=a[b]);return f}function ha(a){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(a)}
function C(a,c,f){a.addEventListener(c,f,!ra&&gc)}function B(a,c,f){a.removeEventListener(c,f,!ra&&gc)}function Va(a,c){if(c){">"===c[0]&&(c=c.substring(1));if(a)try{if(a.matches)return a.matches(c);if(a.msMatchesSelector)return a.msMatchesSelector(c);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(c)}catch(f){}return!1}}function ka(a,c,f,b){if(a){f=f||document;do{if(null!=c&&(">"===c[0]?a.parentNode===f&&Va(a,c):Va(a,c))||b&&a===f)return a;if(a===f)break}while(a=a.host&&a!==document&&a.host.nodeType?
a.host:a.parentNode)}return null}function Y(a,c,f){if(a&&c)if(a.classList)a.classList[f?"add":"remove"](c);else{var b=(" "+a.className+" ").replace(hc," ").replace(" "+c+" "," ");a.className=(b+(f?" "+c:"")).replace(hc," ")}}function u(a,c,f){var b=a&&a.style;if(b){if(void 0===f)return document.defaultView&&document.defaultView.getComputedStyle?f=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(f=a.currentStyle),void 0===c?f:f[c];c in b||-1!==c.indexOf("webkit")||(c="-webkit-"+c);b[c]=
f+("string"===typeof f?"":"px")}}function Wa(a,c){var f="";if("string"===typeof a)f=a;else{do{var b=u(a,"transform");b&&"none"!==b&&(f=b+" "+f)}while(!c&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(f)}function ic(a,c,f){if(a){a=a.getElementsByTagName(c);c=0;var b=a.length;if(f)for(;c<b;c++)f(a[c],c);return a}return[]}function sa(){var a=document.scrollingElement;return a?a:document.documentElement}function O(a,c,f,b,d){if(a.getBoundingClientRect||
a===window){if(a!==window&&a!==sa()){var r=a.getBoundingClientRect();var z=r.top;var e=r.left;var g=r.bottom;var h=r.right;var k=r.height;var l=r.width}else e=z=0,g=window.innerHeight,h=window.innerWidth,k=window.innerHeight,l=window.innerWidth;if((c||f)&&a!==window&&(d=d||a.parentNode,!ra)){do if(d&&d.getBoundingClientRect&&("none"!==u(d,"transform")||f&&"static"!==u(d,"position"))){g=d.getBoundingClientRect();z-=g.top+parseInt(u(d,"border-top-width"));e-=g.left+parseInt(u(d,"border-left-width"));
g=z+r.height;h=e+r.width;break}while(d=d.parentNode)}b&&a!==window&&(b=(a=Wa(d||a))&&a.a,d=a&&a.d,a&&(z/=d,e/=b,l/=b,k/=d,g=z+k,h=e+l));return{top:z,left:e,bottom:g,right:h,width:l,height:k}}}function jc(a,c,f){var b=ya(a,!0);for(a=O(a)[c];b;){c=O(b)[f];if(!("top"===f||"left"===f?a>=c:a<=c))return b;if(b===sa())break;b=ya(b,!1)}return!1}function rb(a,c,f){for(var b=0,d=0,n=a.children;d<n.length;){if("none"!==n[d].style.display&&n[d]!==w.ghost&&n[d]!==w.dragged&&ka(n[d],f.draggable,a,!1)){if(b===c)return n[d];
b++}d++}return null}function Mb(a,c){for(a=a.lastElementChild;a&&(a===w.ghost||"none"===u(a,"display")||c&&!Va(a,c));)a=a.previousElementSibling;return a||null}function da(a,c){var f=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===w.clone||c&&!Va(a,c)||f++;return f}function kc(a){var c=0,f=0,b=sa();if(a){do{var d=Wa(a),n=d.d;c+=a.scrollLeft*d.a;f+=a.scrollTop*n}while(a!==b&&(a=a.parentNode))}return[c,f]}function Mc(a,c){for(var f in a)if(a.hasOwnProperty(f))for(var b in c)if(c.hasOwnProperty(b)&&
c[b]===a[f][b])return Number(f);return-1}function ya(a,c){if(!a||!a.getBoundingClientRect)return sa();var f=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var b=u(a);if(a.clientWidth<a.scrollWidth&&("auto"==b.overflowX||"scroll"==b.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==b.overflowY||"scroll"==b.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(f||c)return a;f=!0}}while(a=a.parentNode);return sa()}function Nb(a,c){return Math.round(a.top)===Math.round(c.top)&&
Math.round(a.left)===Math.round(c.left)&&Math.round(a.height)===Math.round(c.height)&&Math.round(a.width)===Math.round(c.width)}function lc(a,c){return function(){if(!db){var f=arguments;1===f.length?a.call(this,f[0]):a.apply(this,f);db=setTimeout(function(){db=void 0},c)}}}function mc(a,c,f){a.scrollLeft+=c;a.scrollTop+=f}function nc(a){var c=window.Polymer,f=window.jQuery||window.Zepto;return c&&c.dom?c.dom(a).cloneNode(!0):f?f(a).clone(!0)[0]:a.cloneNode(!0)}function Nc(){var a=[],c;return{captureAnimationState:function(){a=
[];this.options.animation&&[].slice.call(this.el.children).forEach(function(c){if("none"!==u(c,"display")&&c!==w.ghost){a.push({target:c,rect:O(c)});var f=N({},a[a.length-1].rect);if(c.thisAnimationDuration){var b=Wa(c,!0);b&&(f.top-=b.f,f.left-=b.e)}c.fromRect=f}})},addAnimationState:function(c){a.push(c)},removeAnimationState:function(c){a.splice(Mc(a,{target:c}),1)},animateAll:function(f){var b=this;if(this.options.animation){var d=!1,n=0;a.forEach(function(a){var c=0,f=a.target,r=f.fromRect,z=
O(f),e=f.prevFromRect,L=f.prevToRect;a=a.rect;var g=Wa(f,!0);g&&(z.top-=g.f,z.left-=g.e);f.toRect=z;f.thisAnimationDuration&&Nb(e,z)&&!Nb(r,z)&&(a.top-z.top)/(a.left-z.left)===(r.top-z.top)/(r.left-z.left)&&(c=Math.sqrt(Math.pow(e.top-a.top,2)+Math.pow(e.left-a.left,2))/Math.sqrt(Math.pow(e.top-L.top,2)+Math.pow(e.left-L.left,2))*b.options.animation);Nb(z,r)||(f.prevFromRect=r,f.prevToRect=z,c||(c=b.options.animation),b.animate(f,a,z,c));c&&(d=!0,n=Math.max(n,c),clearTimeout(f.animationResetTimer),
f.animationResetTimer=setTimeout(function(){f.animationTime=0;f.prevFromRect=null;f.fromRect=null;f.prevToRect=null;f.thisAnimationDuration=null},c),f.thisAnimationDuration=c)});clearTimeout(c);d?c=setTimeout(function(){"function"===typeof f&&f()},n):"function"===typeof f&&f();a=[]}else clearTimeout(c),"function"===typeof f&&f()},animate:function(a,c,b,d){if(d){u(a,"transition","");u(a,"transform","");var f=Wa(this.el),r=(c.left-b.left)/(f&&f.a||1);c=(c.top-b.top)/(f&&f.d||1);a.animatingX=!!r;a.animatingY=
!!c;u(a,"transform","translate3d("+r+"px,"+c+"px,0)");u(a,"transition","transform "+d+"ms"+(this.options.easing?" "+this.options.easing:""));u(a,"transform","translate3d(0,0,0)");"number"===typeof a.animated&&clearTimeout(a.animated);a.animated=setTimeout(function(){u(a,"transition","");u(a,"transform","");a.animated=!1;a.animatingX=!1;a.animatingY=!1},d)}}}}function T(a){var c=N({putSortable:P,cloneEl:y,targetEl:m,rootEl:I,oldIndex:Xa,oldDraggableIndex:eb,newIndex:Z,newDraggableIndex:za},a);a=c.sortable;
var f=c.rootEl,b=c.name,d=c.targetEl,n=c.cloneEl,e=c.toEl,g=c.fromEl,h=c.oldIndex,k=c.newIndex,l=c.oldDraggableIndex,u=c.newDraggableIndex,w=c.originalEvent,p=c.putSortable,x=c.extraEventProperties;if(a=a||f&&f[aa]){var q=a.options,t="on"+b.charAt(0).toUpperCase()+b.substr(1);!window.CustomEvent||ra||fb?(c=document.createEvent("Event"),c.initEvent(b,!0,!0)):c=new CustomEvent(b,{bubbles:!0,cancelable:!0});c.to=e||f;c.from=g||f;c.item=d||f;c.clone=n;c.oldIndex=h;c.newIndex=k;c.oldDraggableIndex=l;c.newDraggableIndex=
u;c.originalEvent=w;c.pullMode=p?p.lastPutMode:void 0;b=N({},x,gb.getEventProperties(b,a));for(var B in b)c[B]=b[B];f&&f.dispatchEvent(c);q[t]&&q[t].call(a,c)}}function w(a,c){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=c=G({},c);a[aa]=this;var f={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,
removeCloneOnHide:!0,direction:function(){return oc(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,c){a.setData("Text",c.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",
fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==w.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};gb.initializePlugins(this,a,f);for(var b in f)b in c||(c[b]=f[b]);pc(c);for(var d in this)"_"===d.charAt(0)&&"function"===typeof this[d]&&(this[d]=this[d].bind(this));if(this.nativeDraggable=c.forceFallback?!1:Oc)this.options.touchStartThreshold=1;c.supportPointer?C(a,"pointerdown",this._onTapStart):(C(a,"mousedown",this._onTapStart),C(a,"touchstart",
this._onTapStart));this.nativeDraggable&&(C(a,"dragover",this),C(a,"dragenter",this));sb.push(this.el);c.store&&c.store.get&&this.sort(c.store.get(this)||[]);G(this,Nc())}function Ob(a,c,f,b,d,n,e,g){var r=a[aa],z=r.options.onMove,L;if(!window.CustomEvent||ra||fb){var h=document.createEvent("Event");h.initEvent("move",!0,!0)}else h=new CustomEvent("move",{bubbles:!0,cancelable:!0});h.to=c;h.from=a;h.dragged=f;h.draggedRect=b;h.related=d||c;h.relatedRect=n||O(c);h.willInsertAfter=g;h.originalEvent=
e;a.dispatchEvent(h);z&&(L=z.call(r,h,e));return L}function Pb(a){a.draggable=!1}function Pc(){Qb=!1}function Qc(a,c,f){f=O(Mb(f.el,f.options.draggable));return c?a.clientX>f.right+10||a.clientX<=f.right&&a.clientY>f.bottom&&a.clientX>=f.left:a.clientX>f.right&&a.clientY>f.top||a.clientX<=f.right&&a.clientY>f.bottom+10}function Rc(a,c,f,b,d,n,e,g){a=b?a.clientY:a.clientX;var r=b?f.height:f.width,z=b?f.top:f.left;f=b?f.bottom:f.right;b=!1;if(!e)if(g&&tb<r*d)if(!hb&&(1===ib?a>z+r*n/2:a<f-r*n/2)&&(hb=
!0),hb)b=!0;else{if(1===ib?a<z+tb:a>f-tb)return-ib}else if(a>z+r*(1-d)/2&&a<f-r*(1-d)/2)return c=da(m)<da(c)?1:-1,c;if(b||e)if(a<z+r*n/2||a>f-r*n/2)return a>z+r/2?1:-1;return 0}function Sc(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var c=a.length,b=0;c--;)b+=a.charCodeAt(c);return b.toString(36)}function Tc(a){ub.length=0;a=a.getElementsByTagName("input");for(var c=a.length;c--;){var b=a[c];b.checked&&ub.push(b)}}function vb(a){return setTimeout(a,0)}function wb(){K.forEach(function(a){clearInterval(a.pid)});
K=[]}function Rb(){}function Sb(){}g.r(d);var Uc=function(){function a(a,c){return document.createTextNode(c?a.replace(w,""):a)}function c(a,c){return"".concat(c.base,c.size,"/",a,c.ext)}function b(a,c){a=a.childNodes;for(var f=a.length,d,r;f--;)d=a[f],r=d.nodeType,3===r?c.push(d):1!==r||"ownerSVGElement"in d||x.test(d.nodeName.toLowerCase())||b(d,c);return c}function d(a){return k(0>a.indexOf(p)?a.replace(w,""):a)}function z(c,f){for(var r=b(c,[]),n=r.length,z,e,L,g,h,qa,k,l,m,qb;n--;){z=!1;L=document.createDocumentFragment();
g=r[n];h=g.nodeValue;for(k=0;qa=u.exec(h);){l=qa.index;l!==k&&L.appendChild(a(h.slice(k,l),!0));qa=qa[0];qb=d(qa);k=l+qa.length;l=f.callback(qb,f);if(qb&&l){m=new Image;m.onerror=f.onerror;m.setAttribute("draggable","false");z=f.attributes(qa,qb);for(e in z)z.hasOwnProperty(e)&&0!==e.indexOf("on")&&!m.hasAttribute(e)&&m.setAttribute(e,z[e]);m.className=f.className;m.alt=qa;m.src=l;z=!0;L.appendChild(m)}m||L.appendChild(a(qa,!1));m=null}z&&(k<h.length&&L.appendChild(a(h.slice(k),!0)),g.parentNode.replaceChild(L,
g))}return c}function n(a,c){return h(a,function(a){var b=a,f=d(a),r=c.callback(f,c),n;if(f&&r){b="<img ".concat('class="',c.className,'" ','draggable="false" ','alt="',a,'"',' src="',r,'"');a=c.attributes(a,f);for(n in a)a.hasOwnProperty(n)&&0!==n.indexOf("on")&&-1===b.indexOf(" "+n+"=")&&(b=b.concat(" ",n,'="',a[n].replace(q,e),'"'));b=b.concat("/>")}return b})}function e(a){return m[a]}function g(){return null}function h(a,c){return String(a).replace(u,c)}function k(a,c){for(var b=[],f,d=0,r=0;r<
a.length;)f=a.charCodeAt(r++),d?(b.push((65536+(d-55296<<10)+(f-56320)).toString(16)),d=0):55296<=f&&56319>=f?d=f:b.push(f.toString(16));return b.join(c||"-")}var l={base:"https://twemoji.maxcdn.com/v/12.1.5/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(a){a="string"===typeof a?parseInt(a,16):a;if(65536>a)return t(a);a-=65536;return t(55296+(a>>10),56320+(a&1023))},toCodePoint:k},onerror:function(){this.parentNode&&this.parentNode.replaceChild(a(this.alt,!1),this)},parse:function(a,
b){b&&"function"!==typeof b||(b={callback:b});var f=b.callback||c,d="function"===typeof b.attributes?b.attributes:g,r="string"===typeof b.base?b.base:l.base,e=b.ext||l.ext,L;(L=b.folder)||(L=b.size||l.size,L="number"===typeof L?L+"x"+L:L);return("string"===typeof a?n:z)(a,{callback:f,attributes:d,base:r,ext:e,size:L,className:b.className||l.className,onerror:b.onerror||l.onerror})},replace:h,test:function(a){u.lastIndex=0;a=u.test(a);u.lastIndex=0;return a}},m={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",
'"':"&quot;"},u=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,
w=/\uFE0F/g,p=String.fromCharCode(8205),q=/[&<>'"]/g,x=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,t=String.fromCharCode;return l}(),Vc=g(0),h;(function(a){function c(a){var c=document.createElement("div");a&&c.classList.add.apply(c.classList,$jscomp.arrayFromIterable(a));return c}function b(a,c,b){a=document.createElement(a);a.innerText=c;b&&a.classList.add.apply(a.classList,$jscomp.arrayFromIterable(b));return a}function d(a){Uc.parse(a,{folder:"svg",ext:".svg"});return a}function z(a){return 0<
Vc.parse(a).length}a.makeDiv=c;a.makeDivContaining=function(a,b){b=c(b);a=$jscomp.makeIterator(a);for(var f=a.next();!f.done;f=a.next())b.appendChild(f.value);return b};a.makeElement=b;a.patchEmoji=d;a.containsEmoji=z;a.makePara=function(a,c){c=b("p",a,c);z(a)&&d(c);return c};a.makeHeader=function(a,c,f){c=b("h"+(void 0===c?1:c),a,f);z(a)&&d(c);return c};a.makeButton=function(a,c,b,f){f=void 0===f?"enabled":f;var r=document.createElement("button");r.type="button";"disabled"===f&&(r.disabled=!0);r.innerText=
a;b&&r.classList.add.apply(r.classList,$jscomp.arrayFromIterable(b));r.onclick=function(a){a.preventDefault();c.call(this,a)};z(a)&&d(r);return r};a.makeCanvas=function(a,c,b){var f=document.createElement("canvas");f.width=a;f.height=c;b&&f.classList.add.apply(f.classList,$jscomp.arrayFromIterable(b));return f};a.fillHTML=function(a,c){a.innerHTML="";c=$jscomp.makeIterator(c);for(var b=c.next();!b.done;b=c.next())a.appendChild(b.value)}})(h||(h={}));var Q;(function(a){var c=document.getElementById("rootdiv"),
b=void 0;a.show=function(a){b=a;h.fillHTML(c,[a.html]);document.onkeydown=function(c){a.handleKeyDown&&a.handleKeyDown(c)};document.onkeyup=function(c){a.handleKeyUp&&a.handleKeyUp(c)}};a.refreshCurrentPage=function(){b&&b.refresh()}})(Q||(Q={}));var Lc=function(a,c,b,d){function f(a){return a instanceof b?a:new b(function(c){c(a)})}return new (b||(b=Promise))(function(b,r){function e(a){try{n(d.next(a))}catch(Lb){r(Lb)}}function z(a){try{n(d["throw"](a))}catch(Lb){r(Lb)}}function n(a){a.done?b(a.value):
f(a.value).then(e,z)}n((d=d.apply(a,c||[])).next())})},fc=[],Wc=e("assets/ui/highlight.png"),Xc=e("assets/tiles/environment/wasteland1.png"),Yc=e("assets/tiles/environment/wasteland2.png"),Zc=e("assets/tiles/environment/wasteland3.png"),$c=e("assets/tiles/environment/wasteland4.png"),ad=e("assets/tiles/environment/wasteland5.png"),bd=e("assets/tiles/environment/mountain.png"),cd=e("assets/tiles/alien/ruins.png"),dd=e("assets/tiles/alien/monolith.png"),ed=e("assets/tiles/construction/hab_site.png"),
fd=e("assets/tiles/construction/lab_site.png"),gd=e("assets/tiles/construction/industry_site.png"),hd=e("assets/tiles/colony/habitat.png"),id=e("assets/tiles/colony/solar_panels.png"),jd=e("assets/tiles/colony/mining_facility.png"),kd=e("assets/tiles/colony/lander.png"),ld=e("assets/tiles/colony/greenhouse.png"),md=e("assets/tiles/colony/mineshaft.png"),qc=e("assets/tiles/roads/cross.png"),rc=e("assets/tiles/roads/horizontal.png"),sc=e("assets/tiles/roads/vertical.png"),nd=e("assets/tiles/roads/corner_bottom_left.png"),
od=e("assets/tiles/roads/corner_bottom_right.png"),pd=e("assets/tiles/roads/corner_top_left.png"),qd=e("assets/tiles/roads/corner_top_right.png"),rd=e("assets/tiles/roads/t_south.png"),sd=e("assets/tiles/roads/t_north.png"),td=e("assets/tiles/roads/t_east.png"),ud=e("assets/tiles/roads/t_west.png"),vd=e("assets/tiles/colony/arcology.png"),wd=e("assets/tiles/colony/nuclear_plant.png"),xd=e("assets/tiles/colony/lab_alignment.png"),yd=e("assets/tiles/colony/lab_engineering.png"),zd=e("assets/tiles/colony/lab_psych.png"),
Ad=e("assets/tiles/colony/lab_xeno.png"),Tb=function(a,c){this.name=a;this.roles=c},tc=[new Tb("Grace Rarer",["Team Lead","Gameplay Programmer"]),new Tb("Prindle",["DevOps"]),new Tb("May Lawver",["Programmer (HTML Composition Code)"])],uc=function(){this.html=h.makeDiv(["credits"]);this.refresh()};uc.prototype.refresh=function(){var a=tc.map(function(a){return h.makePara(a.name,["credits-name"])}),c=tc.map(function(a){return h.makePara(a.roles.join(", "),["credits-roles"])});h.fillHTML(this.html,
[h.makeHeader("Credits",1),h.makeDivContaining([h.makeDivContaining(a,["credits-names-column"]),h.makeDivContaining(c)],["credits-container"]),h.makeButton("Back",function(){return Q.show(new jb)})])};var l=function(a){this.name=a};l.values=function(){return Object.keys(l).map(function(a){return l[a]})};l.Energy=new l("\u26a1 Energy");l.Food=new l("\ud83c\udf2f Food");l.Metal=new l("\u26cf Metal Ore");l.BuildingMaterials=new l("\ud83d\udd29 Construction Parts");l.Electronics=new l("\ud83d\udca1 Electronics");
l.Cavorite=new l("\ud83d\udc8e Cavorite");l.Orichalcum=new l("\ud83e\uddea Orichalcum");l.Superconductor=new l("\ud83e\uddf5 Superconductor");l.SmartMatter=new l("\ud83d\udca0 SmartMatter");l.EngineeringKnowledge=new l("\u2699\ufe0f Engineering Data");l.PsychKnowledge=new l("\ud83e\udde0 Psychological Data");l.AlienKnowledge=new l("\ud83d\udef8 Alien Data");l.AlignmentKnowledge=new l("\ud83d\udcce AI Alignment Data");var p=function(a,c){this.resource=a;this.quantity=c};p.prototype.toString=function(){return this.resource.name+
" x"+this.quantity};var W=function(a,c,b){this.name=a;this.growthMultiplier=c;this.survivalCost=b};W.values=function(){return Object.keys(W).map(function(a){return W[a]})};W.Human=new W("\ud83d\udc69\ud83c\udffb\u200d\ud83d\ude80 Human Colonists",.1,new p(l.Food,1));W.Robot=new W("\ud83e\udd16 Robots",1,new p(l.Energy,.5));var xb=function(a,c){this.requirement=a;this.nextStage=c},Aa=function(a,c,b,d){this.description=a;this.hint=c;this.paths=b;this.endState=d};Aa.prototype.updatedStage=function(a){for(var c=
$jscomp.makeIterator(this.paths),b=c.next();!b.done;b=c.next())if(b=b.value,b.requirement.evaluate(a))return b.nextStage().updatedStage(a);return this};var yb=function(){},kb=function(a,c){this.resource=a;this.minQuantity=c;return this};$jscomp.inherits(kb,yb);kb.prototype.evaluate=function(a){return a.inventory.getResourceQuantity(this.resource)>=this.minQuantity};kb.prototype.toString=function(){return"have at least "+this.minQuantity+" units of "+this.resource.name+" in inventory"};var zb=function(a,
c){this.tileType=a;this.minQuantity=c;return this};$jscomp.inherits(zb,yb);zb.prototype.evaluate=function(a){var c=this;return a.world.getTiles().filter(function(a){return a instanceof c.tileType}).length>=this.minQuantity};zb.prototype.toString=function(){return"have at least "+this.minQuantity+"  "+this.tileType.tileName+" tile"+(1===this.minQuantity?"":"s")};var Ab=function(a){this.minimumPopulation=a;return this};$jscomp.inherits(Ab,yb);Ab.prototype.evaluate=function(a){return a.inventory.getTotalPopulation()>=
this.minimumPopulation};Ab.prototype.toString=function(){return"have a total population of at least "+this.minimumPopulation};var ba=function(a){this.tech=a;return this};$jscomp.inherits(ba,yb);ba.prototype.evaluate=function(a){return a.hasUnlockedTechnology(this.tech)};ba.prototype.toString=function(){return"have the "+this.tech.name+" technology"};var q=function(a){this.position=a;this.possibleProjects=[];this.resourceConversions=[];this.populationCapacity=void 0};q.prototype.getTexture=function(a){return this.texture};
var vc=function(a,c){this.species=a;this.capacity=c},ea=function(a){a=q.call(this,a)||this;a.texture=hd;a.populationCapacity=new vc(W.Human,200);return a};$jscomp.inherits(ea,q);ea.prototype.getTileName=function(){return ea.tileName};ea.prototype.getTileDescription=function(){return ea.tileDescription};ea.tileName="Habitat Dome";ea.tileDescription="A pressurized structure that provides housing, services, and life support for humans";var U=function(a,c,b){this.inputs=a;this.outputs=c;this.enabled=
!0;this.requiredWorkers=b||0;this.isFree()?this.priority=0:(this.priority=U.nextNumber,U.nextNumber++)};U.prototype.toString=function(){var a=this.outputs.map(function(a){return a.toString()}).join(", "),c="Produce "+a;0<this.inputs.length&&(c="Convert "+this.inputs.map(function(a){return a.toString()}).join(", ")+" into "+a);0!==this.requiredWorkers&&(c+=" using "+this.requiredWorkers+" workers");return c};U.prototype.isFree=function(){return 0===this.inputs.length&&!this.requiredWorkers};U.nextNumber=
1;var la=function(a){a=q.call(this,a)||this;a.texture=id;a.resourceConversions=[new U([],[new p(l.Energy,100)])];return a};$jscomp.inherits(la,q);la.prototype.getTileName=function(){return la.tileName};la.prototype.getTileDescription=function(){return la.tileDescription};la.tileName="Photovoltaic Array";la.tileDescription="Converts light from this planet's sun into electrical energy";var E=function(a,c,b,d,e,n){this.title=a;this.projectDescription=c;this.action=b;this.costs=d;this.completionRequirements=
e;this.visibilityRequirements=n};E.prototype.canDo=function(a,c){return c.inventory.canAfford(this.costs)&&this.isVisible(a,c)&&this.completionRequirements.every(function(b){return b.evaluate(c,a)})};E.prototype.isVisible=function(a,c){return this.visibilityRequirements.every(function(b){return b.evaluate(c,a)})};E.prototype.doAction=function(a,c){if(!this.canDo(a,c))throw"tried to do project "+this.title+" without meeting requirements";c.inventory.payCost(this.costs);this.action(a,c)};var A=function(a,
c){this.x=a;this.y=c};A.prototype.toString=function(){return"("+this.x+", "+this.y+")"};A.prototype.distanceFrom=function(a){return Math.hypot(Math.abs(this.x-a.x),Math.abs(this.y-a.y))};var ca=function(a,c,b,d,e){this.name=a;this.description=c;this.requiredTechs=b;this.researchCost=d;this.visible=void 0===e?!0:e};ca.makeUnlockableTechnology=function(a,c,b,d){a=new ca(a,c,b,d,!0);wc.push(a);return a};ca.makeHiddenTechnology=function(a,c,b,d){return new ca(a,c,[],b,void 0===d?!1:d)};var wc=[],xc=ca.makeUnlockableTechnology("Industrial Engineering",
"Approaches for optimizing production processes",[],new p(l.EngineeringKnowledge,25)),lb=ca.makeUnlockableTechnology("Structural Engineering","Techniques for fabricating large structures on the planet's surface",[],new p(l.EngineeringKnowledge,10)),yc=ca.makeUnlockableTechnology("Colonist Behavior Modeling","Simulations of human behavior in the isolated conditions of a deep space colony",[],new p(l.PsychKnowledge,30)),Bd=ca.makeUnlockableTechnology("Habitation Pods","Compact and efficient residence units allow more humans to be packed into a small habitat",
[yc],new p(l.EngineeringKnowledge,15)),Cd=ca.makeUnlockableTechnology("Nuclear Engineering","Applying nuclear physics to technology and power generation",[xc],new p(l.EngineeringKnowledge,70)),Dd=ca.makeUnlockableTechnology("Planetary Surveying","Exploration of the planetary environment, including the structures believed to have been built by an alien civilization",[],new p(l.EngineeringKnowledge,50)),Ed=ca.makeUnlockableTechnology("Game theory","Mathematical models of strategic interaction among rational decision-makers",
[yc],new p(l.PsychKnowledge,30)),Fd=ca.makeUnlockableTechnology("Cognitive Biases Research","Study of systematic patterns of deviation from rational thinking and decision-making",[Ed],new p(l.PsychKnowledge,50)),Gd=ca.makeUnlockableTechnology("Human Rationality","Practices to improve humans' ability to form accurate beliefs and make effective decisions",[Fd],new p(l.PsychKnowledge,200)),Ub=function(){},R=function(a){a=q.call(this,a)||this;a.texture=qc;return a};$jscomp.inherits(R,q);R.prototype.getTileName=
function(){return R.tileName};R.prototype.getTileDescription=function(){return R.tileDescription};R.prototype.getTexture=function(a){var c=this.position.x,b=this.position.y,d=a.getTileAtCoordinates(new A(c,b-1))instanceof R,e=a.getTileAtCoordinates(new A(c,b+1))instanceof R,n=a.getTileAtCoordinates(new A(c+1,b))instanceof R;return(a=a.getTileAtCoordinates(new A(c-1,b))instanceof R)&&n&&d&&e?qc:a&&n&&d?sd:a&&d&&e?ud:a&&n&&e?rd:n&&d&&e?td:a&&n?rc:d&&e?sc:a&&d?pd:n&&d?qd:a&&e?nd:n&&e?od:a||n?rc:sc};
R.tileName="Road";R.tileDescription="Allows transportation of workers and supplies";var Ya=function(a,c){this.radius=a;this.targetType=c;return this};$jscomp.inherits(Ya,Ub);Ya.prototype.evaluate=function(a,c){var b=this;return 0<a.world.getTilesInCircle(c,this.radius).filter(function(a){return a instanceof b.targetType}).length};Ya.prototype.toString=function(){return 1===this.radius?"adjacent to a "+this.targetType.tileName:"within "+this.radius+" units of a "+this.targetType.tileName};var ma=new Ya(1,
R),Bb=function(a){this.requiredCount=a;return this};$jscomp.inherits(Bb,Ub);Bb.prototype.evaluate=function(a,c){return(a=a.world.getTileAtCoordinates(c))?a.resourceConversions.length===this.requiredCount:!1};Bb.prototype.toString=function(){return this.requiredCount+" resource conversions on this tile"};var Cb=function(a,c){this.species=a;this.minCount=c;return this};$jscomp.inherits(Cb,Ub);Cb.prototype.evaluate=function(a,c){return a.inventory.getPopulation(this.species)>=this.minCount};Cb.prototype.toString=
function(){return"have at least "+this.minCount+" "+this.species.name};var na=function(a){a=q.call(this,a)||this;a.texture=jd;a.resourceConversions=[new U([new p(l.Metal,100)],[new p(l.BuildingMaterials,100)],60),new U([new p(l.Metal,100)],[new p(l.Electronics,100)],30)];a.possibleProjects=[new E("Double Production Lines","Add a second production line to increase resource throughput in this facility",function(a,b){a=b.world.getTileAtCoordinates(a);b=$jscomp.makeIterator((new na(new A(0,0))).resourceConversions);
for(var c=b.next();!c.done;c=b.next())a.resourceConversions.push(c.value)},[new p(l.BuildingMaterials,175),new p(l.Energy,300)],[],[new ba(xc),new Bb(2)])];return a};$jscomp.inherits(na,q);na.prototype.getTileName=function(){return na.tileName};na.prototype.getTileDescription=function(){return na.tileDescription};na.tileName="Ore Processing Center";na.tileDescription="A facility used to process ore into useful materials";var ta=function(a){a=q.call(this,a)||this;a.texture=ld;a.resourceConversions=
[new U([new p(l.Energy,10)],[new p(l.Food,200)],20)];return a};$jscomp.inherits(ta,q);ta.prototype.getTileName=function(){return ta.tileName};ta.prototype.getTileDescription=function(){return ta.tileDescription};ta.tileName="Greenhouse";ta.tileDescription="Produces "+l.Food.name+" for "+W.Human.name;var ua=function(a){a=q.call(this,a)||this;a.texture=kd;a.possibleProjects=[new E("Unpack Lander","Unload colonists and deploy prefabricated colonial buildings",function(a,b){var c=b.world;c.placeTile(new ea(new A(a.x+
1,a.y)));c.placeTile(new na(new A(a.x,a.y-1)));c.placeTile(new la(new A(a.x+1,a.y-1)));c.placeTile(new ta(new A(a.x-1,a.y)));c.placeTile(new R(a));c.placeTile(new R(new A(a.x,a.y+1)));b.inventory.addResource(l.Food,1E3);b.inventory.addWorkers(W.Human,100);b.inventory.releaseWorkers()},[],[],[])];return a};$jscomp.inherits(ua,q);ua.prototype.getTileName=function(){return ua.tileName};ua.prototype.getTileDescription=function(){return ua.tileDescription};ua.tileName="Landing Pod";ua.tileDescription=
"A spacecraft responsible for the final entry-descent-landing phase of the interstellar journey; not equipped to ascend back to space";var zc=function(a,c){this.title=a;this.description=c},Id=new Aa("Deploy shelter for the colonists","select the "+ua.tileName,[new xb(new zb(ea,1),function(){return Hd})]),Hd=new Aa("Build up at least 100 units of "+l.Energy.name,"the "+la.tileName+" produces "+l.Energy.name+" each turn",[new xb(new kb(l.Energy,100),function(){return Jd})]),Jd=new Aa("Acquire "+l.Metal.name,
void 0,[new xb(new kb(l.Metal,1),function(){return Kd})]),Kd=new Aa("Grow total worker population to 250","A "+ea.tileName+" has capacity for "+(new ea(new A(0,0))).populationCapacity.capacity+" colonists",[new xb(new Ab(250),function(){return Ld})]),Ld=new Aa("[no current objective]",void 0,[]),Md=new Aa("You lose",void 0,[],new zc("Game Over","You lost the game")),Nd=new Aa("You win",void 0,[],new zc("You Win!","You won the game")),Na=function(a){this.currentGame=a};Na.prototype.refresh=function(){this.currentGame.updateQuestState();
Q.refreshCurrentPage()};Na.prototype.addResource=function(a,c){this.currentGame.inventory.addResource(a,c);this.refresh()};Na.prototype.addPopulation=function(a,c){this.currentGame.inventory.addWorkers(a,c);this.refresh()};Na.prototype.freeResources=function(){for(var a=$jscomp.makeIterator(l.values()),c=a.next();!c.done;c=a.next())this.addResource(c.value,1E6)};Na.prototype.loseGame=function(){this.currentGame.setQuestStage(Md)};Na.prototype.winGame=function(){this.currentGame.setQuestStage(Nd)};
var H=function(a,c){var b=this;this.viewWidth=12;this.viewHeight=8;this.viewPosition=new A(0,0);this.highlightedCoordinates=null;this.world=c;this.parentScreen=a;this.html=h.makeCanvas(this.viewWidth*H.pixelsPerTile,this.viewHeight*H.pixelsPerTile,["map-canvas"]);this.html.addEventListener("click",function(a){return b.handleClick(a)});this.refresh()};H.prototype.refresh=function(){var a=this.world.getTilesInRectangle(this.viewPosition.x,this.viewPosition.y,this.viewWidth,this.viewHeight);a=$jscomp.makeIterator(a);
for(var c=a.next();!c.done;c=a.next())c=c.value,this.drawSquareAtCoordinates(c.getTexture(this.world),c.position);null!==this.highlightedCoordinates&&this.drawSquareAtCoordinates(H.highlightImage,this.highlightedCoordinates)};H.prototype.drawSquareAtCoordinates=function(a,c){var b=this.html.getContext("2d");b.imageSmoothingEnabled=!1;var d=c.x-this.viewPosition.x;c=c.y-this.viewPosition.y;if(!(0>d||0>c||d>=this.viewWidth||c>=this.viewHeight)){var e=H.pixelsPerTile/a.width*a.height;b.drawImage(a,d*
H.pixelsPerTile,c*H.pixelsPerTile-e+H.pixelsPerTile,H.pixelsPerTile,e)}};H.prototype.selectTile=function(a){this.highlightedCoordinates=a?a.position:null;this.refresh();this.parentScreen.changeSidebarTile(this.highlightedCoordinates)};H.prototype.moveViewArea=function(a,c){a=v(0,this.viewPosition.x+a,this.world.width-this.viewWidth);c=v(0,this.viewPosition.y+c,this.world.height-this.viewHeight);this.viewPosition=new A(a,c);this.refresh()};H.prototype.handleClick=function(a){a=this.world.getTileAtCoordinates(new A(Math.floor(this.viewWidth/
this.html.clientWidth*(a.pageX-this.html.offsetLeft))+this.viewPosition.x,Math.floor(this.viewHeight/this.html.clientHeight*(a.pageY-this.html.offsetTop))+this.viewPosition.y));this.selectTile(a)};H.prototype.handleKeyDown=function(a){var c=a.code;if("ArrowUp"===c||"KeyW"===c)a.preventDefault(),this.moveViewArea(0,-1);if("ArrowLeft"===c||"KeyA"===c)a.preventDefault(),this.moveViewArea(-1,0);if("ArrowDown"===c||"KeyS"===c)a.preventDefault(),this.moveViewArea(0,1);if("ArrowRight"===c||"KeyD"===c)a.preventDefault(),
this.moveViewArea(1,0)};H.pixelsPerTile=100;H.highlightImage=Wc;var Za=function(a,c){this.parentScreen=a;this.run=c;this.position=null;this.html=h.makeDiv(["world-screen-sidebar"]);this.refresh()};Za.prototype.changeTile=function(a){this.position=a;this.refresh()};Za.prototype.refresh=function(){var a=this;if(null===this.position)h.fillHTML(this.html,[h.makePara("No structure or terrain tile selected")]);else{var c=this.run.world.getTileAtCoordinates(this.position),b=h.makeDiv();b.appendChild(h.makePara(c.getTileDescription()));
var d=h.makeDiv();c.populationCapacity&&d.appendChild(h.makePara("Population capacity for "+c.populationCapacity.capacity+" "+c.populationCapacity.species.name));var e=h.makeDiv(),n=c.possibleProjects.filter(function(c){return c.isVisible(a.position,a.run)});if(0<n.length){e.appendChild(h.makePara("Projects:"));n=$jscomp.makeIterator(n);for(var g=n.next();!g.done;g=n.next())e.appendChild(this.makeProjectHTML(c,g.value))}n=h.makeDiv();if(0<c.resourceConversions.length){n.appendChild(h.makePara("Production:"));
g=$jscomp.makeIterator(c.resourceConversions);for(var k=g.next();!k.done;k=g.next())n.appendChild(this.makeConversionHTML(k.value))}h.fillHTML(this.html,[h.makePara(c.getTileName()),h.makePara("Coordinates: "+this.position.x+", "+this.position.y),b,d,e,n])}};Za.prototype.makeProjectHTML=function(a,c){var b=this,d=h.makeDiv(),e=h.makeButton(c.title,function(){b.doProject(c,a)},[],c.canDo(a.position,this.run)?"enabled":"disabled");d.appendChild(e);d.appendChild(h.makePara(c.projectDescription));if(0===
c.costs.length)d.appendChild(h.makePara("Cost: Free"));else{var n=this.run.inventory.clone();e=c.costs.map(function(a){var c=n.canAfford([a]),b=h.makePara(a.toString(),[c?"project-requirement-met":"project-requirement-unmet"]);c&&n.payCost([a]);return b});e=h.makeDivContaining([h.makePara("Costs: ")].concat($jscomp.arrayFromIterable(e)));d.appendChild(e)}0<c.completionRequirements.length&&d.appendChild(h.makePara("Requirements:"));e=$jscomp.makeIterator(c.completionRequirements);for(var g=e.next();!g.done;g=
e.next()){g=g.value;var k=g.evaluate(this.run,this.position)?"project-requirement-met":"project-requirement-unmet";d.appendChild(h.makePara("- "+g.toString(),[k]))}return d};Za.prototype.makeConversionHTML=function(a){return h.makePara("- "+a.toString())};Za.prototype.doProject=function(a,c){a.doAction(c.position,this.run);this.run.updateQuestState();this.parentScreen.refresh()};var Ac=function(a){this.inventory=a.inventory;this.html=h.makeDiv(["world-screen-inventory"]);this.refresh()};Ac.prototype.refresh=
function(){for(var a=h.makeHeader("Population: "+this.inventory.getTotalPopulation(),1),c=h.makePara("Available workers: "+this.inventory.getAvailableWorkers()),b=h.makeDiv(),d=$jscomp.makeIterator(this.inventory.getPopulationStrings()),e=d.next();!e.done;e=d.next())b.appendChild(h.makePara(e.value));d=h.makeDiv();var n=$jscomp.makeIterator(this.inventory.getInventoryStrings());for(e=n.next();!e.done;e=n.next())d.appendChild(h.makePara(e.value));h.fillHTML(this.html,[h.makeDivContaining([a,c,b,h.makeHeader("Inventory:",
1),d])])};var oa;(function(a){function c(a,c){return Math.random()*(c-a)+a}function b(a,b){return Math.floor(c(a,b))}a.realBetween=c;a.intBetween=b;a.fromArray=function(a){return a[b(0,a.length)]};a.fromWeightedArray=function(a){var c=a.map(function(a){return a[0]}).reduce(function(a,c){return a+c},0);c*=Math.random();for(var b=$jscomp.makeIterator(a),f=b.next();!f.done;f=b.next()){var d=$jscomp.makeIterator(f.value);f=d.next().value;d=d.next().value;if(c<f)return d;c-=f}return a[a.length-1][1]}})(oa||
(oa={}));var Oa=function(a,c){this.text=a;this.attribution=c};Oa.getRandomQuote=function(){return oa.fromArray(this.QuotesList)};Oa.QuotesList=[new Oa("I am an example quote","Person McQuoteFace"),new Oa("Lorem ipsum dolor sit amet","Mx. Example"),new Oa(xa($jscomp$templatelit$0),"Author Goes Here"),new Oa(xa($jscomp$templatelit$1),"Name McNameFace")];var Db=function(a){this.run=a;this.html=h.makeDiv();this.loadingBar=h.makeDiv(["transition-loading-bar"]);this.loadingArea=h.makeDivContaining([this.loadingBar],
["transition-loading-area"]);this.quote=Oa.getRandomQuote();a=this.quote.text;var c="\u00a0".repeat(4);a=a.replace(/\t/g,c);a=a.replace(/ {4}/g,c);a=a.replace(/^(\s*)/,"$1\u201c")+"\u201d";h.fillHTML(this.html,[h.makeDivContaining([h.makePara(""+a),h.makePara("-"+this.quote.attribution,["transition-attribution"])],["transition-quote-panel"]),this.loadingArea])};Db.prototype.refresh=function(){};Db.prototype.startLoading=function(){var a=this;this.run.completeTurn();setTimeout(function(){h.fillHTML(a.loadingArea,
[h.makeButton("Continue",function(){a.continueToNextTurn()})])},750)};Db.prototype.continueToNextTurn=function(){Q.show(new Pa(this.run))};var ra=ha(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),fb=ha(/Edge/i),Bc=ha(/firefox/i),Vb=ha(/safari/i)&&!ha(/chrome/i)&&!ha(/android/i),mb=ha(/iP(ad|od|hone)/i),Od=ha(/chrome/i)&&ha(/android/i),gc={capture:!1,passive:!1},hc=/\s+/g,db,aa="Sortable"+(new Date).getTime(),nb=[],Wb={initializeByDefault:!0},gb={mount:function(a){for(var c in Wb)!Wb.hasOwnProperty(c)||
c in a||(a[c]=Wb[c]);nb.push(a)},pluginEvent:function(a,c,b){var f=this;this.eventCanceled=!1;b.cancel=function(){f.eventCanceled=!0};var d=a+"Global";nb.forEach(function(f){if(c[f.pluginName]){if(c[f.pluginName][d])c[f.pluginName][d](N({sortable:c},b));if(c.options[f.pluginName]&&c[f.pluginName][a])c[f.pluginName][a](N({sortable:c},b))}})},initializePlugins:function(a,c,b,d){nb.forEach(function(f){var d=f.pluginName;if(a.options[d]||f.initializeByDefault)f=new f(a,c,a.options),f.sortable=a,f.options=
a.options,a[d]=f,G(b,f.defaults)});for(var f in a.options)a.options.hasOwnProperty(f)&&(d=this.modifyOption(a,f,a.options[f]),"undefined"!==typeof d&&(a.options[f]=d))},getEventProperties:function(a,c){var b={};nb.forEach(function(f){"function"===typeof f.eventProperties&&G(b,f.eventProperties.call(c[f.pluginName],a))});return b},modifyOption:function(a,c,b){var f;nb.forEach(function(d){a[d.pluginName]&&d.optionListeners&&"function"===typeof d.optionListeners[c]&&(f=d.optionListeners[c].call(a[d.pluginName],
b))});return f}},X=function(a,c){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=b.evt;b=Kb(b,["evt"]);gb.pluginEvent.bind(w)(a,c,N({dragEl:m,parentEl:M,ghostEl:x,rootEl:I,nextEl:Qa,lastDownEl:Eb,cloneEl:y,cloneHidden:Ba,dragStarted:ob,putSortable:P,activeSortable:w.active,originalEvent:d,oldIndex:Xa,oldDraggableIndex:eb,newIndex:Z,newDraggableIndex:za,hideGhostForTarget:Cc,unhideGhostForTarget:Dc,cloneNowHidden:function(){Ba=!0},cloneNowShown:function(){Ba=!1},dispatchSortableEvent:function(a){T({sortable:c,
name:a,originalEvent:d})}},b))},m,M,x,I,Qa,Eb,y,Ba,Xa,Z,eb,za,Fb,P,$a=!1,Gb=!1,sb=[],Ra,ja,Xb,Yb,Ec,Fc,ob,ab,ib,hb=!1,Hb=!1,tb,S,Zb=[],Qb=!1,ub=[],Ib="undefined"!==typeof document,Gc=fb||ra?"cssFloat":"float",Oc=Ib&&!Od&&!mb&&"draggable"in document.createElement("div"),Hc=function(){if(Ib){if(ra)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),oc=function(a,c){var b=u(a),d=parseInt(b.width)-parseInt(b.paddingLeft)-parseInt(b.paddingRight)-
parseInt(b.borderLeftWidth)-parseInt(b.borderRightWidth),e=rb(a,0,c);a=rb(a,1,c);var n=e&&u(e);c=a&&u(a);var g=n&&parseInt(n.marginLeft)+parseInt(n.marginRight)+O(e).width,h=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+O(a).width;return"flex"===b.display?"column"===b.flexDirection||"column-reverse"===b.flexDirection?"vertical":"horizontal":"grid"===b.display?1>=b.gridTemplateColumns.split(" ").length?"vertical":"horizontal":e&&n["float"]&&"none"!==n["float"]?(b="left"===n["float"]?"left":"right",
!a||"both"!==c.clear&&c.clear!==b?"horizontal":"vertical"):e&&("block"===n.display||"flex"===n.display||"table"===n.display||"grid"===n.display||g>=d&&"none"===b[Gc]||a&&"none"===b[Gc]&&g+h>d)?"vertical":"horizontal"},Pd=function(a,c,b){var f=b?a.left:a.top,d=b?a.right:a.bottom;a=b?a.width:a.height;var e=b?c.left:c.top,g=b?c.right:c.bottom;c=b?c.width:c.height;return f===e||d===g||f+a/2===e+c/2},Qd=function(a,c){var b;sb.some(function(f){if(!Mb(f)){var d=O(f),e=f[aa].options.emptyInsertThreshold,
r=a>=d.left-e&&a<=d.right+e;d=c>=d.top-e&&c<=d.bottom+e;if(e&&r&&d)return b=f}});return b},pc=function(a){function c(a,b){return function(f,d,e,r){var n=f.options.group.name&&d.options.group.name&&f.options.group.name===d.options.group.name;if(null==a&&(b||n))return!0;if(null==a||!1===a)return!1;if(b&&"clone"===a)return a;if("function"===typeof a)return c(a(f,d,e,r),b)(f,d,e,r);f=(b?f:d).options.group.name;return!0===a||"string"===typeof a&&a===f||a.join&&-1<a.indexOf(f)}}var b={},d=a.group;d&&"object"==
J(d)||(d={name:d});b.name=d.name;b.checkPull=c(d.pull,!0);b.checkPut=c(d.put);b.revertClone=d.revertClone;a.group=b},Cc=function(){!Hc&&x&&u(x,"display","none")},Dc=function(){!Hc&&x&&u(x,"display","")};Ib&&document.addEventListener("click",function(a){if(Gb)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),Gb=!1},!0);var Sa=function(a){if(m){a=a.touches?a.touches[0]:a;var c=Qd(a.clientX,a.clientY);if(c){var b={},d;for(d in a)a.hasOwnProperty(d)&&
(b[d]=a[d]);b.target=b.rootEl=c;b.preventDefault=void 0;b.stopPropagation=void 0;c[aa]._onDragOver(b)}}},Rd=function(a){m&&m.parentNode[aa]._isOutsideThisEl(a.target)};w.prototype={constructor:w,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(ab=null)},_getDirection:function(a,c){return"function"===typeof this.options.direction?this.options.direction.call(this,a,c,m):this.options.direction},_onTapStart:function(a){if(a.cancelable){var c=this,b=this.el,d=this.options,e=d.preventOnFilter,
n=a.type,g=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,h=(g||a).target,k=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||h,l=d.filter;Tc(b);if(!(m||/mousedown|pointerdown/.test(n)&&0!==a.button||d.disabled||k.isContentEditable||(h=ka(h,d.draggable,b,!1),h&&h.animated||Eb===h))){Xa=da(h);eb=da(h,d.draggable);if("function"===typeof l){if(l.call(this,a,h,this)){T({sortable:c,rootEl:k,name:"filter",targetEl:h,toEl:b,fromEl:b});X("filter",c,{evt:a});
e&&a.cancelable&&a.preventDefault();return}}else if(l&&(l=l.split(",").some(function(f){if(f=ka(k,f.trim(),b,!1))return T({sortable:c,rootEl:f,name:"filter",targetEl:h,fromEl:b,toEl:b}),X("filter",c,{evt:a}),!0}))){e&&a.cancelable&&a.preventDefault();return}d.handle&&!ka(k,d.handle,b,!1)||this._prepareDragStart(a,g,h)}}},_prepareDragStart:function(a,c,b){var f=this,d=f.el,e=f.options,g=d.ownerDocument;if(b&&!m&&b.parentNode===d){var h=O(b);I=d;m=b;M=m.parentNode;Qa=m.nextSibling;Eb=b;Fb=e.group;w.dragged=
m;Ra={target:m,clientX:(c||a).clientX,clientY:(c||a).clientY};Ec=Ra.clientX-h.left;Fc=Ra.clientY-h.top;this._lastX=(c||a).clientX;this._lastY=(c||a).clientY;m.style["will-change"]="all";b=function(){X("delayEnded",f,{evt:a});w.eventCanceled?f._onDrop():(f._disableDelayedDragEvents(),!Bc&&f.nativeDraggable&&(m.draggable=!0),f._triggerDragStart(a,c),T({sortable:f,name:"choose",originalEvent:a}),Y(m,e.chosenClass,!0))};e.ignore.split(",").forEach(function(a){ic(m,a.trim(),Pb)});C(g,"dragover",Sa);C(g,
"mousemove",Sa);C(g,"touchmove",Sa);C(g,"mouseup",f._onDrop);C(g,"touchend",f._onDrop);C(g,"touchcancel",f._onDrop);Bc&&this.nativeDraggable&&(this.options.touchStartThreshold=4,m.draggable=!0);X("delayStart",this,{evt:a});!e.delay||e.delayOnTouchOnly&&!c||this.nativeDraggable&&(fb||ra)?b():w.eventCanceled?this._onDrop():(C(g,"mouseup",f._disableDelayedDrag),C(g,"touchend",f._disableDelayedDrag),C(g,"touchcancel",f._disableDelayedDrag),C(g,"mousemove",f._delayedDragTouchMoveHandler),C(g,"touchmove",
f._delayedDragTouchMoveHandler),e.supportPointer&&C(g,"pointermove",f._delayedDragTouchMoveHandler),f._dragStartTimer=setTimeout(b,e.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){m&&Pb(m);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},
_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;B(a,"mouseup",this._disableDelayedDrag);B(a,"touchend",this._disableDelayedDrag);B(a,"touchcancel",this._disableDelayedDrag);B(a,"mousemove",this._delayedDragTouchMoveHandler);B(a,"touchmove",this._delayedDragTouchMoveHandler);B(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,c){c=c||"touch"==a.pointerType&&a;!this.nativeDraggable||c?this.options.supportPointer?C(document,"pointermove",this._onTouchMove):
c?C(document,"touchmove",this._onTouchMove):C(document,"mousemove",this._onTouchMove):(C(m,"dragend",this),C(I,"dragstart",this._onDragStart));try{document.selection?vb(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(f){}},_dragStarted:function(a,c){$a=!1;if(I&&m){X("dragStarted",this,{evt:c});this.nativeDraggable&&C(document,"dragover",Rd);var b=this.options;!a&&Y(m,b.dragClass,!1);Y(m,b.ghostClass,!0);w.active=this;a&&this._appendGhost();T({sortable:this,name:"start",
originalEvent:c})}else this._nulling()},_emulateDragOver:function(){if(ja){this._lastX=ja.clientX;this._lastY=ja.clientY;Cc();for(var a=document.elementFromPoint(ja.clientX,ja.clientY),c=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(ja.clientX,ja.clientY);if(a===c)break;c=a}m.parentNode[aa]._isOutsideThisEl(a);if(c){do{if(c[aa]&&c[aa]._onDragOver({clientX:ja.clientX,clientY:ja.clientY,target:a,rootEl:c})&&!this.options.dragoverBubble)break;a=c}while(c=c.parentNode)}Dc()}},_onTouchMove:function(a){if(Ra){var c=
this.options,b=c.fallbackTolerance,d=c.fallbackOffset;c=a.touches?a.touches[0]:a;var e=x&&Wa(x,!0),g=x&&e&&e.a,h=x&&e&&e.d,k=mb&&S&&kc(S);g=(c.clientX-Ra.clientX+d.x)/(g||1)+(k?k[0]-Zb[0]:0)/(g||1);d=(c.clientY-Ra.clientY+d.y)/(h||1)+(k?k[1]-Zb[1]:0)/(h||1);if(!w.active&&!$a){if(b&&Math.max(Math.abs(c.clientX-this._lastX),Math.abs(c.clientY-this._lastY))<b)return;this._onDragStart(a,!0)}x&&(e?(e.e+=g-(Xb||0),e.f+=d-(Yb||0)):e={a:1,b:0,c:0,d:1,e:g,f:d},b="matrix(".concat(e.a,",").concat(e.b,",").concat(e.c,
",").concat(e.d,",").concat(e.e,",").concat(e.f,")"),u(x,"webkitTransform",b),u(x,"mozTransform",b),u(x,"msTransform",b),u(x,"transform",b),Xb=g,Yb=d,ja=c);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!x){var a=this.options.fallbackOnBody?document.body:I,c=O(m,!0,mb,!0,a),b=this.options;if(mb){for(S=a;"static"===u(S,"position")&&"none"===u(S,"transform")&&S!==document;)S=S.parentNode;S!==document.body&&S!==document.documentElement?(S===document&&(S=sa()),c.top+=S.scrollTop,c.left+=
S.scrollLeft):S=sa();Zb=kc(S)}x=m.cloneNode(!0);Y(x,b.ghostClass,!1);Y(x,b.fallbackClass,!0);Y(x,b.dragClass,!0);u(x,"transition","");u(x,"transform","");u(x,"box-sizing","border-box");u(x,"margin",0);u(x,"top",c.top);u(x,"left",c.left);u(x,"width",c.width);u(x,"height",c.height);u(x,"opacity","0.8");u(x,"position",mb?"absolute":"fixed");u(x,"zIndex","100000");u(x,"pointerEvents","none");w.ghost=x;a.appendChild(x);u(x,"transform-origin",Ec/parseInt(x.style.width)*100+"% "+Fc/parseInt(x.style.height)*
100+"%")}},_onDragStart:function(a,c){var b=this,d=a.dataTransfer,e=b.options;X("dragStart",this,{evt:a});w.eventCanceled?this._onDrop():(X("setupClone",this),w.eventCanceled||(y=nc(m),y.draggable=!1,y.style["will-change"]="",this._hideClone(),Y(y,this.options.chosenClass,!1),w.clone=y),b.cloneId=vb(function(){X("clone",b);w.eventCanceled||(b.options.removeCloneOnHide||I.insertBefore(y,m),b._hideClone(),T({sortable:b,name:"clone"}))}),!c&&Y(m,e.dragClass,!0),c?(Gb=!0,b._loopId=setInterval(b._emulateDragOver,
50)):(B(document,"mouseup",b._onDrop),B(document,"touchend",b._onDrop),B(document,"touchcancel",b._onDrop),d&&(d.effectAllowed="move",e.setData&&e.setData.call(b,d,m)),C(document,"drop",b),u(m,"transform","translateZ(0)")),$a=!0,b._dragStartId=vb(b._dragStarted.bind(b,c,a)),C(document,"selectstart",b),ob=!0,Vb&&u(document.body,"user-select","none"))},_onDragOver:function(a){function c(c,b){X(c,v,N({evt:a,isOwner:B,axis:E?"vertical":"horizontal",revert:l,dragRect:F,targetRect:k,canSort:C,fromSortable:A,
target:h,completed:d,onMove:function(c,b){return Ob(I,g,m,F,c,O(c),a,b)},changed:e},b))}function b(){c("dragOverAnimationCapture");v.captureAnimationState();v!==A&&A.captureAnimationState()}function d(b){c("dragOverCompleted",{insertion:b});b&&(B?t._hideClone():t._showClone(v),v!==A&&(Y(m,P?P.options.ghostClass:t.options.ghostClass,!1),Y(m,p.ghostClass,!0)),P!==v&&v!==w.active?P=v:v===w.active&&P&&(P=null),A===v&&(v._ignoreWhileAnimating=h),v.animateAll(function(){c("dragOverAnimationComplete");v._ignoreWhileAnimating=
null}),v!==A&&(A.animateAll(),A._ignoreWhileAnimating=null));if(h===m&&!m.animated||h===g&&!h.animated)ab=null;p.dragoverBubble||a.rootEl||h===document||(m.parentNode[aa]._isOutsideThisEl(a.target),!b&&Sa(a));!p.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return D=!0}function e(){Z=da(m);za=da(m,p.draggable);T({sortable:v,name:"change",toEl:g,newIndex:Z,newDraggableIndex:za,originalEvent:a})}var g=this.el,h=a.target,k,l,p=this.options,q=p.group,t=w.active,B=Fb===q,C=p.sort,A=P||t,v=this,
D=!1;if(!Qb){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();h=ka(h,p.draggable,g,!0);c("dragOver");if(w.eventCanceled)return D;if(m.contains(a.target)||h.animated&&h.animatingX&&h.animatingY||v._ignoreWhileAnimating===h)return d(!1);Gb=!1;if(t&&!p.disabled&&(B?C||(l=!I.contains(m)):P===this||(this.lastPutMode=Fb.checkPull(this,t,m,a))&&q.checkPut(this,t,m,a))){var E="vertical"===this._getDirection(a,h);var F=O(m);c("dragOverValid");if(w.eventCanceled)return D;if(l)return M=I,b(),this._hideClone(),
c("revert"),w.eventCanceled||(Qa?I.insertBefore(m,Qa):I.appendChild(m)),d(!0);q=Mb(g,p.draggable);if(!q||Qc(a,E,this)&&!q.animated){if(q===m)return d(!1);q&&g===a.target&&(h=q);h&&(k=O(h));if(!1!==Ob(I,g,m,F,h,k,a,!!h))return b(),g.appendChild(m),M=g,e(),d(!0)}else if(h.parentNode===g){k=O(h);var y=0;y=m.parentNode!==g;var ia=!Pd(m.animated&&m.toRect||F,h.animated&&h.toRect||k,E);q=E?"top":"left";var G=jc(h,"top","top")||jc(m,"top","top"),K=G?G.scrollTop:void 0;if(ab!==h){var J=k[q];hb=!1;Hb=!ia&&
p.invertSwap||y}y=Rc(a,h,k,E,ia?1:p.swapThreshold,null==p.invertedSwapThreshold?p.swapThreshold:p.invertedSwapThreshold,Hb,ab===h);if(0!==y){ia=da(m);do{ia-=y;var H=M.children[ia]}while(H&&("none"===u(H,"display")||H===x))}if(0===y||H===h)return d(!1);ab=h;ib=y;H=h.nextElementSibling;ia=!1;ia=1===y;y=Ob(I,g,m,F,h,k,a,ia);if(!1!==y){if(1===y||-1===y)ia=1===y;Qb=!0;setTimeout(Pc,30);b();ia&&!H?g.appendChild(m):h.parentNode.insertBefore(m,ia?H:h);G&&mc(G,0,K-G.scrollTop);M=m.parentNode;void 0===J||Hb||
(tb=Math.abs(J-O(h)[q]));e();return d(!0)}}if(g.contains(m))return d(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){B(document,"mousemove",this._onTouchMove);B(document,"touchmove",this._onTouchMove);B(document,"pointermove",this._onTouchMove);B(document,"dragover",Sa);B(document,"mousemove",Sa);B(document,"touchmove",Sa)},_offUpEvents:function(){var a=this.el.ownerDocument;B(a,"mouseup",this._onDrop);B(a,"touchend",this._onDrop);B(a,"pointerup",this._onDrop);B(a,"touchcancel",
this._onDrop);B(document,"selectstart",this)},_onDrop:function(a){var c=this.el,b=this.options;Z=da(m);za=da(m,b.draggable);X("drop",this,{evt:a});M=m&&m.parentNode;Z=da(m);za=da(m,b.draggable);if(!w.eventCanceled&&(hb=Hb=$a=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(B(document,"drop",this),B(c,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Vb&&u(document.body,"user-select",
""),u(m,"transform",""),a&&(ob&&(a.cancelable&&a.preventDefault(),!b.dropBubble&&a.stopPropagation()),x&&x.parentNode&&x.parentNode.removeChild(x),(I===M||P&&"clone"!==P.lastPutMode)&&y&&y.parentNode&&y.parentNode.removeChild(y),m&&(this.nativeDraggable&&B(m,"dragend",this),Pb(m),m.style["will-change"]="",ob&&!$a&&Y(m,P?P.options.ghostClass:this.options.ghostClass,!1),Y(m,this.options.chosenClass,!1),T({sortable:this,name:"unchoose",toEl:M,newIndex:null,newDraggableIndex:null,originalEvent:a}),I!==
M?(0<=Z&&(T({rootEl:M,name:"add",toEl:M,fromEl:I,originalEvent:a}),T({sortable:this,name:"remove",toEl:M,originalEvent:a}),T({rootEl:M,name:"sort",toEl:M,fromEl:I,originalEvent:a}),T({sortable:this,name:"sort",toEl:M,originalEvent:a})),P&&P.save()):Z!==Xa&&0<=Z&&(T({sortable:this,name:"update",toEl:M,originalEvent:a}),T({sortable:this,name:"sort",toEl:M,originalEvent:a})),w.active)))){if(null==Z||-1===Z)Z=Xa,za=eb;T({sortable:this,name:"end",toEl:M,originalEvent:a});this.save()}this._nulling()},_nulling:function(){X("nulling",
this);I=m=M=x=Qa=y=Eb=Ba=Ra=ja=ob=Z=za=Xa=eb=ab=ib=P=Fb=w.dragged=w.ghost=w.clone=w.active=null;ub.forEach(function(a){a.checked=!0});ub.length=Xb=Yb=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":m&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],c,b=this.el.children,d=0,e=b.length,g=this.options;d<
e;d++)c=b[d],ka(c,g.draggable,this.el,!1)&&a.push(c.getAttribute(g.dataIdAttr)||Sc(c));return a},sort:function(a){var c={},b=this.el;this.toArray().forEach(function(a,d){d=b.children[d];ka(d,this.options.draggable,b,!1)&&(c[a]=d)},this);a.forEach(function(a){c[a]&&(b.removeChild(c[a]),b.appendChild(c[a]))})},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,c){return ka(a,c||this.options.draggable,this.el,!1)},option:function(a,c){var b=this.options;if(void 0===c)return b[a];
var d=gb.modifyOption(this,a,c);b[a]="undefined"!==typeof d?d:c;"group"===a&&pc(b)},destroy:function(){X("destroy",this);var a=this.el;a[aa]=null;B(a,"mousedown",this._onTapStart);B(a,"touchstart",this._onTapStart);B(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(B(a,"dragover",this),B(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();sb.splice(sb.indexOf(this.el),
1);this.el=a=null},_hideClone:function(){Ba||(X("hideClone",this),w.eventCanceled||(u(y,"display","none"),this.options.removeCloneOnHide&&y.parentNode&&y.parentNode.removeChild(y),Ba=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():Ba&&(X("showClone",this),w.eventCanceled||(I.contains(m)&&!this.options.group.revertClone?I.insertBefore(y,m):Qa?I.insertBefore(y,Qa):I.appendChild(y),this.options.group.revertClone&&this.animate(m,y),u(y,"display",""),Ba=!1))}};Ib&&C(document,"touchmove",
function(a){(w.active||$a)&&a.cancelable&&a.preventDefault()});w.utils={on:C,off:B,css:u,find:ic,is:function(a,c){return!!ka(a,c,a,!1)},extend:function(a,c){if(a&&c)for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);return a},throttle:lc,closest:ka,toggleClass:Y,clone:nc,index:da,nextTick:vb,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:oc,getChild:rb};w.get=function(a){return a[aa]};w.mount=function(){for(var a=arguments.length,c=Array(a),b=0;b<a;b++)c[b]=arguments[b];c[0].constructor===
Array&&(c=c[0]);c.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(w.utils=N({},w.utils,a.utils));gb.mount(a)})};w.create=function(a,c){return new w(a,c)};w.version="1.10.2";var K=[],pb,$b,ac=!1,bc,cc,Jb,bb,dc=lc(function(a,c,b,d){if(c.scroll){var f=(a.touches?a.touches[0]:a).clientX,e=(a.touches?a.touches[0]:a).clientY,g=c.scrollSensitivity,h=c.scrollSpeed,k=sa(),r=!1;if($b!==b){$b=
b;wb();pb=c.scroll;var l=c.scrollFn;!0===pb&&(pb=ya(b,!0))}b=0;var m=pb;do{var p=m,q=O(p),t=q.top,v=q.bottom,x=q.left,B=q.right,A=q.width;q=q.height;var C=void 0,y=void 0,D=p.scrollWidth,E=p.scrollHeight;y=u(p);var F=p.scrollLeft,G=p.scrollTop;p===k?(C=A<D&&("auto"===y.overflowX||"scroll"===y.overflowX||"visible"===y.overflowX),y=q<E&&("auto"===y.overflowY||"scroll"===y.overflowY||"visible"===y.overflowY)):(C=A<D&&("auto"===y.overflowX||"scroll"===y.overflowX),y=q<E&&("auto"===y.overflowY||"scroll"===
y.overflowY));x=C&&(Math.abs(B-f)<=g&&F+A<D)-(Math.abs(x-f)<=g&&!!F);t=y&&(Math.abs(v-e)<=g&&G+q<E)-(Math.abs(t-e)<=g&&!!G);if(!K[b])for(v=0;v<=b;v++)K[v]||(K[v]={});if(K[b].vx!=x||K[b].vy!=t||K[b].el!==p)if(K[b].el=p,K[b].vx=x,K[b].vy=t,clearInterval(K[b].pid),0!=x||0!=t)r=!0,K[b].pid=setInterval(function(){d&&0===this.layer&&w.active._onTouchMove(Jb);var c=K[this.layer].vy?K[this.layer].vy*h:0,b=K[this.layer].vx?K[this.layer].vx*h:0;"function"===typeof l&&"continue"!==l.call(w.dragged.parentNode[aa],
b,c,a,Jb,K[this.layer].el)||mc(K[this.layer].el,b,c)}.bind({layer:b}),24);b++}while(c.bubbleScroll&&m!==k&&(m=ya(m,!1)));ac=r}},30),Ic=function(a){var c=a.originalEvent,b=a.putSortable,d=a.dragEl,e=a.activeSortable,g=a.dispatchSortableEvent,h=a.hideGhostForTarget;a=a.unhideGhostForTarget;c&&(e=b||e,h(),c=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:c,c=document.elementFromPoint(c.clientX,c.clientY),a(),e&&!e.el.contains(c)&&(g("spill"),this.onSpill({dragEl:d,putSortable:b})))};Rb.prototype=
{startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var d=rb(this.sortable.el,this.startIndex,this.options);d?this.sortable.el.insertBefore(b,d):this.sortable.el.appendChild(b);this.sortable.animateAll();a&&a.animateAll()},drop:Ic};G(Rb,{pluginName:"revertOnSpill"});Sb.prototype={onSpill:function(a){var b=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();
b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:Ic};G(Sb,{pluginName:"removeOnSpill"});w.mount(new function(){function a(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var a in this)"_"===a.charAt(0)&&"function"===typeof this[a]&&(this[a]=this[a].bind(this))}a.prototype={dragStarted:function(a){a=a.originalEvent;this.sortable.nativeDraggable?C(document,"dragover",this._handleAutoScroll):this.options.supportPointer?C(document,"pointermove",this._handleFallbackAutoScroll):
a.touches?C(document,"touchmove",this._handleFallbackAutoScroll):C(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){a=a.originalEvent;this.options.dragOverBubble||a.rootEl||this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?B(document,"dragover",this._handleAutoScroll):(B(document,"pointermove",this._handleFallbackAutoScroll),B(document,"touchmove",this._handleFallbackAutoScroll),B(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(bb);
wb();clearTimeout(db);db=void 0},nulling:function(){Jb=$b=pb=ac=bb=bc=cc=null;K.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},_handleAutoScroll:function(a,b){var c=this,d=(a.touches?a.touches[0]:a).clientX,f=(a.touches?a.touches[0]:a).clientY,e=document.elementFromPoint(d,f);Jb=a;if(b||fb||ra||Vb){dc(a,this.options,e,b);var g=ya(e,!0);!ac||bb&&d===bc&&f===cc||(bb&&clearInterval(bb),bb=setInterval(function(){var e=ya(document.elementFromPoint(d,f),!0);e!==g&&(g=e,wb());
dc(a,c.options,e,b)},10),bc=d,cc=f)}else this.options.bubbleScroll&&ya(e,!0)!==sa()?dc(a,this.options,ya(e,!1),!1):wb()}};return G(a,{pluginName:"scroll",initializeByDefault:!0})});w.mount(Sb,Rb);var Sd=w,cb=function(a){this.run=a;this.html=h.makeDiv(["production-screen"]);this.refresh()};cb.prototype.refresh=function(){var a=this,b=this.run.inventory.clone(),d=this.run.getResourceConversions(),e=d.free,g=d.costly;b.applyConversions(e);e=e.map(function(b){return a.renderConversion(b,!0)});e=h.makeDivContaining(e);
d=[];g=$jscomp.makeIterator(g);for(var n=g.next();!n.done;n=g.next())n=n.value,b.canAfford(n.inputs)&&b.hasEnoughWorkers(n.requiredWorkers)?(d.push(this.renderConversion(n,!0)),b.applyConversions([n])):d.push(this.renderConversion(n,!1));d=h.makeDivContaining(d);Sd.create(d,{onEnd:function(b){var c=b.oldDraggableIndex;b=b.newDraggableIndex;void 0!==c&&void 0!==b&&a.shiftCostlyConversion(c,b)}});g=h.makeDiv();if(0!==this.run.inventory.getSpeciesList().length){n=b.clone();g.appendChild(h.makeHeader("Resources required for worker upkeep:"));
for(var k=$jscomp.makeIterator(n.getSpeciesList()),l=k.next();!l.done;l=k.next()){l=l.value;var m=n.getProvidedWorkerConsumption(l).quantity,p=n.getProvidedWorkerConsumption(l).quantity;g.appendChild(h.makePara(l.name+": "+m+"/"+p+" "+l.survivalCost.resource.name,[p>m?"population-consumption-unmet":"population-consumption-met"]));n.payCost([n.getProvidedWorkerConsumption(l)])}}n=h.makeDiv();k=b.getSpeciesList();var q=new Map;m=$jscomp.makeIterator(k);for(l=m.next();!l.done;l=m.next())l=l.value,q.set(l,
b.getPopulation(l));b.doPopulationGrowth();var t=new Map;m=$jscomp.makeIterator(k);for(l=m.next();!l.done;l=m.next())l=l.value,t.set(l,b.getPopulation(l));k.some(function(a){return q.get(a)>t.get(a)})&&n.appendChild(h.makeHeader("Predicted Population Decline:"));k=$jscomp.makeIterator(k);for(l=k.next();!l.done;l=k.next())l=l.value,m=q.get(l),p=t.get(l),m-=p,0<m&&n.appendChild(h.makePara(m+" "+l.name+" will die from lack of "+l.survivalCost.resource.name+"!",["population-death-label"]));h.fillHTML(this.html,
[h.makePara("Resource Production Report",["production-screen-label"]),h.makePara("Available workers at start of next production cycle: "+this.run.inventory.getAvailableWorkers(),["production-screen-label"]),h.makePara("Resources available at start of next production cycle:",["production-screen-label"]),this.renderInventory(this.run.inventory),h.makePara("Resource generation in next production cycle:",["production-screen-label"]),e,h.makePara("Resource conversion in next production cycle:",["production-screen-label"]),
d,h.makePara("Unused workers at end of next production cycle: "+b.getAvailableWorkers(),["production-screen-label"]),g,n,h.makePara("Resources available at end of next production cycle:",["production-screen-label"]),this.renderInventory(b),h.makeButton("Back",function(){Q.show(new Pa(a.run))},["production-screen-back-button"])])};cb.prototype.renderInventory=function(a){a=a.getInventoryStrings().map(function(a){return h.makePara(a)});0===a.length&&a.push(h.makePara("(none)"));return h.makeDivContaining(a,
["production-screen-inventory"])};cb.prototype.renderConversion=function(a,b){var c=this,d=h.makeDiv(["flex-horizontal"]),e=a.toString(),g="conversion-description-normal";a.enabled?b||(e="(cannot afford) "+a.toString(),g="conversion-description-cannot-afford"):(e="(disabled) "+a.toString(),g="conversion-description-disabled");b=h.makePara(e,[g,"conversion-description"]);b=h.makeDivContaining([b],["conversion-description-box"]);d.appendChild(b);d.appendChild(h.makeButton("Toggle",function(){c.toggle(a)}));
return d};cb.prototype.shiftCostlyConversion=function(a,b){this.run.shiftCostlyConversionPriority(a,b);this.refresh()};cb.prototype.toggle=function(a){a.enabled=!a.enabled;this.refresh()};var ec=function(a){this.run=a;this.html=h.makeDiv();this.refresh()};ec.prototype.refresh=function(){var a=this,b=h.makeHeader("Available Research Projects"),d=this.run.getResearchOptions(),e=l.values().filter(function(a){return d.some(function(b){return b.researchCost.resource===a})}),g=h.makeDiv();0!==e.length&&
(g.appendChild(h.makeHeader("Available Research Resources")),e.forEach(function(b){return g.appendChild(h.makePara(b.name+": "+a.run.inventory.getResourceQuantity(b)))}));e=h.makeDivContaining(d.map(function(b){return a.renderTechOption(b)}));0===d.length&&(b=h.makeDiv());var k=h.makeHeader("Previous Research Projects"),m=this.run.getUnlockedTechnologies().filter(function(a){return a.visible}).map(function(a){return h.makePara(a.name)});0===m.length&&(k=h.makeDiv());var p=h.makeButton("Back",function(){Q.show(new Pa(a.run))},
[]);h.fillHTML(this.html,[g,b,e,k].concat($jscomp.arrayFromIterable(m),[p]))};ec.prototype.renderTechOption=function(a){for(var b=this,d=h.makeDivContaining([h.makePara(a.name),h.makePara(a.description),h.makePara("Development cost: "+a.researchCost)]),e=0,g=$jscomp.makeIterator(a.requiredTechs),k=g.next();!k.done;k=g.next())k=k.value,this.run.hasUnlockedTechnology(k)||(e++,d.appendChild(h.makePara("Requires "+k.name+" research")));e=0===e&&this.run.inventory.canAfford([a.researchCost]);d.appendChild(h.makeButton("Conduct Research",
function(){b.run.unlockTechnology(a);b.refresh()},[],e?"enabled":"disabled"));return d};var Jc=function(a){this.html=h.makeDiv(["world-screen-header"]);this.run=a;this.refresh()};Jc.prototype.refresh=function(){var a=this,b=h.makeButton("Quit Game",function(){Q.show(new jb)}),d=h.makeButton("Next Turn",function(){var b=new Db(a.run);Q.show(b);b.startLoading()}),e=h.makeButton("Manage Production",function(){Q.show(new cb(a.run))}),g=h.makeButton("Research Projects",function(){Q.show(new ec(a.run))}),
k=this.run.getCurrentQuestHint(),l=this.run.getCurrentQuestDescription();k=h.makePara("Objective: "+(k?l+"\n(hint: "+k+")":l),["world-screen-quest-description"]);l=this.run.getPreviousQuestDescription();this.run.questCompletionShown||(k=h.makePara("Completed: "+l,["world-screen-quest-description","quest-description-emphasis"]),setTimeout(function(){a.refresh()},1500));this.run.questCompletionShown=!0;h.fillHTML(this.html,[b,e,g,d,k])};var Pa=function(a){this.mapUI=new H(this,a.world);this.tileSidebar=
new Za(this,a);this.inventorySidebar=new Ac(a);this.header=new Jc(a);this.html=h.makeDivContaining([this.header.html,h.makeDivContaining([this.inventorySidebar.html,h.makeDivContaining([this.mapUI.html],["world-screen-map-box"]),this.tileSidebar.html],["world-screen-hbox"])],["flex-vertical"])};Pa.prototype.refresh=function(){this.mapUI.refresh();this.tileSidebar.refresh();this.inventorySidebar.refresh();this.header.refresh()};Pa.prototype.handleKeyDown=function(a){this.mapUI.handleKeyDown(a)};Pa.prototype.changeSidebarTile=
function(a){this.tileSidebar.changeTile(a)};var Ta;(function(a){a.isNonEmpty=function(a){return 0<a.length};a.generate=function(a,b){for(var c=Array(a),d=0;d<a;d++)c[d]=b();return c};a.flatten=function(a){return a.reduce(function(a,b){return a.concat(b)},[])};a.partition=function(a,b){var c=[],d=[];a=$jscomp.makeIterator(a);for(var f=a.next();!f.done;f=a.next())f=f.value,b(f)?c.push(f):d.push(f);return{yes:c,no:d}};a.repeat=function(a,b){for(var c=Array(b),d=0;d<b;d++)c[d]=a;return c}})(Ta||(Ta={}));
var Ca=function(a){a=q.call(this,a)||this;a.texture=vd;a.populationCapacity=new vc(W.Human,2E3);return a};$jscomp.inherits(Ca,q);Ca.prototype.getTileName=function(){return Ca.tileName};Ca.prototype.getTileDescription=function(){return Ca.tileDescription};Ca.tileName="Arcology";Ca.tileDescription="A self-contained habitat for efficiently housing a large number of humans";var Da=function(a){a=q.call(this,a)||this;a.texture=ed;a.possibleProjects=[new E("Break down construction site","Revert this location to wasteland",
function(a,b){b.world.placeTile(new D(a))},[],[],[]),new E("Construct habitat dome","Assemble a pressurized structure that provides housing, services, and life support for colonists",function(a,b){b.world.placeTile(new ea(a))},[new p(l.BuildingMaterials,100)],[new ba(lb),ma],[]),new E("Construct Arcology","Construct a tower that can efficiently house a large number of humans",function(a,b){b.world.placeTile(new Ca(a))},[new p(l.BuildingMaterials,250)],[new ba(Bd),ma],[new ba(lb)]),new E("Construct Greenhouse",
"Assemble a building where colonists can grow food and produce oxygen using genetically engineered plants",function(a,b){b.world.placeTile(new ta(a))},[new p(l.BuildingMaterials,25)],[ma],[])];return a};$jscomp.inherits(Da,q);Da.prototype.getTileName=function(){return Da.tileName};Da.prototype.getTileDescription=function(){return Da.tileDescription};Da.tileName="Construction Site - Habitat";Da.tileDescription="An area designated for construction of habitation and life support facilities";var Ea=function(a){a=
q.call(this,a)||this;a.texture=yd;a.resourceConversions=[new U([],[new p(l.EngineeringKnowledge,5)],30)];return a};$jscomp.inherits(Ea,q);Ea.prototype.getTileName=function(){return Ea.tileName};Ea.prototype.getTileDescription=function(){return Ea.tileDescription};Ea.tileName="Engineering Lab";Ea.tileDescription="A workshop for developing new technology";var Fa=function(a){a=q.call(this,a)||this;a.texture=zd;a.resourceConversions=[new U([],[new p(l.PsychKnowledge,10)],25)];return a};$jscomp.inherits(Fa,
q);Fa.prototype.getTileName=function(){return Fa.tileName};Fa.prototype.getTileDescription=function(){return Fa.tileDescription};Fa.tileName="Psychology Lab";Fa.tileDescription="A laboratory for studying how humans behave in the isolated conditions of a remote colony";var Ga=function(a){a=q.call(this,a)||this;a.texture=Ad;a.resourceConversions=[new U([],[new p(l.AlienKnowledge,10)],50)];return a};$jscomp.inherits(Ga,q);Ga.prototype.getTileName=function(){return Ga.tileName};Ga.prototype.getTileDescription=
function(){return Ga.tileDescription};Ga.tileName="Xenoarchaeology Lab";Ga.tileDescription="A laboratory for studying artifacts and technology left by the now-dead alien civilization";var Ha=function(a){a=q.call(this,a)||this;a.texture=xd;a.resourceConversions=[new U([],[new p(l.AlignmentKnowledge,10)],100)];return a};$jscomp.inherits(Ha,q);Ha.prototype.getTileName=function(){return Ha.tileName};Ha.prototype.getTileDescription=function(){return Ha.tileDescription};Ha.tileName="AI Alignment Lab";Ha.tileDescription=
"A research center for developing techniques that could allow humans to control an artificial intelligence or modify its goal programming";var va=function(a){a=q.call(this,a)||this;a.texture=cd;return a};$jscomp.inherits(va,q);va.prototype.getTileName=function(){return va.tileName};va.prototype.getTileDescription=function(){return va.tileDescription};va.tileName="Alien Ruins";va.tileDescription="Abandoned structure built by a long-dead alien civilization";var Ia=function(a){a=q.call(this,a)||this;
a.texture=fd;a.possibleProjects=[new E("Break down construction site","Revert this location to wasteland",function(a,b){b.world.placeTile(new D(a))},[],[],[]),new E("Construct Engineering Lab","Assemble an engineering laboratory that can produce data points necessary for scientific and technological advancement",function(a,b){b.world.placeTile(new Ea(a))},[new p(l.BuildingMaterials,20),new p(l.Electronics,20)],[ma],[]),new E("Construct Psych Lab","Assemble a laboratory that can produce data points about human psychology and behavior",
function(a,b){b.world.placeTile(new Fa(a))},[new p(l.BuildingMaterials,30)],[ma],[]),new E("Construct Xenoarchaeology Lab","Construct a laboratory for studying the alien ruins",function(a,b){b.world.placeTile(new Ga(a))},[new p(l.BuildingMaterials,40)],[new Ya(3,va),ma,new ba(Dd)],[new ba(lb)]),new E("Construct AI Alignment Lab","Construct a research center for developing techniques that could allow humans to control an artificial intelligence or modify its goal programming",function(a,b){b.world.placeTile(new Ha(a))},
[new p(l.BuildingMaterials,20),new p(l.Electronics,40)],[new Cb(W.Human,200),ma],[new ba(Gd)])];return a};$jscomp.inherits(Ia,q);Ia.prototype.getTileName=function(){return Ia.tileName};Ia.prototype.getTileDescription=function(){return Ia.tileDescription};Ia.tileName="Construction Site - Laboratories";Ia.tileDescription="An area designated for construction of research laboratories";var Ja=function(a){a=q.call(this,a)||this;a.texture=md;a.resourceConversions=[new U([],[new p(l.Metal,50)],80)];return a};
$jscomp.inherits(Ja,q);Ja.prototype.getTileName=function(){return Ja.tileName};Ja.prototype.getTileDescription=function(){return Ja.tileDescription};Ja.tileName="Mineshaft";Ja.tileDescription="A mineshaft built into a mountain to allow long-term ore extraction";var fa=function(a){a=q.call(this,a)||this;a.texture=bd;a.possibleProjects=[new E("Strip Mining","Destroy the mountain to produce "+l.Metal.name,function(a,b){b.inventory.addResource(l.Metal,150);b.world.placeTile(new D(a))},[new p(l.Energy,
25)],[],[]),new E("Construct Mineshaft","Create a mineshaft to allow long-term ore extraction",function(a,b){b.world.placeTile(new Ja(a))},[new p(l.Energy,300),new p(l.BuildingMaterials,50)],[new ba(lb)],[])];return a};$jscomp.inherits(fa,q);fa.prototype.getTileName=function(){return fa.tileName};fa.prototype.getTileDescription=function(){return fa.tileDescription};fa.tileName="Mountain";fa.tileDescription="A large geological formation containing useful mineral resources";var Ka=function(a){a=q.call(this,
a)||this;a.texture=wd;a.resourceConversions=[new U([],[new p(l.Energy,1E3)],15)];return a};$jscomp.inherits(Ka,q);Ka.prototype.getTileName=function(){return Ka.tileName};Ka.prototype.getTileDescription=function(){return Ka.tileDescription};Ka.tileName="Nuclear Power Plant";Ka.tileDescription="A high-efficiency fission power plant";var La=function(a){a=q.call(this,a)||this;a.texture=gd;a.possibleProjects=[new E("Break down construction site","Revert this location to wasteland",function(a,b){b.world.placeTile(new D(a))},
[],[],[]),new E("Construct photovoltaic array","Assemble an array of solar panels to produce energy",function(a,b){b.world.placeTile(new la(a))},[new p(l.Electronics,200)],[],[]),new E("Construct ore processing center","Assemble a factory that converts ore into useful materials",function(a,b){b.world.placeTile(new na(a))},[new p(l.Energy,200),new p(l.Metal,300)],[new Ya(5,fa),ma],[]),new E("Construct Nuclear Plant","Construct a nuclear power plant",function(a,b){b.world.placeTile(new Ka(a))},[new p(l.BuildingMaterials,
100),new p(l.Electronics,100)],[new ba(Cd),ma],[new ba(lb)])];return a};$jscomp.inherits(La,q);La.prototype.getTileName=function(){return La.tileName};La.prototype.getTileDescription=function(){return La.tileDescription};La.tileName="Construction Site - Industry";La.tileDescription="An area designated for construction of industrial facilities and infrastructure";var D=function(a){a=q.call(this,a)||this;a.texture=oa.fromWeightedArray([[1/8,Xc],[1/8,Yc],[1/8,Zc],[1/8,$c],[.5,ad]]);a.possibleProjects=
[new E("Create habitat construction site","Designate this location for construction of habitation and life support facilities",function(a,b){b.world.placeTile(new Da(a))},[],[],[]),new E("Create laboratory construction site","Designate this location for construction of research laboratories",function(a,b){b.world.placeTile(new Ia(a))},[],[],[]),new E("Create industry construction site","Designate this location for construction of industrial facilities and infrastructure",function(a,b){b.world.placeTile(new La(a))},
[],[],[]),new E("Construct Road","Construct roads to extend the reach of the colony's logistics",function(a,b){b.world.placeTile(new R(a))},[new p(l.BuildingMaterials,10)],[ma],[])];return a};$jscomp.inherits(D,q);D.prototype.getTileName=function(){return D.tileName};D.prototype.getTileDescription=function(){return D.tileDescription};D.prototype.getTexture=function(a){var b=a.getPastTexture(D,this.position);if(b)return b;a.storePastTexture(D,this.position,this.texture);return this.texture};D.tileName=
"Wasteland";D.tileDescription="Nothing of note here";var Ma=function(a){a=q.call(this,a)||this;a.texture=dd;return a};$jscomp.inherits(Ma,q);Ma.prototype.getTileName=function(){return Ma.tileName};Ma.prototype.getTileDescription=function(){return Ma.tileDescription};Ma.tileName="Monolith";Ma.tileDescription="A towering alien structure of unknown purpose";var Ua;(function(a){a.nonrandomTiles=function(){return[new D(new A(0,0)),new D(new A(1,0)),new D(new A(2,0)),new fa(new A(0,1)),new fa(new A(1,1)),
new fa(new A(2,1)),new D(new A(0,2)),new D(new A(1,2)),new D(new A(2,2)),new D(new A(0,3)),new ua(new A(1,3)),new D(new A(2,3)),new D(new A(0,4)),new D(new A(1,4)),new D(new A(2,4)),new Ma(new A(13,15))]};a.width=20;a.height=20;a.mountainRange=[20,25];a.ruinRange=[5,7]})(Ua||(Ua={}));var wa=function(){this.pastTextureMap=new Map;this.width=Ua.width;this.height=Ua.height;this.grid=Array(this.height);for(var a=0;a<this.height;a++){this.grid[a]=Array(this.width);for(var b=0;b<this.width;b++)this.grid[a][b]=
new D(new A(b,a))}a=oa.intBetween.apply(oa,$jscomp.arrayFromIterable(Ua.mountainRange));for(b=0;b<a;b++){var d=this.getTiles().filter(function(a){return a instanceof D});Ta.isNonEmpty(d)&&(d=oa.fromArray(d).position,this.placeTile(new fa(d)))}a=oa.intBetween.apply(oa,$jscomp.arrayFromIterable(Ua.ruinRange));for(b=0;b<a;b++)d=this.getTiles().filter(function(a){return a instanceof D}),Ta.isNonEmpty(d)&&(d=oa.fromArray(d).position,this.placeTile(new va(d)));a=$jscomp.makeIterator(Ua.nonrandomTiles());
for(b=a.next();!b.done;b=a.next())this.placeTile(b.value)};wa.prototype.placeTile=function(a){this.grid[a.position.y][a.position.x]=a};wa.prototype.getTiles=function(){return Ta.flatten(this.grid)};wa.prototype.getTilesInRectangle=function(a,b,d,e){0>b&&(b=0);0>a&&(a=0);var c=[];b=this.grid.slice(b,b+e);b=$jscomp.makeIterator(b);for(e=b.next();!e.done;e=b.next()){e=e.value.slice(a,a+d);e=$jscomp.makeIterator(e);for(var f=e.next();!f.done;f=e.next())c.push(f.value)}return c};wa.prototype.getTileAtCoordinates=
function(a){if(!(0>a.x||a.x>=this.width||0>a.y||a.y>=this.height))return this.grid[a.y][a.x]};wa.prototype.getTilesInCircle=function(a,b){return this.getTiles().filter(function(c){return a.distanceFrom(c.position)<=b})};wa.prototype.getPopulationCapacity=function(a){for(var b=0,d=$jscomp.makeIterator(this.getTiles()),e=d.next();!e.done;e=d.next())e=e.value,e.populationCapacity&&e.populationCapacity.species===a&&(b+=e.populationCapacity.capacity);return b};wa.prototype.getPastTexture=function(a,b){return this.pastTextureMap.get(""+
[a.name,b])};wa.prototype.storePastTexture=function(a,b,d){this.pastTextureMap.set(""+[a.name,b],d)};var pa=function(){this.map=new Map([])};pa.prototype.add=function(a,b){this.set(a,this.get(a)+b)};pa.prototype.remove=function(a,b){this.add(a,-1*b)};pa.prototype.get=function(a){return this.map.get(a)||0};pa.prototype.set=function(a,b){if(0>b)throw"tried to set quantity to negative value";0===b?this.map.delete(a):this.map.set(a,b)};pa.prototype.getSum=function(){return Array.from(this.map.values()).reduce(function(a,
b){return a+b},0)};pa.prototype.positiveQuantityKeys=function(){return Array.from(this.map.keys())};pa.prototype.clone=function(){for(var a=new pa,b=$jscomp.makeIterator(this.positiveQuantityKeys()),d=b.next();!d.done;d=b.next())d=d.value,a.add(d,this.get(d));return a};var F=function(a){this.world=a;this.resourceQuantities=new pa;this.populationQuantities=new pa;this.availableWorkers=0};F.prototype.addResource=function(a,b){this.resourceQuantities.add(a,b)};F.prototype.removeResource=function(a,b){this.resourceQuantities.remove(a,
b)};F.prototype.getResourceQuantity=function(a){return this.resourceQuantities.get(a)||0};F.prototype.addWorkers=function(a,b){this.populationQuantities.add(a,b);this.populationQuantities.set(a,v(0,this.populationQuantities.get(a),this.world.getPopulationCapacity(a)))};F.prototype.releaseWorkers=function(){this.availableWorkers=this.populationQuantities.getSum()};F.prototype.occupyWorkers=function(a){if(this.availableWorkers<a)throw"insufficient workers";if(0>a)throw"tried to occupy a negative number of workers";
this.availableWorkers-=a};F.prototype.getSpeciesList=function(){return this.populationQuantities.positiveQuantityKeys()};F.prototype.getPopulation=function(a){return this.populationQuantities.get(a)};F.prototype.getRequiredWorkerConsumption=function(a){var b=a.survivalCost.quantity*this.populationQuantities.get(a);return new p(a.survivalCost.resource,b)};F.prototype.getProvidedWorkerConsumption=function(a){var b=this.getRequiredWorkerConsumption(a).quantity,d=this.getResourceQuantity(a.survivalCost.resource);
return new p(a.survivalCost.resource,Math.min(b,d))};F.prototype.doPopulationGrowth=function(){for(var a=$jscomp.makeIterator(this.getSpeciesList()),b=a.next();!b.done;b=a.next()){b=b.value;var d=this.getProvidedWorkerConsumption(b);this.payCost([d]);this.populationQuantities.set(b,Math.floor(d.quantity/b.survivalCost.quantity));d=Math.floor(b.growthMultiplier*this.populationQuantities.get(b));this.addWorkers(b,d)}};F.prototype.getTotalPopulation=function(){return this.populationQuantities.getSum()};
F.prototype.getAvailableWorkers=function(){return this.availableWorkers};F.prototype.canAfford=function(a){var b=this,d=new Map;a=$jscomp.makeIterator(a);for(var e=a.next();!e.done;e=a.next())e=e.value,d.set(e.resource,e.quantity+(d.get(e.resource)||0));return Array.from(d.keys()).every(function(a){var c=d.get(a);a=b.getResourceQuantity(a);return c<=a})};F.prototype.hasEnoughWorkers=function(a){return this.availableWorkers>=a};F.prototype.payCost=function(a){if(this.canAfford(a)){a=$jscomp.makeIterator(a);
for(var b=a.next();!b.done;b=a.next())b=b.value,this.removeResource(b.resource,b.quantity)}else throw"Cannot afford to pay cost";};F.prototype.getResourceList=function(){var a=this;return l.values().filter(function(b){return 0!==a.resourceQuantities.get(b)})};F.prototype.getInventoryStrings=function(){var a=this;return this.getResourceList().map(function(b){return b.name+": "+a.getResourceQuantity(b)})};F.prototype.getPopulationStrings=function(){var a=this;return this.populationQuantities.positiveQuantityKeys().map(function(b){return a.populationQuantities.get(b)+
" "+b.name})};F.prototype.applyConversions=function(a){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())if(b=b.value,this.canAfford(b.inputs)&&this.hasEnoughWorkers(b.requiredWorkers)&&b.enabled){this.payCost(b.inputs);this.occupyWorkers(b.requiredWorkers);b=$jscomp.makeIterator(b.outputs);for(var d=b.next();!d.done;d=b.next())d=d.value,this.addResource(d.resource,d.quantity)}};F.prototype.clone=function(){var a=new F(this.world);a.resourceQuantities=this.resourceQuantities.clone();
a.populationQuantities=this.populationQuantities.clone();a.availableWorkers=this.availableWorkers;return a};var Kc=function(a){this.ending=a;this.html=h.makeDiv();this.refresh()};Kc.prototype.refresh=function(){var a=h.makeHeader(this.ending.title),b=h.makePara(this.ending.description),d=h.makeButton("Quit Game",function(){Q.show(new jb)});h.fillHTML(this.html,[a,b,d])};var V=function(){this.turnNumber=1;this.prevQuestDescription="";this.questCompletionShown=!0;this.completedTechs=[];this.world=new wa;
this.inventory=new F(this.world);this.questStage=Id};V.prototype.getCurrentQuestDescription=function(){return this.questStage.description};V.prototype.getCurrentQuestHint=function(){return this.questStage.hint};V.prototype.getPreviousQuestDescription=function(){return this.prevQuestDescription};V.prototype.setQuestStage=function(a){this.questStage=a};V.prototype.getUnorderedConversions=function(){return Ta.flatten(this.world.getTiles().map(function(a){return a.resourceConversions}))};V.prototype.getResourceConversions=
function(){var a=this.getUnorderedConversions(),b=Ta.partition(a,function(a){return a.isFree()});a=b.yes;b=b.no;a.sort(function(a,b){return a.priority-b.priority});b.sort(function(a,b){return a.priority-b.priority});return{free:a,costly:b}};V.prototype.getAllResourceConversions=function(){var a=this.getUnorderedConversions();a.sort(function(a,b){return a.priority-b.priority});return a};V.prototype.updateQuestState=function(){var a=this.questStage.updatedStage(this);a!==this.questStage&&(this.prevQuestDescription=
this.questStage.description,this.questCompletionShown=!1,this.questStage=a);this.questStage.endState&&Q.show(new Kc(this.questStage.endState))};V.prototype.hasUnlockedTechnology=function(a){return this.completedTechs.includes(a)};V.prototype.unlockTechnology=function(a){this.hasUnlockedTechnology(a)||this.completedTechs.push(a)};V.prototype.getUnlockedTechnologies=function(){return this.completedTechs};V.prototype.getResearchOptions=function(){var a=this;return wc.filter(function(a){return a.visible}).filter(function(b){return b.requiredTechs.every(function(b){return a.completedTechs.includes(b)})}).filter(function(b){return!a.hasUnlockedTechnology(b)})};
V.prototype.completeTurn=function(){this.inventory.applyConversions(this.getAllResourceConversions());this.inventory.releaseWorkers();this.inventory.doPopulationGrowth();this.turnNumber++;this.updateQuestState()};V.prototype.shiftCostlyConversionPriority=function(a,b){if(!(a===b||0>a)){var c=this.getResourceConversions().costly;if(!(b>=c.length)){var d=c[b].priority;if(a<b)for(;b>a;b--)c[b].priority=c[b-1].priority;else for(;b<a;b++)c[b].priority=c[b+1].priority;c[a].priority=d}}};var jb=function(){this.html=
h.makeDiv(["main-menu"]);this.refresh()};jb.prototype.refresh=function(){h.fillHTML(this.html,[h.makeHeader("Aurora",1),h.makeDivContaining([h.makeButton("start_game",function(){var a=new V;t(a);Q.show(new Pa(a))}),h.makeButton("display_credits",function(){return Q.show(new uc)})],["main-menu-options"])])};window.onload=function(){console.log("Script Loaded");k().then(function(){Q.show(new jb)},function(){})}}]);}).call(this || window)
</script><script type="text/javascript">(function(){'use strict';}).call(this || window)
</script></body> </html> 