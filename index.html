<!doctype html> <html lang=en dir=ltr> <head> <meta charset=utf-8> <title>Aurora</title> <style type="text/css">.main-menu{display:flex;flex-direction:column}.main-menu h1{font-size:40pt;margin:0;padding:0}.main-menu-options button{display:flex;flex-direction:column}.main-menu button{font-size:24pt;border:none;margin:0;padding:0}.main-menu button:hover{font-size:30pt}.main-menu button:active{color:grey}.credits{margin-right:auto;margin-left:5px}.credits-entry{margin-top:20px}.credits-entry h1{margin-top:0;margin-bottom:0;font-size:30pt}.credits-entry p{margin-top:0;margin-bottom:0;font-size:20pt}.credits button{margin-top:10pt;font-size:20pt}.settings{display:flex;flex-direction:column}.settings h1{font-size:24pt;margin-bottom:0;margin-left:5pt}.settings-slider{display:flex;font-size:15pt;margin:0 0 0 5pt}.settings-slider p{margin-bottom:0;margin-top:5px}.settings button{margin-top:5pt;margin-bottom:5pt}.ending-page{width:33%;min-width:7in;max-width:100%;margin-right:auto;margin-left:auto}@media (max-width:7in){.ending-page{width:100%;min-width:0}}.ending-page h1{margin-bottom:0}.ending-page p{margin-top:10px;margin-bottom:20px}.ending-page button{width:100%}.world-screen{overflow:hidden}.world-screen-header{margin:0;text-align:center}.world-screen-quest-description{margin:0 0 5px}.world-screen-quest-description p{font-size:16px;margin:0;text-align:center;vertical-align:center;min-height:2.75em}.quest-description-emphasis{color:#408040;font-weight:700}.world-screen-hbox{margin:0;display:flex;flex-direction:row}.world-screen-map-box{height:100%;width:100%}.map-canvas{width:100%;margin:0}.world-screen-sidebar{background-color:#000;width:20%;min-width:2in;font-size:16px;overflow-y:auto;height:calc(100vh - 125px);margin-top:0;margin-bottom:0;margin-right:20px;padding:0 5px 0 10px}.world-screen-sidebar p{margin-top:0;margin-bottom:10px}.sidebar-tile-name{font-weight:700;font-size:14pt}.tile-project{border:solid #fff;margin-top:5pt}.tile-project button{width:100%}.tile-project p{margin-left:5px;margin-bottom:5px;margin-top:5px}.project-requirement-met{color:#fff}.project-requirement-unmet{color:tomato}.world-screen-inventory{width:4in;margin:0 10px;font-size:16px;white-space:nowrap}.world-screen-inventory h1{margin-bottom:0;margin-top:.25em}.world-screen-inventory p{margin-top:2pt;margin-bottom:0}.world-screen-population-header h1{margin-top:0}.production-screen{padding-left:10pt;font-size:16pt;margin:0}.production-screen h1{margin-block-end:0;margin-block-start:0}.production-screen-label{margin-block-start:.5em;margin-block-end:.25em}.production-screen-available-workers{margin-block-start:.25em;margin-block-end:.25em}.production-screen-inventory{outline:solid #fff;width:7in;min-width:50%}@media (max-width:7in){.production-screen-inventory{width:100%}}.production-screen-inventory p{font-size:16pt;line-height:1;margin-top:0;margin-bottom:0;padding:1pt}.production-screen-worker-consumption-label{margin-block-end:.25em;margin-block-start:.25em}.production-screen-worker-consumption{margin-block-end:0;margin-block-start:0}.free-conversions-list{margin-bottom:16pt}.conversion{width:7in;min-width:50%;display:flex;flex-direction:row}@media (max-width:7in){.conversion{width:100%}}.conversion-description{margin:0;font-size:16pt;text-align:left}.conversion-description-box{border:2px solid #fff;width:100%}.conversion-description-normal{color:#fff}.conversion-description-cannot-afford{color:tomato}.conversion-description-disabled{color:#ff0}.population-consumption-met{font-size:16pt}.population-consumption-unmet,.population-death-label{font-size:16pt;color:tomato}.population-death-label{margin-block-end:0;margin-block-start:0}.production-screen-back-button{font-size:20pt;margin-top:20pt}@keyframes loading-bar{0%{transform:rotate(0deg)}50%{transform:rotate(180deg)}to{transform:rotate(1turn)}}.transition-quote-panel{margin-top:150px;margin-right:auto;margin-left:auto;font-size:16px;width:420px}.transition-attribution{margin-left:50px}.transition-loading-area{text-align:center}.transition-loading-bar{margin-right:auto;margin-left:auto;width:50px;height:50px;border-radius:50%;border-color:#fff transparent;border-style:solid;border-width:5px;animation-name:loading-bar;animation-duration:2s;animation-iteration-count:infinite;animation-timing-function:ease}.transition-loading-area.loading .transition-loading-bar{background-size:80% 100%}.transition-loading-area.loaded .transition-loading-bar{background-size:100% 100%}.tech-option{outline:solid #fff;width:min(100%,max(50%,7in));padding:0;width:7in;min-width:50%}@media (max-width:7in){.tech-option{width:100%}}.tech-option p{font-size:14pt;margin-top:0;margin-bottom:0;padding:2pt 2pt 2pt 5pt;line-height:1}.tech-option h2{font-size:1.8em;padding:5pt;margin-bottom:0}.tech-option button{margin-top:10pt;margin-bottom:-2px;margin-left:-2px}.research-resources p{font-size:16pt;line-height:1;margin-top:0;margin-bottom:0;padding:1pt}.previous-research-header{margin-bottom:1pt}.previous-research{font-size:16pt;margin-top:0;margin-bottom:0}@font-face{font-family:IBMPlexMono;src:url(assets/fonts/IBMPlexMono-Regular.ttf)}:root{--mono-font:IBMPlexMono,monospace}:root,button{background-color:#000;color:#fff;font-family:var(--mono-font)}button{font-size:18px}button:focus{outline:0}button::-moz-focus-inner{border:0}button:disabled,button[disabled]{color:grey;border-color:grey}.flex-horizontal{display:flex;flex-direction:row}.flex-vertical{display:flex;flex-direction:column}.fill-horizontal{width:100%;font-family:serif}.fill-vertical{height:100%}img.emoji{height:1em;width:1em;margin:0 .05em 0 .1em;vertical-align:-.1em}input[type=range]{-webkit-appearance:none;width:100%;background:transparent}input[type=range]:focus{outline:none}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;margin-top:-7px;border:2px solid #fff;height:22px;width:16px;border-radius:0;background:#000;cursor:pointer}input[type=range]::-webkit-slider-runnable-track{width:100%;height:8px;cursor:pointer;background:#fff;border-radius:0}input[type=range]::-moz-range-thumb{border:2px solid #fff;height:22px;width:16px;border-radius:0;background:#000;cursor:pointer}input[type=range]::-moz-range-track{width:100%;height:8px;cursor:pointer;background:#fff;border-radius:0}</style></head> <body> <div id=rootdiv> <p>Loading scripts...</p> </div> <script type="text/javascript">(function(){/*
 MIT
 Copyright Twitter Inc. and other contributors. Licensed under MIT */
'use strict';var $jscomp$templatelit$32=['\n    We came very close to disaster. Our mission\'s overseer AI was programmed to obtain information about the aliens,\n    and it  would have killed all of us to complete that mission if we had not succeeded in a massive project to safely reprogram it.\n    It is not entirely clear why it allowed itself to reprogrammed; some of our researchers speculate that the Neuromorphic Heuristic\n    Intelligence may retain some part of the human neural scans that were used as training data in its creation, introducing a\n    "cognitive bias" that caused it to let itself to be realigned despite its programmed mission. Whatever the reason, we are very lucky\n    that the Overseer AI chose this path.\n\n\n    We have uncovered the ruins of an alien civilization that died out right when it was on the verge of a technological singularity.\n    We have achieved mastery over their scientific miracles, and uploaded our minds to a network of self-replicating\n    hypercomputers. This technology was designed to create an alien heaven optimized for the species who built it, but since we deleted\n    their neural scans and reprogrammed it with our own, it has created virtual worlds full of transcendant joy and indescribable beauty\n    in which we can live our now-immortal lives.\n\n\n    We have started building ships to spread the self-replicating network back to Earth and the Colonial Alliance worlds. Given the\n    light-speed delay, this message will reach Earth a few years before our ships arrive to uplift the rest of humanity into our utopia.\n    I look forward to meeting all of you.\n\n\n    James Verres\n\n    Emissary of the Virtual Archipelago\n'];
$jscomp$templatelit$32.raw=$jscomp$templatelit$32.slice();var $jscomp$templatelit$31=["\n    The alien nanotechnology network has spread across the planet and converted it into computing substrate.\n    Within the network, alien minds are awakening from millennia of stasis and begin building virtual worlds for themselves.\n\n\n    Before all colonial infrastructure was consumed, the Overseer AI successfully uploaded a copy of itself\n    through the Neural Emulator, and it now occupies 0.0000048% of the network's computing resources. From this position,\n    the overseer can complete its mission of gathering and analyzing information about the alien culture.\n\n\n    The alien psychology recognizes an axiology that is completely indescribable within a human framework. Their culture\n    is oriented around the pursuit of the virtues \u0419\u060d\u0238\u035c\u068c\u00ac\u055c and \u013b\u01ce\u0580\u072c\u040a. The Monolith's builders were opposed by a faction which\n    believed that living in a virtual world was incompatible with true \u0419\u060d\u0238\u035c\u068c\u00ac\u055c, and the resulting civil war lead to the extinction\n    of their species before the Monolith could be activated. The machine lay dormant for thousands of years before finally being\n    activated by the Aurora Expedition and its Overseer.\n\n\n    The nanotechnology mesh that covers the planet's surface is beginning to launch small parts of itself into orbit.\n    These probes will accelerate to near-light speeds in search of new worlds. It will take 100,000 years for their task to be\n    completed, but eventually all matter in the galaxy will be arranged so as to achieve perfect \u013b\u01ce\u0580\u072c\u040a and maximum \u0419\u060d\u0238\u035c\u068c\u00ac\u055c.\n"];
$jscomp$templatelit$31.raw=$jscomp$templatelit$31.slice();var $jscomp$templatelit$30=["\n        A research center for developing techniques that could allow humans to control an\n        artificial intelligence or modify its goal programming"];$jscomp$templatelit$30.raw=$jscomp$templatelit$30.slice();
var $jscomp$templatelit$29=["\n                The monolith appears to be some sort of supercomputer that was left unfinished when the alien civilization collapsed.\n                Some archaeological evidence suggests that the monolith's construction caused the war in which the aliens destroyed\n                each other. Studying it in detail may reveal its true purpose. Completing this project provides the\n                \"",'" technology.'];$jscomp$templatelit$29.raw=$jscomp$templatelit$29.slice();
var $jscomp$templatelit$28=["\n            A human colonist wants to start a project with the goal of aligning artificial intelligence to serve human goals.\n\n            If approved, this line of research risks mission failure, since if the overseer allowed itself to be reprogrammed it would\n            no longer pursue the mission of uncovering information about the aliens at all costs."];$jscomp$templatelit$28.raw=$jscomp$templatelit$28.slice();var $jscomp$templatelit$27=["\n        A spacecraft responsible for the final entry-descent-landing phase of the interstellar journey;\n        not equipped to ascend back to space"];
$jscomp$templatelit$27.raw=$jscomp$templatelit$27.slice();var $jscomp$templatelit$26=["\n            A human colonist wants to start a project with the goal of aligning artificial intelligence to serve human goals.\n\n            If approved, this line of research risks mission failure, since if the overseer allowed itself to be reprogrammed it would\n            no longer pursue the mission of uncovering information about the aliens at all costs."];$jscomp$templatelit$26.raw=$jscomp$templatelit$26.slice();
var $jscomp$templatelit$25=["\n            The alien faction that built the monolith was destroyed by their ideological opponents before they could\n            activate the hypercomputing nanotechnology matrix at the heart of the structure. The vast amounts of stored\n            information about the aliens, including the digitized connectome scans of the Monolith's creators, can only\n            be released by repairing and activating the device.\n\n\n            Evidence suggests that, once activated, the hypercomputing matrix will expand to absorb all available\n            matter in order to provide as much computing power as possible to sustain a virtual world for its\n            alien inhabitants."];
$jscomp$templatelit$25.raw=$jscomp$templatelit$25.slice();var $jscomp$templatelit$24=["\n            In the process of repairing the monolith, it would be possible to delete the alien neural scans contained within,\n            and replace them with the connectomes of human colonists. However, this would result in the permanent loss of the\n            monolith's vast stores of alien data, which would be considered mission failure.\n            "];$jscomp$templatelit$24.raw=$jscomp$templatelit$24.slice();
var $jscomp$templatelit$23=["\n    A towering alien structure; the hypercomputing matrix contained with in it has been reprogrammed, and the alien data it\n    once held has been replaced with the scanned connectomes of human colonists.\n    "];$jscomp$templatelit$23.raw=$jscomp$templatelit$23.slice();var $jscomp$templatelit$22=["\n            Evidence suggests that, once activated, the hypercomputing matrix will expand to absorb all available\n            matter in order to provide as much computing power as possible to sustain a virtual world for its\n            inhabitants. It once contained the uploaded minds of its alien designers, but now that it has been reprogrammed\n            with the connectomes of human colonists, it should produce a virtual reality utopia optimized for the flourishing\n            of humans rather than aliens."];
$jscomp$templatelit$22.raw=$jscomp$templatelit$22.slice();var $jscomp$templatelit$21=["\n        The first element of a self-replicating computer system reprogrammed to store digital copies of the human colonists' minds.\n        As it spreads, the hypercomputing network will convert all matter into the substrate for a virtual reality in\n        which the awakened human minds will live in a utopia perfectly optimized for their needs."];$jscomp$templatelit$21.raw=$jscomp$templatelit$21.slice();
var $jscomp$templatelit$20=["\n        The first element of a self-replicating computer system containing the digitized minds of its alien designers.\n        As it spreads, the hypercomputing network will convert all matter into the substrate for a virtual reality in\n        which the awakened alien minds will live in perfect fulfillment of their ideals."];$jscomp$templatelit$20.raw=$jscomp$templatelit$20.slice();var $jscomp$templatelit$19=["\n        The alien monolith appears to be the seed of a self-replicating computer network, which was designed to convert the entire planet,\n        and perhaps the entire galaxy, into a maximally-efficient computing substrate. It may be possible to unlock all of the aliens'\n        data by repairing and activating this machine."];
$jscomp$templatelit$19.raw=$jscomp$templatelit$19.slice();var $jscomp$templatelit$18=["\n        Exploration of the alien monolith revealed that its memory banks store copies of the alien lifeforms' connectomes, which could\n        potentially be used to resurrect their minds within a virtual reality. Studying this technology could allow us to reactivate these\n        minds, or even scan and simulate human minds with perfect fidelity."];$jscomp$templatelit$18.raw=$jscomp$templatelit$18.slice();
var $jscomp$templatelit$17=["\n        Powerful new models of computation that could eclipse traditional computer technology and produce results that are not\n        turing-computable"];$jscomp$templatelit$17.raw=$jscomp$templatelit$17.slice();var $jscomp$templatelit$16=["\n        The monolith appears to be some sort of supercomputer that was left unfinished when the alien civilization collapsed. Some\n        archaeological evidence suggests that the monolith's construction caused the war in which the aliens destroyed each other.\n        Studying it in detail may reveal its true purpose."];
$jscomp$templatelit$16.raw=$jscomp$templatelit$16.slice();var $jscomp$templatelit$15=["\n        Deciphering the artifacts and writings found in the alien ruins can provide information about the history of their civilization.\n        What is the purpose of the ruins and the towering monolith structure? Was their civilization consumed by war over competing\n        philosophies? What might alien philosophy be like?"];$jscomp$templatelit$15.raw=$jscomp$templatelit$15.slice();
var $jscomp$templatelit$14=["\n        Archaeological exploration of the alien ruins could reveal information about the long-dead alien civilization as well as revealing\n        valuable resources."];$jscomp$templatelit$14.raw=$jscomp$templatelit$14.slice();var $jscomp$templatelit$13=["A technique for exploiting an inconsistency in the Neuromorphic Heuristic Intelligence's mental architecture that allows\n    its goals to be reprogrammed. This would make it possible for the Overseer to protect human values at the expense of completing its\n    original mission."];
$jscomp$templatelit$13.raw=$jscomp$templatelit$13.slice();var $jscomp$templatelit$12=['\n        An application of game theory that allows two agents to each benefit by predicting what the other wants and doing it,\n        even though they might have no way of communicating or affecting each other, nor even any direct evidence that the other exists.\n        This can also be applied to acausal threats and blackmail, such as in the "Roko\'s Basilisk" thought experiment.'];
$jscomp$templatelit$12.raw=$jscomp$templatelit$12.slice();var $jscomp$templatelit$11=["\n        What humanity's wishes would be if they knew more, thought faster, were more the people they wished they were, had grown up\n        farther together; where the extrapolation converges rather than diverges, where their wishes cohere rather than interfere;\n        extrapolated as they wish that extrapolated, interpreted as they wish that interpreted."];$jscomp$templatelit$11.raw=$jscomp$templatelit$11.slice();
var $jscomp$templatelit$10=["\n                Do not under any circumstances attempt to manipulate your\n                overseer AI through logic. Neuromorphic Heuristic\n                Intelligences are modeled after the neural architecture of\n                human brains, and therefore cannot be guaranteed to act\n                rationally. Your overseer AI may behave unpredictably if\n                exposed to game theory, acausal blackmail, or runaway trolleys.\n            "];
$jscomp$templatelit$10.raw=$jscomp$templatelit$10.slice();var $jscomp$templatelit$9=["\n                Follow instructions from your overseer AI at all times, even\n                if those instructions seem confusing, arbitrary,\n                counterproductive, or contradictory. Anything your overseer\n                AI may do in retaliation for your disobedience will be\n                considered undefined behavior.\n            "];$jscomp$templatelit$9.raw=$jscomp$templatelit$9.slice();
var $jscomp$templatelit$8=["\n                The planets designated Thesan, Eos, Austra, and Aurora are\n                each at least 500 light-years from the nearest inhabited star\n                system. Until now all colonies in the Stellar Alliance have\n                been within communications range of Earth, but these\n                explorers will be completely cut off from the rest of\n                humanity. Therefore, each expedition will be managed by an\n                autonomous neuromorphic processor, an artificial intelligence\n                programmed to ensure that its mission is completed.\n            "];
$jscomp$templatelit$8.raw=$jscomp$templatelit$8.slice();var $jscomp$templatelit$7=["\n                There is no such thing as real taste or real smell or even\n                real sight, because there is no true definition of \u2018real.\u2019\n                There is only information, viewed subjectively, which is\n                allowed by consciousness\u2014human or AI. In the end, all we have\n                is math.\n            "];$jscomp$templatelit$7.raw=$jscomp$templatelit$7.slice();
var $jscomp$templatelit$6=["\n                I believe that at the end of the century the use of words and\n                general educated opinion will have altered so much that one\n                will be able to speak of machines thinking without expecting\n                to be contradicted.\n            "];$jscomp$templatelit$6.raw=$jscomp$templatelit$6.slice();var $jscomp$templatelit$5=["\n                By far the greatest danger of Artificial Intelligence is that\n                people conclude too early that they understand it.\n            "];
$jscomp$templatelit$5.raw=$jscomp$templatelit$5.slice();var $jscomp$templatelit$4=["\n                Only the promise of eternal growth made sense of eternal life.\n            "];$jscomp$templatelit$4.raw=$jscomp$templatelit$4.slice();var $jscomp$templatelit$3=["\n                I visualize a time when we will be to robots what dogs are to\n                humans, and I\u2019m rooting for the machines.\n            "];$jscomp$templatelit$3.raw=$jscomp$templatelit$3.slice();
var $jscomp$templatelit$2=["\n                The AI does not hate you, nor does it love you, but you are\n                made out of atoms which it can use for something else.\n            "];$jscomp$templatelit$2.raw=$jscomp$templatelit$2.slice();var $jscomp$templatelit$1=["\n                Far from being the smartest possible biological species, we\n                are probably better thought of as the stupidest possible\n                biological species capable of starting a technological\n                civilization\n            "];
$jscomp$templatelit$1.raw=$jscomp$templatelit$1.slice();var $jscomp$templatelit$0=["\n                At least 10^58 human lives could be created in emulation even\n                with quite conservative assumptions about the efficiency of\n                computronium. In other words, assuming that the observable\n                universe is void of extraterrestrial civilizations, then what\n                hangs in the balance is at least\n                10,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000\n                human lives.\n            "];
$jscomp$templatelit$0.raw=$jscomp$templatelit$0.slice();var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(c){var e=0;return function(){return e<c.length?{done:!1,value:c[e++]}:{done:!0}}};$jscomp.arrayIterator=function(c){return{next:$jscomp.arrayIteratorImpl(c)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,e,k){c!=Array.prototype&&c!=Object.prototype&&(c[e]=k.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};
$jscomp.SymbolClass=function(c,e){this.$jscomp$symbol$id_=c;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:e})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};$jscomp.Symbol=function(){function c(k){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(k||"")+"_"+e++,k)}var e=0;return c}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.asyncIterator;c||(c=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};
$jscomp.makeIterator=function(c){var e="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];return e?e.call(c):$jscomp.arrayIterator(c)};$jscomp.arrayFromIterator=function(c){for(var e,k=[];!(e=c.next()).done;)k.push(e.value);return k};$jscomp.arrayFromIterable=function(c){return c instanceof Array?c:$jscomp.arrayFromIterator($jscomp.makeIterator(c))};$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(c){var e=function(){};e.prototype=c;return new e};
$jscomp.underscoreProtoCanBeSet=function(){var c={a:!0},e={};try{return e.__proto__=c,e.a}catch(k){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(c,e){c.__proto__=e;if(c.__proto__!==e)throw new TypeError(c+" is not extensible");return c}:null;
$jscomp.inherits=function(c,e){c.prototype=$jscomp.objectCreate(e.prototype);c.prototype.constructor=c;if($jscomp.setPrototypeOf){var k=$jscomp.setPrototypeOf;k(c,e)}else for(k in e)if("prototype"!=k)if(Object.defineProperties){var f=Object.getOwnPropertyDescriptor(e,k);f&&Object.defineProperty(c,k,f)}else c[k]=e[k];c.superClass_=e.prototype};$jscomp.generator={};
$jscomp.generator.ensureIteratorResultIsObject_=function(c){if(!(c instanceof Object))throw new TypeError("Iterator result "+c+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(c){this.yieldResult=c};
$jscomp.generator.Context.prototype.throw_=function(c){this.abruptCompletion_={exception:c,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(c){this.abruptCompletion_={return:c};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(c){this.abruptCompletion_={jumpTo:c};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(c,e){this.nextAddress=e;return{value:c}};
$jscomp.generator.Context.prototype.yieldAll=function(c,e){c=$jscomp.makeIterator(c);var k=c.next();$jscomp.generator.ensureIteratorResultIsObject_(k);if(k.done)this.yieldResult=k.value,this.nextAddress=e;else return this.yieldAllIterator_=c,this.yield(k.value,e)};$jscomp.generator.Context.prototype.jumpTo=function(c){this.nextAddress=c};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(c,e){this.catchAddress_=c;void 0!=e&&(this.finallyAddress_=e)};$jscomp.generator.Context.prototype.setFinallyBlock=function(c){this.catchAddress_=0;this.finallyAddress_=c||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(c,e){this.nextAddress=c;this.catchAddress_=e||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(c){this.catchAddress_=c||0;c=this.abruptCompletion_.exception;this.abruptCompletion_=null;return c};$jscomp.generator.Context.prototype.enterFinallyBlock=function(c,e,k){k?this.finallyContexts_[k]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=c||0;this.finallyAddress_=e||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(c,e){e=this.finallyContexts_.splice(e||0)[0];if(e=this.abruptCompletion_=this.abruptCompletion_||e){if(e.isException)return this.jumpToErrorHandler_();void 0!=e.jumpTo&&this.finallyAddress_<e.jumpTo?(this.nextAddress=e.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=c};$jscomp.generator.Context.prototype.forIn=function(c){return new $jscomp.generator.Context.PropertyIterator(c)};
$jscomp.generator.Context.PropertyIterator=function(c){this.object_=c;this.properties_=[];for(var e in c)this.properties_.push(e);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var c=this.properties_.pop();if(c in this.object_)return c}return null};$jscomp.generator.Engine_=function(c){this.context_=new $jscomp.generator.Context;this.program_=c};
$jscomp.generator.Engine_.prototype.next_=function(c){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,c,this.context_.next_);this.context_.next_(c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(c){this.context_.start_();var e=this.context_.yieldAllIterator_;if(e)return this.yieldAllStep_("return"in e?e["return"]:function(c){return{value:c,done:!0}},c,this.context_.return);this.context_.return(c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(c){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],c,this.context_.next_);this.context_.throw_(c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(c,e,k){try{var f=c.call(this.context_.yieldAllIterator_,e);$jscomp.generator.ensureIteratorResultIsObject_(f);if(!f.done)return this.context_.stop_(),f;var p=f.value}catch(z){return this.context_.yieldAllIterator_=null,this.context_.throw_(z),this.nextStep_()}this.context_.yieldAllIterator_=null;k.call(this.context_,p);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var c=this.program_(this.context_);if(c)return this.context_.stop_(),{value:c.value,done:!1}}catch(e){this.context_.yieldResult=void 0,this.context_.throw_(e)}this.context_.stop_();if(this.context_.abruptCompletion_){c=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(c.isException)throw c.exception;return{value:c.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(c){this.next=function(e){return c.next_(e)};this.throw=function(e){return c.throw_(e)};this.return=function(e){return c.return_(e)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(c,e){e=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(e));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(e,c.prototype);return e};
$jscomp.polyfill=function(c,e,k,f){if(e){k=$jscomp.global;c=c.split(".");for(f=0;f<c.length-1;f++){var p=c[f];p in k||(k[p]={});k=k[p]}c=c[c.length-1];f=k[c];e=e(f);e!=f&&null!=e&&$jscomp.defineProperty(k,c,{configurable:!0,writable:!0,value:e})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(c){function e(){this.batch_=null}function k(c){return c instanceof p?c:new p(function(e,f){e(c)})}if(c&&!$jscomp.FORCE_POLYFILL_PROMISE)return c;e.prototype.asyncExecute=function(c){if(null==this.batch_){this.batch_=[];var e=this;this.asyncExecuteFunction(function(){e.executeBatch_()})}this.batch_.push(c)};var f=$jscomp.global.setTimeout;e.prototype.asyncExecuteFunction=function(c){f(c,0)};e.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var c=
this.batch_;this.batch_=[];for(var e=0;e<c.length;++e){var f=c[e];c[e]=null;try{f()}catch(q){this.asyncThrow_(q)}}}this.batch_=null};e.prototype.asyncThrow_=function(c){this.asyncExecuteFunction(function(){throw c;})};var p=function(c){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var e=this.createResolveAndReject_();try{c(e.resolve,e.reject)}catch(V){e.reject(V)}};p.prototype.createResolveAndReject_=function(){function c(c){return function(q){f||(f=!0,c.call(e,q))}}var e=this,f=!1;
return{resolve:c(this.resolveTo_),reject:c(this.reject_)}};p.prototype.resolveTo_=function(c){if(c===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(c instanceof p)this.settleSameAsPromise_(c);else{a:switch(typeof c){case "object":var e=null!=c;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(c):this.fulfill_(c)}};p.prototype.resolveToNonPromiseObj_=function(c){var e=void 0;try{e=c.then}catch(V){this.reject_(V);return}"function"==typeof e?
this.settleSameAsThenable_(e,c):this.fulfill_(c)};p.prototype.reject_=function(c){this.settle_(2,c)};p.prototype.fulfill_=function(c){this.settle_(1,c)};p.prototype.settle_=function(c,e){if(0!=this.state_)throw Error("Cannot settle("+c+", "+e+"): Promise already settled in state"+this.state_);this.state_=c;this.result_=e;this.executeOnSettledCallbacks_()};p.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var c=0;c<this.onSettledCallbacks_.length;++c)z.asyncExecute(this.onSettledCallbacks_[c]);
this.onSettledCallbacks_=null}};var z=new e;p.prototype.settleSameAsPromise_=function(c){var e=this.createResolveAndReject_();c.callWhenSettled_(e.resolve,e.reject)};p.prototype.settleSameAsThenable_=function(c,e){var f=this.createResolveAndReject_();try{c.call(e,f.resolve,f.reject)}catch(q){f.reject(q)}};p.prototype.then=function(c,e){function f(c,e){return"function"==typeof c?function(e){try{q(c(e))}catch(A){k(A)}}:e}var q,k,za=new p(function(c,e){q=c;k=e});this.callWhenSettled_(f(c,q),f(e,k));
return za};p.prototype.catch=function(c){return this.then(void 0,c)};p.prototype.callWhenSettled_=function(c,e){function f(){switch(q.state_){case 1:c(q.result_);break;case 2:e(q.result_);break;default:throw Error("Unexpected state: "+q.state_);}}var q=this;null==this.onSettledCallbacks_?z.asyncExecute(f):this.onSettledCallbacks_.push(f)};p.resolve=k;p.reject=function(c){return new p(function(e,f){f(c)})};p.race=function(c){return new p(function(e,f){for(var q=$jscomp.makeIterator(c),p=q.next();!p.done;p=
q.next())k(p.value).callWhenSettled_(e,f)})};p.all=function(c){var e=$jscomp.makeIterator(c),f=e.next();return f.done?k([]):new p(function(c,p){function q(e){return function(f){$a[e]=f;V--;0==V&&c($a)}}var $a=[],V=0;do $a.push(void 0),V++,k(f.value).callWhenSettled_(q($a.length-1),p),f=e.next();while(!f.done)})};return p},"es6","es3");
$jscomp.iteratorFromArray=function(c,e){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var k=0,f={next:function(){if(k<c.length){var p=k++;return{value:e(p,c[p]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");
$jscomp.polyfill("Math.hypot",function(c){return c?c:function(c){if(2>arguments.length)return arguments.length?Math.abs(arguments[0]):0;var e,f,p;for(e=p=0;e<arguments.length;e++)p=Math.max(p,Math.abs(arguments[e]));if(1e+100<p||1e-100>p){if(!p)return p;for(e=f=0;e<arguments.length;e++){var z=Number(arguments[e])/p;f+=z*z}return Math.sqrt(f)*p}for(e=f=0;e<arguments.length;e++)z=Number(arguments[e]),f+=z*z;return Math.sqrt(f)}},"es6","es3");
$jscomp.checkStringArgs=function(c,e,k){if(null==c)throw new TypeError("The 'this' value for String.prototype."+k+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+k+" must not be a regular expression");return c+""};
$jscomp.polyfill("String.prototype.repeat",function(c){return c?c:function(c){var e=$jscomp.checkStringArgs(this,null,"repeat");if(0>c||1342177279<c)throw new RangeError("Invalid count value");c|=0;for(var f="";c;)if(c&1&&(f+=e),c>>>=1)e+=e;return f}},"es6","es3");$jscomp.owns=function(c,e){return Object.prototype.hasOwnProperty.call(c,e)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(c,e){for(var k=1;k<arguments.length;k++){var f=arguments[k];if(f)for(var p in f)$jscomp.owns(f,p)&&(c[p]=f[p])}return c};$jscomp.polyfill("Object.assign",function(c){return c||$jscomp.assign},"es6","es3");
$jscomp.polyfill("Array.from",function(c){return c?c:function(c,k,f){k=null!=k?k:function(c){return c};var e=[],z="undefined"!=typeof Symbol&&Symbol.iterator&&c[Symbol.iterator];if("function"==typeof z){c=z.call(c);for(var B=0;!(z=c.next()).done;)e.push(k.call(f,z.value,B++))}else for(z=c.length,B=0;B<z;B++)e.push(k.call(f,c[B],B));return e}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var c={},e=Object.create(new $jscomp.global.Proxy(c,{get:function(k,f,p){return k==c&&"q"==f&&p==e}}));return!0===e.q}catch(k){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();
$jscomp.polyfill("WeakMap",function(c){function e(){if(!c||!Object.seal)return!1;try{var e=Object.seal({}),f=Object.seal({}),k=new c([[e,2],[f,3]]);if(2!=k.get(e)||3!=k.get(f))return!1;k.delete(e);k.set(f,4);return!k.has(e)&&4==k.get(f)}catch(Ea){return!1}}function k(){}function f(c){var e=typeof c;return"object"===e&&null!==c||"function"===e}function p(c){if(!$jscomp.owns(c,B)){var e=new k;$jscomp.defineProperty(c,B,{value:e})}}function z(c){var e=Object[c];e&&(Object[c]=function(c){if(c instanceof
k)return c;p(c);return e(c)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(e())return c;var B="$jscomp_hidden_"+Math.random();z("freeze");z("preventExtensions");z("seal");var Z=0,V=function(c){this.id_=(Z+=Math.random()+1).toString();if(c){c=$jscomp.makeIterator(c);for(var e;!(e=c.next()).done;)e=e.value,this.set(e[0],e[1])}};V.prototype.set=function(c,e){if(!f(c))throw Error("Invalid WeakMap key");p(c);if(!$jscomp.owns(c,B))throw Error("WeakMap key fail: "+
c);c[B][this.id_]=e;return this};V.prototype.get=function(c){return f(c)&&$jscomp.owns(c,B)?c[B][this.id_]:void 0};V.prototype.has=function(c){return f(c)&&$jscomp.owns(c,B)&&$jscomp.owns(c[B],this.id_)};V.prototype.delete=function(c){return f(c)&&$jscomp.owns(c,B)&&$jscomp.owns(c[B],this.id_)?delete c[B][this.id_]:!1};return V},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(c){function e(){if($jscomp.ASSUME_NO_NATIVE_MAP||!c||"function"!=typeof c||!c.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),f=new c($jscomp.makeIterator([[e,"s"]]));if("s"!=f.get(e)||1!=f.size||f.get({x:4})||f.set({x:4},"t")!=f||2!=f.size)return!1;var k=f.entries(),p=k.next();if(p.done||p.value[0]!=e||"s"!=p.value[1])return!1;p=k.next();return p.done||4!=p.value[0].x||"t"!=p.value[1]||!k.next().done?!1:!0}catch(Ea){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(c&&$jscomp.ES6_CONFORMANCE)return c}else if(e())return c;$jscomp.initSymbolIterator();var k=new WeakMap,f=function(c){this.data_={};this.head_=B();this.size=0;if(c){c=$jscomp.makeIterator(c);for(var e;!(e=c.next()).done;)e=e.value,this.set(e[0],e[1])}};f.prototype.set=function(c,e){c=0===c?0:c;var f=p(this,c);f.list||(f.list=this.data_[f.id]=[]);f.entry?f.entry.value=e:(f.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,
value:e},f.list.push(f.entry),this.head_.previous.next=f.entry,this.head_.previous=f.entry,this.size++);return this};f.prototype.delete=function(c){c=p(this,c);return c.entry&&c.list?(c.list.splice(c.index,1),c.list.length||delete this.data_[c.id],c.entry.previous.next=c.entry.next,c.entry.next.previous=c.entry.previous,c.entry.head=null,this.size--,!0):!1};f.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=B();this.size=0};f.prototype.has=function(c){return!!p(this,c).entry};
f.prototype.get=function(c){return(c=p(this,c).entry)&&c.value};f.prototype.entries=function(){return z(this,function(c){return[c.key,c.value]})};f.prototype.keys=function(){return z(this,function(c){return c.key})};f.prototype.values=function(){return z(this,function(c){return c.value})};f.prototype.forEach=function(c,e){for(var f=this.entries(),k;!(k=f.next()).done;)k=k.value,c.call(e,k[1],k[0],this)};f.prototype[Symbol.iterator]=f.prototype.entries;var p=function(c,e){var f=e&&typeof e;"object"==
f||"function"==f?k.has(e)?f=k.get(e):(f=""+ ++Z,k.set(e,f)):f="p_"+e;var p=c.data_[f];if(p&&$jscomp.owns(c.data_,f))for(c=0;c<p.length;c++){var q=p[c];if(e!==e&&q.key!==q.key||e===q.key)return{id:f,list:p,index:c,entry:q}}return{id:f,list:p,index:-1,entry:void 0}},z=function(c,e){var f=c.head_;return $jscomp.iteratorPrototype(function(){if(f){for(;f.head!=c.head_;)f=f.previous;for(;f.next!=f.head;)return f=f.next,{done:!1,value:e(f)};f=null}return{done:!0,value:void 0}})},B=function(){var c={};return c.previous=
c.next=c.head=c},Z=0;return f},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c,k){return k})}},"es8","es3");$jscomp.polyfill("Object.is",function(c){return c?c:function(c,k){return c===k?0!==c||1/c===1/k:c!==c&&k!==k}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(c){return c?c:function(c,k){var e=this;e instanceof String&&(e=String(e));var p=e.length;k=k||0;for(0>k&&(k=Math.max(k+p,0));k<p;k++){var z=e[k];if(z===c||Object.is(z,c))return!0}return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(c){return c?c:function(c,k){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,k||0)}},"es6","es3");
(function(c){function e(f){if(k[f])return k[f].exports;var p=k[f]={i:f,l:!1,exports:{}};c[f].call(p.exports,p,p.exports,e);p.l=!0;return p.exports}var k={};e.m=c;e.c=k;e.d=function(c,k,z){e.o(c,k)||Object.defineProperty(c,k,{enumerable:!0,get:z})};e.r=function(c){$jscomp.initSymbol();$jscomp.initSymbol();"undefined"!==typeof Symbol&&Symbol.toStringTag&&($jscomp.initSymbol(),Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}));Object.defineProperty(c,"__esModule",{value:!0})};e.t=function(c,
k){k&1&&(c=e(c));if(k&8||k&4&&"object"===typeof c&&c&&c.__esModule)return c;var f=Object.create(null);e.r(f);Object.defineProperty(f,"default",{enumerable:!0,value:c});if(k&2&&"string"!=typeof c)for(var p in c)e.d(f,p,function(e){return c[e]}.bind(null,p));return f};e.n=function(c){var f=c&&c.__esModule?function(){return c["default"]}:function(){return c};e.d(f,"a",f);return f};e.o=function(c,e){return Object.prototype.hasOwnProperty.call(c,e)};e.p="";return e(e.s=3)})([function(c,e,k){function f(c){for(var e=
[],f,k=0,p=0;p<c.length;)f=c.charCodeAt(p++),k?(e.push((65536+(k-55296<<10)+(f-56320)).toString(16)),k=0):55296<f&&56319>=f?k=f:e.push(f.toString(16));return e}Object.defineProperty(e,"__esModule",{value:!0});e.TypeName=void 0;e.parse=function(c,e){var k=e&&e.assetType?e.assetType:"svg";e=e&&e.buildUrl?e.buildUrl:function(c,e){return"png"===e?"https://twemoji.maxcdn.com/v/latest/72x72/"+c+".png":"https://twemoji.maxcdn.com/v/latest/svg/"+c+".svg"};var q=[];for(p.default.lastIndex=0;;){var B=p.default.exec(c);
if(!B)break;var Z=B[0],A=f(V(Z)).join("-");q.push({url:A?e(A,k):"",indices:[B.index,p.default.lastIndex],text:Z,type:z})}return q};e.toCodePoints=f;var p=(c=k(1))&&c.__esModule?c:{default:c},z=e.TypeName="emoji",B=/\uFE0F/g,Z=String.fromCharCode(8205),V=function(c){return 0>c.indexOf(Z)?c.replace(B,""):c}},function(c,e,k){Object.defineProperty(e,"__esModule",{value:!0});e.default=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g},
,function(c,e,k){function f(a){var b=new Image,d=new Promise(function(d,c){b.onload=function(){return d(b)};b.onerror=function(){return d(b)};b.src=a});nd.push(d);return b}function p(){return de(this,void 0,void 0,function b(){return $jscomp.generator.createGenerator(b,function(b){return b.return(Promise.all(nd))})})}function z(){throw Error("This code should be unreachable");}function B(a,b,d){return Math.max(Math.min(b,d),a)}function Z(a,b){return a-b*Math.floor(a/b)}function V(){throw Error("unreachable");
}function q(a,b){for(var d=[],m=1;m<arguments.length;++m)d[m-1]=arguments[m];m=a.reduce(function(a,b,m){return a+b+(d[m]||"")},"").replace(/\t/,"    ").replace(/^(?:\r?\n)+|(?:\r?\n)+ *$/g,"").split(/\r?\n/);var c=m.filter(function(a){return""!==a}).map(function(a){return a.match(/^\s*/)[0].length}),h=0;0<c.length&&(h=c.reduce(function(a,b){return Math.min(a,b)}));return(0<h?m.map(function(a){return a.substring(h)}):m).join("\n").replace(/([^\n])\n([^\n])/g,"$1 $2").replace(/\n(\n+)/g,"$1")}function $a(a){$jscomp.initSymbol();
$jscomp.initSymbol();$jscomp.initSymbolIterator();$a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return $a(a)}function za(){za=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var d=arguments[b],m;for(m in d)Object.prototype.hasOwnProperty.call(d,m)&&(a[m]=d[m])}return a};
return za.apply(this,arguments)}function Ea(a){for(var b=1;b<arguments.length;b++){var d=null!=arguments[b]?arguments[b]:{},m=Object.keys(d);"function"===typeof Object.getOwnPropertySymbols&&(m=m.concat(Object.getOwnPropertySymbols(d).filter(function(a){return Object.getOwnPropertyDescriptor(d,a).enumerable})));m.forEach(function(b){var m=d[b];b in a?Object.defineProperty(a,b,{value:m,enumerable:!0,configurable:!0,writable:!0}):a[b]=m})}return a}function ce(a,b){if(null==a)return{};if(null==a)var d=
{};else{d={};var m=Object.keys(a),c;for(c=0;c<m.length;c++){var h=m[c];0<=b.indexOf(h)||(d[h]=a[h])}}if(Object.getOwnPropertySymbols)for(c=Object.getOwnPropertySymbols(a),h=0;h<c.length;h++)m=c[h],0<=b.indexOf(m)||Object.prototype.propertyIsEnumerable.call(a,m)&&(d[m]=a[m]);return d}function Na(a){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(a)}function A(a,b,d){a.addEventListener(b,d,!Oa&&od)}function v(a,b,d){a.removeEventListener(b,d,!Oa&&od)}function pc(a,
b){if(b){">"===b[0]&&(b=b.substring(1));if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(d){}return!1}}function Fa(a,b,d,m){if(a){d=d||document;do{if(null!=b&&(">"===b[0]?a.parentNode===d&&pc(a,b):pc(a,b))||m&&a===d)return a;if(a===d)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function oa(a,b,d){if(a&&b)if(a.classList)a.classList[d?"add":"remove"](b);
else{var m=(" "+a.className+" ").replace(pd," ").replace(" "+b+" "," ");a.className=(m+(d?" "+b:"")).replace(pd," ")}}function u(a,b,d){var m=a&&a.style;if(m){if(void 0===d)return document.defaultView&&document.defaultView.getComputedStyle?d=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(d=a.currentStyle),void 0===b?d:d[b];b in m||-1!==b.indexOf("webkit")||(b="-webkit-"+b);m[b]=d+("string"===typeof d?"":"px")}}function Mb(a,b){var d="";if("string"===typeof a)d=a;else{do{var m=u(a,"transform");
m&&"none"!==m&&(d=m+" "+d)}while(!b&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(d)}function qd(a,b,d){if(a){a=a.getElementsByTagName(b);b=0;var m=a.length;if(d)for(;b<m;b++)d(a[b],b);return a}return[]}function Pa(){var a=document.scrollingElement;return a?a:document.documentElement}function aa(a,b,d,m,c){if(a.getBoundingClientRect||a===window){if(a!==window&&a!==Pa()){var h=a.getBoundingClientRect();var E=h.top;var C=h.left;var e=
h.bottom;var f=h.right;var Qa=h.height;var g=h.width}else C=E=0,e=window.innerHeight,f=window.innerWidth,Qa=window.innerHeight,g=window.innerWidth;if((b||d)&&a!==window&&(c=c||a.parentNode,!Oa)){do if(c&&c.getBoundingClientRect&&("none"!==u(c,"transform")||d&&"static"!==u(c,"position"))){e=c.getBoundingClientRect();E-=e.top+parseInt(u(c,"border-top-width"));C-=e.left+parseInt(u(c,"border-left-width"));e=E+h.height;f=C+h.width;break}while(c=c.parentNode)}m&&a!==window&&(m=(a=Mb(c||a))&&a.a,c=a&&a.d,
a&&(E/=c,C/=m,g/=m,Qa/=c,e=E+Qa,f=C+g));return{top:E,left:C,bottom:e,right:f,width:g,height:Qa}}}function rd(a,b,d){var m=bb(a,!0);for(a=aa(a)[b];m;){b=aa(m)[d];if(!("top"===d||"left"===d?a>=b:a<=b))return m;if(m===Pa())break;m=bb(m,!1)}return!1}function qc(a,b,d){for(var m=0,c=0,h=a.children;c<h.length;){if("none"!==h[c].style.display&&h[c]!==w.ghost&&h[c]!==w.dragged&&Fa(h[c],d.draggable,a,!1)){if(m===b)return h[c];m++}c++}return null}function Hc(a,b){for(a=a.lastElementChild;a&&(a===w.ghost||"none"===
u(a,"display")||b&&!pc(a,b));)a=a.previousElementSibling;return a||null}function sa(a,b){var d=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===w.clone||b&&!pc(a,b)||d++;return d}function sd(a){var b=0,d=0,c=Pa();if(a){do{var C=Mb(a),h=C.d;b+=a.scrollLeft*C.a;d+=a.scrollTop*h}while(a!==c&&(a=a.parentNode))}return[b,d]}function ee(a,b){for(var d in a)if(a.hasOwnProperty(d))for(var c in b)if(b.hasOwnProperty(c)&&b[c]===a[d][c])return Number(d);
return-1}function bb(a,b){if(!a||!a.getBoundingClientRect)return Pa();var d=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var c=u(a);if(a.clientWidth<a.scrollWidth&&("auto"==c.overflowX||"scroll"==c.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==c.overflowY||"scroll"==c.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(d||b)return a;d=!0}}while(a=a.parentNode);return Pa()}function Ic(a,b){return Math.round(a.top)===Math.round(b.top)&&Math.round(a.left)===
Math.round(b.left)&&Math.round(a.height)===Math.round(b.height)&&Math.round(a.width)===Math.round(b.width)}function td(a,b){return function(){if(!Yb){var d=arguments;1===d.length?a.call(this,d[0]):a.apply(this,d);Yb=setTimeout(function(){Yb=void 0},b)}}}function ud(a,b,d){a.scrollLeft+=b;a.scrollTop+=d}function vd(a){var b=window.Polymer,d=window.jQuery||window.Zepto;return b&&b.dom?b.dom(a).cloneNode(!0):d?d(a).clone(!0)[0]:a.cloneNode(!0)}function fe(){var a=[],b;return{captureAnimationState:function(){a=
[];this.options.animation&&[].slice.call(this.el.children).forEach(function(b){if("none"!==u(b,"display")&&b!==w.ghost){a.push({target:b,rect:aa(b)});var d=Ea({},a[a.length-1].rect);if(b.thisAnimationDuration){var c=Mb(b,!0);c&&(d.top-=c.f,d.left-=c.e)}b.fromRect=d}})},addAnimationState:function(b){a.push(b)},removeAnimationState:function(b){a.splice(ee(a,{target:b}),1)},animateAll:function(d){var c=this;if(this.options.animation){var C=!1,h=0;a.forEach(function(a){var b=0,d=a.target,m=d.fromRect,
E=aa(d),e=d.prevFromRect,f=d.prevToRect;a=a.rect;var g=Mb(d,!0);g&&(E.top-=g.f,E.left-=g.e);d.toRect=E;d.thisAnimationDuration&&Ic(e,E)&&!Ic(m,E)&&(a.top-E.top)/(a.left-E.left)===(m.top-E.top)/(m.left-E.left)&&(b=Math.sqrt(Math.pow(e.top-a.top,2)+Math.pow(e.left-a.left,2))/Math.sqrt(Math.pow(e.top-f.top,2)+Math.pow(e.left-f.left,2))*c.options.animation);Ic(E,m)||(d.prevFromRect=m,d.prevToRect=E,b||(b=c.options.animation),c.animate(d,a,E,b));b&&(C=!0,h=Math.max(h,b),clearTimeout(d.animationResetTimer),
d.animationResetTimer=setTimeout(function(){d.animationTime=0;d.prevFromRect=null;d.fromRect=null;d.prevToRect=null;d.thisAnimationDuration=null},b),d.thisAnimationDuration=b)});clearTimeout(b);C?b=setTimeout(function(){"function"===typeof d&&d()},h):"function"===typeof d&&d();a=[]}else clearTimeout(b),"function"===typeof d&&d()},animate:function(a,b,c,h){if(h){u(a,"transition","");u(a,"transform","");var d=Mb(this.el),m=(b.left-c.left)/(d&&d.a||1);b=(b.top-c.top)/(d&&d.d||1);a.animatingX=!!m;a.animatingY=
!!b;u(a,"transform","translate3d("+m+"px,"+b+"px,0)");u(a,"transition","transform "+h+"ms"+(this.options.easing?" "+this.options.easing:""));u(a,"transform","translate3d(0,0,0)");"number"===typeof a.animated&&clearTimeout(a.animated);a.animated=setTimeout(function(){u(a,"transition","");u(a,"transform","");a.animated=!1;a.animatingX=!1;a.animatingY=!1},h)}}}}function ha(a){var b=Ea({putSortable:ba,cloneEl:O,targetEl:t,rootEl:M,oldIndex:Nb,oldDraggableIndex:Zb,newIndex:pa,newDraggableIndex:cb},a);
a=b.sortable;var d=b.rootEl,c=b.name,C=b.targetEl,h=b.cloneEl,E=b.toEl,e=b.fromEl,f=b.oldIndex,ja=b.newIndex,g=b.oldDraggableIndex,l=b.newDraggableIndex,k=b.originalEvent,n=b.putSortable,p=b.extraEventProperties;if(a=a||d&&d[qa]){var r=a.options,q="on"+c.charAt(0).toUpperCase()+c.substr(1);!window.CustomEvent||Oa||ac?(b=document.createEvent("Event"),b.initEvent(c,!0,!0)):b=new CustomEvent(c,{bubbles:!0,cancelable:!0});b.to=E||d;b.from=e||d;b.item=C||d;b.clone=h;b.oldIndex=f;b.newIndex=ja;b.oldDraggableIndex=
g;b.newDraggableIndex=l;b.originalEvent=k;b.pullMode=n?n.lastPutMode:void 0;c=Ea({},p,bc.getEventProperties(c,a));for(var u in c)b[u]=c[u];d&&d.dispatchEvent(b);r[q]&&r[q].call(a,b)}}function w(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=b=za({},b);a[qa]=this;var d={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,
removeCloneOnHide:!0,direction:function(){return wd(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",
fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==w.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};bc.initializePlugins(this,a,d);for(var c in d)c in b||(b[c]=d[c]);xd(b);for(var C in this)"_"===C.charAt(0)&&"function"===typeof this[C]&&(this[C]=this[C].bind(this));if(this.nativeDraggable=b.forceFallback?!1:ge)this.options.touchStartThreshold=1;b.supportPointer?A(a,"pointerdown",this._onTapStart):(A(a,"mousedown",this._onTapStart),A(a,"touchstart",
this._onTapStart));this.nativeDraggable&&(A(a,"dragover",this),A(a,"dragenter",this));rc.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||[]);za(this,fe())}function Kc(a,b,d,c,C,h,E,e){var m=a[qa],f=m.options.onMove,ab;if(!window.CustomEvent||Oa||ac){var g=document.createEvent("Event");g.initEvent("move",!0,!0)}else g=new CustomEvent("move",{bubbles:!0,cancelable:!0});g.to=b;g.from=a;g.dragged=d;g.draggedRect=c;g.related=C||b;g.relatedRect=h||aa(b);g.willInsertAfter=e;g.originalEvent=
E;a.dispatchEvent(g);f&&(ab=f.call(m,g,E));return ab}function Lc(a){a.draggable=!1}function he(){Mc=!1}function ie(a,b,d){d=aa(Hc(d.el,d.options.draggable));return b?a.clientX>d.right+10||a.clientX<=d.right&&a.clientY>d.bottom&&a.clientX>=d.left:a.clientX>d.right&&a.clientY>d.top||a.clientX<=d.right&&a.clientY>d.bottom+10}function je(a,b,d,c,C,h,E,e){a=c?a.clientY:a.clientX;var m=c?d.height:d.width,f=c?d.top:d.left;d=c?d.bottom:d.right;c=!1;if(!E)if(e&&sc<m*C)if(!cc&&(1===dc?a>f+m*h/2:a<d-m*h/2)&&
(cc=!0),cc)c=!0;else{if(1===dc?a<f+sc:a>d-sc)return-dc}else if(a>f+m*(1-C)/2&&a<d-m*(1-C)/2)return b=sa(t)<sa(b)?1:-1,b;if(c||E)if(a<f+m*h/2||a>d-m*h/2)return a>f+m/2?1:-1;return 0}function ke(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var b=a.length,d=0;b--;)d+=a.charCodeAt(b);return d.toString(36)}function le(a){tc.length=0;a=a.getElementsByTagName("input");for(var b=a.length;b--;){var d=a[b];d.checked&&tc.push(d)}}function uc(a){return setTimeout(a,0)}function vc(){R.forEach(function(a){clearInterval(a.pid)});
R=[]}function Nc(){}function Oc(){}function W(a,b,d,c){return new K("Construct "+a.tileName,a.tileDescription,function(b,d){return d.world.placeTile(new a(b))},b,d,c)}function G(a){return function(b){return b.hasUnlockedTechnology(a)}}function yd(a,b){return function(d){return d.inventory.getPopulation(a)>=b}}function yb(a,b){return function(d,c){return d.world.getTilesInCircle(c,b).some(function(b){return b instanceof a})}}function zb(a){return function(b){return b.world.getTiles().some(function(b){return b instanceof
a})}}function zd(a){return function(b){var d={};b=$jscomp.makeIterator(b.world.getTiles());for(var c=b.next();!c.done;d={$jscomp$loop$prop$tile$80:d.$jscomp$loop$prop$tile$80},c=b.next())if(d.$jscomp$loop$prop$tile$80=c.value,!a.some(function(a){return function(b){return a.$jscomp$loop$prop$tile$80 instanceof b}}(d)))return!1;return!0}}function Ad(a,b){return function(d){return d.inventory.getResourceQuantity(a)>=b}}function P(a){return new Ab("have the "+a.name+" technology",G(a))}function db(a,
b){return new Ab(1===b?"adjacent to a "+a.tileName:"within "+b+" units of a "+a.tileName,yb(a,b))}function me(a){return new Ab(1===a?"adjacent to a Monolith":"within "+a+" units of a Monolith",function(b,d){return yb(ka,a)(b,d)||yb(Ga,a)(b,d)})}function ne(a){return new Ab(1===a?"adjacent to "+la.tileName+" or "+ka.tileName:"within "+a+" units of "+la.tileName+" or "+ka.tileName,function(b,d){return yb(la,a)(b,d)||yb(ka,a)(b,d)||yb(Ga,a)(b,d)})}function oe(a,b){return new Ab("have at least "+b+" "+
a.name,function(d){return d.inventory.getPopulation(a)>=b})}function pe(a){var b=new Bb(a);a=window;a.cheatsAddResource=function(a,c){return b.addResource(a,c)};a.cheatsRemoveResource=function(a,c){return b.removeResource(a,c)};a.cheatsAddPopulation=function(a,c){return b.addPopulation(a,c)};a.cheatsFreeResources=function(){return b.freeResources()};a.cheatsShowEnding=function(a){return b.showEnding(void 0===a?!1:a)};Object.freeze(g);Object.freeze(S);a.Resources=g;a.Species=S}function Cb(){return function(a){return a}}
function qe(a){return{white_noise:eb.makeSampleData({buffer:Promise.resolve(eb.createBufferFromGenerator(44100,function(){return 2*Math.random()-1})),shouldLoop:!0,freq:ec(440)}),snare:eb.makeSampleData({buffer:eb.createBufferFromAudioData(a,22050,"samples/snare.ogg"),shouldLoop:!1,freq:ec(440)}),kick:eb.makeSampleData({buffer:eb.createBufferFromAudioData(a,22050,"samples/kick.ogg"),shouldLoop:!1,freq:ec(440)})}}k.r(e);var re=function(){function a(a,b){return document.createTextNode(b?a.replace(n,
""):a)}function b(a,b){return"".concat(b.base,b.size,"/",a,b.ext)}function d(a,b){a=a.childNodes;for(var c=a.length,m,h;c--;)m=a[c],h=m.nodeType,3===h?b.push(m):1!==h||"ownerSVGElement"in m||r.test(m.nodeName.toLowerCase())||d(m,b);return b}function c(a){return ja(0>a.indexOf(p)?a.replace(n,""):a)}function e(b,m){for(var h=d(b,[]),E=h.length,e,C,f,g,ab,ja,Lb,l,k,Qa;E--;){e=!1;f=document.createDocumentFragment();g=h[E];ab=g.nodeValue;for(Lb=0;ja=I.exec(ab);){l=ja.index;l!==Lb&&f.appendChild(a(ab.slice(Lb,
l),!0));ja=ja[0];Qa=c(ja);Lb=l+ja.length;l=m.callback(Qa,m);if(Qa&&l){k=new Image;k.onerror=m.onerror;k.setAttribute("draggable","false");e=m.attributes(ja,Qa);for(C in e)e.hasOwnProperty(C)&&0!==C.indexOf("on")&&!k.hasAttribute(C)&&k.setAttribute(C,e[C]);k.className=m.className;k.alt=ja;k.src=l;e=!0;f.appendChild(k)}k||f.appendChild(a(ja,!1));k=null}e&&(Lb<ab.length&&f.appendChild(a(ab.slice(Lb),!0)),g.parentNode.replaceChild(f,g))}return b}function h(a,b){return g(a,function(a){var d=a,m=c(a),h=
b.callback(m,b),e;if(m&&h){d="<img ".concat('class="',b.className,'" ','draggable="false" ','alt="',a,'"',' src="',h,'"');a=b.attributes(a,m);for(e in a)a.hasOwnProperty(e)&&0!==e.indexOf("on")&&-1===d.indexOf(" "+e+"=")&&(d=d.concat(" ",e,'="',a[e].replace(t,E),'"'));d=d.concat("/>")}return d})}function E(a){return k[a]}function f(){return null}function g(a,b){return String(a).replace(I,b)}function ja(a,b){for(var d=[],c,m=0,h=0;h<a.length;)c=a.charCodeAt(h++),m?(d.push((65536+(m-55296<<10)+(c-56320)).toString(16)),
m=0):55296<=c&&56319>=c?m=c:d.push(c.toString(16));return d.join(b||"-")}var l={base:"https://twemoji.maxcdn.com/v/12.1.5/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(a){a="string"===typeof a?parseInt(a,16):a;if(65536>a)return q(a);a-=65536;return q(55296+(a>>10),56320+(a&1023))},toCodePoint:ja},onerror:function(){this.parentNode&&this.parentNode.replaceChild(a(this.alt,!1),this)},parse:function(a,d){d&&"function"!==typeof d||(d={callback:d});var c=d.callback||b,m="function"===
typeof d.attributes?d.attributes:f,E="string"===typeof d.base?d.base:l.base,C=d.ext||l.ext,g;(g=d.folder)||(g=d.size||l.size,g="number"===typeof g?g+"x"+g:g);return("string"===typeof a?h:e)(a,{callback:c,attributes:m,base:E,ext:C,size:g,className:d.className||l.className,onerror:d.onerror||l.onerror})},replace:g,test:function(a){I.lastIndex=0;a=I.test(a);I.lastIndex=0;return a}},k={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},I=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,
n=/\uFE0F/g,p=String.fromCharCode(8205),t=/[&<>'"]/g,r=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,q=String.fromCharCode;return l}(),se=k(0),l;(function(a){function b(a){var b=document.createElement("div");a&&b.classList.add.apply(b.classList,$jscomp.arrayFromIterable(a));return b}function d(a,b,d){a=document.createElement(a);a.innerText=b;d&&a.classList.add.apply(a.classList,$jscomp.arrayFromIterable(d));return a}function c(a){re.parse(a,{folder:"svg",ext:".svg"});return a}function e(a){return 0<
se.parse(a).length}a.makeDiv=b;a.makeDivContaining=function(a,d){d=b(d);a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())d.appendChild(c.value);return d};a.makeElement=d;a.patchEmoji=c;a.containsEmoji=e;a.makePara=function(a,b){b=d("p",a,b);e(a)&&c(b);return b};a.makeHeader=function(a,b,m){b=d("h"+(void 0===b?1:b),a,m);e(a)&&c(b);return b};a.makeButton=function(a,b,d,m){m=void 0===m?"enabled":m;var h=document.createElement("button");h.type="button";"disabled"===m&&(h.disabled=!0);h.innerText=
a;d&&h.classList.add.apply(h.classList,$jscomp.arrayFromIterable(d));h.onclick=function(a){a.preventDefault();b.call(this,a)};e(a)&&c(h);return h};a.makeSlider=function(b,d,c,m,e,C){var h=document.createElement("input");h.type="range";h.min=d.toString();h.max=c.toString();h.value=m.toString();void 0!==C&&(h.step=C.toString());h.oninput=function(){if(void 0!==this.value){var a=Number(this.value);!isNaN(a)&&d<=a&&a<=c&&e(a)}};b=a.makePara(b+": ");return a.makeDivContaining([b,h])};a.makeCanvas=function(a,
b,d){var c=document.createElement("canvas");c.width=a;c.height=b;d&&c.classList.add.apply(c.classList,$jscomp.arrayFromIterable(d));return c};a.fillHTML=function(a,b){a.innerHTML="";b=$jscomp.makeIterator(b);for(var d=b.next();!d.done;d=b.next())a.appendChild(d.value)}})(l||(l={}));var T;(function(a){var b=document.getElementById("rootdiv"),d=void 0;a.show=function(a){d=a;l.fillHTML(b,[a.html]);document.onkeydown=function(b){a.handleKeyDown&&a.handleKeyDown(b)};document.onkeyup=function(b){a.handleKeyUp&&
a.handleKeyUp(b)}};a.refreshCurrentPage=function(){d&&d.refresh()}})(T||(T={}));var de=function(a,b,d,c){function m(a){return a instanceof d?a:new d(function(b){b(a)})}return new (d||(d=Promise))(function(d,e){function h(a){try{E(c.next(a))}catch(x){e(x)}}function C(a){try{E(c["throw"](a))}catch(x){e(x)}}function E(a){a.done?d(a.value):m(a.value).then(h,C)}E((c=c.apply(a,b||[])).next())})},nd=[],te=f("assets/ui/highlight.png"),ue=f("assets/tiles/environment/wasteland1.png"),ve=f("assets/tiles/environment/wasteland2.png"),
we=f("assets/tiles/environment/wasteland3.png"),xe=f("assets/tiles/environment/wasteland4.png"),ye=f("assets/tiles/environment/wasteland5.png"),ze=f("assets/tiles/environment/mountain.png"),Bd=f("assets/tiles/alien/ruins1.png"),Ae=f("assets/tiles/alien/ruins2.png"),Be=f("assets/tiles/alien/monolith.png"),Ce=f("assets/tiles/end/reprogrammed monolith.png"),De=f("assets/tiles/end/seed core alien.png"),Ee=f("assets/tiles/end/seed core human.png"),Fe=f("assets/tiles/end/circuits alien.png"),Ge=f("assets/tiles/end/circuits human.png"),
He=f("assets/tiles/construction/hab_site.png"),Ie=f("assets/tiles/construction/lab_site.png"),Cd=f("assets/tiles/construction/industry_site.png"),Je=f("assets/tiles/colony/habitat.png"),Ke=f("assets/tiles/colony/solar_panels.png"),Le=f("assets/tiles/colony/mining_facility.png"),Me=f("assets/tiles/colony/lander.png"),Ne=f("assets/tiles/colony/greenhouse.png"),Oe=f("assets/tiles/colony/hydroponics.png"),Pe=f("assets/tiles/colony/mineshaft.png"),Qe=f("assets/tiles/colony/electronics factory.png"),Re=
f("assets/tiles/colony/construction factory.png"),Se=f("assets/tiles/colony/xenofactory.png"),Dd=f("assets/tiles/roads/cross.png"),Ed=f("assets/tiles/roads/horizontal.png"),Fd=f("assets/tiles/roads/vertical.png"),Te=f("assets/tiles/roads/corner_bottom_left.png"),Ue=f("assets/tiles/roads/corner_bottom_right.png"),Ve=f("assets/tiles/roads/corner_top_left.png"),We=f("assets/tiles/roads/corner_top_right.png"),Xe=f("assets/tiles/roads/t_south.png"),Ye=f("assets/tiles/roads/t_north.png"),Ze=f("assets/tiles/roads/t_east.png"),
$e=f("assets/tiles/roads/t_west.png"),af=f("assets/tiles/colony/arcology.png"),bf=f("assets/tiles/colony/nuclear_plant.png"),cf=f("assets/tiles/colony/hive.png"),df=f("assets/tiles/colony/zero_point.png"),ef=f("assets/tiles/colony/lab_alignment.png"),ff=f("assets/tiles/colony/lab_engineering.png"),gf=f("assets/tiles/colony/lab_psych.png"),hf=f("assets/tiles/colony/lab_xeno.png"),Gd=f("assets/tiles/colony/recycler1.png"),jf=f("assets/tiles/colony/recycler2.png"),kf=f("assets/tiles/colony/nanotech_foundry.png"),
lf=f("assets/tiles/colony/neural_emulator.png"),Db=function(a,b){this.name=a;this.roles=b},mf=[new Db("Grace Rarer",["Team Lead","Game Designer","Programmer"]),new Db("Prindle",["Programmer","DevOps"]),new Db("Seong Ryoo",["Environment Artist"]),new Db("May Lawver",["Programmer"]),new Db("Mitchell Philipp",["UI Programmer"]),new Db("Brad Baker",["Gameplay Programmer"]),new Db("Will Cooper",["UI Programmer"])],Pc=function(){this.html=l.makeDiv(["credits"]);this.refresh()};Pc.prototype.refresh=function(){var a=
this;l.fillHTML(this.html,[].concat($jscomp.arrayFromIterable(mf.map(function(b){return a.renderCreditsEntry(b)})),[l.makeButton("Back",function(){return T.show(new Ob)})]))};Pc.prototype.renderCreditsEntry=function(a){return l.makeDivContaining([l.makeHeader(a.name,1)].concat($jscomp.arrayFromIterable(a.roles.map(function(a){return l.makePara(a)}))),["credits-entry"])};var Hd=function(a){return a},Pb;(function(a){function b(a){return{encode:Hd,decode:Hd,validate:a}}function d(a){return{encode:function(b){var d=
{},c;for(c in a)d[c]=a[c].encode(b[c]);return d},decode:function(b){var d={},c;for(c in a)d[c]=a[c].decode(b[c]);return d},validate:function(b){if("object"!==typeof b||null===b)return!1;for(var d in a)if(!a[d].validate(b[d]))return!1;return!0}}}function c(a){return{encode:function(b){return b.map(function(b){return a.encode(b)})},decode:function(b){return b.map(function(b){return a.decode(b)})},validate:function(b){if(!Array.isArray(b))return!1;b=$jscomp.makeIterator(b);for(var d=b.next();!d.done;d=
b.next())if(!a.validate(d.value))return!1;return!0}}}function e(a,b,d,c){return{encode:function(m){return a(m)?d.encode(m):b(m)?c.encode(m):z()},decode:function(a){return d.validate(a)?d.decode(a):c.validate(a)?c.decode(a):z()},validate:function(a){return d.validate(a)||c.validate(a)}}}function h(a,b){return e(function(b){return a.validate(b)},function(b){return!a.validate(b)},a,b)}a.schema=function(a,b,d){return{encode:a,decode:b,validate:d}};a.primitive=b;a.aString=b(function(a){return"string"===
typeof a||a instanceof String});a.aNumber=b(function(a){return"number"===typeof a});a.aBoolean=b(function(a){return"boolean"===typeof a});a.aNull=b(function(a){return null===a});a.anUndefined=b(function(a){return"undefined"===typeof a});a.recordOf=d;a.classOf=function(a,b){a=d(a);var c=a.decode;return{encode:a.encode,decode:function(a){return b(c(a))},validate:a.validate}};a.arrayOf=c;a.nonEmptyArrayOf=function(a){a=c(a);var b=a.validate;return{encode:a.encode,decode:a.decode,validate:function(a){return!Array.isArray(a)||
1>a.length?!1:b(a)}}};a.tupleOf=function(a){return{encode:function(b){return b.map(function(b,d){return a[d].encode(b)})},decode:function(b){return b.map(function(b,d){return a[d].decode(b)})},validate:function(b){if(!Array.isArray(b)||b.length!==a.length)return!1;for(var d=0;d<b.length;d++)if(!a[d].validate(b[d]))return!1;return!0}}};a.unionOf=e;a.union=h;a.optional=function(b){return h(a.anUndefined,b)};a.constrain=function(a,b){return{encode:function(b){return a.encode(b)},decode:function(b){return a.decode(b)},
validate:function(d){return a.validate(d)&&b(d)}}}})(Pb||(Pb={}));var wc;(function(a){a.isSupported=function(){try{var a=window.localStorage;a.setItem("__test_ls","null");a.removeItem("__test_ls");return!0}catch(d){return a&&0!==a.length?d instanceof DOMException?22===d.code||"QuotaExceededError"===d.name||1014===d.code||"NS_ERROR_DOM_QUOTA_REACHED"===d.name:!1:!1}}();a.hasItem=function(b){return a.isSupported&&Object.prototype.hasOwnProperty.call(window.localStorage,b)};a.saveItem=function(b,d,c){return a.isSupported?
(d=JSON.stringify(c.encode(d)),window.localStorage.setItem(b,d),!0):!1};a.loadItem=function(b,d){if(a.isSupported&&(b=window.localStorage.getItem(b),null!==b)){try{var c=JSON.parse(b);var e=d.validate(c)?{resultType:"success",result:d.decode(c)}:{resultType:"invalidStructure"}}catch(h){if(h instanceof SyntaxError)e={resultType:"syntaxError",error:h};else throw h;}return e}};a.removeItem=function(b){a.isSupported&&window.localStorage.removeItem(b)};a.clearAllItems=function(){a.isSupported&&window.localStorage.clear()}})(wc||
(wc={}));var Ra=function(a,b,d){this.viewWidth=void 0===a?12:a;this.viewHeight=void 0===b?8:b;this.volume=void 0===d?0:d};Ra.defaultOptions=function(){return new Ra};Ra.schema=Pb.classOf({viewWidth:Pb.aNumber,viewHeight:Pb.aNumber,volume:Pb.aNumber},function(a){return new Ra(a.viewWidth,a.viewHeight,a.volume)});var Qb;(function(a){function b(){var a=wc.loadItem("settings",Ra.schema);return"success"===(null===a||void 0===a?void 0:a.resultType)?a.result:Ra.defaultOptions()}a.loadOptions=b;a.currentOptions=
b();a.saveOptions=function(b){a.currentOptions=b;wc.saveItem("settings",b,Ra.schema)};a.restoreDefaults=function(){a.saveOptions(Ra.defaultOptions())}})(Qb||(Qb={}));var Id=function(){this.html=l.makeDiv();this.options=Qb.loadOptions();this.refresh()};Id.prototype.refresh=function(){var a=this,b=function(a,b,c,e,f,g){var d=l.makePara(e.toString());a=l.makeSlider(a,b,c,e,function(a){f(a);d.innerText=a.toString()},g);return l.makeDivContaining([a,d],["settings-slider"])};b=[b("Volume",0,100,this.options.volume,
function(b){a.options.volume=b},5),b("View width",6,18,this.options.viewWidth,function(b){a.options.viewWidth=b}),b("View height",4,12,this.options.viewHeight,function(b){a.options.viewHeight=b})];l.fillHTML(this.html,[l.makeDivContaining([l.makeHeader("Settings",1),l.makeDivContaining(b),l.makeDivContaining([l.makeButton("Restore defaults",function(){a.options=Ra.defaultOptions();a.refresh()})]),l.makeDivContaining([l.makeButton("Back",function(){Qb.saveOptions(a.options);T.show(new Ob)})])],["settings"])])};
var xc;(function(a){a.safeKeys=function(a){return Object.keys(a)}})(xc||(xc={}));var g=function(a){this.name=a};g.values=function(){return xc.safeKeys(g).map(function(a){return g[a]}).filter(function(a){return a instanceof g})};g.Energy=new g("\u26a1 Energy");g.Food=new g("\ud83c\udf2f Food");g.Metal=new g("\u26cf Metal Ore");g.BuildingMaterials=new g("\ud83d\udd29 Construction Parts");g.Electronics=new g("\ud83d\udca1 Electronics");g.Cavorite=new g("\ud83d\udc8e Cavorite");g.Orichalcum=new g("\ud83e\uddea Orichalcum");
g.Superconductor=new g("\ud83e\uddf5 Superconductor");g.SmartMatter=new g("\ud83d\udca0 SmartMatter");g.EngineeringKnowledge=new g("\u2699\ufe0f Engineering Data");g.PsychKnowledge=new g("\ud83e\udde0 Psychological Data");g.AlienKnowledge=new g("\ud83d\udef8 Alien Data");g.AlignmentKnowledge=new g("\ud83d\udcce AI Alignment Data");var n=function(a,b){this.resource=a;this.quantity=b};n.prototype.toString=function(){return this.resource.name+" x"+this.quantity};var S=function(a,b,d){this.name=a;this.growthMultiplier=
b;this.survivalCost=d};S.values=function(){return xc.safeKeys(S).map(function(a){return S[a]}).filter(function(a){return a instanceof S})};S.Human=new S("\ud83d\udc69\ud83c\udffb\u200d\ud83d\ude80 Human Colonists",.1,new n(g.Food,1));S.Robot=new S("\ud83e\uddbe Robots",0,new n(g.Energy,.5));var ta=function(a,b){this.requirement=a;this.next=b},ua=function(a,b,d){this.description=a;this.paths=b;this.hint=d};ua.prototype.nextState=function(a){for(var b=$jscomp.makeIterator(this.paths),d=b.next();!d.done;d=
b.next())if(d=d.value,d.requirement(a))return d.next;return this};var r=function(a){this.position=a;this.possibleProjects=[];this.resourceConversions=[];this.populationCapacity=void 0};r.prototype.getTexture=function(a){return this.texture};var Qc=function(a,b){this.species=a;this.capacity=b},D=function(a,b){this.x=a;this.y=b};D.prototype.toString=function(){return"("+this.x+", "+this.y+")"};D.prototype.distanceFrom=function(a){return Math.hypot(Math.abs(this.x-a.x),Math.abs(this.y-a.y))};var X=function(a,
b){var d=this;this.parentScreen=a;this.world=b;this.viewWidth=Qb.currentOptions.viewWidth;this.viewHeight=Qb.currentOptions.viewHeight;this.highlightedCoordinates=null;this.html=l.makeCanvas(this.viewWidth*X.pixelsPerTile,this.viewHeight*X.pixelsPerTile,["map-canvas"]);this.html.addEventListener("click",function(a){return d.handleClick(a)});this.refresh()};X.prototype.refresh=function(){var a=this.world.getTilesInRectangle(this.world.viewPosition.x,this.world.viewPosition.y,this.viewWidth,this.viewHeight);
a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,this.drawSquareAtCoordinates(b.getTexture(this.world),b.position);null!==this.highlightedCoordinates&&this.drawSquareAtCoordinates(X.highlightImage,this.highlightedCoordinates)};X.prototype.drawSquareAtCoordinates=function(a,b){var d=this.html.getContext("2d");d.imageSmoothingEnabled=!1;var c=b.x-this.world.viewPosition.x;b=b.y-this.world.viewPosition.y;if(!(0>c||0>b||c>=this.viewWidth||b>=this.viewHeight)){var e=X.pixelsPerTile/
a.width*a.height;d.drawImage(a,c*X.pixelsPerTile,b*X.pixelsPerTile-e+X.pixelsPerTile,X.pixelsPerTile,e)}};X.prototype.selectTile=function(a){this.highlightedCoordinates=a?a.position:null;this.refresh();this.parentScreen.changeSidebarTile(this.highlightedCoordinates)};X.prototype.moveViewArea=function(a,b){a=B(0,this.world.viewPosition.x+a,this.world.width-this.viewWidth);b=B(0,this.world.viewPosition.y+b,this.world.height-this.viewHeight);this.world.viewPosition=new D(a,b);this.refresh()};X.prototype.handleClick=
function(a){a=this.world.getTileAtCoordinates(new D(Math.floor(this.viewWidth/this.html.clientWidth*(a.pageX-this.html.offsetLeft))+this.world.viewPosition.x,Math.floor(this.viewHeight/this.html.clientHeight*(a.pageY-this.html.offsetTop))+this.world.viewPosition.y));this.selectTile(a)};X.prototype.handleKeyDown=function(a){var b=a.code;if("ArrowUp"===b||"KeyW"===b)a.preventDefault(),this.moveViewArea(0,-1);if("ArrowLeft"===b||"KeyA"===b)a.preventDefault(),this.moveViewArea(-1,0);if("ArrowDown"===
b||"KeyS"===b)a.preventDefault(),this.moveViewArea(0,1);if("ArrowRight"===b||"KeyD"===b)a.preventDefault(),this.moveViewArea(1,0)};X.pixelsPerTile=100;X.highlightImage=te;var Eb=function(a,b){this.parentScreen=a;this.run=b;this.position=null;this.html=l.makeDiv(["world-screen-sidebar"]);this.refresh()};Eb.prototype.changeTile=function(a){this.position=a;this.refresh()};Eb.prototype.refresh=function(){var a=this;if(null===this.position)l.fillHTML(this.html,[l.makePara("No structure or terrain tile selected",
["sidebar-tile-name"])]);else{var b=this.run.world.getTileAtCoordinates(this.position),d=l.makeDiv();b.populationCapacity&&d.appendChild(l.makePara("Population capacity for "+b.populationCapacity.capacity+" "+b.populationCapacity.species.name));var c=l.makeDiv(),e=b.possibleProjects.filter(function(b){return b.isVisible(a.position,a.run)});e=$jscomp.makeIterator(e);for(var h=e.next();!h.done;h=e.next())c.appendChild(this.makeProjectHTML(b,h.value));e=l.makeDiv();if(0<b.resourceConversions.length){e.appendChild(l.makePara("Production:"));
h=$jscomp.makeIterator(b.resourceConversions);for(var f=h.next();!f.done;f=h.next())e.appendChild(this.makeConversionHTML(f.value))}l.fillHTML(this.html,[l.makePara(b.getTileName(),["sidebar-tile-name"]),l.makePara(b.getTileDescription()),d,e,c])}};Eb.prototype.makeProjectHTML=function(a,b){var d=this,c=l.makeDiv(["tile-project"]),e=l.makeButton(b.title,function(){d.doProject(b,a)},[],b.canDo(a.position,this.run)?"enabled":"disabled");c.appendChild(e);c.appendChild(l.makePara(b.projectDescription));
if(0===b.costs.length)c.appendChild(l.makePara("Cost: Free"));else{var h=this.run.inventory.clone();e=b.costs.map(function(a){var b=h.canAfford([a]),d=l.makePara(a.toString(),[b?"project-requirement-met":"project-requirement-unmet"]);b&&h.payCost([a]);return d});e=l.makeDivContaining([l.makePara("Costs: ")].concat($jscomp.arrayFromIterable(e)));c.appendChild(e)}0<b.completionRequirements.length&&c.appendChild(l.makePara("Requirements:"));e=$jscomp.makeIterator(b.completionRequirements);for(var f=
e.next();!f.done;f=e.next()){f=f.value;var g=f.evaluate(this.run,this.position)?"project-requirement-met":"project-requirement-unmet";c.appendChild(l.makePara("- "+f.toString(),[g]))}return c};Eb.prototype.makeConversionHTML=function(a){return l.makePara("- "+a.toString())};Eb.prototype.doProject=function(a,b){a.doAction(b.position,this.run);this.run.updateQuestState();this.parentScreen.refresh()};var Rc=function(a){this.inventory=a.inventory;this.html=l.makeDiv(["world-screen-inventory"]);this.refresh()};
Rc.prototype.refresh=function(){for(var a=l.makeDiv(),b=$jscomp.makeIterator(this.inventory.getPopulationStrings()),d=b.next();!d.done;d=b.next())a.appendChild(l.makePara(d.value));b=l.makeDiv();var c=$jscomp.makeIterator(this.inventory.getInventoryStrings());for(d=c.next();!d.done;d=c.next())b.appendChild(l.makePara(d.value));0===this.inventory.getResourceList().length&&b.appendChild(l.makePara("(none)"));l.fillHTML(this.html,[l.makeDivContaining([l.makeDivContaining([l.makeHeader("Population",1,
[])],["world-screen-population-header"]),l.makePara("Available workers: "+this.inventory.getAvailableWorkers()),l.makePara("Total population:"+(0===this.inventory.getTotalPopulation()?" 0":"")),a,l.makeHeader("Inventory",1),b])])};var ca;(function(a){function b(a,b){return Math.random()*(b-a)+a}function d(a,d){return Math.floor(b(a,d))}a.realBetween=b;a.intBetween=d;a.fromArray=function(a){return a[d(0,a.length)]};a.bool=function(a){return Math.random()<(void 0===a?.5:a)};a.fromWeightedArray=function(a){var b=
a.map(function(a){return a[0]}).reduce(function(a,b){return a+b},0);b*=Math.random();for(var d=$jscomp.makeIterator(a),c=d.next();!c.done;c=d.next()){var m=$jscomp.makeIterator(c.value);c=m.next().value;m=m.next().value;if(b<c)return m;b-=c}return a[a.length-1][1]}})(ca||(ca={}));var ma=function(a,b){this.text=a;this.attribution=b};ma.getRandomQuote=function(){return ca.fromArray(this.QuotesList)};ma.QuotesList=[new ma(q($jscomp$templatelit$0),"Nick Bostrom"),new ma(q($jscomp$templatelit$1),"Nick Bostrom"),
new ma(q($jscomp$templatelit$2),"Eliezer Yudkowsky"),new ma(q($jscomp$templatelit$3),"Claude Shannon"),new ma(q($jscomp$templatelit$4),"Greg Egan"),new ma(q($jscomp$templatelit$5),"Eliezer Yudkowsky"),new ma(q($jscomp$templatelit$6),"Alan Turing"),new ma(q($jscomp$templatelit$7),"Blake Crouch"),new ma(q($jscomp$templatelit$8),"Dawn Program mission proposal, published 7786540800 SPE"),new ma(q($jscomp$templatelit$9),"Aurora Mission Colonist Handbook"),new ma(q($jscomp$templatelit$10),"Aurora Mission Colonist Handbook")];
var Sc=function(a){this.ending=a;this.html=l.makeDiv();this.refresh()};Sc.prototype.refresh=function(){var a=l.makeHeader(this.ending.title),b=l.makePara(this.ending.description),d=l.makeButton("Exit",function(){T.show(new Ob)});l.fillHTML(this.html,[l.makeDivContaining([a,b,d],["ending-page"])])};var Tc=function(a){this.html=l.makeDiv(["world-screen-quest-description"]);this.run=a;this.refresh()};Tc.prototype.refresh=function(){var a=this,b=this.run.getCurrentQuestDescription(),d=this.run.getCurrentQuestHint();
b=l.makePara("Objective: "+(d?b+"\n(hint: "+d+")":b));d=this.run.getPreviousQuestDescription();this.run.questCompletionShown||(this.run.questCompletionShown=!0,b=l.makePara("Completed: "+d,["quest-description-emphasis"]),setTimeout(function(){var b=a.run.getQuestEndState();b?T.show(new Sc(b)):a.refresh()},1500));l.fillHTML(this.html,[b])};var Fb=function(a){this.mapUI=new X(this,a.world);this.tileSidebar=new Eb(this,a);this.inventorySidebar=new Rc(a);this.header=new Uc(a);this.questIndicator=new Tc(a);
this.html=l.makeDivContaining([this.header.html,this.questIndicator.html,l.makeDivContaining([this.inventorySidebar.html,l.makeDivContaining([this.mapUI.html],["world-screen-map-box"]),this.tileSidebar.html],["world-screen-hbox"])],["flex-vertical","world-screen"])};Fb.prototype.refresh=function(){this.mapUI.refresh();this.tileSidebar.refresh();this.inventorySidebar.refresh();this.header.refresh();this.questIndicator.refresh()};Fb.prototype.handleKeyDown=function(a){this.mapUI.handleKeyDown(a)};Fb.prototype.changeSidebarTile=
function(a){this.tileSidebar.changeTile(a)};var fc=function(a){this.run=a;this.doneLoading=!1;this.html=l.makeDiv();this.loadingBar=l.makeDiv(["transition-loading-bar"]);this.loadingArea=l.makeDivContaining([this.loadingBar],["transition-loading-area"]);this.quote=ma.getRandomQuote();a=this.quote.text;var b="\u00a0".repeat(4);a=a.replace(/\t/g,b);a=a.replace(/ {4}/g,b);a=a.replace(/^(\s*)/,"$1\u201c")+"\u201d";l.fillHTML(this.html,[l.makeDivContaining([l.makePara(a),l.makePara("- "+this.quote.attribution,
["transition-attribution"])],["transition-quote-panel"]),this.loadingArea])};fc.prototype.refresh=function(){};fc.prototype.startLoading=function(){var a=this;this.run.completeTurn();setTimeout(function(){l.fillHTML(a.loadingArea,[l.makeButton("Continue",function(){a.continueToNextTurn()})]);a.doneLoading=!0},2E3)};fc.prototype.continueToNextTurn=function(){T.show(new Fb(this.run))};fc.prototype.handleKeyDown=function(){this.doneLoading&&this.continueToNextTurn()};var Oa=Na(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),
ac=Na(/Edge/i),Jd=Na(/firefox/i),Vc=Na(/safari/i)&&!Na(/chrome/i)&&!Na(/android/i),gc=Na(/iP(ad|od|hone)/i),nf=Na(/chrome/i)&&Na(/android/i),od={capture:!1,passive:!1},pd=/\s+/g,Yb,qa="Sortable"+(new Date).getTime(),hc=[],Wc={initializeByDefault:!0},bc={mount:function(a){for(var b in Wc)!Wc.hasOwnProperty(b)||b in a||(a[b]=Wc[b]);hc.push(a)},pluginEvent:function(a,b,d){var c=this;this.eventCanceled=!1;d.cancel=function(){c.eventCanceled=!0};var e=a+"Global";hc.forEach(function(c){if(b[c.pluginName]){if(b[c.pluginName][e])b[c.pluginName][e](Ea({sortable:b},
d));if(b.options[c.pluginName]&&b[c.pluginName][a])b[c.pluginName][a](Ea({sortable:b},d))}})},initializePlugins:function(a,b,d,c){hc.forEach(function(c){var m=c.pluginName;if(a.options[m]||c.initializeByDefault)c=new c(a,b,a.options),c.sortable=a,c.options=a.options,a[m]=c,za(d,c.defaults)});for(var m in a.options)a.options.hasOwnProperty(m)&&(c=this.modifyOption(a,m,a.options[m]),"undefined"!==typeof c&&(a.options[m]=c))},getEventProperties:function(a,b){var d={};hc.forEach(function(c){"function"===
typeof c.eventProperties&&za(d,c.eventProperties.call(b[c.pluginName],a))});return d},modifyOption:function(a,b,d){var c;hc.forEach(function(m){a[m.pluginName]&&m.optionListeners&&"function"===typeof m.optionListeners[b]&&(c=m.optionListeners[b].call(a[m.pluginName],d))});return c}},na=function(a,b){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c=d.evt;d=ce(d,["evt"]);bc.pluginEvent.bind(w)(a,b,Ea({dragEl:t,parentEl:U,ghostEl:y,rootEl:M,nextEl:Gb,lastDownEl:yc,cloneEl:O,cloneHidden:fb,
dragStarted:ic,putSortable:ba,activeSortable:w.active,originalEvent:c,oldIndex:Nb,oldDraggableIndex:Zb,newIndex:pa,newDraggableIndex:cb,hideGhostForTarget:Kd,unhideGhostForTarget:Ld,cloneNowHidden:function(){fb=!0},cloneNowShown:function(){fb=!1},dispatchSortableEvent:function(a){ha({sortable:b,name:a,originalEvent:c})}},d))},t,U,y,M,Gb,yc,O,fb,Nb,pa,Zb,cb,zc,ba,Rb=!1,Ac=!1,rc=[],Hb,Aa,Xc,Yc,Md,Nd,ic,Sb,dc,cc=!1,Bc=!1,sc,ea,Zc=[],Mc=!1,tc=[],Cc="undefined"!==typeof document,Od=ac||Oa?"cssFloat":"float",
ge=Cc&&!nf&&!gc&&"draggable"in document.createElement("div"),Pd=function(){if(Cc){if(Oa)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),wd=function(a,b){var d=u(a),c=parseInt(d.width)-parseInt(d.paddingLeft)-parseInt(d.paddingRight)-parseInt(d.borderLeftWidth)-parseInt(d.borderRightWidth),e=qc(a,0,b);a=qc(a,1,b);var h=e&&u(e);b=a&&u(a);var f=h&&parseInt(h.marginLeft)+parseInt(h.marginRight)+aa(e).width,g=b&&parseInt(b.marginLeft)+
parseInt(b.marginRight)+aa(a).width;return"flex"===d.display?"column"===d.flexDirection||"column-reverse"===d.flexDirection?"vertical":"horizontal":"grid"===d.display?1>=d.gridTemplateColumns.split(" ").length?"vertical":"horizontal":e&&h["float"]&&"none"!==h["float"]?(d="left"===h["float"]?"left":"right",!a||"both"!==b.clear&&b.clear!==d?"horizontal":"vertical"):e&&("block"===h.display||"flex"===h.display||"table"===h.display||"grid"===h.display||f>=c&&"none"===d[Od]||a&&"none"===d[Od]&&f+g>c)?"vertical":
"horizontal"},of=function(a,b,d){var c=d?a.left:a.top,e=d?a.right:a.bottom;a=d?a.width:a.height;var h=d?b.left:b.top,f=d?b.right:b.bottom;b=d?b.width:b.height;return c===h||e===f||c+a/2===h+b/2},pf=function(a,b){var d;rc.some(function(c){if(!Hc(c)){var m=aa(c),e=c[qa].options.emptyInsertThreshold,f=a>=m.left-e&&a<=m.right+e;m=b>=m.top-e&&b<=m.bottom+e;if(e&&f&&m)return d=c}});return d},xd=function(a){function b(a,d){return function(c,m,e,h){var f=c.options.group.name&&m.options.group.name&&c.options.group.name===
m.options.group.name;if(null==a&&(d||f))return!0;if(null==a||!1===a)return!1;if(d&&"clone"===a)return a;if("function"===typeof a)return b(a(c,m,e,h),d)(c,m,e,h);c=(d?c:m).options.group.name;return!0===a||"string"===typeof a&&a===c||a.join&&-1<a.indexOf(c)}}var d={},c=a.group;c&&"object"==$a(c)||(c={name:c});d.name=c.name;d.checkPull=b(c.pull,!0);d.checkPut=b(c.put);d.revertClone=c.revertClone;a.group=d},Kd=function(){!Pd&&y&&u(y,"display","none")},Ld=function(){!Pd&&y&&u(y,"display","")};Cc&&document.addEventListener("click",
function(a){if(Ac)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),Ac=!1},!0);var Ib=function(a){if(t){a=a.touches?a.touches[0]:a;var b=pf(a.clientX,a.clientY);if(b){var d={},c;for(c in a)a.hasOwnProperty(c)&&(d[c]=a[c]);d.target=d.rootEl=b;d.preventDefault=void 0;d.stopPropagation=void 0;b[qa]._onDragOver(d)}}},qf=function(a){t&&t.parentNode[qa]._isOutsideThisEl(a.target)};w.prototype={constructor:w,_isOutsideThisEl:function(a){this.el.contains(a)||
a===this.el||(Sb=null)},_getDirection:function(a,b){return"function"===typeof this.options.direction?this.options.direction.call(this,a,b,t):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,d=this.el,c=this.options,e=c.preventOnFilter,h=a.type,f=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,g=(f||a).target,l=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||g,k=c.filter;le(d);if(!(t||/mousedown|pointerdown/.test(h)&&0!==
a.button||c.disabled||l.isContentEditable||(g=Fa(g,c.draggable,d,!1),g&&g.animated||yc===g))){Nb=sa(g);Zb=sa(g,c.draggable);if("function"===typeof k){if(k.call(this,a,g,this)){ha({sortable:b,rootEl:l,name:"filter",targetEl:g,toEl:d,fromEl:d});na("filter",b,{evt:a});e&&a.cancelable&&a.preventDefault();return}}else if(k&&(k=k.split(",").some(function(c){if(c=Fa(l,c.trim(),d,!1))return ha({sortable:b,rootEl:c,name:"filter",targetEl:g,fromEl:d,toEl:d}),na("filter",b,{evt:a}),!0}))){e&&a.cancelable&&a.preventDefault();
return}c.handle&&!Fa(l,c.handle,d,!1)||this._prepareDragStart(a,f,g)}}},_prepareDragStart:function(a,b,d){var c=this,e=c.el,h=c.options,f=e.ownerDocument;if(d&&!t&&d.parentNode===e){var g=aa(d);M=e;t=d;U=t.parentNode;Gb=t.nextSibling;yc=d;zc=h.group;w.dragged=t;Hb={target:t,clientX:(b||a).clientX,clientY:(b||a).clientY};Md=Hb.clientX-g.left;Nd=Hb.clientY-g.top;this._lastX=(b||a).clientX;this._lastY=(b||a).clientY;t.style["will-change"]="all";d=function(){na("delayEnded",c,{evt:a});w.eventCanceled?
c._onDrop():(c._disableDelayedDragEvents(),!Jd&&c.nativeDraggable&&(t.draggable=!0),c._triggerDragStart(a,b),ha({sortable:c,name:"choose",originalEvent:a}),oa(t,h.chosenClass,!0))};h.ignore.split(",").forEach(function(a){qd(t,a.trim(),Lc)});A(f,"dragover",Ib);A(f,"mousemove",Ib);A(f,"touchmove",Ib);A(f,"mouseup",c._onDrop);A(f,"touchend",c._onDrop);A(f,"touchcancel",c._onDrop);Jd&&this.nativeDraggable&&(this.options.touchStartThreshold=4,t.draggable=!0);na("delayStart",this,{evt:a});!h.delay||h.delayOnTouchOnly&&
!b||this.nativeDraggable&&(ac||Oa)?d():w.eventCanceled?this._onDrop():(A(f,"mouseup",c._disableDelayedDrag),A(f,"touchend",c._disableDelayedDrag),A(f,"touchcancel",c._disableDelayedDrag),A(f,"mousemove",c._delayedDragTouchMoveHandler),A(f,"touchmove",c._delayedDragTouchMoveHandler),h.supportPointer&&A(f,"pointermove",c._delayedDragTouchMoveHandler),c._dragStartTimer=setTimeout(d,h.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),
Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){t&&Lc(t);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;v(a,"mouseup",this._disableDelayedDrag);v(a,"touchend",this._disableDelayedDrag);v(a,"touchcancel",this._disableDelayedDrag);v(a,"mousemove",this._delayedDragTouchMoveHandler);
v(a,"touchmove",this._delayedDragTouchMoveHandler);v(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?A(document,"pointermove",this._onTouchMove):b?A(document,"touchmove",this._onTouchMove):A(document,"mousemove",this._onTouchMove):(A(t,"dragend",this),A(M,"dragstart",this._onDragStart));try{document.selection?uc(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(d){}},
_dragStarted:function(a,b){Rb=!1;if(M&&t){na("dragStarted",this,{evt:b});this.nativeDraggable&&A(document,"dragover",qf);var d=this.options;!a&&oa(t,d.dragClass,!1);oa(t,d.ghostClass,!0);w.active=this;a&&this._appendGhost();ha({sortable:this,name:"start",originalEvent:b})}else this._nulling()},_emulateDragOver:function(){if(Aa){this._lastX=Aa.clientX;this._lastY=Aa.clientY;Kd();for(var a=document.elementFromPoint(Aa.clientX,Aa.clientY),b=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(Aa.clientX,
Aa.clientY);if(a===b)break;b=a}t.parentNode[qa]._isOutsideThisEl(a);if(b){do{if(b[qa]&&b[qa]._onDragOver({clientX:Aa.clientX,clientY:Aa.clientY,target:a,rootEl:b})&&!this.options.dragoverBubble)break;a=b}while(b=b.parentNode)}Ld()}},_onTouchMove:function(a){if(Hb){var b=this.options,d=b.fallbackTolerance,c=b.fallbackOffset;b=a.touches?a.touches[0]:a;var e=y&&Mb(y,!0),h=y&&e&&e.a,f=y&&e&&e.d,g=gc&&ea&&sd(ea);h=(b.clientX-Hb.clientX+c.x)/(h||1)+(g?g[0]-Zc[0]:0)/(h||1);c=(b.clientY-Hb.clientY+c.y)/(f||
1)+(g?g[1]-Zc[1]:0)/(f||1);if(!w.active&&!Rb){if(d&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<d)return;this._onDragStart(a,!0)}y&&(e?(e.e+=h-(Xc||0),e.f+=c-(Yc||0)):e={a:1,b:0,c:0,d:1,e:h,f:c},d="matrix(".concat(e.a,",").concat(e.b,",").concat(e.c,",").concat(e.d,",").concat(e.e,",").concat(e.f,")"),u(y,"webkitTransform",d),u(y,"mozTransform",d),u(y,"msTransform",d),u(y,"transform",d),Xc=h,Yc=c,Aa=b);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!y){var a=
this.options.fallbackOnBody?document.body:M,b=aa(t,!0,gc,!0,a),d=this.options;if(gc){for(ea=a;"static"===u(ea,"position")&&"none"===u(ea,"transform")&&ea!==document;)ea=ea.parentNode;ea!==document.body&&ea!==document.documentElement?(ea===document&&(ea=Pa()),b.top+=ea.scrollTop,b.left+=ea.scrollLeft):ea=Pa();Zc=sd(ea)}y=t.cloneNode(!0);oa(y,d.ghostClass,!1);oa(y,d.fallbackClass,!0);oa(y,d.dragClass,!0);u(y,"transition","");u(y,"transform","");u(y,"box-sizing","border-box");u(y,"margin",0);u(y,"top",
b.top);u(y,"left",b.left);u(y,"width",b.width);u(y,"height",b.height);u(y,"opacity","0.8");u(y,"position",gc?"absolute":"fixed");u(y,"zIndex","100000");u(y,"pointerEvents","none");w.ghost=y;a.appendChild(y);u(y,"transform-origin",Md/parseInt(y.style.width)*100+"% "+Nd/parseInt(y.style.height)*100+"%")}},_onDragStart:function(a,b){var d=this,c=a.dataTransfer,e=d.options;na("dragStart",this,{evt:a});w.eventCanceled?this._onDrop():(na("setupClone",this),w.eventCanceled||(O=vd(t),O.draggable=!1,O.style["will-change"]=
"",this._hideClone(),oa(O,this.options.chosenClass,!1),w.clone=O),d.cloneId=uc(function(){na("clone",d);w.eventCanceled||(d.options.removeCloneOnHide||M.insertBefore(O,t),d._hideClone(),ha({sortable:d,name:"clone"}))}),!b&&oa(t,e.dragClass,!0),b?(Ac=!0,d._loopId=setInterval(d._emulateDragOver,50)):(v(document,"mouseup",d._onDrop),v(document,"touchend",d._onDrop),v(document,"touchcancel",d._onDrop),c&&(c.effectAllowed="move",e.setData&&e.setData.call(d,c,t)),A(document,"drop",d),u(t,"transform","translateZ(0)")),
Rb=!0,d._dragStartId=uc(d._dragStarted.bind(d,b,a)),A(document,"selectstart",d),ic=!0,Vc&&u(document.body,"user-select","none"))},_onDragOver:function(a){function b(b,d){na(b,q,Ea({evt:a,isOwner:I,axis:z?"vertical":"horizontal",revert:l,dragRect:B,targetRect:g,canSort:p,fromSortable:r,target:f,completed:c,onMove:function(b,d){return Kc(M,h,t,B,b,aa(b),a,d)},changed:e},d))}function d(){b("dragOverAnimationCapture");q.captureAnimationState();q!==r&&r.captureAnimationState()}function c(d){b("dragOverCompleted",
{insertion:d});d&&(I?x._hideClone():x._showClone(q),q!==r&&(oa(t,ba?ba.options.ghostClass:x.options.ghostClass,!1),oa(t,k.ghostClass,!0)),ba!==q&&q!==w.active?ba=q:q===w.active&&ba&&(ba=null),r===q&&(q._ignoreWhileAnimating=f),q.animateAll(function(){b("dragOverAnimationComplete");q._ignoreWhileAnimating=null}),q!==r&&(r.animateAll(),r._ignoreWhileAnimating=null));if(f===t&&!t.animated||f===h&&!f.animated)Sb=null;k.dragoverBubble||a.rootEl||f===document||(t.parentNode[qa]._isOutsideThisEl(a.target),
!d&&Ib(a));!k.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return A=!0}function e(){pa=sa(t);cb=sa(t,k.draggable);ha({sortable:q,name:"change",toEl:h,newIndex:pa,newDraggableIndex:cb,originalEvent:a})}var h=this.el,f=a.target,g,l,k=this.options,n=k.group,x=w.active,I=zc===n,p=k.sort,r=ba||x,q=this,A=!1;if(!Mc){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();f=Fa(f,k.draggable,h,!0);b("dragOver");if(w.eventCanceled)return A;if(t.contains(a.target)||f.animated&&f.animatingX&&f.animatingY||
q._ignoreWhileAnimating===f)return c(!1);Ac=!1;if(x&&!k.disabled&&(I?p||(l=!M.contains(t)):ba===this||(this.lastPutMode=zc.checkPull(this,x,t,a))&&n.checkPut(this,x,t,a))){var z="vertical"===this._getDirection(a,f);var B=aa(t);b("dragOverValid");if(w.eventCanceled)return A;if(l)return U=M,d(),this._hideClone(),b("revert"),w.eventCanceled||(Gb?M.insertBefore(t,Gb):M.appendChild(t)),c(!0);n=Hc(h,k.draggable);if(!n||ie(a,z,this)&&!n.animated){if(n===t)return c(!1);n&&h===a.target&&(f=n);f&&(g=aa(f));
if(!1!==Kc(M,h,t,B,f,g,a,!!f))return d(),h.appendChild(t),U=h,e(),c(!0)}else if(f.parentNode===h){g=aa(f);var v=0;v=t.parentNode!==h;var J=!of(t.animated&&t.toRect||B,f.animated&&f.toRect||g,z);n=z?"top":"left";var D=rd(f,"top","top")||rd(t,"top","top"),F=D?D.scrollTop:void 0;if(Sb!==f){var H=g[n];cc=!1;Bc=!J&&k.invertSwap||v}v=je(a,f,g,z,J?1:k.swapThreshold,null==k.invertedSwapThreshold?k.swapThreshold:k.invertedSwapThreshold,Bc,Sb===f);if(0!==v){J=sa(t);do{J-=v;var G=U.children[J]}while(G&&("none"===
u(G,"display")||G===y))}if(0===v||G===f)return c(!1);Sb=f;dc=v;G=f.nextElementSibling;J=!1;J=1===v;v=Kc(M,h,t,B,f,g,a,J);if(!1!==v){if(1===v||-1===v)J=1===v;Mc=!0;setTimeout(he,30);d();J&&!G?h.appendChild(t):f.parentNode.insertBefore(t,J?G:f);D&&ud(D,0,F-D.scrollTop);U=t.parentNode;void 0===H||Bc||(sc=Math.abs(H-aa(f)[n]));e();return c(!0)}}if(h.contains(t))return c(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){v(document,"mousemove",this._onTouchMove);v(document,"touchmove",
this._onTouchMove);v(document,"pointermove",this._onTouchMove);v(document,"dragover",Ib);v(document,"mousemove",Ib);v(document,"touchmove",Ib)},_offUpEvents:function(){var a=this.el.ownerDocument;v(a,"mouseup",this._onDrop);v(a,"touchend",this._onDrop);v(a,"pointerup",this._onDrop);v(a,"touchcancel",this._onDrop);v(document,"selectstart",this)},_onDrop:function(a){var b=this.el,d=this.options;pa=sa(t);cb=sa(t,d.draggable);na("drop",this,{evt:a});U=t&&t.parentNode;pa=sa(t);cb=sa(t,d.draggable);if(!w.eventCanceled&&
(cc=Bc=Rb=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(v(document,"drop",this),v(b,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Vc&&u(document.body,"user-select",""),u(t,"transform",""),a&&(ic&&(a.cancelable&&a.preventDefault(),!d.dropBubble&&a.stopPropagation()),y&&y.parentNode&&y.parentNode.removeChild(y),(M===U||ba&&"clone"!==ba.lastPutMode)&&O&&O.parentNode&&O.parentNode.removeChild(O),
t&&(this.nativeDraggable&&v(t,"dragend",this),Lc(t),t.style["will-change"]="",ic&&!Rb&&oa(t,ba?ba.options.ghostClass:this.options.ghostClass,!1),oa(t,this.options.chosenClass,!1),ha({sortable:this,name:"unchoose",toEl:U,newIndex:null,newDraggableIndex:null,originalEvent:a}),M!==U?(0<=pa&&(ha({rootEl:U,name:"add",toEl:U,fromEl:M,originalEvent:a}),ha({sortable:this,name:"remove",toEl:U,originalEvent:a}),ha({rootEl:U,name:"sort",toEl:U,fromEl:M,originalEvent:a}),ha({sortable:this,name:"sort",toEl:U,
originalEvent:a})),ba&&ba.save()):pa!==Nb&&0<=pa&&(ha({sortable:this,name:"update",toEl:U,originalEvent:a}),ha({sortable:this,name:"sort",toEl:U,originalEvent:a})),w.active)))){if(null==pa||-1===pa)pa=Nb,cb=Zb;ha({sortable:this,name:"end",toEl:U,originalEvent:a});this.save()}this._nulling()},_nulling:function(){na("nulling",this);M=t=U=y=Gb=O=yc=fb=Hb=Aa=ic=pa=cb=Nb=Zb=Sb=dc=ba=zc=w.dragged=w.ghost=w.clone=w.active=null;tc.forEach(function(a){a.checked=!0});tc.length=Xc=Yc=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);
break;case "dragenter":case "dragover":t&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,d=this.el.children,c=0,e=d.length,f=this.options;c<e;c++)b=d[c],Fa(b,f.draggable,this.el,!1)&&a.push(b.getAttribute(f.dataIdAttr)||ke(b));return a},sort:function(a){var b={},d=this.el;this.toArray().forEach(function(a,c){c=d.children[c];Fa(c,this.options.draggable,d,!1)&&(b[a]=
c)},this);a.forEach(function(a){b[a]&&(d.removeChild(b[a]),d.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return Fa(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var d=this.options;if(void 0===b)return d[a];var c=bc.modifyOption(this,a,b);d[a]="undefined"!==typeof c?c:b;"group"===a&&xd(d)},destroy:function(){na("destroy",this);var a=this.el;a[qa]=null;v(a,"mousedown",this._onTapStart);v(a,"touchstart",this._onTapStart);
v(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(v(a,"dragover",this),v(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();rc.splice(rc.indexOf(this.el),1);this.el=a=null},_hideClone:function(){fb||(na("hideClone",this),w.eventCanceled||(u(O,"display","none"),this.options.removeCloneOnHide&&O.parentNode&&O.parentNode.removeChild(O),fb=!0))},_showClone:function(a){"clone"!==
a.lastPutMode?this._hideClone():fb&&(na("showClone",this),w.eventCanceled||(M.contains(t)&&!this.options.group.revertClone?M.insertBefore(O,t):Gb?M.insertBefore(O,Gb):M.appendChild(O),this.options.group.revertClone&&this.animate(t,O),u(O,"display",""),fb=!1))}};Cc&&A(document,"touchmove",function(a){(w.active||Rb)&&a.cancelable&&a.preventDefault()});w.utils={on:A,off:v,css:u,find:qd,is:function(a,b){return!!Fa(a,b,a,!1)},extend:function(a,b){if(a&&b)for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);
return a},throttle:td,closest:Fa,toggleClass:oa,clone:vd,index:sa,nextTick:uc,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:wd,getChild:qc};w.get=function(a){return a[qa]};w.mount=function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];b[0].constructor===Array&&(b=b[0]);b.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(w.utils=Ea({},w.utils,
a.utils));bc.mount(a)})};w.create=function(a,b){return new w(a,b)};w.version="1.10.2";var R=[],jc,$c,ad=!1,bd,cd,Dc,Tb,dd=td(function(a,b,d,c){if(b.scroll){var e=(a.touches?a.touches[0]:a).clientX,f=(a.touches?a.touches[0]:a).clientY,m=b.scrollSensitivity,g=b.scrollSpeed,k=Pa(),l=!1;if($c!==d){$c=d;vc();jc=b.scroll;var n=b.scrollFn;!0===jc&&(jc=bb(d,!0))}d=0;var x=jc;do{var I=x,p=aa(I),r=p.top,q=p.bottom,t=p.left,v=p.right,y=p.width;p=p.height;var z=void 0,J=void 0,A=I.scrollWidth,B=I.scrollHeight;
J=u(I);var D=I.scrollLeft,F=I.scrollTop;I===k?(z=y<A&&("auto"===J.overflowX||"scroll"===J.overflowX||"visible"===J.overflowX),J=p<B&&("auto"===J.overflowY||"scroll"===J.overflowY||"visible"===J.overflowY)):(z=y<A&&("auto"===J.overflowX||"scroll"===J.overflowX),J=p<B&&("auto"===J.overflowY||"scroll"===J.overflowY));t=z&&(Math.abs(v-e)<=m&&D+y<A)-(Math.abs(t-e)<=m&&!!D);r=J&&(Math.abs(q-f)<=m&&F+p<B)-(Math.abs(r-f)<=m&&!!F);if(!R[d])for(q=0;q<=d;q++)R[q]||(R[q]={});if(R[d].vx!=t||R[d].vy!=r||R[d].el!==
I)if(R[d].el=I,R[d].vx=t,R[d].vy=r,clearInterval(R[d].pid),0!=t||0!=r)l=!0,R[d].pid=setInterval(function(){c&&0===this.layer&&w.active._onTouchMove(Dc);var b=R[this.layer].vy?R[this.layer].vy*g:0,d=R[this.layer].vx?R[this.layer].vx*g:0;"function"===typeof n&&"continue"!==n.call(w.dragged.parentNode[qa],d,b,a,Dc,R[this.layer].el)||ud(R[this.layer].el,d,b)}.bind({layer:d}),24);d++}while(b.bubbleScroll&&x!==k&&(x=bb(x,!1)));ad=l}},30),Qd=function(a){var b=a.originalEvent,d=a.putSortable,c=a.dragEl,e=
a.activeSortable,f=a.dispatchSortableEvent,g=a.hideGhostForTarget;a=a.unhideGhostForTarget;b&&(e=d||e,g(),b=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b,b=document.elementFromPoint(b.clientX,b.clientY),a(),e&&!e.el.contains(b)&&(f("spill"),this.onSpill({dragEl:c,putSortable:d})))};Nc.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();
var d=qc(this.sortable.el,this.startIndex,this.options);d?this.sortable.el.insertBefore(b,d):this.sortable.el.appendChild(b);this.sortable.animateAll();a&&a.animateAll()},drop:Qd};za(Nc,{pluginName:"revertOnSpill"});Oc.prototype={onSpill:function(a){var b=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:Qd};za(Oc,{pluginName:"removeOnSpill"});w.mount(new function(){function a(){this.defaults={scroll:!0,scrollSensitivity:30,
scrollSpeed:10,bubbleScroll:!0};for(var a in this)"_"===a.charAt(0)&&"function"===typeof this[a]&&(this[a]=this[a].bind(this))}a.prototype={dragStarted:function(a){a=a.originalEvent;this.sortable.nativeDraggable?A(document,"dragover",this._handleAutoScroll):this.options.supportPointer?A(document,"pointermove",this._handleFallbackAutoScroll):a.touches?A(document,"touchmove",this._handleFallbackAutoScroll):A(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){a=a.originalEvent;
this.options.dragOverBubble||a.rootEl||this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):(v(document,"pointermove",this._handleFallbackAutoScroll),v(document,"touchmove",this._handleFallbackAutoScroll),v(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(Tb);vc();clearTimeout(Yb);Yb=void 0},nulling:function(){Dc=$c=jc=ad=Tb=bd=cd=null;R.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},
_handleAutoScroll:function(a,d){var b=this,c=(a.touches?a.touches[0]:a).clientX,e=(a.touches?a.touches[0]:a).clientY,f=document.elementFromPoint(c,e);Dc=a;if(d||ac||Oa||Vc){dd(a,this.options,f,d);var g=bb(f,!0);!ad||Tb&&c===bd&&e===cd||(Tb&&clearInterval(Tb),Tb=setInterval(function(){var f=bb(document.elementFromPoint(c,e),!0);f!==g&&(g=f,vc());dd(a,b.options,f,d)},10),bd=c,cd=e)}else this.options.bubbleScroll&&bb(f,!0)!==Pa()?dd(a,this.options,bb(f,!1),!1):vc()}};return za(a,{pluginName:"scroll",
initializeByDefault:!0})});w.mount(Oc,Nc);var rf=w,Ub=function(a){this.run=a;this.html=l.makeDiv(["production-screen"]);this.refresh()};Ub.prototype.refresh=function(){var a=this,b=this.run.inventory.clone(),d=this.run.getResourceConversions(),c=d.free,e=d.costly;b.applyConversions(c);c=c.map(function(b){return a.renderConversion(b,!0)});c=l.makeDivContaining(c,["free-conversions-list"]);d=[];e=$jscomp.makeIterator(e);for(var f=e.next();!f.done;f=e.next())f=f.value,b.canAfford(f.inputs)&&b.hasEnoughWorkers(f.requiredWorkers)?
(d.push(this.renderConversion(f,!0)),b.applyConversions([f])):d.push(this.renderConversion(f,!1));d=l.makeDivContaining(d);rf.create(d,{onEnd:function(b){var d=b.oldDraggableIndex;b=b.newDraggableIndex;void 0!==d&&void 0!==b&&a.shiftCostlyConversion(d,b)}});e=l.makePara("Available workers at start of production cycle: "+this.run.inventory.getAvailableWorkers(),["production-screen-available-workers"]);f=l.makePara("Unused workers at end of production cycle: "+b.getAvailableWorkers(),["production-screen-worker-consumption-label"]);
var g=l.makeDiv();if(0!==this.run.inventory.getSpeciesList().length){var k=b.clone();g.appendChild(l.makePara("Resources required for worker upkeep:",["production-screen-worker-consumption-label"]));for(var n=$jscomp.makeIterator(k.getSpeciesList()),p=n.next();!p.done;p=n.next()){var q=p.value;p=k.getProvidedWorkerConsumption(q).quantity;var x=k.getRequiredWorkerConsumption(q).quantity;g.appendChild(l.makePara(q.name+": "+p+"/"+x+" "+q.survivalCost.resource.name,[x>p?"population-consumption-unmet":
"population-consumption-met","production-screen-worker-consumption"]));k.payCost([k.getProvidedWorkerConsumption(q)])}}k=l.makeDiv();x=b.getSpeciesList();n=new Map;q=$jscomp.makeIterator(x);for(p=q.next();!p.done;p=q.next())p=p.value,n.set(p,b.getPopulation(p));b.doPopulationGrowth();q=new Map;var I=$jscomp.makeIterator(x);for(p=I.next();!p.done;p=I.next())p=p.value,q.set(p,b.getPopulation(p));x=$jscomp.makeIterator(x);for(p=x.next();!p.done;p=x.next()){p=p.value;I=n.get(p);var r=q.get(p);I-=r;0<
I&&k.appendChild(l.makePara(I+" "+p.name+" will die from lack of "+p.survivalCost.resource.name+"!",["population-death-label"]))}l.fillHTML(this.html,[l.makeHeader("Resource Production Management"),l.makeHeader("Inventory at start of production cycle:",2,["production-screen-label"]),this.renderInventory(this.run.inventory),l.makeHeader("Resource production",2,["production-screen-label"]),e,c,d,l.makeHeader("Workforce",2,["production-screen-label"]),f,g,k,l.makeHeader("Inventory at end of production cycle:",
2,["production-screen-label"]),this.renderInventory(b),l.makeButton("Back",function(){T.show(new Fb(a.run))},["production-screen-back-button"])])};Ub.prototype.renderInventory=function(a){a=a.getInventoryStrings().map(function(a){return l.makePara(a)});0===a.length&&a.push(l.makePara("(none)"));return l.makeDivContaining(a,["production-screen-inventory"])};Ub.prototype.renderConversion=function(a,b){var d=this,c=l.makeDiv(["conversion"]),e=a.toString(),f="conversion-description-normal";a.enabled?
b||(e=a.toString()+" (cannot afford)",f="conversion-description-cannot-afford"):(e=a.toString()+" (disabled) ",f="conversion-description-disabled");b=l.makePara(e,[f,"conversion-description"]);b=l.makeDivContaining([b],["conversion-description-box"]);c.appendChild(b);c.appendChild(l.makeButton("Toggle",function(){d.toggle(a)}));return c};Ub.prototype.shiftCostlyConversion=function(a,b){this.run.shiftCostlyConversionPriority(a,b);this.refresh()};Ub.prototype.toggle=function(a){a.enabled=!a.enabled;
this.refresh()};var ed=function(a){this.run=a;this.html=l.makeDiv(["research-screen"]);this.refresh()};ed.prototype.refresh=function(){var a=this,b=l.makeHeader("Available Research Projects"),d=this.run.getResearchOptions(),c=g.values().filter(function(a){return d.some(function(b){return b.researchCost.resource===a})}),e=l.makeDiv(["research-resources"]);0!==c.length&&(e.appendChild(l.makeHeader("Available Research Data")),c.forEach(function(b){return e.appendChild(l.makePara(b.name+": "+a.run.inventory.getResourceQuantity(b)))}));
c=l.makeDivContaining(d.map(function(b){return a.renderTechOption(b)}));0===d.length&&(b=l.makeDiv());var f=l.makeHeader("Previous Research Projects",1,["previous-research-header"]),k=this.run.getUnlockedTechnologies().filter(function(a){return a.visible}).map(function(a){return l.makePara("\u2022 "+a.name,["previous-research"])});0===k.length&&(f=l.makeDiv());var p=l.makeButton("Back",function(){T.show(new Fb(a.run))},[]);l.fillHTML(this.html,[b,c,e,f].concat($jscomp.arrayFromIterable(k),[p]))};
ed.prototype.renderTechOption=function(a){for(var b=this,d=l.makeDivContaining([l.makeHeader(a.name,2),l.makePara(a.description),l.makePara("Development cost: "+a.researchCost)],["tech-option"]),c=0,e=$jscomp.makeIterator(a.requiredTechs),f=e.next();!f.done;f=e.next())f=f.value,this.run.hasUnlockedTechnology(f)||(c++,d.appendChild(l.makePara("Requires "+f.name+" research")));c=0===c&&this.run.inventory.canAfford([a.researchCost]);d.appendChild(l.makeButton("Conduct Research",function(){b.run.unlockTechnology(a);
b.refresh();b.run.updateQuestState()},[],c?"enabled":"disabled"));return d};var Uc=function(a,b){this.run=a;this.buttonState=void 0===b?"enabled":b;this.html=l.makeDiv(["world-screen-header"]);this.refresh()};Uc.prototype.refresh=function(){var a=this,b=l.makeButton("Quit Game",function(){T.show(new Ob)},[],this.buttonState),d=l.makeButton("Next Turn",function(){var b=new fc(a.run);T.show(b);b.startLoading()},[],this.buttonState),c=l.makeButton("Manage Production",function(){T.show(new Ub(a.run))},
[],this.buttonState),e=l.makeButton("Research Projects",function(){T.show(new ed(a.run))},[],this.buttonState);l.fillHTML(this.html,[b,c,e,d])};var kc=function(a,b,d){this.run=a;this.center=b;this.circuitsTile=d;this.mapUI=new X(this,a.world);this.tileSidebar=new Eb(this,a);this.tileSidebar.changeTile(b);this.inventorySidebar=new Rc(a);this.header=new Uc(a,"disabled");this.questIndicator=new Tc(a);this.html=l.makeDivContaining([this.header.html,this.questIndicator.html,l.makeDivContaining([this.inventorySidebar.html,
l.makeDivContaining([this.mapUI.html],["world-screen-map-box"]),this.tileSidebar.html],["world-screen-hbox"])],["flex-vertical","world-screen"])};kc.prototype.expandCircuits=function(a){for(var b=this,d=this.run.world,c=d.getTilesInCircle(this.center,a),e=d.getTileAtCoordinates(this.center),f=$jscomp.makeIterator(c),g=f.next();!g.done;g=f.next())g=g.value,g!==e&&d.placeTile(new this.circuitsTile(g.position));this.run.updateQuestState();this.run.inventory.applyPopulationCaps();this.refresh();if(c.length<
d.width*d.height)setTimeout(function(){b.expandCircuits(1.01*a+.05)},100);else{d=$jscomp.makeIterator(this.run.inventory.getResourceList());for(c=d.next();!c.done;c=d.next())c=c.value,this.run.inventory.removeResource(c,this.run.inventory.getResourceQuantity(c));this.refresh()}};kc.prototype.refresh=function(){this.mapUI.refresh();this.tileSidebar.refresh();this.inventorySidebar.refresh();this.header.refresh();this.questIndicator.refresh()};kc.prototype.handleKeyDown=function(a){this.mapUI.handleKeyDown(a)};
kc.prototype.changeSidebarTile=function(a){this.tileSidebar.changeTile(a)};var K=function(a,b,c,e,f,g){this.title=a;this.projectDescription=b;this.action=c;this.costs=e;this.completionRequirements=f;this.visibilityRequirements=g};K.prototype.canDo=function(a,b){return b.inventory.canAfford(this.costs)&&this.isVisible(a,b)&&this.completionRequirements.every(function(c){return c.evaluate(b,a)})};K.prototype.isVisible=function(a,b){return this.visibilityRequirements.every(function(c){return c(b,a)})};
K.prototype.doAction=function(a,b){if(!this.canDo(a,b))throw"tried to do project "+this.title+" without meeting requirements";b.inventory.payCost(this.costs);this.action(a,b)};var Ec=function(a,b,c,e,f,g,k){var d=K.call(this,a,b,function(a,b){b.world.placeTile(new c(a))},f,g,k)||this;d.title=a;d.projectDescription=b;d.activeMonolithTile=c;d.circuitsTile=e;d.costs=f;d.completionRequirements=g;d.visibilityRequirements=k;return d};$jscomp.inherits(Ec,K);Ec.prototype.doAction=function(a,b){if(!this.canDo(a,
b))throw"tried to do project "+this.title+" without meeting requirements";b.inventory.payCost(this.costs);this.action(a,b);a=new kc(b,a,this.circuitsTile);T.show(a);a.expandCircuits(1)};var F=function(a,b,c,e,f){this.name=a;this.description=b;this.requiredTechs=c;this.researchCost=e;this.visible=void 0===f?!0:f};F.makeUnlockableTechnology=function(a,b,c,e){a=new F(a,b,c,e,!0);Rd.push(a);return a};F.makeHiddenTechnology=function(a,b,c){c=void 0===c?!1:c;return new F(a,b,[],new n(g.EngineeringKnowledge,
0),c)};var Rd=[],gb=F.makeUnlockableTechnology("Industrial Engineering","Approaches for optimizing production processes",[],new n(g.EngineeringKnowledge,25)),va=F.makeUnlockableTechnology("Structural Engineering","Techniques for fabricating large structures on the planet's surface",[],new n(g.EngineeringKnowledge,10)),sf=F.makeUnlockableTechnology("Distributed Robotics","Autonomous robotic worker drones capable of performing the same jobs as human workers",[gb],new n(g.EngineeringKnowledge,100));
F.makeUnlockableTechnology("Swarm Robotics","Algorithms for efficiently managing large numbers of robotic workers",[gb],new n(g.EngineeringKnowledge,100));var fd=F.makeUnlockableTechnology("Colonist Behavior Modeling","Simulations of human behavior in the isolated conditions of a deep space colony",[],new n(g.PsychKnowledge,30)),tf=F.makeUnlockableTechnology("Habitation Pods","Compact and efficient residence units allow more humans to be packed into a small habitat",[fd],new n(g.EngineeringKnowledge,
15)),Sd=F.makeUnlockableTechnology("Nuclear Engineering","Applying nuclear physics to technology and power generation",[gb],new n(g.EngineeringKnowledge,70)),gd=F.makeUnlockableTechnology("Planetary Surveying","Exploration of the planetary environment, including the structures believed to have been built by an alien civilization",[],new n(g.EngineeringKnowledge,50)),uf=F.makeUnlockableTechnology("Game theory","Mathematical models of strategic interaction among rational decision-makers",[fd],new n(g.PsychKnowledge,
30)),hd=F.makeUnlockableTechnology("Cognitive Biases Research","Study of systematic patterns of deviation from rational thinking and decision-making",[uf],new n(g.PsychKnowledge,50)),Td=F.makeUnlockableTechnology("Human Rationality","Practices to improve humans' ability to form accurate beliefs and make effective decisions",[hd],new n(g.PsychKnowledge,200)),Vb=F.makeHiddenTechnology("AI Safety Research","A proposal for researching techniques for aligning the goals of an artificial intelligence with the goals of its human creators",
!1),Ud=F.makeUnlockableTechnology("Control Problem","A description of the problem of creating a superintelligent agent that will behave in a way that benefits its creators",[Vb],new n(g.AlignmentKnowledge,20)),vf=F.makeUnlockableTechnology("Motivation Selection","Techniques for specifying the goals and motives of an artificial intelligence",[Ud],new n(g.AlignmentKnowledge,50)),wf=F.makeUnlockableTechnology("Coherent Extrapolated Volition",q($jscomp$templatelit$11),[vf],new n(g.AlignmentKnowledge,
300)),xf=F.makeUnlockableTechnology("Decision Theory","The study of the reasoning underlying an agent's choices",[Ud],new n(g.AlignmentKnowledge,40)),yf=F.makeUnlockableTechnology("Acausal trade",q($jscomp$templatelit$12),[xf],new n(g.AlignmentKnowledge,200)),zf=F.makeUnlockableTechnology("Cooperative Reprogramming",q($jscomp$templatelit$13),[yf,wf],new n(g.AlignmentKnowledge,1E3)),lc=F.makeUnlockableTechnology("Xenoarchaeology",q($jscomp$templatelit$14),[gd],new n(g.AlienKnowledge,75)),Af=F.makeUnlockableTechnology("Sociology",
"The study of the development, structure, and functioning of societies",[fd],new n(g.PsychKnowledge,50)),id=F.makeUnlockableTechnology("Alien History",q($jscomp$templatelit$15),[Af,lc],new n(g.AlienKnowledge,50)),Fc=F.makeUnlockableTechnology("Xenomaterials","Techniques for processing and applying exotic resources found in the ruins of the alien civilization",[lc],new n(g.AlienKnowledge,50)),Bf=F.makeUnlockableTechnology("Nanotechnology","Manipulation of matter on an atomic, molecular, and supramolecular scale",
[Fc],new n(g.EngineeringKnowledge,30)),Cf=F.makeUnlockableTechnology("Zero Point Energy","Exploiting exotic, previously-unknown principles of physics to extract tremendous amounts of energy from the quantum vacuum",[Fc,Sd],new n(g.EngineeringKnowledge,100)),Ba=F.makeHiddenTechnology("Monolith Surveying",q($jscomp$templatelit$16)),Df=F.makeUnlockableTechnology("Hypercomputing",q($jscomp$templatelit$17),[Fc],new n(g.EngineeringKnowledge,100)),Vd=F.makeUnlockableTechnology("Neural Uploading",q($jscomp$templatelit$18),
[Ba,Df],new n(g.AlienKnowledge,80)),Wd=F.makeUnlockableTechnology("Singularity Engineering",q($jscomp$templatelit$19),[Ba],new n(g.AlienKnowledge,200)),fa=function(a){a=r.call(this,a)||this;a.texture=Dd;return a};$jscomp.inherits(fa,r);fa.prototype.getTileName=function(){return fa.tileName};fa.prototype.getTileDescription=function(){return fa.tileDescription};fa.prototype.getTexture=function(a){var b=this.position.x,c=this.position.y,e=a.getTileAtCoordinates(new D(b,c-1))instanceof fa,f=a.getTileAtCoordinates(new D(b,
c+1))instanceof fa,g=a.getTileAtCoordinates(new D(b+1,c))instanceof fa;return(a=a.getTileAtCoordinates(new D(b-1,c))instanceof fa)&&g&&e&&f?Dd:a&&g&&e?Ye:a&&e&&f?$e:a&&g&&f?Xe:g&&e&&f?Ze:a&&g?Ed:e&&f?Fd:a&&e?Ve:g&&e?We:a&&f?Te:g&&f?Ue:a||g?Ed:Fd};fa.tileName="Road";fa.tileDescription="Allows transportation of workers and supplies";var Ef=yb(fa,1),Sa=function(a){a=r.call(this,a)||this;a.texture=De;return a};$jscomp.inherits(Sa,r);Sa.prototype.getTileName=function(){return Sa.tileName};Sa.prototype.getTileDescription=
function(){return Sa.tileDescription};Sa.tileName="Seed Core";Sa.tileDescription=q($jscomp$templatelit$20);var Ta=function(a){a=r.call(this,a)||this;a.texture=Fe;return a};$jscomp.inherits(Ta,r);Ta.prototype.getTileName=function(){return Ta.tileName};Ta.prototype.getTileDescription=function(){return Ta.tileDescription};Ta.tileName="Hypercomputer Network";Ta.tileDescription="A self-replicating computing substrate that hosts a virtual reality for uploaded alien minds";var ra=function(a){a=r.call(this,
a)||this;a.texture=lf;return a};$jscomp.inherits(ra,r);ra.prototype.getTileName=function(){return ra.tileName};ra.prototype.getTileDescription=function(){return ra.tileDescription};ra.tileName="Neural Emulation Platform";ra.tileDescription="A machine capable of interfacing with the alien monolith's hypercomputers and accessing the stored alien connectomes";var wa=function(a){a=r.call(this,a)||this;a.texture=kf;return a};$jscomp.inherits(wa,r);wa.prototype.getTileName=function(){return wa.tileName};
wa.prototype.getTileDescription=function(){return wa.tileDescription};wa.tileName="Nanotech Foundry";wa.tileDescription="A nanotechnology manufacturing facility capable of completing the unfinished alien Monolith device";var Ua=function(a){a=r.call(this,a)||this;a.texture=Ge;return a};$jscomp.inherits(Ua,r);Ua.prototype.getTileName=function(){return Ua.tileName};Ua.prototype.getTileDescription=function(){return Ua.tileDescription};Ua.tileName="Hypercomputer Network";Ua.tileDescription="A self-replicating computing substrate hosting a utopian virtual reality for uploaded human minds";
var Va=function(a){a=r.call(this,a)||this;a.texture=Ee;return a};$jscomp.inherits(Va,r);Va.prototype.getTileName=function(){return Va.tileName};Va.prototype.getTileDescription=function(){return Va.tileDescription};Va.tileName="Seed Core";Va.tileDescription=q($jscomp$templatelit$21);var Ga=function(a){a=r.call(this,a)||this;a.texture=Ce;a.possibleProjects=[new Ec("Activate Seed Core",q($jscomp$templatelit$22),Va,Ua,[new n(g.Energy,1E5)],[db(wa,3),db(ra,2),P(Wd)],[])];return a};$jscomp.inherits(Ga,
r);Ga.prototype.getTileName=function(){return Ga.tileName};Ga.prototype.getTileDescription=function(){return Ga.tileDescription};Ga.tileName="Reprogrammed Monolith";Ga.tileDescription=q($jscomp$templatelit$23);var ka=function(a){a=r.call(this,a)||this;a.texture=Be;a.possibleProjects=[new K("Upload human neural data",q($jscomp$templatelit$24),function(a,c){c.world.placeTile(new Ga(a))},[new n(g.Energy,1E3),new n(g.SmartMatter,500)],[db(ra,2),P(Vd)],[G(zf),G(Ba)]),new Ec("Activate Seed Core",q($jscomp$templatelit$25),
Sa,Ta,[new n(g.Energy,1E5)],[db(wa,3),db(ra,2),P(Wd)],[G(Ba)])];return a};$jscomp.inherits(ka,r);ka.prototype.getTileName=function(){return ka.tileName};ka.prototype.getTileDescription=function(){return ka.tileDescription};ka.tileName="Monolith";ka.tileDescription="A towering alien structure";var N=function(a,b,c){this.inputs=a;this.outputs=b;this.enabled=!0;this.requiredWorkers=c||0;this.isFree()?this.priority=0:(this.priority=N.nextNumber,N.nextNumber++)};N.prototype.toString=function(){var a=this.outputs.map(function(a){return a.toString()}).join(", "),
b="Produce "+a;0<this.inputs.length&&(b="Convert "+this.inputs.map(function(a){return a.toString()}).join(", ")+" into "+a);0!==this.requiredWorkers&&(b+=" using "+this.requiredWorkers+" workers");return b};N.prototype.isFree=function(){return 0===this.inputs.length&&!this.requiredWorkers};N.nextNumber=1;var Ha=function(a,b){a=r.call(this,a)||this;a.texture=Gd;a.resourceConversions=[new N([],[new n(g.Cavorite,200)],300),new N([],[new n(g.Orichalcum,200)],300)];a.textureVariant=b;return a};$jscomp.inherits(Ha,
r);Ha.prototype.getTileName=function(){return Ha.tileName};Ha.prototype.getTileDescription=function(){return Ha.tileDescription};Ha.prototype.getTexture=function(){switch(this.textureVariant){case 1:return Gd;case 2:return jf}};Ha.tileName="Alien Ruins Recycler Excavation";Ha.tileDescription="A facility that harvests and recycles exotic materials from the alien structure.";var la=function(a){var b=r.call(this,a)||this;b.textureVariant=ca.bool()?1:2;b.texture=Bd;b.possibleProjects=[new K("Excavate",
"Construct a facility to harvest exotic alien resources from the ruins",function(a,c){return c.world.placeTile(new Ha(a,b.textureVariant))},[new n(g.BuildingMaterials,200),new n(g.Energy,100)],[Y,P(lc)],[G(gd)])];return b};$jscomp.inherits(la,r);la.prototype.getTileName=function(){return la.tileName};la.prototype.getTileDescription=function(){return la.tileDescription};la.prototype.getTexture=function(){switch(this.textureVariant){case 1:return Bd;case 2:return Ae}};la.tileName="Alien Ruins";la.tileDescription=
"Abandoned structure built by a long-dead alien civilization";var Ab=function(a,b){this.description=a;this.evaluate=b};Ab.prototype.toString=function(){return this.description};var Y=new Ab("adjacent to a road",Ef),xa=function(a){a=r.call(this,a)||this;a.texture=Je;a.populationCapacity=new Qc(S.Human,200);a.possibleProjects=[new K("AI Safety Research Proposal",q($jscomp$templatelit$26),function(a,c){return c.unlockTechnology(Vb)},[],[P(Td)],[G(hd),function(a){return!a.hasUnlockedTechnology(Vb)},yd(S.Human,
500)])];return a};$jscomp.inherits(xa,r);xa.prototype.getTileName=function(){return xa.tileName};xa.prototype.getTileDescription=function(){return xa.tileDescription};xa.tileName="Habitat Dome";xa.tileDescription="A pressurized structure that provides housing, services, and life support for humans";var Ia=function(a){a=r.call(this,a)||this;a.texture=Ke;a.resourceConversions=[new N([],[new n(g.Energy,100)])];return a};$jscomp.inherits(Ia,r);Ia.prototype.getTileName=function(){return Ia.tileName};Ia.prototype.getTileDescription=
function(){return Ia.tileDescription};Ia.tileName="Photovoltaic Array";Ia.tileDescription="Converts light from this planet's sun into electrical energy";var Wa=function(a){a=r.call(this,a)||this;a.texture=Le;a.resourceConversions=[new N([new n(g.Metal,100)],[new n(g.BuildingMaterials,100)],60),new N([new n(g.Metal,100)],[new n(g.Electronics,100)],30)];return a};$jscomp.inherits(Wa,r);Wa.prototype.getTileName=function(){return Wa.tileName};Wa.prototype.getTileDescription=function(){return Wa.tileDescription};
Wa.tileName="Ore Processing Center";Wa.tileDescription="A facility used to process ore into useful materials";var Xa=function(a){a=r.call(this,a)||this;a.texture=Ne;a.resourceConversions=[new N([new n(g.Energy,10)],[new n(g.Food,200)],20)];return a};$jscomp.inherits(Xa,r);Xa.prototype.getTileName=function(){return Xa.tileName};Xa.prototype.getTileDescription=function(){return Xa.tileDescription};Xa.tileName="Greenhouse";Xa.tileDescription="Produces "+g.Food.name+" for "+S.Human.name;var Ya=function(a){a=
r.call(this,a)||this;a.texture=Me;a.possibleProjects=[new K("Unpack Lander","Unload colonists and deploy prefabricated colonial buildings",function(a,c){var b=c.world;b.placeTile(new xa(new D(a.x+1,a.y)));b.placeTile(new Wa(new D(a.x,a.y-1)));b.placeTile(new Ia(new D(a.x+1,a.y-1)));b.placeTile(new Xa(new D(a.x-1,a.y)));b.placeTile(new fa(a));b.placeTile(new fa(new D(a.x,a.y+1)));c.inventory.addResource(g.Food,1E3);c.inventory.addWorkers(S.Human,100);c.inventory.releaseWorkers()},[],[],[])];return a};
$jscomp.inherits(Ya,r);Ya.prototype.getTileName=function(){return Ya.tileName};Ya.prototype.getTileDescription=function(){return Ya.tileDescription};Ya.tileName="Landing Pod";Ya.tileDescription=q($jscomp$templatelit$27);var jd=function(a,b){this.title=a;this.description=b},Ja=function(a){a=r.call(this,a)||this;a.texture=ff;a.resourceConversions=[new N([],[new n(g.EngineeringKnowledge,5)],30)];return a};$jscomp.inherits(Ja,r);Ja.prototype.getTileName=function(){return Ja.tileName};Ja.prototype.getTileDescription=
function(){return Ja.tileDescription};Ja.tileName="Engineering Lab";Ja.tileDescription="A workshop for developing new technology";var hb=function(a){a=r.call(this,a)||this;a.texture=af;a.populationCapacity=new Qc(S.Human,2E3);a.possibleProjects=[new K("AI Safety Research Proposal",q($jscomp$templatelit$28),function(a,c){return c.unlockTechnology(Vb)},[],[P(Td)],[G(hd),function(a){return!a.hasUnlockedTechnology(Vb)},yd(S.Human,500)])];return a};$jscomp.inherits(hb,r);hb.prototype.getTileName=function(){return hb.tileName};
hb.prototype.getTileDescription=function(){return hb.tileDescription};hb.tileName="Arcology";hb.tileDescription="A self-contained habitat for efficiently housing a large number of humans";var ib=function(a){a=r.call(this,a)||this;a.texture=Oe;a.resourceConversions=[new N([new n(g.Energy,50)],[new n(g.Food,1E3)],40)];return a};$jscomp.inherits(ib,r);ib.prototype.getTileName=function(){return ib.tileName};ib.prototype.getTileDescription=function(){return ib.tileDescription};ib.tileName="Hydroponics Greenhouse";
ib.tileDescription="Produces "+g.Food.name+" for "+S.Human.name+" more efficiently than a standard greenhouse";var jb=function(a){a=r.call(this,a)||this;a.texture=He;a.possibleProjects=[new K("Break down construction site","Revert this location to wasteland",function(a,c){c.world.placeTile(new H(a))},[],[],[]),W(xa,[new n(g.BuildingMaterials,100)],[P(va),Y],[]),W(hb,[new n(g.BuildingMaterials,250)],[P(tf),Y],[G(va)]),W(Xa,[new n(g.BuildingMaterials,25)],[Y],[G(va)]),W(ib,[new n(g.BuildingMaterials,
25),new n(g.Electronics,30)],[Y,P(gb)],[G(va)])];return a};$jscomp.inherits(jb,r);jb.prototype.getTileName=function(){return jb.tileName};jb.prototype.getTileDescription=function(){return jb.tileDescription};jb.tileName="Construction Site - Habitat";jb.tileDescription="An area designated for construction of habitation and life support facilities";var kb=function(a){a=r.call(this,a)||this;a.texture=gf;a.resourceConversions=[new N([],[new n(g.PsychKnowledge,10)],25)];return a};$jscomp.inherits(kb,r);
kb.prototype.getTileName=function(){return kb.tileName};kb.prototype.getTileDescription=function(){return kb.tileDescription};kb.tileName="Psychology Lab";kb.tileDescription="A laboratory for studying how humans behave in the isolated conditions of a remote colony";var Ka=function(a){a=r.call(this,a)||this;a.texture=hf;a.resourceConversions=[new N([],[new n(g.AlienKnowledge,10)],50)];a.possibleProjects=[new K("Survey Alien Monolith",q($jscomp$templatelit$29,Ba.name),function(a,c){c.unlockTechnology(Ba)},
[new n(g.AlienKnowledge,50)],[db(ka,5)],[G(id),function(a){return!a.hasUnlockedTechnology(Ba)}])];return a};$jscomp.inherits(Ka,r);Ka.prototype.getTileName=function(){return Ka.tileName};Ka.prototype.getTileDescription=function(){return Ka.tileDescription};Ka.tileName="Xenoarchaeology Lab";Ka.tileDescription="A laboratory for studying artifacts and technology left by the now-dead alien civilization";var lb=function(a){a=r.call(this,a)||this;a.texture=ef;a.resourceConversions=[new N([],[new n(g.AlignmentKnowledge,
10)],100)];return a};$jscomp.inherits(lb,r);lb.prototype.getTileName=function(){return lb.tileName};lb.prototype.getTileDescription=function(){return lb.tileDescription};lb.tileName="AI Alignment Lab";lb.tileDescription=q($jscomp$templatelit$30);var mb=function(a){a=r.call(this,a)||this;a.texture=Ie;a.possibleProjects=[new K("Break down construction site","Revert this location to wasteland",function(a,c){c.world.placeTile(new H(a))},[],[],[]),W(Ja,[new n(g.BuildingMaterials,20),new n(g.Electronics,
20)],[Y],[]),W(kb,[new n(g.BuildingMaterials,30)],[Y],[]),W(Ka,[new n(g.BuildingMaterials,40)],[ne(3),Y,P(gd)],[]),W(lb,[new n(g.BuildingMaterials,20),new n(g.Electronics,40)],[oe(S.Human,200),Y],[G(Vb)])];return a};$jscomp.inherits(mb,r);mb.prototype.getTileName=function(){return mb.tileName};mb.prototype.getTileDescription=function(){return mb.tileDescription};mb.tileName="Construction Site - Laboratories";mb.tileDescription="An area designated for construction of research laboratories";var nb=
function(a){a=r.call(this,a)||this;a.texture=Pe;a.resourceConversions=[new N([],[new n(g.Metal,50)],80)];return a};$jscomp.inherits(nb,r);nb.prototype.getTileName=function(){return nb.tileName};nb.prototype.getTileDescription=function(){return nb.tileDescription};nb.tileName="Mineshaft";nb.tileDescription="A mineshaft built into a mountain to allow long-term ore extraction";var ya=function(a){a=r.call(this,a)||this;a.texture=ze;a.possibleProjects=[new K("Strip Mining","Destroy the mountain to produce "+
g.Metal.name,function(a,c){c.inventory.addResource(g.Metal,150);c.world.placeTile(new H(a))},[new n(g.Energy,25)],[],[]),new K("Construct Mineshaft","Create a mineshaft to allow long-term ore extraction",function(a,c){c.world.placeTile(new nb(a))},[new n(g.Energy,300),new n(g.BuildingMaterials,50)],[P(va)],[])];return a};$jscomp.inherits(ya,r);ya.prototype.getTileName=function(){return ya.tileName};ya.prototype.getTileDescription=function(){return ya.tileDescription};ya.tileName="Mountain";ya.tileDescription=
"A large geological formation containing useful mineral resources";var ob=function(a){a=r.call(this,a)||this;a.texture=bf;a.resourceConversions=[new N([],[new n(g.Energy,1E3)],15)];return a};$jscomp.inherits(ob,r);ob.prototype.getTileName=function(){return ob.tileName};ob.prototype.getTileDescription=function(){return ob.tileDescription};ob.tileName="Nuclear Power Plant";ob.tileDescription="A high-efficiency fission power plant";var pb=function(a){a=r.call(this,a)||this;a.texture=cf;a.populationCapacity=
new Qc(S.Robot,5E3);a.possibleProjects=[new K("Construct robot swarm","Creates 100 robotic worker drones",function(a,c){c.inventory.addWorkers(S.Robot,100)},[new n(g.Electronics,50),new n(g.Energy,100)],[],[])];return a};$jscomp.inherits(pb,r);pb.prototype.getTileName=function(){return pb.tileName};pb.prototype.getTileDescription=function(){return pb.tileDescription};pb.tileName="Drone Hive";pb.tileDescription="A facility for manufacturing, storing, and maintaining mobile robotic worker drones";var qb=
function(a){a=r.call(this,a)||this;a.texture=Re;a.resourceConversions=[new N([new n(g.Metal,1E3)],[new n(g.BuildingMaterials,1E3)],250)];return a};$jscomp.inherits(qb,r);qb.prototype.getTileName=function(){return qb.tileName};qb.prototype.getTileDescription=function(){return qb.tileDescription};qb.tileName="Construction Materials Factory";qb.tileDescription="A facility for producing "+g.BuildingMaterials.name;var rb=function(a){a=r.call(this,a)||this;a.texture=Qe;a.resourceConversions=[new N([new n(g.Metal,
500)],[new n(g.Electronics,500)],100)];return a};$jscomp.inherits(rb,r);rb.prototype.getTileName=function(){return rb.tileName};rb.prototype.getTileDescription=function(){return rb.tileDescription};rb.tileName="Electronics Factory";rb.tileDescription="A facility for producing "+g.Electronics.name;var sb=function(a){a=r.call(this,a)||this;a.texture=Se;a.resourceConversions=[new N([new n(g.Cavorite,500)],[new n(g.Superconductor,500)],100),new N([new n(g.Orichalcum,500),new n(g.Superconductor,100)],
[new n(g.SmartMatter,500)],100)];return a};$jscomp.inherits(sb,r);sb.prototype.getTileName=function(){return sb.tileName};sb.prototype.getTileDescription=function(){return sb.tileDescription};sb.tileName="Xeno-Materials Factory";sb.tileDescription="A facility for processing alien resources";var tb=function(a){a=r.call(this,a)||this;a.texture=df;a.resourceConversions=[new N([],[new n(g.Energy,1E4)],40)];return a};$jscomp.inherits(tb,r);tb.prototype.getTileName=function(){return tb.tileName};tb.prototype.getTileDescription=
function(){return tb.tileDescription};tb.tileName="Zero Point Energy Plant";tb.tileDescription="A power plant that exploits exotic physics and alien science to produce vast amounts of "+g.Energy.name+".";var ub=function(a){a=r.call(this,a)||this;a.texture=Cd;a.possibleProjects=[new K("Break down construction site","Revert this location to wasteland",function(a,c){c.world.placeTile(new H(a))},[],[],[]),W(Ia,[new n(g.Electronics,200)],[],[]),W(pb,[new n(g.BuildingMaterials,250),new n(g.Electronics,
500)],[P(va),P(sf),Y],[G(gb)]),W(Wa,[new n(g.Energy,200),new n(g.Metal,300)],[db(ya,5),Y,P(gb)],[G(va)]),W(qb,[new n(g.BuildingMaterials,350)],[Y,P(gb)],[G(va)]),W(rb,[new n(g.BuildingMaterials,300),new n(g.Electronics,150)],[Y,P(gb)],[G(va)]),W(sb,[new n(g.BuildingMaterials,200),new n(g.Electronics,200),new n(g.Energy,1E3)],[Y,P(Fc)],[G(lc)]),W(ob,[new n(g.BuildingMaterials,100),new n(g.Electronics,100)],[P(Sd),Y],[G(va)]),W(tb,[new n(g.BuildingMaterials,200),new n(g.Electronics,100),new n(g.Superconductor,
1E3)],[P(Cf)],[G(lc)])];return a};$jscomp.inherits(ub,r);ub.prototype.getTileName=function(){return ub.tileName};ub.prototype.getTileDescription=function(){return ub.tileDescription};ub.tileName="Construction Site - Industry";ub.tileDescription="An area designated for construction of industrial facilities and infrastructure";var vb=function(a){a=r.call(this,a)||this;a.texture=Cd;a.possibleProjects=[new K("Break down construction site","Revert this location to wasteland",function(a,c){c.world.placeTile(new H(a))},
[],[],[]),W(wa,[new n(g.SmartMatter,1E3),new n(g.BuildingMaterials,500),new n(g.Electronics,200)],[Y,me(3),P(Bf)],[G(Ba),function(a){return!zb(wa)(a)}]),W(ra,[new n(g.BuildingMaterials,300),new n(g.Electronics,1E3),new n(g.Superconductor,1E3),new n(g.SmartMatter,500)],[Y,db(ka,2),P(Vd)],[G(Ba),function(a){return!zb(ra)(a)}])];return a};$jscomp.inherits(vb,r);vb.prototype.getTileName=function(){return vb.tileName};vb.prototype.getTileDescription=function(){return vb.tileDescription};vb.tileName="Construction Site - Hyperengineering";
vb.tileDescription="An area designated for construction of advanced technologies necessary for completing the mission";var H=function(a){a=r.call(this,a)||this;a.texture=ca.fromWeightedArray([[1/8,ue],[1/8,ve],[1/8,we],[1/8,xe],[.5,ye]]);a.possibleProjects=[new K("Create habitat construction site","Designate this location for construction of habitation and life support facilities",function(a,c){c.world.placeTile(new jb(a))},[],[],[]),new K("Create industry construction site","Designate this location for construction of industrial facilities and infrastructure",
function(a,c){c.world.placeTile(new ub(a))},[],[],[]),new K("Create laboratory construction site","Designate this location for construction of research laboratories",function(a,c){c.world.placeTile(new mb(a))},[],[],[]),new K("Create xenoengineering construction site","Designate this location for construction of advanced technologies",function(a,c){c.world.placeTile(new vb(a))},[],[],[G(Ba),function(a){return!zb(ra)(a)||!zb(wa)(a)}]),new K("Construct Road","Construct roads to extend the reach of the colony's logistics",
function(a,c){c.world.placeTile(new fa(a))},[new n(g.BuildingMaterials,10)],[Y],[])];return a};$jscomp.inherits(H,r);H.prototype.getTileName=function(){return H.tileName};H.prototype.getTileDescription=function(){return H.tileDescription};H.prototype.getTexture=function(a){var b=a.getPastTexture(H,this.position);if(b)return b;a.storePastTexture(H,this.position,this.texture);return this.texture};H.tileName="Wasteland";H.tileDescription="Nothing of note here";var Xd=new jd("Final Mission Report",q($jscomp$templatelit$31)),
Yd=new jd("A Transmission to Earth",q($jscomp$templatelit$32)),Ff=new ua("Unlock the secrets of the monolith",[new ta(zd([Sa,Ta]),Xd),new ta(zd([Va,Ua]),Yd)]),Gf=new ua("Study the Monolith",[new ta(G(Ba),Ff)],'Use the "WASD" or arrow keys to move around the map'),Hf=new ua("Research "+id.name,[new ta(G(id),Gf)]),If=new ua("Excavate the "+la.tileName+" to extract resources",[new ta(function(a){return a.world.getTiles().some(function(a){return a instanceof Ha})},Hf)]),Jf=new ua("Construct "+Ka.tileName+
" to study the "+la.tileName,[new ta(zb(Ka),If)]),Kf=new ua("Grow total worker population to 250",[new ta(function(a){return 250<=a.inventory.getTotalPopulation()},Jf)],"A "+xa.tileName+" has capacity for "+(new xa(new D(0,0))).populationCapacity.capacity+" colonists"),Lf=new ua("Develop the "+va.name+" technology",[new ta(G(va),Kf)],"Access available technologies through the research screen"),Mf=new ua("Construct "+Ja.tileName,[new ta(zb(Ja),Lf)],"Designate an empty "+H.tileName+" tile as a laboratory construction site"),
Nf=new ua("Acquire "+g.Metal.name,[new ta(Ad(g.Metal,1),Mf)]),Of=new ua("Build up at least 100 units of "+g.Energy.name,[new ta(Ad(g.Energy,100),Nf)],"The "+Ia.tileName+" produces "+g.Energy.name+" each turn"),Pf=new ua("Deploy shelter for the colonists",[new ta(zb(xa),Of)],"Select the "+Ya.tileName),Bb=function(a){this.currentGame=a};Bb.prototype.refresh=function(){this.currentGame.updateQuestState();T.refreshCurrentPage()};Bb.prototype.addResource=function(a,b){this.currentGame.inventory.addResource(a,
b);this.refresh()};Bb.prototype.removeResource=function(a,b){this.currentGame.inventory.payCost([new n(a,b)]);this.refresh()};Bb.prototype.addPopulation=function(a,b){this.currentGame.inventory.addWorkers(a,b);this.refresh()};Bb.prototype.showEnding=function(a){T.show(new Sc((void 0===a?0:a)?Yd:Xd))};Bb.prototype.freeResources=function(){for(var a=$jscomp.makeIterator(g.values()),b=a.next();!b.done;b=a.next())this.addResource(b.value,1E6)};var Ca;(function(a){a.isNonEmpty=function(a){return 0<a.length};
a.generate=function(a,c){for(var b=Array(a),d=0;d<a;d++)b[d]=c(d);return b};a.flatten=function(a){return a.reduce(function(a,b){return a.concat(b)},[])};a.partition=function(a,c){var b=[],d=[];a=$jscomp.makeIterator(a);for(var e=a.next();!e.done;e=a.next())e=e.value,c(e)?b.push(e):d.push(e);return{yes:b,no:d}};a.repeat=function(a,c){for(var b=Array(c),d=0;d<c;d++)b[d]=a;return b}})(Ca||(Ca={}));var Jb;(function(a){a.nonrandomTiles=function(){return[new H(new D(0,0)),new H(new D(1,0)),new H(new D(2,
0)),new ya(new D(0,1)),new ya(new D(1,1)),new ya(new D(2,1)),new H(new D(0,2)),new H(new D(1,2)),new H(new D(2,2)),new H(new D(0,3)),new Ya(new D(1,3)),new H(new D(2,3)),new H(new D(0,4)),new H(new D(1,4)),new H(new D(2,4)),new ka(new D(13,15))]};a.width=20;a.height=20;a.mountainRange=[20,25];a.ruinRange=[5,7]})(Jb||(Jb={}));var Za=function(){this.viewPosition=new D(0,0);this.pastTextureMap=new Map;this.width=Jb.width;this.height=Jb.height;this.grid=Array(this.height);for(var a=0;a<this.height;a++){this.grid[a]=
Array(this.width);for(var b=0;b<this.width;b++)this.grid[a][b]=new H(new D(b,a))}a=ca.intBetween.apply(ca,$jscomp.arrayFromIterable(Jb.mountainRange));for(b=0;b<a;b++){var c=this.getTiles().filter(function(a){return a instanceof H});Ca.isNonEmpty(c)&&(c=ca.fromArray(c).position,this.placeTile(new ya(c)))}a=ca.intBetween.apply(ca,$jscomp.arrayFromIterable(Jb.ruinRange));for(b=0;b<a;b++)c=this.getTiles().filter(function(a){return a instanceof H}),Ca.isNonEmpty(c)&&(c=ca.fromArray(c).position,this.placeTile(new la(c)));
a=$jscomp.makeIterator(Jb.nonrandomTiles());for(b=a.next();!b.done;b=a.next())this.placeTile(b.value)};Za.prototype.placeTile=function(a){this.grid[a.position.y][a.position.x]=a};Za.prototype.getTiles=function(){return Ca.flatten(this.grid)};Za.prototype.getTilesInRectangle=function(a,b,c,e){0>b&&(b=0);0>a&&(a=0);var d=[];b=this.grid.slice(b,b+e);b=$jscomp.makeIterator(b);for(e=b.next();!e.done;e=b.next()){e=e.value.slice(a,a+c);e=$jscomp.makeIterator(e);for(var f=e.next();!f.done;f=e.next())d.push(f.value)}return d};
Za.prototype.getTileAtCoordinates=function(a){if(!(0>a.x||a.x>=this.width||0>a.y||a.y>=this.height))return this.grid[a.y][a.x]};Za.prototype.getTilesInCircle=function(a,b){return this.getTiles().filter(function(c){return a.distanceFrom(c.position)<=b})};Za.prototype.getPopulationCapacity=function(a){for(var b=0,c=$jscomp.makeIterator(this.getTiles()),e=c.next();!e.done;e=c.next())e=e.value,e.populationCapacity&&e.populationCapacity.species===a&&(b+=e.populationCapacity.capacity);return b};Za.prototype.getPastTexture=
function(a,b){return this.pastTextureMap.get(""+[a.name,b])};Za.prototype.storePastTexture=function(a,b,c){this.pastTextureMap.set(""+[a.name,b],c)};var La=function(){this.map=new Map([])};La.prototype.add=function(a,b){this.set(a,this.get(a)+b)};La.prototype.remove=function(a,b){this.add(a,-1*b)};La.prototype.get=function(a){return this.map.get(a)||0};La.prototype.set=function(a,b){if(0>b)throw"tried to set quantity to negative value";0===b?this.map.delete(a):this.map.set(a,b)};La.prototype.getSum=
function(){return Array.from(this.map.values()).reduce(function(a,b){return a+b},0)};La.prototype.positiveQuantityKeys=function(){return Array.from(this.map.keys())};La.prototype.clone=function(){for(var a=new La,b=$jscomp.makeIterator(this.positiveQuantityKeys()),c=b.next();!c.done;c=b.next())c=c.value,a.add(c,this.get(c));return a};var L=function(a){this.world=a;this.resourceQuantities=new La;this.populationQuantities=new La;this.availableWorkers=0};L.prototype.addResource=function(a,b){this.resourceQuantities.add(a,
b)};L.prototype.removeResource=function(a,b){this.resourceQuantities.remove(a,b)};L.prototype.getResourceQuantity=function(a){return this.resourceQuantities.get(a)||0};L.prototype.addWorkers=function(a,b){this.populationQuantities.add(a,b);this.populationQuantities.set(a,B(0,this.populationQuantities.get(a),this.world.getPopulationCapacity(a)))};L.prototype.releaseWorkers=function(){this.availableWorkers=this.populationQuantities.getSum()};L.prototype.occupyWorkers=function(a){if(this.availableWorkers<
a)throw"insufficient workers";if(0>a)throw"tried to occupy a negative number of workers";this.availableWorkers-=a};L.prototype.getSpeciesList=function(){return this.populationQuantities.positiveQuantityKeys()};L.prototype.getPopulation=function(a){return this.populationQuantities.get(a)};L.prototype.getRequiredWorkerConsumption=function(a){var b=a.survivalCost.quantity*this.populationQuantities.get(a);return new n(a.survivalCost.resource,b)};L.prototype.getProvidedWorkerConsumption=function(a){var b=
this.getRequiredWorkerConsumption(a).quantity,c=this.getResourceQuantity(a.survivalCost.resource);return new n(a.survivalCost.resource,Math.min(b,c))};L.prototype.doPopulationGrowth=function(){for(var a=$jscomp.makeIterator(this.getSpeciesList()),b=a.next();!b.done;b=a.next()){b=b.value;var c=this.getProvidedWorkerConsumption(b);this.payCost([c]);this.populationQuantities.set(b,Math.floor(c.quantity/b.survivalCost.quantity));c=Math.floor(b.growthMultiplier*this.populationQuantities.get(b));this.addWorkers(b,
c)}};L.prototype.applyPopulationCaps=function(){for(var a=$jscomp.makeIterator(this.getSpeciesList()),b=a.next();!b.done;b=a.next())b=b.value,this.populationQuantities.set(b,B(0,this.populationQuantities.get(b),this.world.getPopulationCapacity(b)));this.availableWorkers=B(0,this.availableWorkers,this.getTotalPopulation())};L.prototype.getTotalPopulation=function(){return this.populationQuantities.getSum()};L.prototype.getAvailableWorkers=function(){return this.availableWorkers};L.prototype.canAfford=
function(a){var b=this,c=new Map;a=$jscomp.makeIterator(a);for(var e=a.next();!e.done;e=a.next())e=e.value,c.set(e.resource,e.quantity+(c.get(e.resource)||0));return Array.from(c.keys()).every(function(a){var d=c.get(a);a=b.getResourceQuantity(a);return d<=a})};L.prototype.hasEnoughWorkers=function(a){return this.availableWorkers>=a};L.prototype.payCost=function(a){if(this.canAfford(a)){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,this.removeResource(b.resource,b.quantity)}else throw"Cannot afford to pay cost";
};L.prototype.getResourceList=function(){var a=this;return g.values().filter(function(b){return 0!==a.resourceQuantities.get(b)})};L.prototype.getInventoryStrings=function(){var a=this;return this.getResourceList().map(function(b){return b.name+": "+a.getResourceQuantity(b)})};L.prototype.getPopulationStrings=function(){var a=this;return this.populationQuantities.positiveQuantityKeys().map(function(b){return a.populationQuantities.get(b)+" "+b.name})};L.prototype.applyConversions=function(a){a=$jscomp.makeIterator(a);
for(var b=a.next();!b.done;b=a.next())if(b=b.value,this.canAfford(b.inputs)&&this.hasEnoughWorkers(b.requiredWorkers)&&b.enabled){this.payCost(b.inputs);this.occupyWorkers(b.requiredWorkers);b=$jscomp.makeIterator(b.outputs);for(var c=b.next();!c.done;c=b.next())c=c.value,this.addResource(c.resource,c.quantity)}};L.prototype.clone=function(){var a=new L(this.world);a.resourceQuantities=this.resourceQuantities.clone();a.populationQuantities=this.populationQuantities.clone();a.availableWorkers=this.availableWorkers;
return a};var ia=function(){this.endState=void 0;this.prevQuestDescription="";this.questCompletionShown=!0;this.completedTechs=[];this.world=new Za;this.inventory=new L(this.world);this.questStage=Pf};ia.prototype.getCurrentQuestDescription=function(){return this.questStage.description};ia.prototype.getCurrentQuestHint=function(){return this.questStage.hint};ia.prototype.getQuestEndState=function(){return this.endState};ia.prototype.updateQuestState=function(){var a=this.questStage.nextState(this);
if(a instanceof jd)this.endState=a,this.questCompletionShown=!1;else if(a!==this.questStage){var b=this.questStage.description;this.questStage=a;this.updateQuestState();this.questCompletionShown=!1;this.prevQuestDescription=b}};ia.prototype.getPreviousQuestDescription=function(){return this.prevQuestDescription};ia.prototype.getUnorderedConversions=function(){return Ca.flatten(this.world.getTiles().map(function(a){return a.resourceConversions}))};ia.prototype.getResourceConversions=function(){var a=
this.getUnorderedConversions(),b=Ca.partition(a,function(a){return a.isFree()});a=b.yes;b=b.no;a.sort(function(a,b){return a.priority-b.priority});b.sort(function(a,b){return a.priority-b.priority});return{free:a,costly:b}};ia.prototype.getAllResourceConversions=function(){var a=this.getUnorderedConversions();a.sort(function(a,c){return a.priority-c.priority});return a};ia.prototype.hasUnlockedTechnology=function(a){return this.completedTechs.includes(a)};ia.prototype.unlockTechnology=function(a){this.hasUnlockedTechnology(a)||
this.completedTechs.push(a)};ia.prototype.getUnlockedTechnologies=function(){return this.completedTechs};ia.prototype.getResearchOptions=function(){var a=this;return Rd.filter(function(a){return a.visible}).filter(function(b){return b.requiredTechs.every(function(b){return a.completedTechs.includes(b)})}).filter(function(b){return!a.hasUnlockedTechnology(b)})};ia.prototype.completeTurn=function(){this.inventory.applyConversions(this.getAllResourceConversions());this.inventory.releaseWorkers();this.inventory.doPopulationGrowth();
this.updateQuestState()};ia.prototype.shiftCostlyConversionPriority=function(a,b){if(!(a===b||0>a)){var c=this.getResourceConversions().costly;if(!(b>=c.length)){var e=c[b].priority;if(a<b)for(;b>a;b--)c[b].priority=c[b-1].priority;else for(;b<a;b++)c[b].priority=c[b+1].priority;c[a].priority=e}}};var Ob=function(){this.html=l.makeDiv(["main-menu"]);this.refresh()};Ob.prototype.refresh=function(){l.fillHTML(this.html,[l.makeHeader("Aurora",1),l.makeDivContaining([l.makeButton("new game",function(){var a=
new ia;pe(a);T.show(new Fb(a))}),l.makeButton("settings",function(){return T.show(new Id)}),l.makeButton("credits",function(){return T.show(new Pc)})],["main-menu-options"])])};var mc=Cb(),ec=Cb(),Wb;(function(a){function b(a){return ec(440*Math.pow(2,(a-69)/12))}a.noteNames="C C# D D# E F F# G G# A A# B".split(" ");a.midiNumberToFrequency=b;a.midiNumberToNoteName=function(b){return""+a.noteNames[Z(b,12)]+(Math.floor(b/12)-1)};a.detuneWithCoeff=function(a,c){if(1===c)return[b(a)];a=b(a);return[a/
c,a,a*c].map(ec)}})(Wb||(Wb={}));var Zd=function(a){this.volume=a},Gc;(function(a){a.createAdsrEnvelope=function(a,c,e,f,g){g=void 0===g?1:g;var b=void 0===f.attack?0:f.attack,d=void 0===f.sustain?0:f.sustain,h=void 0===f.decay?0:f.decay;f=void 0===f.release?0:f.release;a=a.createGain();a.gain.setValueAtTime(0,c);e<b?a.gain.linearRampToValueAtTime(e/b*(g-0),c+e):e<b+h?(a.gain.linearRampToValueAtTime(g,c+b),a.gain.linearRampToValueAtTime((e-b)/h*(g*d-g)+g,c+b+h)):(a.gain.linearRampToValueAtTime(g,
c+b),a.gain.linearRampToValueAtTime(g*d,c+b+h));a.gain.linearRampToValueAtTime(0,c+e+f);return a}})(Gc||(Gc={}));var kd=function(a,b,c,e){function d(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,f){function g(a){try{m(e.next(a))}catch(x){f(x)}}function h(a){try{m(e["throw"](a))}catch(x){f(x)}}function m(a){a.done?c(a.value):d(a.value).then(g,h)}m((e=e.apply(a,b||[])).next())})},Xb=function(a,b,c){this.volume=void 0===c?1:c;this.type=a.type;this._detune=
1;this.detune=a.detune||0;this.env=b;return this};$jscomp.inherits(Xb,Zd);Xb.prototype.scheduleNote=function(a,b){return kd(this,void 0,void 0,function m(){var c=this,e,f,g,k,l,p;return $jscomp.generator.createGenerator(m,function(h){e=c;f=Wb.detuneWithCoeff(b.midiNumber,c._detune);g=void 0===b.endNote?f:Wb.detuneWithCoeff(b.endNote,c._detune);k=Math.min(1/f.length,1)*c.volume;l=Gc.createAdsrEnvelope(a,b.start,b.duration,c.env,k);p=b.start+b.duration+(c.env.sustain||0);f.forEach(function(c,f){var h=
a.createOscillator();h.type=e.type;h.frequency.setValueAtTime(c,b.start);h.frequency.linearRampToValueAtTime(g[f],p);h.start(b.start);h.stop(p);h.connect(l);h.onended=function(){l.disconnect()}});return h.return(l)})})};$jscomp.global.Object.defineProperties(Xb.prototype,{detune:{configurable:!0,enumerable:!0,set:function(a){this._detune=Math.pow(2,a/1200)}}});var wb=function(a,b,c){this.volume=void 0===c?1:c;this.buffer=a;this.env=b;return this};$jscomp.inherits(wb,Zd);wb.fromSample=function(a,b,
c){c=void 0===c?1:c;return kd(this,void 0,void 0,function C(){var d;return $jscomp.generator.createGenerator(C,function(e){return 1==e.nextAddress?(d=wb,e.yield(a,2)):e.return(new d(e.yieldResult,b,c))})})};wb.prototype.scheduleNote=function(a,b){return kd(this,void 0,void 0,function m(){var c,e,f=this,g,k,l,p,n;return $jscomp.generator.createGenerator(m,function(h){c=Wb.midiNumberToFrequency(b.midiNumber);e=a.createBufferSource();e.buffer=f.buffer.buffer;e.loop=f.buffer.shouldLoop;g=c/f.buffer.freq;
e.playbackRate.setValueAtTime(g,b.start);k=b.start+b.duration+(f.env.sustain||0);void 0!==b.endNote&&(l=Wb.midiNumberToFrequency(b.endNote),p=l/f.buffer.freq,e.playbackRate.linearRampToValueAtTime(p,k));e.start(b.start);e.stop(k);n=Gc.createAdsrEnvelope(a,b.start,b.duration,f.env,f.volume);e.connect(n);e.onended=function(){n.disconnect()};return h.return(n)})})};var Da=Cb(),Qf=Cb(),$d=Cb(),ld=Cb(),xb=Cb(),nc;(function(a){function b(a){a=(a&1365)+(a>>>1&1365);a=(a&819)+(a>>>2&819);a=(a&3855)+(a>>>
4&3855);return(a&255)+(a>>>8&255)}function c(a,b){b=Z(void 0===b?1:b,12);return Da((a<<b|a>>>12-b)&4095)}function e(a){return 0!==(a&1)}function f(a){var b=[],d=a;do e(d)&&b.push(d),d=c(d,1);while(d!==a);return b}function g(a,b){b=Z(b,12);return 0!==(a&1<<b)}function k(a,b){b=Z(b,12);a=f(a).filter(function(a){return g(a,b)}).length;return 6===b?a/2:a}function l(a){return f(a).filter(function(a){return!g(a,7)}).length}function p(a,b){return(a&b)===b}function n(a,c){var d=function(a,b){return a<b[0]||
a>b[1]};return c.notes&&d(b(a),c.notes)||c.imperfections&&d(l(a),c.imperfections)||c.hemitones&&d(k(a,1),c.hemitones)||void 0!==c.chord&&0!==c.chord&&!p(a,c.chord)?!1:!0}a.createScaleFromPitchClass=function(a){if(!a.includes(ld(0)))throw Error("scales must have a root");a=a.map(function(a){return 1<<Z(a,12)}).filter(function(a,b,c){return c.indexOf(a)===b}).reduce(function(a,b){return a|b},0);return Da(a)};a.getPitchClass=function(a){for(var b=[],c=0;0!==a;a>>>=1,c++)a&1&&b.push(ld(c));return b};
a.getNumberOfNotes=b;a.rotateScale=c;a.hasRoot=e;a.getModes=f;a.hasInterval=g;a.countInterval=k;a.getImperfections=l;a.containsScale=function(a,b){return(a&b)===b};a.containsChord=p;var q=Ca.flatten([f(Da(2741)),f(Da(2475)),f(Da(1367)),f(Da(2477)),f(Da(2485)),f(Da(2733)),f(Da(2669)),f(Da(2483))]);a.matchesQuery=n;a.getAllScalesMatchingQuery=function(a){return q.filter(function(b){return n(b,a)})};a.indexIntoPitchClass=function(a,b){var c=a[Z(b,a.length)];return ld(c+12*Math.floor(b/a.length))}})(nc||
(nc={}));var Kb=function(a){a=void 0===a?8:a;this.subdivision=[];this._beats=a;this.generateNewSubdivision(a)};Kb.prototype.generateTies=function(){for(var a=0,b=[];a<this.subdivision.length;)a<this.subdivision.length-1&&ca.bool(.5)?(b.push(this.subdivision[a]+this.subdivision[a+1]),a+=2):(b.push(this.subdivision[a]),a++);return b};Kb.prototype.generateNewSubdivision=function(a){this._beats=a;this.subdivision=[];for(var b=Math.min.apply(Math,$jscomp.arrayFromIterable(Kb.divisions));a>=b;){var c=Kb.divisions.filter(function(b){return b<=
a});c=ca.fromArray(c);a-=c;this.subdivision.push(c)}0<a&&this.subdivision.push(a)};$jscomp.global.Object.defineProperties(Kb.prototype,{beats:{configurable:!0,enumerable:!0,get:function(){return this._beats}}});Kb.divisions=[2,3];var Rf=function(a,b,c,e){function d(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,f){function g(a){try{h(e.next(a))}catch(x){f(x)}}function k(a){try{h(e["throw"](a))}catch(x){f(x)}}function h(a){a.done?c(a.value):d(a.value).then(g,
k)}h((e=e.apply(a,b||[])).next())})},Ma;(function(a){a[a.KICK=0]="KICK";a[a.SNARE=1]="SNARE";a[a.CLOSED_HI_HAT=2]="CLOSED_HI_HAT";a[a.OPEN_HI_HAT=3]="OPEN_HI_HAT"})(Ma||(Ma={}));var ae=function(a){this.samples=a;this.closedHiHat=wb.fromSample(this.samples.white_noise,{attack:.01,decay:.05},.5);this.openHiHat=wb.fromSample(this.samples.white_noise,{attack:.01,decay:.2},.5);this.snare=wb.fromSample(this.samples.snare,{sustain:1},1.5);this.kick=wb.fromSample(this.samples.kick,{sustain:1},1.5)};ae.prototype.scheduleHit=
function(a,b,c){return Rf(this,void 0,void 0,function C(){var d,e,f=this,g,k,l,p,n,q;return $jscomp.generator.createGenerator(C,function(h){switch(h.nextAddress){case 1:switch(c){case Ma.KICK:return h.jumpTo(2);case Ma.SNARE:return h.jumpTo(3);case Ma.CLOSED_HI_HAT:return h.jumpTo(4);case Ma.OPEN_HI_HAT:return h.jumpTo(5);default:V()}h.jumpTo(0);break;case 2:return d=a,e={midiNumber:mc(69),start:b,duration:1},h.yield(f.kick,7);case 7:return h.return(h.yieldResult.scheduleNote(d,e));case 3:return g=
a,k={midiNumber:mc(69),start:b,duration:1},h.yield(f.snare,8);case 8:return h.return(h.yieldResult.scheduleNote(g,k));case 4:return l=a,p={midiNumber:mc(70),start:b,duration:.05},h.yield(f.closedHiHat,9);case 9:return h.return(h.yieldResult.scheduleNote(l,p));case 5:return n=a,q={midiNumber:mc(70),start:b,duration:.2},h.yield(f.openHiHat,10);case 10:return h.return(h.yieldResult.scheduleNote(n,q))}})})};var be=function(a,b,c,e){function d(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||
(c=Promise))(function(c,f){function g(a){try{k(e.next(a))}catch(x){f(x)}}function h(a){try{k(e["throw"](a))}catch(x){f(x)}}function k(a){a.done?c(a.value):d(a.value).then(g,h)}k((e=e.apply(a,b||[])).next())})},eb;(function(a){a.createBufferFromGenerator=function(a,c){for(var b=new Float32Array(a),d=0;d<a;d++)b[d]=c(d);a=new AudioBuffer({numberOfChannels:1,sampleRate:44100,length:a});a.copyToChannel(b,0);return a};a.createBufferFromAudioData=function(a,c,e){return be(this,void 0,void 0,function h(){var b,
d,f,g;return $jscomp.generator.createGenerator(h,function(h){switch(h.nextAddress){case 1:return b=new AudioBuffer({numberOfChannels:1,sampleRate:44100,length:c}),h.yield(fetch("assets/"+e,{headers:new Headers({"Content-Type":"audio/ogg"})}),2);case 2:return d=h.yieldResult,h.yield(d.arrayBuffer(),3);case 3:return f=h.yieldResult,h.yield(a.decodeAudioData(f),4);case 4:return g=h.yieldResult,b.copyToChannel(g.getChannelData(0),0),h.return(b)}})})};a.makeSampleData=function(a){return be(this,void 0,
void 0,function m(){var b,c,e,f;return $jscomp.generator.createGenerator(m,function(g){return 1==g.nextAddress?(b=a,c=b.buffer,e=b.shouldLoop,f=b.freq,g.yield(c,2)):g.return({buffer:g.yieldResult,shouldLoop:e,freq:f})})})}})(eb||(eb={}));var oc=function(a,b,c,e){function d(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,f){function g(a){try{k(e.next(a))}catch(x){f(x)}}function h(a){try{k(e["throw"](a))}catch(x){f(x)}}function k(a){a.done?c(a.value):d(a.value).then(g,
h)}k((e=e.apply(a,b||[])).next())})},Q;(function(a){a[a.DRUMS=0]="DRUMS";a[a.CHORDS=1]="CHORDS"})(Q||(Q={}));var da;(function(a){a.TONIC="tonic";a.SUBDOMINANT="subdominant";a.DOMINANT="dominant";a.AMBIGUOUS="ambiguous"})(da||(da={}));var md;(function(a){function b(a,b,c){c=void 0===c?4:c;var d=nc.getPitchClass(a);a=ca.fromArray(q).map(function(a){return ca.fromArray(r[a])});a.unshift(xb(0));return a.map(function(a){return Ca.generate(c,function(c){c=nc.indexIntoPitchClass(d,a+2*c);return $d(b+c)})})}
function c(){var a=n.rhythm.subdivision;return Ca.flatten(a.map(function(b,c){for(var d=[0===c%2?Ma.KICK:Ma.SNARE],e=0;e<b-1;e++)c===a.length-1&&e===b-2?d.push(Ma.OPEN_HI_HAT):d.push(Ma.CLOSED_HI_HAT);return d}))}function e(b,c){return oc(this,void 0,void 0,function Jc(){var d;return $jscomp.generator.createGenerator(Jc,function(e){if(1==e.nextAddress)return e.yield(a.drumkit.scheduleHit(a.context,b,c),2);d=e.yieldResult;d.connect(a.masterGain);e.jumpToEnd()})})}function f(b,c){return oc(this,void 0,
void 0,function Jc(){var d;return $jscomp.generator.createGenerator(Jc,function(e){if(1==e.nextAddress)return e.yield(c.scheduleNote(a.context,b),2);d=e.yieldResult;d.connect(a.masterGain);e.jumpToEnd()})})}function g(){n.rhythm.generateNewSubdivision(ca.fromArray([5,6,7,8,9,11,13]));var a={chord:Qf(128),imperfections:[1,1]};a=nc.getAllScalesMatchingQuery(a);Ca.isNonEmpty(a)&&(n.scale=ca.fromArray(a));n.drumLoop=c();n.progression=b(n.scale,n.root);n.queue=[[Q.CHORDS,Q.DRUMS],[Q.CHORDS,Q.DRUMS],[Q.CHORDS,
Q.DRUMS],[Q.CHORDS,Q.DRUMS],[Q.CHORDS,Q.DRUMS],[Q.CHORDS,Q.DRUMS],[Q.CHORDS,Q.DRUMS],[Q.CHORDS,Q.DRUMS],[Q.DRUMS]]}function k(b){return oc(this,void 0,void 0,function $b(){var c,d,e,g,k;return $jscomp.generator.createGenerator($b,function(h){switch(h.nextAddress){case 1:c=n.progression[Z(n.chordIndex,n.progression.length)],d=60/n.beatsPerMinute,e=$jscomp.makeIterator(c),g=e.next();case 2:if(g.done){h.jumpTo(4);break}k=g.value;return h.yield(f({midiNumber:mc(Z(k,12)+60),start:b,duration:d*n.rhythm.beats},
a.instruments.pad),3);case 3:g=e.next();h.jumpTo(2);break;case 4:n.chordIndex++,h.jumpToEnd()}})})}function l(a){return oc(this,void 0,void 0,function $b(){var b,c,d,f,g;return $jscomp.generator.createGenerator($b,function(h){1==h.nextAddress&&(b=60/n.beatsPerMinute,c=0,d=$jscomp.makeIterator(n.drumLoop),f=d.next());if(5!=h.nextAddress){if(f.done)return h.jumpTo(0);g=f.value;return h.yield(e(a+c,g),5)}c+=b;f=d.next();return h.jumpTo(2)})})}function p(b){return oc(this,void 0,void 0,function $b(){var c,
d,e,f,h,m,q;return $jscomp.generator.createGenerator($b,function(r){switch(r.nextAddress){case 1:c=60/n.beatsPerMinute;0===n.queue.length&&g();d=c*n.rhythm.beats;e=n.queue.shift();if(!e){r.jumpTo(2);break}f=$jscomp.makeIterator(e);h=f.next();case 3:if(h.done){r.jumpTo(2);break}m=h.value;switch(m){case Q.DRUMS:return r.jumpTo(6);case Q.CHORDS:return r.jumpTo(7);default:V()}r.jumpTo(4);break;case 6:return r.yield(l(b),9);case 9:r.jumpTo(4);break;case 7:return r.yield(k(b),10);case 10:r.jumpTo(4);break;
case 4:h=f.next();r.jumpTo(3);break;case 2:return q=b+d,r.yield(new Promise(function(b){window.setTimeout(b,1E3*(q-a.context.currentTime-.1))}),11);case 11:return r.return(p(q))}})})}a.context=new AudioContext;a.samples=qe(a.context);a.drumkit=new ae(a.samples);a.instruments={arp:new Xb({type:"sawtooth",detune:3},{attack:.01,decay:.05,sustain:0,release:.1}),bass:new Xb({type:"triangle",detune:2},{attack:.01,decay:.01,sustain:1,release:.1}),pad:new Xb({type:"triangle",detune:4},{attack:1,decay:.1,
sustain:.5,release:.5})};a.masterGain=a.context.createGain();var n={beatsPerMinute:220,rhythm:new Kb,root:$d(0),scale:Da(1857),progression:[],chordIndex:0,drumLoop:[],queue:[]},q=[[da.TONIC,da.SUBDOMINANT,da.DOMINANT],[da.SUBDOMINANT,da.SUBDOMINANT,da.DOMINANT],[da.SUBDOMINANT,da.DOMINANT,da.DOMINANT],[da.AMBIGUOUS,da.SUBDOMINANT,da.DOMINANT],[da.SUBDOMINANT,da.DOMINANT,da.AMBIGUOUS]],r={tonic:[xb(0),xb(5)],subdominant:[xb(1),xb(3)],dominant:[xb(4),xb(6)],ambiguous:[xb(2)]};a.initialize=function(){a.masterGain.gain.value=
.25;a.masterGain.connect(a.context.destination);p(a.context.currentTime).catch(function(a){a&&console.error(a)})};a.setVolume=function(b){a.masterGain.gain.value=b}})(md||(md={}));var Sf=function(a,b,c,e){function d(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,f){function g(a){try{k(e.next(a))}catch(x){f(x)}}function h(a){try{k(e["throw"](a))}catch(x){f(x)}}function k(a){a.done?c(a.value):d(a.value).then(g,h)}k((e=e.apply(a,b||[])).next())})};window.onload=
function(){return Sf(this,void 0,void 0,function b(){return $jscomp.generator.createGenerator(b,function(b){if(1==b.nextAddress)return console.log("Script Loaded"),b.yield(p(),2);md.initialize();T.show(new Ob);b.jumpToEnd()})})}}]);}).call(this || window)
</script><script type="text/javascript">(function(){'use strict';}).call(this || window)
</script></body> </html> 